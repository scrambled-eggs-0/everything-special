"use strict";(self.webpackChunkOmniblockly=self.webpackChunkOmniblockly||[]).push([[724],{724:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(574);const o=document.getElementById("webglplaceholder");let a,i;function c(){!1!==n.Z.distortionsActive&&(window.ctx.drawImage=i,n.Z.resizeFns=n.Z.resizeFns.filter((e=>e!==n.Z.resizeWebGl)),n.Z.distortionsActive=!1,a.remove())}const l={initNonlinearTransform:function(e,t,r,l){!0===n.Z.distortionsActive&&c(),!0===function(e){try{return e.getImageData(0,0,1,1),!1}catch(e){return 18===e.code}}(window.ctx)&&n.Z.unTaintCanvas(),i=ctx.drawImage,ctx.drawImage=()=>{},n.Z.distortionsActive=!0,a=document.createElement("canvas");const s=a.getContext("webgl2");o.appendChild(a),n.Z.resizeWebGl=()=>{a.width=window.innerWidth,a.height=window.innerHeight,s.viewport(0,0,a.width,a.height)},n.Z.resizeWebGl(),n.Z.resizeFns.push(n.Z.resizeWebGl);let E=[],T=[];const d=Math.ceil(a.width/1),h=Math.ceil(a.height/1);for(let e=0;e<h;e++)for(let t=0;t<d;t++)E.push(t/(d-1)*2-1,e/(h-1)*2-1);for(let e=0;e<h-1;e++)for(let t=0;t<d-1;t++){const r=e*d+t;T.push(r,r+1,r+d),T.push(r+1,r+d,r+d+1)}E=new Float32Array(E),T=new Uint32Array(T);const g=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,g),s.bufferData(s.ARRAY_BUFFER,E,s.STATIC_DRAW);const u=s.createBuffer();s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,u),s.bufferData(s.ELEMENT_ARRAY_BUFFER,T,s.STATIC_DRAW);const R=function(){function r(e,t){const r=s.createShader(t);s.shaderSource(r,e),s.compileShader(r);const n=s.getShaderInfoLog(r);return 0!=n.length?(console.log("Error Compiling Shader!"),console.log(n),null):r}const n=s.createProgram(),o=r(e,s.VERTEX_SHADER);s.attachShader(n,o);const a=r(t,s.FRAGMENT_SHADER);s.attachShader(n,a),s.linkProgram(n),s.validateProgram(n);const i=s.getProgramInfoLog(n);return 0!==i.length&&(console.log("Error Compiling Program!"),console.log(i)),s.deleteShader(o),s.deleteShader(a),n}();s.useProgram(R);{let e=s.getAttribLocation(R,"pos");s.enableVertexAttribArray(e),s.vertexAttribPointer(e,2,s.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0)}function A(){s.activeTexture(s.TEXTURE0+0),s.bindTexture(s.TEXTURE_2D,f),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,window.canvas),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST)}const f=s.createTexture();A();const _=[];for(let e=0;e<r.length;e++)_.push(s.getUniformLocation(R,r[e]));n.Z.renderGl=()=>{s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!0),A();for(let e=0;e<l.length;e++)s.uniform1f(_[e],l[e]());s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.drawElements(s.TRIANGLES,T.length,s.UNSIGNED_INT,0)}},unInitNonlinearTransform:c}}}]);