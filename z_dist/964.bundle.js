"use strict";(self.webpackChunkomniserver=self.webpackChunkomniserver||[]).push([[964],{964:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const n=document.getElementById("webglplaceholder");let o;function i(){!1!==window.distortionsActive&&(window.resizeFns=window.resizeFns.filter((e=>e!==window.resizeWebGl)),window.distortionsActive=!1,o.remove())}const a={initNonlinearTransform:function(e,t,r,a){!0===window.distortionsActive&&i(),window.distortionsActive=!0,o=document.createElement("canvas");const l=o.getContext("webgl2");n.appendChild(o),window.resizeWebGl=()=>{o.width=window.innerWidth,o.height=window.innerHeight,l.viewport(0,0,o.width,o.height)},window.resizeWebGl(),window.resizeFns.push(window.resizeWebGl);let s=[],E=[];const c=Math.ceil(o.width/1),d=Math.ceil(o.height/1);for(let e=0;e<d;e++)for(let t=0;t<c;t++)s.push(t/(c-1)*2-1,e/(d-1)*2-1);for(let e=0;e<d-1;e++)for(let t=0;t<c-1;t++){const r=e*c+t;E.push(r,r+1,r+c),E.push(r+1,r+c,r+c+1)}s=new Float32Array(s),E=new Uint32Array(E);const T=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,T),l.bufferData(l.ARRAY_BUFFER,s,l.STATIC_DRAW);const h=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,h),l.bufferData(l.ELEMENT_ARRAY_BUFFER,E,l.STATIC_DRAW);const w=function(){function r(e,t){const r=l.createShader(t);l.shaderSource(r,e),l.compileShader(r);const n=l.getShaderInfoLog(r);return 0!=n.length?(console.log("Error Compiling Shader!"),console.log(n),null):r}const n=l.createProgram(),o=r(e,l.VERTEX_SHADER);l.attachShader(n,o);const i=r(t,l.FRAGMENT_SHADER);l.attachShader(n,i),l.linkProgram(n),l.validateProgram(n);const a=l.getProgramInfoLog(n);return 0!==a.length&&(console.log("Error Compiling Program!"),console.log(a)),l.deleteShader(o),l.deleteShader(i),n}();l.useProgram(w);{let e=l.getAttribLocation(w,"pos");l.enableVertexAttribArray(e),l.vertexAttribPointer(e,2,l.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0)}const R=l.createTexture();function A(){l.activeTexture(l.TEXTURE0+0),l.bindTexture(l.TEXTURE_2D,R),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,canvas),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST)}A();const f=[];for(let e=0;e<r.length;e++)f.push(l.getUniformLocation(w,r[e]));window.renderGl=()=>{l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!0),A();for(let e=0;e<a.length;e++)l.uniform1f(f[e],a[e]());l.clearColor(0,0,0,1),l.clear(l.COLOR_BUFFER_BIT),l.drawElements(l.TRIANGLES,E.length,l.UNSIGNED_INT,0)}},unInitNonlinearTransform:i}}}]);