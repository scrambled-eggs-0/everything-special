(()=>{"use strict";var __webpack_modules__={674:(module,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(354);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(314);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n___CSS_LOADER_EXPORT___.push([module.id, "@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap);"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `* {\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nbody {\r\n    background-color: rgb(5,5,5);\r\n    font-size: 16px;\r\n    overflow: hidden;\r\n    font-family: \'Inter\', sans-serif;\r\n}\r\n\r\n.hidden {\r\n    display: none !important;\r\n}\r\n\r\n/*for comparing to eX and gamefeel. Not permanent*/\r\ncanvas, .gui {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    /* filter: saturate(75%);  */\r\n}\r\n\r\n.text-layer {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\twidth: 1600px;\r\n\theight: 900px;\r\n\tfilter: none !important;\r\n\tbackground: transparent;\r\n\toverflow: hidden;\r\n}\r\n\r\n.chatDiv {\r\n    z-index: 100;\r\n}\r\n\r\n.chat {\r\n    position: absolute;\r\n    left: 0px;\r\n    top: 250px;\r\n    width: 374px;\r\n    height: 30px;\r\n    transform-origin: center center;\r\n    border: none;\r\n    outline: none;\r\n    color: white;\r\n    font-size: 1rem;\r\n    padding: 5px;\r\n    caret-color: white;\r\n    /*background: rgba(129, 129, 129, 0.082);*/\r\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0));\r\n    font-family: \'Inter-Thick\', Inter;\r\n}\r\n\r\n.chat-message {\r\n    color: white;\r\n    font-size: 1.05rem;\r\n    background: transparent;\r\n    padding: 1px;\r\n\r\n    overflow-wrap: break-word;\r\n    width: 100%;\r\n}\r\n.system-message {\r\n    color: #c4c4c4;\r\n    font-size: 1rem;\r\n    background: transparent;\r\n    padding: 1px;\r\n    overflow-wrap: break-word; /*this doesnt work somehow*/\r\n    width: 100%;\r\n}\r\n\r\n.fade-out {\r\n    animation: fade-out 0.3s linear;\r\n}\r\n\r\n.fade-in {\r\n    animation: fade-in 0.3s linear;\r\n}\r\n\r\n@keyframes fade-out {\r\n    0% {\r\n        opacity: 1;\r\n    }\r\n    100% {\r\n        opacity: 0;\r\n    }\r\n}\r\n\r\n/*peaceful*/\r\n.difficulty-0 {\r\n    color: #6cd95b;\r\n}\r\n/*moderate*/\r\n.difficulty-1 {\r\n    color: #58ccb3;\r\n}\r\n/*difficult*/\r\n.difficulty-2 {\r\n    color: #0a77bf;\r\n}\r\n/*hardcore*/\r\n.difficulty-3 {\r\n    color: #3528e0;\r\n}\r\n/*exhausting*/\r\n.difficulty-4 {\r\n    color: #8248d4;\r\n}\r\n/*relentless*/\r\n.difficulty-5 {\r\n    color: #e32d8b;\r\n}\r\n/*agonizing*/\r\n@keyframes agonizingColor {\r\n    0% {\r\n        background-color: #ff0000;\r\n    }\r\n}\r\n.difficulty-6 {\r\n    color: #ff5736;\r\n    animation-name: agonizingColor;\r\n    animation-duration: 3s;\r\n    animation-iteration-count: infinite;\r\n}\r\n/*terrorizing*/\r\n@keyframes terrorizingColor {\r\n    0% {\r\n        background-color: #ff0000;\r\n    }\r\n}\r\n.difficulty-7 {\r\n    color: #fc3a3a;\r\n    animation-name: terrorizingColor;\r\n    animation-duration: 2s;\r\n    animation-iteration-count: infinite;\r\n}\r\n@keyframes cataclysmicColor {\r\n    0% {\r\n        background-color: #ff0000;\r\n    }\r\n}\r\n/*cataclysmic*/\r\n.difficulty-8 {\r\n    color: #c95d5d;\r\n    animation-name: cataclysmicColor;\r\n    animation-duration: 1s;\r\n    animation-iteration-count: infinite;\r\n}\r\n\r\n.mention {\r\n    /*color: #a84040;*/\r\n    background-image: linear-gradient(\r\n        90deg,\r\n        rgba(255, 0, 0, 0.3),\r\n        rgba(255, 0, 0, 0)\r\n    );\r\n    animation-name: terrorizingColor;\r\n    animation-duration: 0.4s;\r\n    animation-iteration-count: 1;\r\n}\r\n\r\n.chat::placeholder {\r\n    color: white;\r\n    opacity: 1;\r\n}\r\n\r\n.leaderboard-div {\r\n    position: fixed;\r\n    left: calc(100% - 299px);\r\n    transition: left 0.2s linear, opacity 0.2s linear;\r\n    opacity: 1;\r\n    top: -1px;\r\n    width: 300px;\r\n    height: 100vh;\r\n    background: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.4));\r\n    display: flex;\r\n    justify-content: start;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    padding: 0px;\r\n    color: white;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    user-select: none;\r\n    font-family: \'Inter-Thick\', Inter;\r\n}\r\n\r\n.hide {\r\n    left: 1600px !important;\r\n    opacity: 0;\r\n}\r\n\r\n.leaderboard-div::-webkit-scrollbar {\r\n    width: 10px;\r\n    background-color: rgba(255, 255, 255, 0.1);\r\n    border-radius: 2px;\r\n}\r\n\r\n.leaderboard-div::-webkit-scrollbar-thumb {\r\n    background-color: rgba(255, 255, 255, 0.3);\r\n    border-radius: 2px;\r\n}\r\n\r\n.rainbow {\r\n    animation: colorRotate 4s linear 0s infinite;\r\n}\r\n\r\n@keyframes colorRotate {\r\n    0% {\r\n        color: hsl(180, 100%, 50%);\r\n    }\r\n    50% {\r\n        color: hsl(216, 100%, 50%);\r\n    }\r\n    100% {\r\n        color: hsl(180, 100%, 50%);\r\n    }\r\n}\r\n\r\n.guest {\r\n    opacity: 0.8;\r\n}\r\n\r\n.chat-div::-webkit-scrollbar {\r\n    width: 10px;\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n.chat-div::-webkit-scrollbar-thumb {\r\n    background-color: rgba(0, 0, 0, 0.8);\r\n}\r\n\r\n.chat-div {\r\n    position: absolute;\r\n    left: -1px;\r\n    top: -1px;\r\n    width: 375px;\r\n    height: 251px;\r\n    filter: none !important;\r\n    background: rgba(141, 141, 141, 0.205);\r\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0));\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n    flex-direction: column;\r\n    overflow-y: auto;\r\n    padding: 2px;\r\n    overflow-x: hidden;\r\n    /* \tword-break: break-all; */\r\n    font-family: Inter-Thick, Inter;\r\n\r\n    transition: all 0.1s linear, padding 0.1s linear;\r\n    /*\r\n    /*background-image: url(https://i1.sndcdn.com/artworks-Uii8SMJvNPxy8ePA-romBoQ-t500x500.jpg);*/\r\n    /*    opacity: 0.7; */\r\n}\r\n\r\n.lb-group {\r\n    /* background: rgba(255, 255, 255, 0.1); */\r\n    /*background: rgb(55, 55, 55);*/\r\n    background: transparent;\r\n    padding: 5px;\r\n    display: flex;\r\n    justify-content: start;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    margin: 0px;\r\n    /*min-width: 150px;*/\r\n    width: 300px;\r\n}\r\n\r\n\r\n.lb-name {\r\n    /* color: rgb(47, 250, 213); */\r\n    /* filter: saturate(150%); */\r\n    font-size: 1rem;\r\n}\r\n\r\n.lb-players {\r\n    margin: 5px;\r\n    font-size: 0.9rem;\r\n    /* background: rgba(255, 255, 255, 0.12); */\r\n    /* background: rgba(77, 77, 77, 0.7); */\r\n    display: flex;\r\n    justify-content: start;\r\n    align-items: center;\r\n    flex-direction: column;\r\n}\r\n\r\n.lb-players div {\r\n    margin: 1.5px;\r\n\tcursor: pointer;\r\n\tbackground: transparent;\r\n\tpadding: 0px;\r\n\ttransition: all 0.1s linear, padding 0.1s linear;\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n}\r\n.lb-players div:hover {\r\n\tbackground: rgba(255, 255, 255, 0.3);\r\n\tpadding: 6px;\r\n}\r\n\r\n.hideLB {\r\n    left: 100% !important;\r\n    opacity: 0;\r\n}\r\n\r\n.hideChat {\r\n    left: -175px !important;\r\n    opacity: 0; \r\n}`, "",{"version":3,"sources":["webpack://./eXclient/style.css"],"names":[],"mappings":"AAEA;IACI,sBAAsB;IACtB,SAAS;IACT,UAAU;AACd;;AAEA;IACI,4BAA4B;IAC5B,eAAe;IACf,gBAAgB;IAChB,gCAAgC;AACpC;;AAEA;IACI,wBAAwB;AAC5B;;AAEA,kDAAkD;AAClD;IACI,kBAAkB;IAClB,OAAO;IACP,MAAM;IACN,4BAA4B;AAChC;;AAEA;CACC,kBAAkB;CAClB,OAAO;CACP,MAAM;CACN,aAAa;CACb,aAAa;CACb,uBAAuB;CACvB,uBAAuB;CACvB,gBAAgB;AACjB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,+BAA+B;IAC/B,YAAY;IACZ,aAAa;IACb,YAAY;IACZ,eAAe;IACf,YAAY;IACZ,kBAAkB;IAClB,0CAA0C;IAC1C,2EAA2E;IAC3E,iCAAiC;AACrC;;AAEA;IACI,YAAY;IACZ,kBAAkB;IAClB,uBAAuB;IACvB,YAAY;;IAEZ,yBAAyB;IACzB,WAAW;AACf;AACA;IACI,cAAc;IACd,eAAe;IACf,uBAAuB;IACvB,YAAY;IACZ,yBAAyB,EAAE,2BAA2B;IACtD,WAAW;AACf;;AAEA;IACI,+BAA+B;AACnC;;AAEA;IACI,8BAA8B;AAClC;;AAEA;IACI;QACI,UAAU;IACd;IACA;QACI,UAAU;IACd;AACJ;;AAEA,WAAW;AACX;IACI,cAAc;AAClB;AACA,WAAW;AACX;IACI,cAAc;AAClB;AACA,YAAY;AACZ;IACI,cAAc;AAClB;AACA,WAAW;AACX;IACI,cAAc;AAClB;AACA,aAAa;AACb;IACI,cAAc;AAClB;AACA,aAAa;AACb;IACI,cAAc;AAClB;AACA,YAAY;AACZ;IACI;QACI,yBAAyB;IAC7B;AACJ;AACA;IACI,cAAc;IACd,8BAA8B;IAC9B,sBAAsB;IACtB,mCAAmC;AACvC;AACA,cAAc;AACd;IACI;QACI,yBAAyB;IAC7B;AACJ;AACA;IACI,cAAc;IACd,gCAAgC;IAChC,sBAAsB;IACtB,mCAAmC;AACvC;AACA;IACI;QACI,yBAAyB;IAC7B;AACJ;AACA,cAAc;AACd;IACI,cAAc;IACd,gCAAgC;IAChC,sBAAsB;IACtB,mCAAmC;AACvC;;AAEA;IACI,kBAAkB;IAClB;;;;KAIC;IACD,gCAAgC;IAChC,wBAAwB;IACxB,4BAA4B;AAChC;;AAEA;IACI,YAAY;IACZ,UAAU;AACd;;AAEA;IACI,eAAe;IACf,wBAAwB;IACxB,iDAAiD;IACjD,UAAU;IACV,SAAS;IACT,YAAY;IACZ,aAAa;IACb,2EAA2E;IAC3E,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,sBAAsB;IACtB,YAAY;IACZ,YAAY;IACZ,gBAAgB;IAChB,kBAAkB;IAClB,iBAAiB;IACjB,iCAAiC;AACrC;;AAEA;IACI,uBAAuB;IACvB,UAAU;AACd;;AAEA;IACI,WAAW;IACX,0CAA0C;IAC1C,kBAAkB;AACtB;;AAEA;IACI,0CAA0C;IAC1C,kBAAkB;AACtB;;AAEA;IACI,4CAA4C;AAChD;;AAEA;IACI;QACI,0BAA0B;IAC9B;IACA;QACI,0BAA0B;IAC9B;IACA;QACI,0BAA0B;IAC9B;AACJ;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,WAAW;IACX,oCAAoC;AACxC;;AAEA;IACI,oCAAoC;AACxC;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,SAAS;IACT,YAAY;IACZ,aAAa;IACb,uBAAuB;IACvB,sCAAsC;IACtC,2EAA2E;IAC3E,aAAa;IACb,2BAA2B;IAC3B,uBAAuB;IACvB,sBAAsB;IACtB,gBAAgB;IAChB,YAAY;IACZ,kBAAkB;IAClB,4BAA4B;IAC5B,+BAA+B;;IAE/B,gDAAgD;IAChD;kGAC8F;IAC9F,qBAAqB;AACzB;;AAEA;IACI,0CAA0C;IAC1C,+BAA+B;IAC/B,uBAAuB;IACvB,YAAY;IACZ,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,sBAAsB;IACtB,WAAW;IACX,oBAAoB;IACpB,YAAY;AAChB;;;AAGA;IACI,8BAA8B;IAC9B,4BAA4B;IAC5B,eAAe;AACnB;;AAEA;IACI,WAAW;IACX,iBAAiB;IACjB,2CAA2C;IAC3C,uCAAuC;IACvC,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,sBAAsB;AAC1B;;AAEA;IACI,aAAa;CAChB,eAAe;CACf,uBAAuB;CACvB,YAAY;CACZ,gDAAgD;CAChD,WAAW;CACX,aAAa;CACb,uBAAuB;CACvB,mBAAmB;AACpB;AACA;CACC,oCAAoC;CACpC,YAAY;AACb;;AAEA;IACI,qBAAqB;IACrB,UAAU;AACd;;AAEA;IACI,uBAAuB;IACvB,UAAU;AACd","sourcesContent":["@import url(\'https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap\');\\r\\n\\r\\n* {\\r\\n    box-sizing: border-box;\\r\\n    margin: 0;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\nbody {\\r\\n    background-color: rgb(5,5,5);\\r\\n    font-size: 16px;\\r\\n    overflow: hidden;\\r\\n    font-family: \'Inter\', sans-serif;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n    display: none !important;\\r\\n}\\r\\n\\r\\n/*for comparing to eX and gamefeel. Not permanent*/\\r\\ncanvas, .gui {\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    /* filter: saturate(75%);  */\\r\\n}\\r\\n\\r\\n.text-layer {\\r\\n\\tposition: absolute;\\r\\n\\tleft: 0;\\r\\n\\ttop: 0;\\r\\n\\twidth: 1600px;\\r\\n\\theight: 900px;\\r\\n\\tfilter: none !important;\\r\\n\\tbackground: transparent;\\r\\n\\toverflow: hidden;\\r\\n}\\r\\n\\r\\n.chatDiv {\\r\\n    z-index: 100;\\r\\n}\\r\\n\\r\\n.chat {\\r\\n    position: absolute;\\r\\n    left: 0px;\\r\\n    top: 250px;\\r\\n    width: 374px;\\r\\n    height: 30px;\\r\\n    transform-origin: center center;\\r\\n    border: none;\\r\\n    outline: none;\\r\\n    color: white;\\r\\n    font-size: 1rem;\\r\\n    padding: 5px;\\r\\n    caret-color: white;\\r\\n    /*background: rgba(129, 129, 129, 0.082);*/\\r\\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0));\\r\\n    font-family: \'Inter-Thick\', Inter;\\r\\n}\\r\\n\\r\\n.chat-message {\\r\\n    color: white;\\r\\n    font-size: 1.05rem;\\r\\n    background: transparent;\\r\\n    padding: 1px;\\r\\n\\r\\n    overflow-wrap: break-word;\\r\\n    width: 100%;\\r\\n}\\r\\n.system-message {\\r\\n    color: #c4c4c4;\\r\\n    font-size: 1rem;\\r\\n    background: transparent;\\r\\n    padding: 1px;\\r\\n    overflow-wrap: break-word; /*this doesnt work somehow*/\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.fade-out {\\r\\n    animation: fade-out 0.3s linear;\\r\\n}\\r\\n\\r\\n.fade-in {\\r\\n    animation: fade-in 0.3s linear;\\r\\n}\\r\\n\\r\\n@keyframes fade-out {\\r\\n    0% {\\r\\n        opacity: 1;\\r\\n    }\\r\\n    100% {\\r\\n        opacity: 0;\\r\\n    }\\r\\n}\\r\\n\\r\\n/*peaceful*/\\r\\n.difficulty-0 {\\r\\n    color: #6cd95b;\\r\\n}\\r\\n/*moderate*/\\r\\n.difficulty-1 {\\r\\n    color: #58ccb3;\\r\\n}\\r\\n/*difficult*/\\r\\n.difficulty-2 {\\r\\n    color: #0a77bf;\\r\\n}\\r\\n/*hardcore*/\\r\\n.difficulty-3 {\\r\\n    color: #3528e0;\\r\\n}\\r\\n/*exhausting*/\\r\\n.difficulty-4 {\\r\\n    color: #8248d4;\\r\\n}\\r\\n/*relentless*/\\r\\n.difficulty-5 {\\r\\n    color: #e32d8b;\\r\\n}\\r\\n/*agonizing*/\\r\\n@keyframes agonizingColor {\\r\\n    0% {\\r\\n        background-color: #ff0000;\\r\\n    }\\r\\n}\\r\\n.difficulty-6 {\\r\\n    color: #ff5736;\\r\\n    animation-name: agonizingColor;\\r\\n    animation-duration: 3s;\\r\\n    animation-iteration-count: infinite;\\r\\n}\\r\\n/*terrorizing*/\\r\\n@keyframes terrorizingColor {\\r\\n    0% {\\r\\n        background-color: #ff0000;\\r\\n    }\\r\\n}\\r\\n.difficulty-7 {\\r\\n    color: #fc3a3a;\\r\\n    animation-name: terrorizingColor;\\r\\n    animation-duration: 2s;\\r\\n    animation-iteration-count: infinite;\\r\\n}\\r\\n@keyframes cataclysmicColor {\\r\\n    0% {\\r\\n        background-color: #ff0000;\\r\\n    }\\r\\n}\\r\\n/*cataclysmic*/\\r\\n.difficulty-8 {\\r\\n    color: #c95d5d;\\r\\n    animation-name: cataclysmicColor;\\r\\n    animation-duration: 1s;\\r\\n    animation-iteration-count: infinite;\\r\\n}\\r\\n\\r\\n.mention {\\r\\n    /*color: #a84040;*/\\r\\n    background-image: linear-gradient(\\r\\n        90deg,\\r\\n        rgba(255, 0, 0, 0.3),\\r\\n        rgba(255, 0, 0, 0)\\r\\n    );\\r\\n    animation-name: terrorizingColor;\\r\\n    animation-duration: 0.4s;\\r\\n    animation-iteration-count: 1;\\r\\n}\\r\\n\\r\\n.chat::placeholder {\\r\\n    color: white;\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.leaderboard-div {\\r\\n    position: fixed;\\r\\n    left: calc(100% - 299px);\\r\\n    transition: left 0.2s linear, opacity 0.2s linear;\\r\\n    opacity: 1;\\r\\n    top: -1px;\\r\\n    width: 300px;\\r\\n    height: 100vh;\\r\\n    background: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.4));\\r\\n    display: flex;\\r\\n    justify-content: start;\\r\\n    align-items: center;\\r\\n    flex-direction: column;\\r\\n    padding: 0px;\\r\\n    color: white;\\r\\n    overflow-y: auto;\\r\\n    overflow-x: hidden;\\r\\n    user-select: none;\\r\\n    font-family: \'Inter-Thick\', Inter;\\r\\n}\\r\\n\\r\\n.hide {\\r\\n    left: 1600px !important;\\r\\n    opacity: 0;\\r\\n}\\r\\n\\r\\n.leaderboard-div::-webkit-scrollbar {\\r\\n    width: 10px;\\r\\n    background-color: rgba(255, 255, 255, 0.1);\\r\\n    border-radius: 2px;\\r\\n}\\r\\n\\r\\n.leaderboard-div::-webkit-scrollbar-thumb {\\r\\n    background-color: rgba(255, 255, 255, 0.3);\\r\\n    border-radius: 2px;\\r\\n}\\r\\n\\r\\n.rainbow {\\r\\n    animation: colorRotate 4s linear 0s infinite;\\r\\n}\\r\\n\\r\\n@keyframes colorRotate {\\r\\n    0% {\\r\\n        color: hsl(180, 100%, 50%);\\r\\n    }\\r\\n    50% {\\r\\n        color: hsl(216, 100%, 50%);\\r\\n    }\\r\\n    100% {\\r\\n        color: hsl(180, 100%, 50%);\\r\\n    }\\r\\n}\\r\\n\\r\\n.guest {\\r\\n    opacity: 0.8;\\r\\n}\\r\\n\\r\\n.chat-div::-webkit-scrollbar {\\r\\n    width: 10px;\\r\\n    background-color: rgba(0, 0, 0, 0.4);\\r\\n}\\r\\n\\r\\n.chat-div::-webkit-scrollbar-thumb {\\r\\n    background-color: rgba(0, 0, 0, 0.8);\\r\\n}\\r\\n\\r\\n.chat-div {\\r\\n    position: absolute;\\r\\n    left: -1px;\\r\\n    top: -1px;\\r\\n    width: 375px;\\r\\n    height: 251px;\\r\\n    filter: none !important;\\r\\n    background: rgba(141, 141, 141, 0.205);\\r\\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0));\\r\\n    display: flex;\\r\\n    justify-content: flex-start;\\r\\n    align-items: flex-start;\\r\\n    flex-direction: column;\\r\\n    overflow-y: auto;\\r\\n    padding: 2px;\\r\\n    overflow-x: hidden;\\r\\n    /* \\tword-break: break-all; */\\r\\n    font-family: Inter-Thick, Inter;\\r\\n\\r\\n    transition: all 0.1s linear, padding 0.1s linear;\\r\\n    /*\\r\\n    /*background-image: url(https://i1.sndcdn.com/artworks-Uii8SMJvNPxy8ePA-romBoQ-t500x500.jpg);*/\\r\\n    /*    opacity: 0.7; */\\r\\n}\\r\\n\\r\\n.lb-group {\\r\\n    /* background: rgba(255, 255, 255, 0.1); */\\r\\n    /*background: rgb(55, 55, 55);*/\\r\\n    background: transparent;\\r\\n    padding: 5px;\\r\\n    display: flex;\\r\\n    justify-content: start;\\r\\n    align-items: center;\\r\\n    flex-direction: column;\\r\\n    margin: 0px;\\r\\n    /*min-width: 150px;*/\\r\\n    width: 300px;\\r\\n}\\r\\n\\r\\n\\r\\n.lb-name {\\r\\n    /* color: rgb(47, 250, 213); */\\r\\n    /* filter: saturate(150%); */\\r\\n    font-size: 1rem;\\r\\n}\\r\\n\\r\\n.lb-players {\\r\\n    margin: 5px;\\r\\n    font-size: 0.9rem;\\r\\n    /* background: rgba(255, 255, 255, 0.12); */\\r\\n    /* background: rgba(77, 77, 77, 0.7); */\\r\\n    display: flex;\\r\\n    justify-content: start;\\r\\n    align-items: center;\\r\\n    flex-direction: column;\\r\\n}\\r\\n\\r\\n.lb-players div {\\r\\n    margin: 1.5px;\\r\\n\\tcursor: pointer;\\r\\n\\tbackground: transparent;\\r\\n\\tpadding: 0px;\\r\\n\\ttransition: all 0.1s linear, padding 0.1s linear;\\r\\n\\twidth: 100%;\\r\\n\\tdisplay: flex;\\r\\n\\tjustify-content: center;\\r\\n\\talign-items: center;\\r\\n}\\r\\n.lb-players div:hover {\\r\\n\\tbackground: rgba(255, 255, 255, 0.3);\\r\\n\\tpadding: 6px;\\r\\n}\\r\\n\\r\\n.hideLB {\\r\\n    left: 100% !important;\\r\\n    opacity: 0;\\r\\n}\\r\\n\\r\\n.hideChat {\\r\\n    left: -175px !important;\\r\\n    opacity: 0; \\r\\n}"],"sourceRoot":""}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjc0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vZVhjbGllbnQvc3R5bGUuY3NzP2U0OTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiQGltcG9ydCB1cmwoaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDEwMC4uOTAwJmRpc3BsYXk9c3dhcCk7XCJdKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgKiB7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogMDtcclxufVxyXG5cclxuYm9keSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNSw1LDUpO1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmO1xyXG59XHJcblxyXG4uaGlkZGVuIHtcclxuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxufVxyXG5cclxuLypmb3IgY29tcGFyaW5nIHRvIGVYIGFuZCBnYW1lZmVlbC4gTm90IHBlcm1hbmVudCovXHJcbmNhbnZhcywgLmd1aSB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgdG9wOiAwO1xyXG4gICAgLyogZmlsdGVyOiBzYXR1cmF0ZSg3NSUpOyAgKi9cclxufVxyXG5cclxuLnRleHQtbGF5ZXIge1xyXG5cdHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuXHRsZWZ0OiAwO1xyXG5cdHRvcDogMDtcclxuXHR3aWR0aDogMTYwMHB4O1xyXG5cdGhlaWdodDogOTAwcHg7XHJcblx0ZmlsdGVyOiBub25lICFpbXBvcnRhbnQ7XHJcblx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcblx0b3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLmNoYXREaXYge1xyXG4gICAgei1pbmRleDogMTAwO1xyXG59XHJcblxyXG4uY2hhdCB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAwcHg7XHJcbiAgICB0b3A6IDI1MHB4O1xyXG4gICAgd2lkdGg6IDM3NHB4O1xyXG4gICAgaGVpZ2h0OiAzMHB4O1xyXG4gICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyIGNlbnRlcjtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDFyZW07XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbiAgICBjYXJldC1jb2xvcjogd2hpdGU7XHJcbiAgICAvKmJhY2tncm91bmQ6IHJnYmEoMTI5LCAxMjksIDEyOSwgMC4wODIpOyovXHJcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoMCwgMCwgMCwgMC40KSwgcmdiYSgwLCAwLCAwLCAwKSk7XHJcbiAgICBmb250LWZhbWlseTogJ0ludGVyLVRoaWNrJywgSW50ZXI7XHJcbn1cclxuXHJcbi5jaGF0LW1lc3NhZ2Uge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZm9udC1zaXplOiAxLjA1cmVtO1xyXG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICBwYWRkaW5nOiAxcHg7XHJcblxyXG4gICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5zeXN0ZW0tbWVzc2FnZSB7XHJcbiAgICBjb2xvcjogI2M0YzRjNDtcclxuICAgIGZvbnQtc2l6ZTogMXJlbTtcclxuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgcGFkZGluZzogMXB4O1xyXG4gICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgLyp0aGlzIGRvZXNudCB3b3JrIHNvbWVob3cqL1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5mYWRlLW91dCB7XHJcbiAgICBhbmltYXRpb246IGZhZGUtb3V0IDAuM3MgbGluZWFyO1xyXG59XHJcblxyXG4uZmFkZS1pbiB7XHJcbiAgICBhbmltYXRpb246IGZhZGUtaW4gMC4zcyBsaW5lYXI7XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgZmFkZS1vdXQge1xyXG4gICAgMCUge1xyXG4gICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICB9XHJcbiAgICAxMDAlIHtcclxuICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKnBlYWNlZnVsKi9cclxuLmRpZmZpY3VsdHktMCB7XHJcbiAgICBjb2xvcjogIzZjZDk1YjtcclxufVxyXG4vKm1vZGVyYXRlKi9cclxuLmRpZmZpY3VsdHktMSB7XHJcbiAgICBjb2xvcjogIzU4Y2NiMztcclxufVxyXG4vKmRpZmZpY3VsdCovXHJcbi5kaWZmaWN1bHR5LTIge1xyXG4gICAgY29sb3I6ICMwYTc3YmY7XHJcbn1cclxuLypoYXJkY29yZSovXHJcbi5kaWZmaWN1bHR5LTMge1xyXG4gICAgY29sb3I6ICMzNTI4ZTA7XHJcbn1cclxuLypleGhhdXN0aW5nKi9cclxuLmRpZmZpY3VsdHktNCB7XHJcbiAgICBjb2xvcjogIzgyNDhkNDtcclxufVxyXG4vKnJlbGVudGxlc3MqL1xyXG4uZGlmZmljdWx0eS01IHtcclxuICAgIGNvbG9yOiAjZTMyZDhiO1xyXG59XHJcbi8qYWdvbml6aW5nKi9cclxuQGtleWZyYW1lcyBhZ29uaXppbmdDb2xvciB7XHJcbiAgICAwJSB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMDtcclxuICAgIH1cclxufVxyXG4uZGlmZmljdWx0eS02IHtcclxuICAgIGNvbG9yOiAjZmY1NzM2O1xyXG4gICAgYW5pbWF0aW9uLW5hbWU6IGFnb25pemluZ0NvbG9yO1xyXG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAzcztcclxuICAgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlO1xyXG59XHJcbi8qdGVycm9yaXppbmcqL1xyXG5Aa2V5ZnJhbWVzIHRlcnJvcml6aW5nQ29sb3Ige1xyXG4gICAgMCUge1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjAwMDA7XHJcbiAgICB9XHJcbn1cclxuLmRpZmZpY3VsdHktNyB7XHJcbiAgICBjb2xvcjogI2ZjM2EzYTtcclxuICAgIGFuaW1hdGlvbi1uYW1lOiB0ZXJyb3JpemluZ0NvbG9yO1xyXG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAycztcclxuICAgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlO1xyXG59XHJcbkBrZXlmcmFtZXMgY2F0YWNseXNtaWNDb2xvciB7XHJcbiAgICAwJSB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMDtcclxuICAgIH1cclxufVxyXG4vKmNhdGFjbHlzbWljKi9cclxuLmRpZmZpY3VsdHktOCB7XHJcbiAgICBjb2xvcjogI2M5NWQ1ZDtcclxuICAgIGFuaW1hdGlvbi1uYW1lOiBjYXRhY2x5c21pY0NvbG9yO1xyXG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAxcztcclxuICAgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlO1xyXG59XHJcblxyXG4ubWVudGlvbiB7XHJcbiAgICAvKmNvbG9yOiAjYTg0MDQwOyovXHJcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoXHJcbiAgICAgICAgOTBkZWcsXHJcbiAgICAgICAgcmdiYSgyNTUsIDAsIDAsIDAuMyksXHJcbiAgICAgICAgcmdiYSgyNTUsIDAsIDAsIDApXHJcbiAgICApO1xyXG4gICAgYW5pbWF0aW9uLW5hbWU6IHRlcnJvcml6aW5nQ29sb3I7XHJcbiAgICBhbmltYXRpb24tZHVyYXRpb246IDAuNHM7XHJcbiAgICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiAxO1xyXG59XHJcblxyXG4uY2hhdDo6cGxhY2Vob2xkZXIge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG5cclxuLmxlYWRlcmJvYXJkLWRpdiB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBsZWZ0OiBjYWxjKDEwMCUgLSAyOTlweCk7XHJcbiAgICB0cmFuc2l0aW9uOiBsZWZ0IDAuMnMgbGluZWFyLCBvcGFjaXR5IDAuMnMgbGluZWFyO1xyXG4gICAgb3BhY2l0eTogMTtcclxuICAgIHRvcDogLTFweDtcclxuICAgIHdpZHRoOiAzMDBweDtcclxuICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoMCwgMCwgMCwgMCksIHJnYmEoMCwgMCwgMCwgMC40KSk7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzdGFydDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgcGFkZGluZzogMHB4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgb3ZlcmZsb3cteTogYXV0bztcclxuICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcclxuICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgZm9udC1mYW1pbHk6ICdJbnRlci1UaGljaycsIEludGVyO1xyXG59XHJcblxyXG4uaGlkZSB7XHJcbiAgICBsZWZ0OiAxNjAwcHggIWltcG9ydGFudDtcclxuICAgIG9wYWNpdHk6IDA7XHJcbn1cclxuXHJcbi5sZWFkZXJib2FyZC1kaXY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcclxuICAgIHdpZHRoOiAxMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG59XHJcblxyXG4ubGVhZGVyYm9hcmQtZGl2Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XHJcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XHJcbn1cclxuXHJcbi5yYWluYm93IHtcclxuICAgIGFuaW1hdGlvbjogY29sb3JSb3RhdGUgNHMgbGluZWFyIDBzIGluZmluaXRlO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGNvbG9yUm90YXRlIHtcclxuICAgIDAlIHtcclxuICAgICAgICBjb2xvcjogaHNsKDE4MCwgMTAwJSwgNTAlKTtcclxuICAgIH1cclxuICAgIDUwJSB7XHJcbiAgICAgICAgY29sb3I6IGhzbCgyMTYsIDEwMCUsIDUwJSk7XHJcbiAgICB9XHJcbiAgICAxMDAlIHtcclxuICAgICAgICBjb2xvcjogaHNsKDE4MCwgMTAwJSwgNTAlKTtcclxuICAgIH1cclxufVxyXG5cclxuLmd1ZXN0IHtcclxuICAgIG9wYWNpdHk6IDAuODtcclxufVxyXG5cclxuLmNoYXQtZGl2Ojotd2Via2l0LXNjcm9sbGJhciB7XHJcbiAgICB3aWR0aDogMTBweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcclxufVxyXG5cclxuLmNoYXQtZGl2Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOCk7XHJcbn1cclxuXHJcbi5jaGF0LWRpdiB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAtMXB4O1xyXG4gICAgdG9wOiAtMXB4O1xyXG4gICAgd2lkdGg6IDM3NXB4O1xyXG4gICAgaGVpZ2h0OiAyNTFweDtcclxuICAgIGZpbHRlcjogbm9uZSAhaW1wb3J0YW50O1xyXG4gICAgYmFja2dyb3VuZDogcmdiYSgxNDEsIDE0MSwgMTQxLCAwLjIwNSk7XHJcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoMCwgMCwgMCwgMC40KSwgcmdiYSgwLCAwLCAwLCAwKSk7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG4gICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgb3ZlcmZsb3cteTogYXV0bztcclxuICAgIHBhZGRpbmc6IDJweDtcclxuICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcclxuICAgIC8qIFx0d29yZC1icmVhazogYnJlYWstYWxsOyAqL1xyXG4gICAgZm9udC1mYW1pbHk6IEludGVyLVRoaWNrLCBJbnRlcjtcclxuXHJcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4xcyBsaW5lYXIsIHBhZGRpbmcgMC4xcyBsaW5lYXI7XHJcbiAgICAvKlxyXG4gICAgLypiYWNrZ3JvdW5kLWltYWdlOiB1cmwoaHR0cHM6Ly9pMS5zbmRjZG4uY29tL2FydHdvcmtzLVVpaThTTUp2TlB4eThlUEEtcm9tQm9RLXQ1MDB4NTAwLmpwZyk7Ki9cclxuICAgIC8qICAgIG9wYWNpdHk6IDAuNzsgKi9cclxufVxyXG5cclxuLmxiLWdyb3VwIHtcclxuICAgIC8qIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsgKi9cclxuICAgIC8qYmFja2dyb3VuZDogcmdiKDU1LCA1NSwgNTUpOyovXHJcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgIHBhZGRpbmc6IDVweDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBtYXJnaW46IDBweDtcclxuICAgIC8qbWluLXdpZHRoOiAxNTBweDsqL1xyXG4gICAgd2lkdGg6IDMwMHB4O1xyXG59XHJcblxyXG5cclxuLmxiLW5hbWUge1xyXG4gICAgLyogY29sb3I6IHJnYig0NywgMjUwLCAyMTMpOyAqL1xyXG4gICAgLyogZmlsdGVyOiBzYXR1cmF0ZSgxNTAlKTsgKi9cclxuICAgIGZvbnQtc2l6ZTogMXJlbTtcclxufVxyXG5cclxuLmxiLXBsYXllcnMge1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbiAgICBmb250LXNpemU6IDAuOXJlbTtcclxuICAgIC8qIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xMik7ICovXHJcbiAgICAvKiBiYWNrZ3JvdW5kOiByZ2JhKDc3LCA3NywgNzcsIDAuNyk7ICovXHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzdGFydDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcblxyXG4ubGItcGxheWVycyBkaXYge1xyXG4gICAgbWFyZ2luOiAxLjVweDtcclxuXHRjdXJzb3I6IHBvaW50ZXI7XHJcblx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcblx0cGFkZGluZzogMHB4O1xyXG5cdHRyYW5zaXRpb246IGFsbCAwLjFzIGxpbmVhciwgcGFkZGluZyAwLjFzIGxpbmVhcjtcclxuXHR3aWR0aDogMTAwJTtcclxuXHRkaXNwbGF5OiBmbGV4O1xyXG5cdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuLmxiLXBsYXllcnMgZGl2OmhvdmVyIHtcclxuXHRiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XHJcblx0cGFkZGluZzogNnB4O1xyXG59XHJcblxyXG4uaGlkZUxCIHtcclxuICAgIGxlZnQ6IDEwMCUgIWltcG9ydGFudDtcclxuICAgIG9wYWNpdHk6IDA7XHJcbn1cclxuXHJcbi5oaWRlQ2hhdCB7XHJcbiAgICBsZWZ0OiAtMTc1cHggIWltcG9ydGFudDtcclxuICAgIG9wYWNpdHk6IDA7IFxyXG59YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9lWGNsaWVudC9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBRUE7SUFDSSxzQkFBc0I7SUFDdEIsU0FBUztJQUNULFVBQVU7QUFDZDs7QUFFQTtJQUNJLDRCQUE0QjtJQUM1QixlQUFlO0lBQ2YsZ0JBQWdCO0lBQ2hCLGdDQUFnQztBQUNwQzs7QUFFQTtJQUNJLHdCQUF3QjtBQUM1Qjs7QUFFQSxrREFBa0Q7QUFDbEQ7SUFDSSxrQkFBa0I7SUFDbEIsT0FBTztJQUNQLE1BQU07SUFDTiw0QkFBNEI7QUFDaEM7O0FBRUE7Q0FDQyxrQkFBa0I7Q0FDbEIsT0FBTztDQUNQLE1BQU07Q0FDTixhQUFhO0NBQ2IsYUFBYTtDQUNiLHVCQUF1QjtDQUN2Qix1QkFBdUI7Q0FDdkIsZ0JBQWdCO0FBQ2pCOztBQUVBO0lBQ0ksWUFBWTtBQUNoQjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixTQUFTO0lBQ1QsVUFBVTtJQUNWLFlBQVk7SUFDWixZQUFZO0lBQ1osK0JBQStCO0lBQy9CLFlBQVk7SUFDWixhQUFhO0lBQ2IsWUFBWTtJQUNaLGVBQWU7SUFDZixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLDBDQUEwQztJQUMxQywyRUFBMkU7SUFDM0UsaUNBQWlDO0FBQ3JDOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGtCQUFrQjtJQUNsQix1QkFBdUI7SUFDdkIsWUFBWTs7SUFFWix5QkFBeUI7SUFDekIsV0FBVztBQUNmO0FBQ0E7SUFDSSxjQUFjO0lBQ2QsZUFBZTtJQUNmLHVCQUF1QjtJQUN2QixZQUFZO0lBQ1oseUJBQXlCLEVBQUUsMkJBQTJCO0lBQ3RELFdBQVc7QUFDZjs7QUFFQTtJQUNJLCtCQUErQjtBQUNuQzs7QUFFQTtJQUNJLDhCQUE4QjtBQUNsQzs7QUFFQTtJQUNJO1FBQ0ksVUFBVTtJQUNkO0lBQ0E7UUFDSSxVQUFVO0lBQ2Q7QUFDSjs7QUFFQSxXQUFXO0FBQ1g7SUFDSSxjQUFjO0FBQ2xCO0FBQ0EsV0FBVztBQUNYO0lBQ0ksY0FBYztBQUNsQjtBQUNBLFlBQVk7QUFDWjtJQUNJLGNBQWM7QUFDbEI7QUFDQSxXQUFXO0FBQ1g7SUFDSSxjQUFjO0FBQ2xCO0FBQ0EsYUFBYTtBQUNiO0lBQ0ksY0FBYztBQUNsQjtBQUNBLGFBQWE7QUFDYjtJQUNJLGNBQWM7QUFDbEI7QUFDQSxZQUFZO0FBQ1o7SUFDSTtRQUNJLHlCQUF5QjtJQUM3QjtBQUNKO0FBQ0E7SUFDSSxjQUFjO0lBQ2QsOEJBQThCO0lBQzlCLHNCQUFzQjtJQUN0QixtQ0FBbUM7QUFDdkM7QUFDQSxjQUFjO0FBQ2Q7SUFDSTtRQUNJLHlCQUF5QjtJQUM3QjtBQUNKO0FBQ0E7SUFDSSxjQUFjO0lBQ2QsZ0NBQWdDO0lBQ2hDLHNCQUFzQjtJQUN0QixtQ0FBbUM7QUFDdkM7QUFDQTtJQUNJO1FBQ0kseUJBQXlCO0lBQzdCO0FBQ0o7QUFDQSxjQUFjO0FBQ2Q7SUFDSSxjQUFjO0lBQ2QsZ0NBQWdDO0lBQ2hDLHNCQUFzQjtJQUN0QixtQ0FBbUM7QUFDdkM7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEI7Ozs7S0FJQztJQUNELGdDQUFnQztJQUNoQyx3QkFBd0I7SUFDeEIsNEJBQTRCO0FBQ2hDOztBQUVBO0lBQ0ksWUFBWTtJQUNaLFVBQVU7QUFDZDs7QUFFQTtJQUNJLGVBQWU7SUFDZix3QkFBd0I7SUFDeEIsaURBQWlEO0lBQ2pELFVBQVU7SUFDVixTQUFTO0lBQ1QsWUFBWTtJQUNaLGFBQWE7SUFDYiwyRUFBMkU7SUFDM0UsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixtQkFBbUI7SUFDbkIsc0JBQXNCO0lBQ3RCLFlBQVk7SUFDWixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLGtCQUFrQjtJQUNsQixpQkFBaUI7SUFDakIsaUNBQWlDO0FBQ3JDOztBQUVBO0lBQ0ksdUJBQXVCO0lBQ3ZCLFVBQVU7QUFDZDs7QUFFQTtJQUNJLFdBQVc7SUFDWCwwQ0FBMEM7SUFDMUMsa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksMENBQTBDO0lBQzFDLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLDRDQUE0QztBQUNoRDs7QUFFQTtJQUNJO1FBQ0ksMEJBQTBCO0lBQzlCO0lBQ0E7UUFDSSwwQkFBMEI7SUFDOUI7SUFDQTtRQUNJLDBCQUEwQjtJQUM5QjtBQUNKOztBQUVBO0lBQ0ksWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxvQ0FBb0M7QUFDeEM7O0FBRUE7SUFDSSxvQ0FBb0M7QUFDeEM7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsVUFBVTtJQUNWLFNBQVM7SUFDVCxZQUFZO0lBQ1osYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixzQ0FBc0M7SUFDdEMsMkVBQTJFO0lBQzNFLGFBQWE7SUFDYiwyQkFBMkI7SUFDM0IsdUJBQXVCO0lBQ3ZCLHNCQUFzQjtJQUN0QixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQiw0QkFBNEI7SUFDNUIsK0JBQStCOztJQUUvQixnREFBZ0Q7SUFDaEQ7a0dBQzhGO0lBQzlGLHFCQUFxQjtBQUN6Qjs7QUFFQTtJQUNJLDBDQUEwQztJQUMxQywrQkFBK0I7SUFDL0IsdUJBQXVCO0lBQ3ZCLFlBQVk7SUFDWixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQixzQkFBc0I7SUFDdEIsV0FBVztJQUNYLG9CQUFvQjtJQUNwQixZQUFZO0FBQ2hCOzs7QUFHQTtJQUNJLDhCQUE4QjtJQUM5Qiw0QkFBNEI7SUFDNUIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxpQkFBaUI7SUFDakIsMkNBQTJDO0lBQzNDLHVDQUF1QztJQUN2QyxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxhQUFhO0NBQ2hCLGVBQWU7Q0FDZix1QkFBdUI7Q0FDdkIsWUFBWTtDQUNaLGdEQUFnRDtDQUNoRCxXQUFXO0NBQ1gsYUFBYTtDQUNiLHVCQUF1QjtDQUN2QixtQkFBbUI7QUFDcEI7QUFDQTtDQUNDLG9DQUFvQztDQUNwQyxZQUFZO0FBQ2I7O0FBRUE7SUFDSSxxQkFBcUI7SUFDckIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksdUJBQXVCO0lBQ3ZCLFVBQVU7QUFDZFwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJAaW1wb3J0IHVybCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDEwMC4uOTAwJmRpc3BsYXk9c3dhcCcpO1xcclxcblxcclxcbioge1xcclxcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcclxcbiAgICBtYXJnaW46IDA7XFxyXFxuICAgIHBhZGRpbmc6IDA7XFxyXFxufVxcclxcblxcclxcbmJvZHkge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNSw1LDUpO1xcclxcbiAgICBmb250LXNpemU6IDE2cHg7XFxyXFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxyXFxuICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmO1xcclxcbn1cXHJcXG5cXHJcXG4uaGlkZGVuIHtcXHJcXG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4vKmZvciBjb21wYXJpbmcgdG8gZVggYW5kIGdhbWVmZWVsLiBOb3QgcGVybWFuZW50Ki9cXHJcXG5jYW52YXMsIC5ndWkge1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAgIGxlZnQ6IDA7XFxyXFxuICAgIHRvcDogMDtcXHJcXG4gICAgLyogZmlsdGVyOiBzYXR1cmF0ZSg3NSUpOyAgKi9cXHJcXG59XFxyXFxuXFxyXFxuLnRleHQtbGF5ZXIge1xcclxcblxcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG5cXHRsZWZ0OiAwO1xcclxcblxcdHRvcDogMDtcXHJcXG5cXHR3aWR0aDogMTYwMHB4O1xcclxcblxcdGhlaWdodDogOTAwcHg7XFxyXFxuXFx0ZmlsdGVyOiBub25lICFpbXBvcnRhbnQ7XFxyXFxuXFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxyXFxuXFx0b3ZlcmZsb3c6IGhpZGRlbjtcXHJcXG59XFxyXFxuXFxyXFxuLmNoYXREaXYge1xcclxcbiAgICB6LWluZGV4OiAxMDA7XFxyXFxufVxcclxcblxcclxcbi5jaGF0IHtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICBsZWZ0OiAwcHg7XFxyXFxuICAgIHRvcDogMjUwcHg7XFxyXFxuICAgIHdpZHRoOiAzNzRweDtcXHJcXG4gICAgaGVpZ2h0OiAzMHB4O1xcclxcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgY2VudGVyO1xcclxcbiAgICBib3JkZXI6IG5vbmU7XFxyXFxuICAgIG91dGxpbmU6IG5vbmU7XFxyXFxuICAgIGNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgZm9udC1zaXplOiAxcmVtO1xcclxcbiAgICBwYWRkaW5nOiA1cHg7XFxyXFxuICAgIGNhcmV0LWNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgLypiYWNrZ3JvdW5kOiByZ2JhKDEyOSwgMTI5LCAxMjksIDAuMDgyKTsqL1xcclxcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoMCwgMCwgMCwgMC40KSwgcmdiYSgwLCAwLCAwLCAwKSk7XFxyXFxuICAgIGZvbnQtZmFtaWx5OiAnSW50ZXItVGhpY2snLCBJbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLmNoYXQtbWVzc2FnZSB7XFxyXFxuICAgIGNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgZm9udC1zaXplOiAxLjA1cmVtO1xcclxcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXHJcXG4gICAgcGFkZGluZzogMXB4O1xcclxcblxcclxcbiAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG59XFxyXFxuLnN5c3RlbS1tZXNzYWdlIHtcXHJcXG4gICAgY29sb3I6ICNjNGM0YzQ7XFxyXFxuICAgIGZvbnQtc2l6ZTogMXJlbTtcXHJcXG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxyXFxuICAgIHBhZGRpbmc6IDFweDtcXHJcXG4gICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgLyp0aGlzIGRvZXNudCB3b3JrIHNvbWVob3cqL1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG59XFxyXFxuXFxyXFxuLmZhZGUtb3V0IHtcXHJcXG4gICAgYW5pbWF0aW9uOiBmYWRlLW91dCAwLjNzIGxpbmVhcjtcXHJcXG59XFxyXFxuXFxyXFxuLmZhZGUtaW4ge1xcclxcbiAgICBhbmltYXRpb246IGZhZGUtaW4gMC4zcyBsaW5lYXI7XFxyXFxufVxcclxcblxcclxcbkBrZXlmcmFtZXMgZmFkZS1vdXQge1xcclxcbiAgICAwJSB7XFxyXFxuICAgICAgICBvcGFjaXR5OiAxO1xcclxcbiAgICB9XFxyXFxuICAgIDEwMCUge1xcclxcbiAgICAgICAgb3BhY2l0eTogMDtcXHJcXG4gICAgfVxcclxcbn1cXHJcXG5cXHJcXG4vKnBlYWNlZnVsKi9cXHJcXG4uZGlmZmljdWx0eS0wIHtcXHJcXG4gICAgY29sb3I6ICM2Y2Q5NWI7XFxyXFxufVxcclxcbi8qbW9kZXJhdGUqL1xcclxcbi5kaWZmaWN1bHR5LTEge1xcclxcbiAgICBjb2xvcjogIzU4Y2NiMztcXHJcXG59XFxyXFxuLypkaWZmaWN1bHQqL1xcclxcbi5kaWZmaWN1bHR5LTIge1xcclxcbiAgICBjb2xvcjogIzBhNzdiZjtcXHJcXG59XFxyXFxuLypoYXJkY29yZSovXFxyXFxuLmRpZmZpY3VsdHktMyB7XFxyXFxuICAgIGNvbG9yOiAjMzUyOGUwO1xcclxcbn1cXHJcXG4vKmV4aGF1c3RpbmcqL1xcclxcbi5kaWZmaWN1bHR5LTQge1xcclxcbiAgICBjb2xvcjogIzgyNDhkNDtcXHJcXG59XFxyXFxuLypyZWxlbnRsZXNzKi9cXHJcXG4uZGlmZmljdWx0eS01IHtcXHJcXG4gICAgY29sb3I6ICNlMzJkOGI7XFxyXFxufVxcclxcbi8qYWdvbml6aW5nKi9cXHJcXG5Aa2V5ZnJhbWVzIGFnb25pemluZ0NvbG9yIHtcXHJcXG4gICAgMCUge1xcclxcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMDtcXHJcXG4gICAgfVxcclxcbn1cXHJcXG4uZGlmZmljdWx0eS02IHtcXHJcXG4gICAgY29sb3I6ICNmZjU3MzY7XFxyXFxuICAgIGFuaW1hdGlvbi1uYW1lOiBhZ29uaXppbmdDb2xvcjtcXHJcXG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAzcztcXHJcXG4gICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XFxyXFxufVxcclxcbi8qdGVycm9yaXppbmcqL1xcclxcbkBrZXlmcmFtZXMgdGVycm9yaXppbmdDb2xvciB7XFxyXFxuICAgIDAlIHtcXHJcXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjAwMDA7XFxyXFxuICAgIH1cXHJcXG59XFxyXFxuLmRpZmZpY3VsdHktNyB7XFxyXFxuICAgIGNvbG9yOiAjZmMzYTNhO1xcclxcbiAgICBhbmltYXRpb24tbmFtZTogdGVycm9yaXppbmdDb2xvcjtcXHJcXG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAycztcXHJcXG4gICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XFxyXFxufVxcclxcbkBrZXlmcmFtZXMgY2F0YWNseXNtaWNDb2xvciB7XFxyXFxuICAgIDAlIHtcXHJcXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjAwMDA7XFxyXFxuICAgIH1cXHJcXG59XFxyXFxuLypjYXRhY2x5c21pYyovXFxyXFxuLmRpZmZpY3VsdHktOCB7XFxyXFxuICAgIGNvbG9yOiAjYzk1ZDVkO1xcclxcbiAgICBhbmltYXRpb24tbmFtZTogY2F0YWNseXNtaWNDb2xvcjtcXHJcXG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAxcztcXHJcXG4gICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XFxyXFxufVxcclxcblxcclxcbi5tZW50aW9uIHtcXHJcXG4gICAgLypjb2xvcjogI2E4NDA0MDsqL1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoXFxyXFxuICAgICAgICA5MGRlZyxcXHJcXG4gICAgICAgIHJnYmEoMjU1LCAwLCAwLCAwLjMpLFxcclxcbiAgICAgICAgcmdiYSgyNTUsIDAsIDAsIDApXFxyXFxuICAgICk7XFxyXFxuICAgIGFuaW1hdGlvbi1uYW1lOiB0ZXJyb3JpemluZ0NvbG9yO1xcclxcbiAgICBhbmltYXRpb24tZHVyYXRpb246IDAuNHM7XFxyXFxuICAgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IDE7XFxyXFxufVxcclxcblxcclxcbi5jaGF0OjpwbGFjZWhvbGRlciB7XFxyXFxuICAgIGNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgb3BhY2l0eTogMTtcXHJcXG59XFxyXFxuXFxyXFxuLmxlYWRlcmJvYXJkLWRpdiB7XFxyXFxuICAgIHBvc2l0aW9uOiBmaXhlZDtcXHJcXG4gICAgbGVmdDogY2FsYygxMDAlIC0gMjk5cHgpO1xcclxcbiAgICB0cmFuc2l0aW9uOiBsZWZ0IDAuMnMgbGluZWFyLCBvcGFjaXR5IDAuMnMgbGluZWFyO1xcclxcbiAgICBvcGFjaXR5OiAxO1xcclxcbiAgICB0b3A6IC0xcHg7XFxyXFxuICAgIHdpZHRoOiAzMDBweDtcXHJcXG4gICAgaGVpZ2h0OiAxMDB2aDtcXHJcXG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDAsIDAsIDAsIDApLCByZ2JhKDAsIDAsIDAsIDAuNCkpO1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xcclxcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbiAgICBwYWRkaW5nOiAwcHg7XFxyXFxuICAgIGNvbG9yOiB3aGl0ZTtcXHJcXG4gICAgb3ZlcmZsb3cteTogYXV0bztcXHJcXG4gICAgb3ZlcmZsb3cteDogaGlkZGVuO1xcclxcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gICAgZm9udC1mYW1pbHk6ICdJbnRlci1UaGljaycsIEludGVyO1xcclxcbn1cXHJcXG5cXHJcXG4uaGlkZSB7XFxyXFxuICAgIGxlZnQ6IDE2MDBweCAhaW1wb3J0YW50O1xcclxcbiAgICBvcGFjaXR5OiAwO1xcclxcbn1cXHJcXG5cXHJcXG4ubGVhZGVyYm9hcmQtZGl2Ojotd2Via2l0LXNjcm9sbGJhciB7XFxyXFxuICAgIHdpZHRoOiAxMHB4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcXHJcXG59XFxyXFxuXFxyXFxuLmxlYWRlcmJvYXJkLWRpdjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcXHJcXG59XFxyXFxuXFxyXFxuLnJhaW5ib3cge1xcclxcbiAgICBhbmltYXRpb246IGNvbG9yUm90YXRlIDRzIGxpbmVhciAwcyBpbmZpbml0ZTtcXHJcXG59XFxyXFxuXFxyXFxuQGtleWZyYW1lcyBjb2xvclJvdGF0ZSB7XFxyXFxuICAgIDAlIHtcXHJcXG4gICAgICAgIGNvbG9yOiBoc2woMTgwLCAxMDAlLCA1MCUpO1xcclxcbiAgICB9XFxyXFxuICAgIDUwJSB7XFxyXFxuICAgICAgICBjb2xvcjogaHNsKDIxNiwgMTAwJSwgNTAlKTtcXHJcXG4gICAgfVxcclxcbiAgICAxMDAlIHtcXHJcXG4gICAgICAgIGNvbG9yOiBoc2woMTgwLCAxMDAlLCA1MCUpO1xcclxcbiAgICB9XFxyXFxufVxcclxcblxcclxcbi5ndWVzdCB7XFxyXFxuICAgIG9wYWNpdHk6IDAuODtcXHJcXG59XFxyXFxuXFxyXFxuLmNoYXQtZGl2Ojotd2Via2l0LXNjcm9sbGJhciB7XFxyXFxuICAgIHdpZHRoOiAxMHB4O1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNCk7XFxyXFxufVxcclxcblxcclxcbi5jaGF0LWRpdjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOCk7XFxyXFxufVxcclxcblxcclxcbi5jaGF0LWRpdiB7XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gICAgbGVmdDogLTFweDtcXHJcXG4gICAgdG9wOiAtMXB4O1xcclxcbiAgICB3aWR0aDogMzc1cHg7XFxyXFxuICAgIGhlaWdodDogMjUxcHg7XFxyXFxuICAgIGZpbHRlcjogbm9uZSAhaW1wb3J0YW50O1xcclxcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDE0MSwgMTQxLCAxNDEsIDAuMjA1KTtcXHJcXG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDAsIDAsIDAsIDAuNCksIHJnYmEoMCwgMCwgMCwgMCkpO1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XFxyXFxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xcclxcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xcclxcbiAgICBwYWRkaW5nOiAycHg7XFxyXFxuICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcXHJcXG4gICAgLyogXFx0d29yZC1icmVhazogYnJlYWstYWxsOyAqL1xcclxcbiAgICBmb250LWZhbWlseTogSW50ZXItVGhpY2ssIEludGVyO1xcclxcblxcclxcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4xcyBsaW5lYXIsIHBhZGRpbmcgMC4xcyBsaW5lYXI7XFxyXFxuICAgIC8qXFxyXFxuICAgIC8qYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHBzOi8vaTEuc25kY2RuLmNvbS9hcnR3b3Jrcy1VaWk4U01Kdk5QeHk4ZVBBLXJvbUJvUS10NTAweDUwMC5qcGcpOyovXFxyXFxuICAgIC8qICAgIG9wYWNpdHk6IDAuNzsgKi9cXHJcXG59XFxyXFxuXFxyXFxuLmxiLWdyb3VwIHtcXHJcXG4gICAgLyogYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOyAqL1xcclxcbiAgICAvKmJhY2tncm91bmQ6IHJnYig1NSwgNTUsIDU1KTsqL1xcclxcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXHJcXG4gICAgcGFkZGluZzogNXB4O1xcclxcbiAgICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xcclxcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbiAgICBtYXJnaW46IDBweDtcXHJcXG4gICAgLyptaW4td2lkdGg6IDE1MHB4OyovXFxyXFxuICAgIHdpZHRoOiAzMDBweDtcXHJcXG59XFxyXFxuXFxyXFxuXFxyXFxuLmxiLW5hbWUge1xcclxcbiAgICAvKiBjb2xvcjogcmdiKDQ3LCAyNTAsIDIxMyk7ICovXFxyXFxuICAgIC8qIGZpbHRlcjogc2F0dXJhdGUoMTUwJSk7ICovXFxyXFxuICAgIGZvbnQtc2l6ZTogMXJlbTtcXHJcXG59XFxyXFxuXFxyXFxuLmxiLXBsYXllcnMge1xcclxcbiAgICBtYXJnaW46IDVweDtcXHJcXG4gICAgZm9udC1zaXplOiAwLjlyZW07XFxyXFxuICAgIC8qIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xMik7ICovXFxyXFxuICAgIC8qIGJhY2tncm91bmQ6IHJnYmEoNzcsIDc3LCA3NywgMC43KTsgKi9cXHJcXG4gICAgZGlzcGxheTogZmxleDtcXHJcXG4gICAganVzdGlmeS1jb250ZW50OiBzdGFydDtcXHJcXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG59XFxyXFxuXFxyXFxuLmxiLXBsYXllcnMgZGl2IHtcXHJcXG4gICAgbWFyZ2luOiAxLjVweDtcXHJcXG5cXHRjdXJzb3I6IHBvaW50ZXI7XFxyXFxuXFx0YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxyXFxuXFx0cGFkZGluZzogMHB4O1xcclxcblxcdHRyYW5zaXRpb246IGFsbCAwLjFzIGxpbmVhciwgcGFkZGluZyAwLjFzIGxpbmVhcjtcXHJcXG5cXHR3aWR0aDogMTAwJTtcXHJcXG5cXHRkaXNwbGF5OiBmbGV4O1xcclxcblxcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xcclxcblxcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxufVxcclxcbi5sYi1wbGF5ZXJzIGRpdjpob3ZlciB7XFxyXFxuXFx0YmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpO1xcclxcblxcdHBhZGRpbmc6IDZweDtcXHJcXG59XFxyXFxuXFxyXFxuLmhpZGVMQiB7XFxyXFxuICAgIGxlZnQ6IDEwMCUgIWltcG9ydGFudDtcXHJcXG4gICAgb3BhY2l0eTogMDtcXHJcXG59XFxyXFxuXFxyXFxuLmhpZGVDaGF0IHtcXHJcXG4gICAgbGVmdDogLTE3NXB4ICFpbXBvcnRhbnQ7XFxyXFxuICAgIG9wYWNpdHk6IDA7IFxcclxcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///674\n')},314:module=>{eval('\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = "";\n      var needLayer = typeof item[5] !== "undefined";\n      if (item[4]) {\n        content += "@supports (".concat(item[4], ") {");\n      }\n      if (item[2]) {\n        content += "@media ".concat(item[2], " {");\n      }\n      if (needLayer) {\n        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += "}";\n      }\n      if (item[2]) {\n        content += "}";\n      }\n      if (item[4]) {\n        content += "}";\n      }\n      return content;\n    }).join("");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === "string") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== "undefined") {\n        if (typeof item[5] === "undefined") {\n          item[5] = layer;\n        } else {\n          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = "".concat(supports);\n        } else {\n          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzE0LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanM/MjRmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTtcblxuICAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gXCJcIjtcbiAgICAgIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2YgaXRlbVs1XSAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKTtcbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcblxuICAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICBsaXN0LmkgPSBmdW5jdGlvbiBpKG1vZHVsZXMsIG1lZGlhLCBkZWR1cGUsIHN1cHBvcnRzLCBsYXllcikge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgdW5kZWZpbmVkXV07XG4gICAgfVxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXNba11bMF07XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBtb2R1bGVzLmxlbmd0aDsgX2srKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfa10pO1xuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBsYXllciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1bNV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtZWRpYSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3VwcG9ydHMpIHtcbiAgICAgICAgaWYgKCFpdGVtWzRdKSB7XG4gICAgICAgICAgaXRlbVs0XSA9IFwiXCIuY29uY2F0KHN1cHBvcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNF0gPSBzdXBwb3J0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGxpc3Q7XG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///314\n')},354:module=>{eval('\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === "function") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);\n    var sourceMapping = "/*# ".concat(data, " */");\n    return [content].concat([sourceMapping]).join("\\n");\n  }\n  return [content].join("\\n");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU0LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzP2FmMTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdO1xuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///354\n')},72:module=>{eval('\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = "".concat(id, " ").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzIuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcz8yZGJhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5ET00gPSBbXTtcbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRE9NLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRE9NW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXhCeUlkZW50aWZpZXIgPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM10sXG4gICAgICBzdXBwb3J0czogaXRlbVs0XSxcbiAgICAgIGxheWVyOiBpdGVtWzVdXG4gICAgfTtcbiAgICBpZiAoaW5kZXhCeUlkZW50aWZpZXIgIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHVwZGF0ZXIgPSBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMuYnlJbmRleCA9IGk7XG4gICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoaSwgMCwge1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiB1cGRhdGVyLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5mdW5jdGlvbiBhZGRFbGVtZW50U3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBhcGkgPSBvcHRpb25zLmRvbUFQSShvcHRpb25zKTtcbiAgYXBpLnVwZGF0ZShvYmopO1xuICB2YXIgdXBkYXRlciA9IGZ1bmN0aW9uIHVwZGF0ZXIobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCAmJiBuZXdPYmouc3VwcG9ydHMgPT09IG9iai5zdXBwb3J0cyAmJiBuZXdPYmoubGF5ZXIgPT09IG9iai5sYXllcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBhcGkudXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwaS5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiB1cGRhdGVyO1xufVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG4gICAgICBpZiAoc3R5bGVzSW5ET01bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRE9NW19pbmRleF0udXBkYXRlcigpO1xuICAgICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///72\n')},659:module=>{eval('\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === "undefined") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error("Couldn\'t find a style target. This probably means that the value for the \'insert\' parameter is invalid.");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjU5LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanM/YjIxNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIG1lbW8gPSB7fTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xuXG4gICAgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcbiAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICB9XG4gIHJldHVybiBtZW1vW3RhcmdldF07XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gaW5zZXJ0QnlTZWxlY3RvcihpbnNlcnQsIHN0eWxlKSB7XG4gIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQoaW5zZXJ0KTtcbiAgaWYgKCF0YXJnZXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICB9XG4gIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydEJ5U2VsZWN0b3I7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///659\n')},540:module=>{eval('\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement("style");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQwLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qcz9kZTZjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///540\n')},56:(module,__unused_webpack_exports,__webpack_require__)=>{eval('\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce =  true ? __webpack_require__.nc : 0;\n  if (nonce) {\n    styleElement.setAttribute("nonce", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTYuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzP2RkY2UiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///56\n')},825:module=>{eval('\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = "";\n  if (obj.supports) {\n    css += "@supports (".concat(obj.supports, ") {");\n  }\n  if (obj.media) {\n    css += "@media ".concat(obj.media, " {");\n  }\n  var needLayer = typeof obj.layer !== "undefined";\n  if (needLayer) {\n    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += "}";\n  }\n  if (obj.media) {\n    css += "}";\n  }\n  if (obj.supports) {\n    css += "}";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== "undefined") {\n    css += "\\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === "undefined") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODI1LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzP2U0NzkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKTtcbiAgfVxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuICBjc3MgKz0gb2JqLmNzcztcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfVxuXG4gIC8vIEZvciBvbGQgSUVcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiB7XG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHt9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgIH07XG4gIH1cbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///825\n')},113:module=>{eval("\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanM/MWRkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///113\n")},608:(__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval("\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\nvar injectStylesIntoStyleTag = __webpack_require__(72);\nvar injectStylesIntoStyleTag_default = /*#__PURE__*/__webpack_require__.n(injectStylesIntoStyleTag);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleDomAPI.js\nvar styleDomAPI = __webpack_require__(825);\nvar styleDomAPI_default = /*#__PURE__*/__webpack_require__.n(styleDomAPI);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertBySelector.js\nvar insertBySelector = __webpack_require__(659);\nvar insertBySelector_default = /*#__PURE__*/__webpack_require__.n(insertBySelector);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\nvar setAttributesWithoutAttributes = __webpack_require__(56);\nvar setAttributesWithoutAttributes_default = /*#__PURE__*/__webpack_require__.n(setAttributesWithoutAttributes);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertStyleElement.js\nvar insertStyleElement = __webpack_require__(540);\nvar insertStyleElement_default = /*#__PURE__*/__webpack_require__.n(insertStyleElement);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleTagTransform.js\nvar styleTagTransform = __webpack_require__(113);\nvar styleTagTransform_default = /*#__PURE__*/__webpack_require__.n(styleTagTransform);\n// EXTERNAL MODULE: ./node_modules/css-loader/dist/cjs.js!./eXclient/style.css\nvar style = __webpack_require__(674);\n;// ./eXclient/style.css\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (styleTagTransform_default());\noptions.setAttributes = (setAttributesWithoutAttributes_default());\noptions.insert = insertBySelector_default().bind(null, \"head\");\noptions.domAPI = (styleDomAPI_default());\noptions.insertStyleElement = (insertStyleElement_default());\n\nvar update = injectStylesIntoStyleTag_default()(style/* default */.A, options);\n\n\n\n\n       /* harmony default export */ const eXclient_style = (style/* default */.A && style/* default */.A.locals ? style/* default */.A.locals : undefined);\n\n// EXTERNAL MODULE: ./shared/shared.js\nvar shared = __webpack_require__(763);\n;// ./eXclient/render.js\n\r\n\r\nlet render_canvas = window.canvas = document.getElementById('canvas');\r\nlet render_ctx = window.ctx = render_canvas.getContext('2d');\r\n\r\nconst camera = shared/* default */.A.camera = {\r\n    x: 0, y: 0, scale: 1,\r\n    numControlledBy: 0,\r\n    angle: 0,\r\n    /*3d*/\r\n    z: 1,\r\n    basis1: [1, 0, 0],\r\n    basis2: [0, 1, 0],\r\n    normal: [0, 0, 1]\r\n}\r\n\r\nshared/* default */.A.defaultColors = {\r\n    tile: '#1f2229',// the stroke and outside of arena\r\n    background: '#323645',// the fillcolor\r\n    vignette: {\r\n        inner: {size:0.1,r:0,g:0,b:0,opacity:0},\r\n        outer: {size:0.6,r:0,g:0,b:0,opacity:1},\r\n        innerInterp: {size:0.1,r:0,g:0,b:0,opacity:0},\r\n        outerInterp: {size:0.6,r:0,g:0,b:0,opacity:1},\r\n        holeFunctions: []\r\n    }\r\n}\r\n\r\nshared/* default */.A.colors = {\r\n    tile: shared/* default */.A.defaultColors.tile,\r\n    background: shared/* default */.A.defaultColors.background,\r\n    vignette: {\r\n        inner: {size:0.1,r:0,g:0,b:0,opacity:0},\r\n        outer: {size:0.6,r:0,g:0,b:0,opacity:1},\r\n        innerInterp: {size:0.1,r:0,g:0,b:0,opacity:0},\r\n        outerInterp: {size:0.6,r:0,g:0,b:0,opacity:1},\r\n        holeFunctions: []\r\n    }\r\n}\r\n\r\nshared/* default */.A.selfId = undefined;\r\nshared/* default */.A.tileSize = 100;\r\nshared/* default */.A.renderDebug = false;\r\nshared/* default */.A.distortionsActive = false;\r\nshared/* default */.A.skullImgLoaded = false;\r\nshared/* default */.A.skullImg = undefined;\r\nshared/* default */.A.renderTimer = false;\r\nconst fullscreen = {\r\n    ratio: 9 / 16,\r\n    zoom: 1800,\r\n}\r\n// const width = 1600;\r\n// const height = 900;\r\n\r\n// shared.tileImage = undefined;\r\n// shared.tileImageColors = {\r\n//     tile: '', background: ''\r\n// }\r\n\r\n// function generateTileImage({tile, background}) {\r\n//     const canv = document.createElement('canvas');\r\n//     const w = canvas.w + ctx.lineWidth + shared.tileSize;\r\n//     const h = canvas.h + ctx.lineWidth + shared.tileSize;\r\n    \r\n//     const cx = canv.getContext('2d');\r\n//     canv.width = w;\r\n//     canv.height = h;\r\n//     cx.imageSmoothingEnabled = false;\r\n\r\n//     // tile background\r\n//     cx.globalAlpha = 0.75;\r\n//     cx.strokeStyle = tile;\r\n//     cx.fillStyle = background;\r\n\r\n//     cx.lineWidth = 3;\r\n//     for (let x = -camera.x%shared.tileSize; x < canvas.w + ctx.lineWidth + shared.tileSize; x += shared.tileSize) {\r\n//         ctx.beginPath();\r\n//         ctx.moveTo(x, 0);\r\n//         ctx.lineTo(x, canvas.h);\r\n//         ctx.stroke();\r\n//         ctx.closePath();\r\n//     }\r\n\r\n//     for (let y = -camera.y%shared.tileSize; y < canvas.h + ctx.lineWidth + shared.tileSize; y += shared.tileSize) {\r\n//         ctx.beginPath();\r\n//         ctx.moveTo(0, y);\r\n//         ctx.lineTo(canvas.w, y);\r\n//         ctx.stroke();\r\n//         ctx.closePath();//\r\n//     }\r\n\r\n//     cx.globalAlpha = 1;\r\n//     return canv;\r\n// }\r\n\r\n// let tileImg;\r\n// function createTileImg(scale, thicc) {\r\n//     const shared.tileSize = 100;\r\n//     // const size =\r\n//     //     Math.round(Math.max(canvas.width, canvas.height) / shared.tileSize) *\r\n//     //         shared.tileSize +\r\n//     //     200;\r\n//     const canv = document.createElement('canvas');\r\n//     if(scale < 0.1){\r\n//         return canv;\r\n//     }\r\n    \r\n//     const w = canvas.width/scale + shared.tileSize;\r\n//     const h = canvas.height/scale + shared.tileSize;\r\n    \r\n//     const cx = canv.getContext('2d');\r\n//     canv.width = w//size / scale;\r\n//     canv.height = h//size / scale;\r\n//     cx.imageSmoothingEnabled = false;\r\n\r\n//     // tile background\r\n//     cx.globalAlpha = 0.75;\r\n//     cx.strokeStyle = colors.tile//colors.background;\r\n//     cx.lineWidth = thicc ? 4 : 2;\r\n//     for (let y = 0; y <= h; y += shared.tileSize) {\r\n//         for (let x = 0; x <= w; x += shared.tileSize) {\r\n//             cx.strokeRect(x, y, shared.tileSize, shared.tileSize);\r\n//         }\r\n//     }\r\n//     cx.globalAlpha = 1;\r\n//     return canv;\r\n// }\r\n\r\nlet opaqIndex, len, lastX, lastY, lastR, lastPlayerRadius, diagonalStartOffset, diagonalDist, overRenderTiles = false, lastGA, j = false, lastNLDX = 0, lastNLDY = 0, cullingMinX=0, cullingMaxX=0, cullingMinY=0, cullingMaxY=0, canvSum=0;\r\nshared/* default */.A.render = (os=shared/* default */.A.obstacles, cols=shared/* default */.A.colors, players=shared/* default */.A.players) => {\r\n    overRenderTiles = false;\r\n    if(shared/* default */.A.selfId !== undefined){\r\n        const me = players[shared/* default */.A.selfId];\r\n\r\n        if(camera.numControlledBy === 0){\r\n            camera.x = me.pos.x;\r\n            camera.y = me.pos.y;\r\n            camera.angle = 0;\r\n            if(me.ship === true){\r\n                camera.angle = Math.PI/2+me.shipAngle;\r\n                overRenderTiles = true;\r\n            }\r\n        }\r\n\r\n        if(camera.angle !== 0){\r\n            render_ctx.translate(render_canvas.w/2, render_canvas.h/2);\r\n            render_ctx.rotate(-camera.angle);\r\n            render_ctx.translate(-render_canvas.w/2, -render_canvas.h/2);\r\n        }\r\n    }\r\n\r\n    // tile background\r\n    // ctx.strokeStyle = cols.tile;\r\n    // ctx.fillStyle = cols.background;\r\n\r\n    // if(tileImg === undefined){\r\n    //     tileImg = createTileImg(1);\r\n    // }\r\n\r\n    // const img = tileImg;\r\n    //ctx.translate(pos.x , pos.y + (gridOffset.y % 50));\r\n    // ctx.drawImage(img, (canvas.w/2-camera.x)%shared.tileSize, (canvas.h/2-camera.y)%shared.tileSize);\r\n    \r\n\r\n    if(overRenderTiles === true){\r\n        render_ctx.fillStyle = cols.tile;\r\n\r\n        canvSum = (render_canvas.w + render_canvas.h)/2;\r\n        render_ctx.fillRect(-canvSum,-canvSum,4*canvSum, 4*canvSum);\r\n\r\n        cullingMinX = camera.x-canvSum;\r\n        cullingMaxX = camera.x+canvSum;\r\n        cullingMinY = camera.y-canvSum;\r\n        cullingMaxY = camera.y+canvSum;\r\n\r\n        render_ctx.fillStyle = cols.background;\r\n        // add 1 to all dimensions so that we don't get gap artifacts on the edge of the arena\r\n        render_ctx.fillRect(-(camera.x-render_canvas.w/2)+1, -(camera.y-render_canvas.h/2)+1, shared/* default */.A.mapDimensions.x-2, shared/* default */.A.mapDimensions.y-2);\r\n\r\n        render_ctx.globalAlpha = 0.75;\r\n        render_ctx.lineWidth = 4.8;\r\n        render_ctx.strokeStyle = cols.tile;\r\n\r\n        // accounting for rotation and such\r\n        diagonalDist = Math.sqrt(render_canvas.w ** 2 + render_canvas.h ** 2);\r\n        diagonalStartOffset = (diagonalDist/2) % shared/* default */.A.tileSize - shared/* default */.A.tileSize - diagonalDist / 2;\r\n        for (let x = (render_canvas.w/2-camera.x)%shared/* default */.A.tileSize + diagonalStartOffset; x < diagonalDist + render_ctx.lineWidth + shared/* default */.A.tileSize; x += shared/* default */.A.tileSize) {\r\n            render_ctx.beginPath();\r\n            render_ctx.moveTo(x, diagonalStartOffset);\r\n            render_ctx.lineTo(x, render_canvas.h - diagonalStartOffset);\r\n            render_ctx.stroke();\r\n            render_ctx.closePath();\r\n        }\r\n    \r\n        for (let y = (render_canvas.h/2-camera.y)%shared/* default */.A.tileSize + diagonalStartOffset; y < diagonalDist + render_ctx.lineWidth + shared/* default */.A.tileSize; y += shared/* default */.A.tileSize) {\r\n            render_ctx.beginPath();\r\n            render_ctx.moveTo(diagonalStartOffset, y);\r\n            render_ctx.lineTo(render_canvas.w - diagonalStartOffset, y);\r\n            render_ctx.stroke();\r\n            render_ctx.closePath();\r\n        }\r\n    } else {\r\n        render_ctx.fillStyle = cols.tile;\r\n        render_ctx.fillRect(0,0,render_canvas.w, render_canvas.h);\r\n\r\n        cullingMinX = camera.x-render_canvas.w/2;\r\n        cullingMaxX = camera.x+render_canvas.w/2;\r\n        cullingMinY = camera.y-render_canvas.h/2;\r\n        cullingMaxY = camera.y+render_canvas.h/2;\r\n\r\n        render_ctx.fillStyle = cols.background;\r\n        // add 1 to all dimensions so that we don't get gap artifacts on the edge of the arena\r\n        render_ctx.fillRect(-(camera.x-render_canvas.w/2)+1, -(camera.y-render_canvas.h/2)+1, shared/* default */.A.mapDimensions.x-2, shared/* default */.A.mapDimensions.y-2);\r\n\r\n        render_ctx.globalAlpha = 0.75;\r\n        render_ctx.lineWidth = 4.8;\r\n        render_ctx.strokeStyle = cols.tile;\r\n\r\n        for (let x = (render_canvas.w/2-camera.x)%shared/* default */.A.tileSize; x < render_canvas.w + render_ctx.lineWidth + shared/* default */.A.tileSize; x += shared/* default */.A.tileSize) {\r\n            render_ctx.beginPath();\r\n            render_ctx.moveTo(x, 0);\r\n            render_ctx.lineTo(x, render_canvas.h);\r\n            render_ctx.stroke();\r\n            render_ctx.closePath();\r\n        }\r\n    \r\n        for (let y = (render_canvas.h/2-camera.y)%shared/* default */.A.tileSize; y < render_canvas.h + render_ctx.lineWidth + shared/* default */.A.tileSize; y += shared/* default */.A.tileSize) {\r\n            render_ctx.beginPath();\r\n            render_ctx.moveTo(0, y);\r\n            render_ctx.lineTo(render_canvas.w, y);\r\n            render_ctx.stroke();\r\n            render_ctx.closePath();\r\n        }\r\n    }\r\n\r\n    render_ctx.globalAlpha = 1;\r\n\r\n    // TODO: test if it's faster to draw tiles or image\r\n    // if(shared.tileImageColors.tile !== shared.colors.tile || shared.tileImageColors.background !== shared.colors.background){\r\n    //     // TODO: optimize even further with just generating lines and using clearRect and having another canvas in the background with the solid bg color fill\r\n    //     shared.tileImage = generateTileImage(shared.colors);\r\n    // }\r\n\r\n    // ctx.drawImage(shared.tileImage, -camera.x % shared.tileSize, -camera.y % shared.tileSize);\r\n    render_ctx.translate(-(camera.x-render_canvas.w/2), -(camera.y-render_canvas.h/2));\r\n\r\n    // render obstacles\r\n    renderObstacles(os, cols);\r\n\r\n    // render players\r\n    for(let i = 0; i < players.length; i++){\r\n        const player = players[i];\r\n        if(player === undefined) continue;\r\n        if(player.cr !== undefined) {player.cr(player); continue;}\r\n        render_ctx.fillStyle = player.dead === true ? 'red' : 'black';\r\n\r\n        lastR = player.sat.r;\r\n        player.sat.r = Math.abs(player.renderRadius);\r\n\r\n        lastX = player.pos.x;\r\n        lastY = player.pos.y;\r\n        if(i !== shared/* default */.A.selfId){\r\n            player.pos.x = player.interpX;\r\n            player.pos.y = player.interpY;\r\n        }\r\n        \r\n        render_ctx.beginPath();\r\n        player.renderShape(player);\r\n        \r\n        if(player.renderRadius >= 0) render_ctx.fill();\r\n        else {\r\n            // negative radius\r\n            const diameter = 2 * Math.PI * Math.abs(player.dead === true ? player.sat.r : lastPlayerRadius);\r\n            const timesAround = Math.max(3, Math.floor(diameter / 42));\r\n            lastNLDX = lastNLDX * 0.96 + 2/7*diameter/timesAround * 0.04;\r\n            lastNLDY = lastNLDY * 0.96 + 5/7*diameter/timesAround * 0.04;\r\n            render_ctx.setLineDash([lastNLDX, lastNLDY]);\r\n            render_ctx.lineDashOffset = (-shared/* default */.A.frames / 1.56) % diameter;\r\n            render_ctx.strokeStyle = render_ctx.fillStyle;\r\n            render_ctx.lineWidth = 8;\r\n            render_ctx.lineCap = 'round';\r\n            render_ctx.stroke();\r\n            render_ctx.setLineDash([]);\r\n        }\r\n        if(player.god === true) {render_ctx.strokeStyle = 'purple'; render_ctx.lineWidth = 10; render_ctx.stroke(); }\r\n        if (player.ship === true) {\r\n            render_ctx.strokeStyle = '#0033ed';\r\n            render_ctx.lineWidth = 10;\r\n            render_ctx.lineCap = 'round';\r\n            render_ctx.moveTo(player.pos.x,player.pos.y);\r\n            render_ctx.lineTo(player.pos.x + Math.cos(player.shipAngle) * player.sat.r, player.pos.y + Math.sin(player.shipAngle) * player.sat.r);\r\n            render_ctx.stroke();\r\n        }\r\n        if(player.grapple === true){\r\n            render_ctx.beginPath();\r\n            render_ctx.strokeStyle = '#969696';\r\n            render_ctx.globalAlpha = 0.75;\r\n            render_ctx.lineWidth = 12;\r\n            render_ctx.arc(player.pos.x, player.pos.y, Math.abs(player.renderRadius) / 2, 0, Math.PI * 2);\r\n\r\n            if(player.grappleX === -1 && player.id === shared/* default */.A.selfId && shared/* default */.A.input.action1 === true){\r\n                render_ctx.strokeStyle = 'white';\r\n                render_ctx.stroke();\r\n                render_ctx.closePath();\r\n\r\n                // failed grapple - big circle\r\n                render_ctx.beginPath();\r\n                render_ctx.globalAlpha = 0.2;\r\n                render_ctx.arc(player.pos.x, player.pos.y, player.grappleRange, 0, Math.PI * 2);\r\n                render_ctx.stroke();\r\n                render_ctx.closePath();\r\n            } else if(player.grappleX !== -1){\r\n                render_ctx.strokeStyle = 'white';\r\n                render_ctx.stroke();\r\n                render_ctx.closePath();\r\n\r\n                // successful grapple - line to grap pt\r\n                render_ctx.beginPath();\r\n                render_ctx.moveTo(player.pos.x, player.pos.y);\r\n                render_ctx.lineTo(player.grappleX, player.grappleY);\r\n                render_ctx.stroke();\r\n                render_ctx.closePath();\r\n\r\n                // and circle at the point\r\n                render_ctx.lineWidth = 10;\r\n                render_ctx.beginPath();\r\n                render_ctx.arc(player.grappleX, player.grappleY, 10, 0, Math.PI * 2);\r\n                render_ctx.stroke();\r\n                render_ctx.closePath();\r\n            } else {\r\n                render_ctx.stroke();\r\n                render_ctx.closePath();\r\n            }\r\n            render_ctx.globalAlpha = 1;\r\n        }\r\n        if(player.deathTimer === true){\r\n            render_ctx.fillStyle = 'red';\r\n            render_ctx.font = '60px Inter';\r\n            render_ctx.textAlign = 'center';\r\n            render_ctx.textBaseline = 'middle';\r\n            render_ctx.shadowBlur = 2;\r\n            render_ctx.shadowColor = 'red';\r\n            render_ctx.fillText(~~(player.deathTime / 60), player.pos.x, player.pos.y);\r\n            render_ctx.shadowBlur = 0;\r\n        }\r\n        render_ctx.closePath();\r\n\r\n        render_ctx.fillStyle = 'white';\r\n        render_ctx.font = `${15 * ((Math.abs(player.renderRadius) + 0.5) / 25)}px Inter`;\r\n        render_ctx.textAlign = 'center';\r\n        render_ctx.textBaseline = 'middle';\r\n        render_ctx.fillText(\r\n            player.name,\r\n            player.pos.x,\r\n            player.pos.y + player.renderRadius * 4/3 + 3\r\n        );\r\n\r\n        player.pos.x = lastX;\r\n        player.pos.y = lastY;\r\n        player.sat.r = lastR;\r\n    }\r\n\r\n    // debug\r\n    if(shared/* default */.A.renderDebug === true){\r\n        render_ctx.fillStyle = 'red';\r\n        render_ctx.strokeStyle = 'red';\r\n        render_ctx.lineWidth = 2;\r\n        for(let i = 0; i < os.length; i++){\r\n            if(os[i].topLeft.x > cullingMaxX || os[i].topLeft.x + os[i].dimensions.x < cullingMinX || os[i].topLeft.y > cullingMaxY || os[i].topLeft.y + os[i].dimensions.y < cullingMinY) continue;\r\n            render_ctx.beginPath();\r\n            render_ctx.arc(os[i].pos.x, os[i].pos.y, 10, 0, Math.PI * 2);\r\n            render_ctx.fill();\r\n            render_ctx.closePath();\r\n            render_ctx.strokeRect(os[i].topLeft.x, os[i].topLeft.y, os[i].dimensions.x, os[i].dimensions.y);\r\n        }\r\n\r\n        render_ctx.fillStyle = 'white';\r\n        render_ctx.textAlign = 'center';\r\n        render_ctx.textBaseline = 'middle';\r\n\r\n        for(let i = 0; i < players.length; i++){\r\n            const player = players[i];\r\n            if(player === undefined) continue;\r\n            render_ctx.font = `${1.2 * 15 * ((Math.abs(player.renderRadius) + 0.5) / 25)}px Inter`;\r\n            render_ctx.fillText(\r\n                `(${Math.round(player.pos.x/50)*50},${Math.round(player.pos.y/50)*50})`,\r\n                player.pos.x,\r\n                player.pos.y - player.renderRadius * 4/3 - 3 * 1.5\r\n            );\r\n        }\r\n    }\r\n\r\n    render_ctx.translate(camera.x-render_canvas.w/2, camera.y-render_canvas.h/2);\r\n\r\n    if(camera.angle !== 0){\r\n        render_ctx.translate(render_canvas.w/2, render_canvas.h/2);\r\n        render_ctx.rotate(camera.angle);\r\n        render_ctx.translate(-render_canvas.w/2, -render_canvas.h/2);\r\n    }\r\n\r\n    // vignette\r\n    const v = shared/* default */.A.colors.vignette;\r\n    render_ctx.beginPath();\r\n    const grd = render_ctx.createRadialGradient(\r\n        render_canvas.w / 2,\r\n        render_canvas.h / 2,\r\n        (Math.max(render_canvas.w,render_canvas.h) * v.innerInterp.size),\r\n        render_canvas.w / 2,\r\n        render_canvas.h / 2,\r\n        (Math.max(render_canvas.w,render_canvas.h) * v.outerInterp.size)\r\n    );\r\n\r\n    grd.addColorStop(\r\n        0,\r\n        `rgba(${v.innerInterp.r},${v.innerInterp.g},${v.innerInterp.b},${v.innerInterp.opacity})`\r\n    );\r\n    grd.addColorStop(\r\n        1,\r\n        `rgba(${v.outerInterp.r},${v.outerInterp.g},${v.outerInterp.b},${v.outerInterp.opacity})`\r\n    );\r\n    render_ctx.fillStyle = grd;\r\n    render_ctx.rect(0,0,render_canvas.w,render_canvas.h);\r\n    if(v.holeFunctions.length !== 0){\r\n        if(shared/* default */.A.selfId !== undefined){\r\n            const me = players[shared/* default */.A.selfId];\r\n            if(me.ship === true){\r\n                render_ctx.translate(render_canvas.w/2, render_canvas.h/2);\r\n                render_ctx.rotate(-me.shipAngle-Math.PI/2);\r\n                render_ctx.translate(-render_canvas.w/2, -render_canvas.h/2);\r\n            }\r\n        }\r\n        render_ctx.translate(render_canvas.w/2-camera.x, render_canvas.h/2-camera.y);\r\n        for(let i = 0; i < v.holeFunctions.length; i++){\r\n            v.holeFunctions[i]();\r\n        }\r\n        render_ctx.translate(camera.x-render_canvas.w/2, camera.y-render_canvas.h/2);\r\n        if(shared/* default */.A.selfId !== undefined){\r\n            const me = players[shared/* default */.A.selfId];\r\n            if(me.ship === true){\r\n                render_ctx.translate(render_canvas.w/2, render_canvas.h/2);\r\n                render_ctx.rotate(me.shipAngle+Math.PI/2);\r\n                render_ctx.translate(-render_canvas.w/2, -render_canvas.h/2);\r\n            }\r\n        }\r\n    }\r\n    render_ctx.fill('evenodd');\r\n    render_ctx.closePath();\r\n\r\n    shared/* default */.A.colors.vignette.inner = {size:0.1,r:0,g:0,b:0,opacity:0};\r\n    shared/* default */.A.colors.vignette.outer = {size:0.6,r:0,g:0,b:0,opacity:1};\r\n    shared/* default */.A.colors.vignette.holeFunctions.length=0;\r\n    // shared.colors = {\r\n    //     tile: shared.defaultColors.tile,\r\n    //     background: shared.defaultColors.background,\r\n    //     vignette: {\r\n    //         inner: {size:0.1,r:0,g:0,b:0,opacity:0},\r\n    //         outer: {size:0.6,r:0,g:0,b:0,opacity:1},\r\n    //         innerInterp: {size:0.1,r:0,g:0,b:0,opacity:0},\r\n    //         outerInterp: {size:0.6,r:0,g:0,b:0,opacity:1}\r\n    //     }\r\n    // }\r\n\r\n    if(shared/* default */.A.disconnected === true){\r\n        let txt = 'Disconnected From Server.'.split('');\r\n        for(let i = 0; i < txt.length; i++) {if(Math.random() < 0.03) txt[i] = '#';}\r\n        txt = txt.join('');\r\n        render_ctx.font = '81px Inter';\r\n        render_ctx.fillStyle = '#00ff41';\r\n        render_ctx.textAlign = 'right';\r\n        render_ctx.textBaseline = 'bottom';\r\n        render_ctx.fillText(txt, render_canvas.w - 30, render_canvas.h - 50);\r\n        render_ctx.font = '28px Inter';\r\n        render_ctx.fillText('You may still play the current map but cannot win or leave.', render_canvas.w - 30, render_canvas.h - 18);\r\n    } else if(shared/* default */.A.renderTimer === true) renderTimerFn();\r\n\r\n    if(shared/* default */.A.distortionsActive === true) shared/* default */.A.renderGl();\r\n}\r\n\r\nshared/* default */.A.disableCulling = () => {\r\n    cullingMinX = cullingMinY = -Infinity;\r\n    cullingMaxX = cullingMaxY =  Infinity;\r\n}\r\n\r\nconst renderObstacles = shared/* default */.A.renderObstacles = (os, cols=shared/* default */.A.colors) => {\r\n    for(let i = 0; i < os.length; i++){\r\n        if(os[i].cr !== undefined) { os[i].cr(os[i]); continue; }\r\n\r\n        // culling\r\n        if(os[i].topLeft.x > cullingMaxX || os[i].topLeft.x + os[i].dimensions.x < cullingMinX || os[i].topLeft.y > cullingMaxY || os[i].topLeft.y + os[i].dimensions.y < cullingMinY) continue;\r\n\r\n        len = os[i].effect.length;\r\n        if(len === 1){\r\n            j = 0;\r\n            render_ctx.toFill = true;\r\n            render_ctx.toStroke = false;\r\n            render_ctx.lineWidth = 4; \r\n            render_ctx.beginPath();\r\n            os[i].renderShape(os[i]);\r\n            os[i].renderEffect[j](os[i]);\r\n            if(os[i].isText === true) renderTextSpecials(os[i], cols);\r\n            if(render_ctx.toFill === true) render_ctx.fill();\r\n            if(render_ctx.toStroke === true) render_ctx.stroke();\r\n            if(render_ctx.cleanUpFunction !== undefined) { render_ctx.cleanUpFunction(); render_ctx.cleanUpFunction = undefined; }\r\n            render_ctx.closePath();\r\n            render_ctx.globalAlpha = 1;\r\n        } else {\r\n            // so we want to fade between the effect renders. We render a previous one with 1 opacity and then raise the next one from 0-1 opacity, until the next one becomes the previous and the cycle repeats\r\n            os[i].renderEffectTimer += 1/128;\r\n            if(os[i].renderEffectTimer >= len) os[i].renderEffectTimer -= len;\r\n\r\n            opaqIndex = Math.floor(os[i].renderEffectTimer);\r\n            /*let fullIndex*/j = opaqIndex - 1;\r\n            if(/*fullIndex*/j === -1) /*fullIndex*/j = len-1;\r\n            // j = fullIndex;\r\n\r\n            // render full index\r\n            render_ctx.toFill = true;\r\n            render_ctx.toStroke = false;\r\n            render_ctx.lineWidth = 2;\r\n            render_ctx.beginPath();\r\n            os[i].renderShape(os[i]);\r\n            os[i].renderEffect[j](os[i]);\r\n            if(os[i].isText === true) renderTextSpecials(os[i], cols);\r\n            render_ctx.globalAlpha = 1;\r\n            if(render_ctx.toFill === true) render_ctx.fill();\r\n            if(render_ctx.toStroke === true) render_ctx.stroke();\r\n            if(render_ctx.cleanUpFunction !== undefined) { render_ctx.cleanUpFunction(); render_ctx.cleanUpFunction = undefined; }\r\n            render_ctx.closePath();\r\n\r\n            // render opaq index\r\n            j = opaqIndex;\r\n            render_ctx.toFill = true;\r\n            render_ctx.toStroke = false;\r\n            render_ctx.lineWidth = 2;\r\n            render_ctx.beginPath();\r\n            os[i].renderShape(os[i]);\r\n            os[i].renderEffect[j](os[i]);\r\n            if(os[i].isText === true) renderTextSpecials(os[i], cols);\r\n            render_ctx.globalAlpha = os[i].renderEffectTimer - opaqIndex;\r\n            if(render_ctx.toFill === true) render_ctx.fill();\r\n            if(render_ctx.toStroke === true) render_ctx.stroke();\r\n            if(render_ctx.cleanUpFunction !== undefined) { render_ctx.cleanUpFunction(); render_ctx.cleanUpFunction = undefined; }\r\n            render_ctx.closePath();\r\n            render_ctx.globalAlpha = 1;\r\n        }\r\n    }\r\n}\r\n\r\nfunction interpolate(start, end, t){\r\n    return (1-t) * start + t * end;\r\n}\r\n\r\nfunction renderTextSpecials(o, cols){\r\n    lastGA = render_ctx.globalAlpha;\r\n    render_ctx.textAlign = 'center';\r\n    render_ctx.textBaseline = 'middle';\r\n    render_ctx.font = `${o.fontSize}px Inter`;\r\n    render_ctx.translate(o.topLeft.x+o.dimensions.x/2, o.topLeft.y+o.dimensions.y/2);\r\n    if(o.rotation !== undefined) render_ctx.rotate(o.rotation);\r\n    if(render_ctx.globalAlpha < 0.5) render_ctx.globalAlpha = 0.5;\r\n    if(render_ctx.toFill === true) render_ctx.fillText(o.text, 0, 0);\r\n    if(render_ctx.toStroke === true) render_ctx.strokeText(o.text, 0, 0);\r\n    else if(render_ctx.toFill === false) {\r\n        render_ctx.globalAlpha = 1;\r\n        render_ctx.fillStyle = cols.tile;\r\n        render_ctx.fillText(o.text, 0, 0);\r\n    }\r\n    if(o.rotation !== undefined) render_ctx.rotate(-o.rotation);\r\n    render_ctx.translate(-o.topLeft.x-o.dimensions.x/2, -o.topLeft.y-o.dimensions.y/2);\r\n    render_ctx.globalAlpha = Math.min(0.5, lastGA);\r\n}\r\n\r\n// canvas resizing\r\nshared/* default */.A.resizeFns = [];\r\nconst gui = document.querySelector('.gui') ?? {style:{}};\r\nlet lastScale=1,w,h;\r\nif(shared/* default */.A.isEditor === undefined) shared/* default */.A.isEditor = false;\r\nshared/* default */.A.resize = () => {\r\n    if(shared/* default */.A.isEditor === true){\r\n        const dimensions = shared/* default */.A.left.getBoundingClientRect();\r\n        w = dimensions.width;\r\n        h = dimensions.height;\r\n    } else {\r\n        w = window.innerWidth;\r\n        h = window.innerHeight;\r\n    }\r\n    lastScale = shared/* default */.A.camera.scale;\r\n    shared/* default */.A.changeCameraScale(1);\r\n    const dpi = window.devicePixelRatio;\r\n    gui.style.width = render_canvas.style.width = Math.ceil(w) + 'px';\r\n    gui.style.height = render_canvas.style.height = Math.ceil(h) + 'px';\r\n    gui.width = render_canvas.width = Math.ceil(w) * dpi;\r\n    gui.height = render_canvas.height = Math.ceil(h) * dpi;\r\n    render_canvas.zoom = Math.max(0.1, Math.round((Math.max(render_canvas.height, render_canvas.width * fullscreen.ratio) / fullscreen.zoom * camera.scale) * 100) / 100);\r\n    // w and h are calced with zoom\r\n    render_canvas.w = render_canvas.width / render_canvas.zoom;\r\n    render_canvas.h = render_canvas.height / render_canvas.zoom;\r\n    render_ctx.scale(render_canvas.zoom, render_canvas.zoom);\r\n    render_ctx.lineJoin = 'round';\r\n    render_ctx.lineCap = 'round';\r\n\r\n    for(let i = 0; i < shared/* default */.A.resizeFns.length; i++){\r\n        shared/* default */.A.resizeFns[i]();\r\n    }\r\n    shared/* default */.A.changeCameraScale(lastScale);\r\n}\r\n\r\nshared/* default */.A.changeCameraScale = (scale) => {\r\n    render_ctx.translate(-(1-1/shared/* default */.A.camera.scale)*render_canvas.w/2, -(1-1/shared/* default */.A.camera.scale)*render_canvas.h/2);\r\n\r\n    render_ctx.translate(render_canvas.w/2, render_canvas.h/2);\r\n    render_ctx.scale(1/shared/* default */.A.camera.scale, 1/shared/* default */.A.camera.scale);\r\n    render_ctx.translate(-render_canvas.w/2, -render_canvas.h/2);\r\n\r\n    shared/* default */.A.camera.scale = scale;\r\n    render_canvas.w = render_canvas.width / render_canvas.zoom / shared/* default */.A.camera.scale;\r\n    render_canvas.h = render_canvas.height / render_canvas.zoom / shared/* default */.A.camera.scale;\r\n\r\n    render_ctx.translate(render_canvas.w/2, render_canvas.h/2);\r\n    render_ctx.scale(shared/* default */.A.camera.scale, shared/* default */.A.camera.scale);\r\n    render_ctx.translate(-render_canvas.w/2, -render_canvas.h/2);\r\n    \r\n    render_ctx.translate((1-1/shared/* default */.A.camera.scale)*render_canvas.w/2, (1-1/shared/* default */.A.camera.scale)*render_canvas.h/2);\r\n}\r\n  \r\nwindow.addEventListener('resize', function () {\r\n    shared/* default */.A.resize();\r\n});\r\nshared/* default */.A.resize();\r\n\r\n// if there's ever more extras, make an array system\r\nlet nonLinearFns;\r\nshared/* default */.A.initDistortion = async (vs, fs, uniformNames=[], uniformLambdas=[]) => {\r\n    if(nonLinearFns === undefined) nonLinearFns = (await __webpack_require__.e(/* import() */ 964).then(__webpack_require__.bind(__webpack_require__, 964))).default;\r\n    nonLinearFns.initNonlinearTransform(vs, fs, uniformNames, uniformLambdas);\r\n}\r\n\r\nshared/* default */.A.unInitDistortion = () => {\r\n    // can't be active if not loaded\r\n    if(nonLinearFns === undefined) return;\r\n    nonLinearFns.unInitNonlinearTransform();\r\n}\r\n\r\nlet noiseFns;\r\nshared/* default */.A.importNoise = async() => {\r\n    if(noiseFns !== undefined) return noiseFns;\r\n    return noiseFns = (await __webpack_require__.e(/* import() */ 417).then(__webpack_require__.bind(__webpack_require__, 417))).default;\r\n}\r\n\r\nlet importedYT = false;\r\nshared/* default */.A.importYoutube = async() => {\r\n    if(importedYT === true) return;\r\n    const p1 = __webpack_require__.e(/* import() */ 494).then(__webpack_require__.bind(__webpack_require__, 494));\r\n    const p2 = new Promise((res) => {\r\n        const s = document.createElement('script');\r\n        s.src = \"https://www.youtube.com/iframe_api\";\r\n        document.body.appendChild(s);\r\n\r\n        window.onYouTubeIframeAPIReady = () => {\r\n            res();\r\n        }\r\n    })\r\n\r\n    importedYT = true;\r\n\r\n    return Promise.all([p1, p2]);\r\n}\r\n\r\nlet renderTimerFn;\r\nshared/* default */.A.toggleTimer = async () => {\r\n    if(shared/* default */.A.renderTimer === true) {shared/* default */.A.renderTimer = false;return;}\r\n    if(renderTimerFn === undefined) {renderTimerFn = (await __webpack_require__.e(/* import() */ 982).then(__webpack_require__.bind(__webpack_require__, 982))).default; shared/* default */.A.renderTimer = true;}\r\n    else shared/* default */.A.renderTimer = true;\r\n}\r\n\r\nshared/* default */.A.unTaintCanvas = () => {\r\n    const transform = render_ctx.getTransform();\r\n\r\n    const newCanvas = document.createElement('canvas');\r\n\r\n    document.body.insertBefore(newCanvas, render_canvas);\r\n\r\n    render_canvas.remove();\r\n\r\n    render_canvas = window.canvas = newCanvas;\r\n    render_canvas.id = \"canvas\";\r\n    render_ctx = window.ctx = render_canvas.getContext('2d');\r\n    shared/* default */.A.resize();\r\n\r\n    render_ctx.setTransform(transform);\r\n}\r\n\r\n// mouse coordinates ranging (0,canvas.w) to world position (same coordinates as obstacle rendering)sD\r\n// TODO: test angle !== 0\r\nshared/* default */.A.translateScreenToWorld = () => {\r\n    render_ctx.translate(-(camera.x-render_canvas.w/2), -(camera.y-render_canvas.h/2));\r\n    // if(camera.angle !== 0){\r\n    //     ctx.translate(canvas.w/2, canvas.h/2);\r\n    //     ctx.rotate(-camera.angle);\r\n    //     ctx.translate(-canvas.w/2, -canvas.h/2);\r\n    // }\r\n}\r\n\r\nshared/* default */.A.translateWorldToScreen = () => {\r\n    // if(camera.angle !== 0){\r\n    //     ctx.translate(canvas.w/2, canvas.h/2);\r\n    //     ctx.rotate(camera.angle);\r\n    //     ctx.translate(-canvas.w/2, -canvas.h/2);\r\n    // }\r\n    render_ctx.translate((camera.x-render_canvas.w/2), (camera.y-render_canvas.h/2));\r\n}\r\n\r\nshared/* default */.A.screenToWorld = (x,y) => {\r\n    // if(camera.angle === 0){\r\n        return [\r\n            x + (camera.x-render_canvas.w/2),\r\n            y + (camera.y-render_canvas.h/2)\r\n        ];\r\n    // } else {\r\n    //     x += -(camera.x-canvas.w/2) + canvas.w/2;\r\n    //     y += -(camera.y-canvas.h/2) + canvas.h/2;\r\n    //     const mag = Math.sqrt(x**2 + y **2);\r\n    //     const angle = Math.atan2(y,x) + camera.angle;\r\n    //     return [\r\n    //         Math.cos(angle) * mag,\r\n    //         Math.sin(angle) * mag\r\n    //     ]\r\n    // }\r\n}\r\n\r\nshared/* default */.A.worldToScreen = (x,y) => {\r\n    // if(camera.angle === 0){\r\n        return [\r\n            x - (camera.x-render_canvas.w/2),\r\n            y - (camera.y-render_canvas.h/2)\r\n        ]\r\n    // } else {\r\n    //     x -= canvas.w/2;\r\n    //     y -= canvas.h/2;\r\n    //     const mag = Math.sqrt(x**2 + y**2);\r\n    //     const angle = Math.atan2(y,x) - camera.angle;\r\n    //     return [\r\n    //         Math.cos(angle) * mag - (camera.x-canvas.w/2),\r\n    //         Math.sin(angle) * mag - (camera.y-canvas.h/2),\r\n    //     ]\r\n    // }\r\n}\r\n\r\n/* harmony default export */ const render = (shared/* default */.A.render);\n;// ./eXclient/msgpackr.js\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t((e=\"undefined\"!=typeof globalThis?globalThis:e||self).msgpackr={})}(undefined,function(e){\"use strict\";try{$=new TextDecoder}catch(t){}var $,r,n,i,s,f,u,l,o,a=0,c={},x=0,d=0,h=[],_={useRecords:!1,mapsAsObjects:!0};class p{}let g=new p;g.name=\"MessagePack 0xC1\";var y=!1,b=2;try{Function(\"\")}catch(w){b=1/0}class m{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),!e.sequential||!1===e.trusted||(e.trusted=!0,e.structures||!1==e.useRecords||(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType=\"number\")),Object.assign(this,e)}unpack(e,t){if(r)return G(()=>(H(),this?this.unpack(e,t):m.prototype.unpack.call(_,e,t)));e.buffer||e.constructor!==ArrayBuffer||(e=\"undefined\"!=typeof Buffer?Buffer.from(e):new Uint8Array(e)),\"object\"==typeof t?(n=t.end||e.length,a=t.start||0):(a=0,n=t>-1?t:e.length),d=0,s=null,f=null,r=e;try{l=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch($){if(r=null,e instanceof Uint8Array)throw $;throw Error(\"Source must be a Uint8Array or Buffer but was a \"+(e&&\"object\"==typeof e?e.constructor.name:typeof e))}return this instanceof m?(c=this,this.structures?i=this.structures:(!i||i.length>0)&&(i=[])):(c=_,(!i||i.length>0)&&(i=[])),S(t)}unpackMultiple(e,t){let $,r=0;try{y=!0;let n=e.length,i=this?this.unpack(e,n):ee.unpack(e,n);if(t){if(!1===t(i,r,a))return;for(;a<n;)if(r=a,!1===t(S(),r,a))return}else{for($=[i];a<n;)r=a,$.push(S());return $}}catch(s){throw s.lastPosition=r,s.values=$,s}finally{y=!1,H()}}_mergeStructures(e,t){Object.isFrozen(e=e||[])&&(e=e.map(e=>e.slice(0)));for(let $=0,r=e.length;$<r;$++){let n=e[$];n&&(n.isShared=!0,$>=32&&(n.highByte=$-32>>5))}for(let i in e.sharedLength=e.length,t||[])if(i>=0){let s=e[i],f=t[i];f&&(s&&((e.restoreStructures||(e.restoreStructures=[]))[i]=s),e[i]=f)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function S(e){try{if(!c.trusted&&!y){let t=i.sharedLength||0;t<i.length&&(i.length=t)}let $;if(c.randomAccessStructure&&r[a]<64&&r[a]>=32&&o?($=o(r,a,n,c),r=null,!(e&&e.lazy)&&$&&($=$.toJSON()),a=n):$=k(),f&&(a=f.postBundlePosition,f=null),y&&(i.restoreStructures=null),a==n)i&&i.restoreStructures&&U(),i=null,r=null,u&&(u=null);else if(a>n)throw Error(\"Unexpected end of MessagePack data\");else if(!y){let s;try{s=JSON.stringify($,(e,t)=>\"bigint\"==typeof t?`${t}n`:t).slice(0,100)}catch(l){s=\"(JSON view not available \"+l+\")\"}throw Error(\"Data read, but end of buffer not reached \"+s)}return $}catch(x){throw i&&i.restoreStructures&&U(),H(),(x instanceof RangeError||x.message.startsWith(\"Unexpected end of buffer\")||a>n)&&(x.incomplete=!0),x}}function U(){for(let e in i.restoreStructures)i[e]=i.restoreStructures[e];i.restoreStructures=null}function k(){let e=r[a++];if(e<160){if(e<128){if(e<64)return e;{let t=i[63&e]||c.getStructures&&O()[63&e];return t?(t.read||(t.read=A(t,63&e)),t.read()):e}}if(e<144){if(e-=128,c.mapsAsObjects){let $={};for(let u=0;u<e;u++){let o=W();\"__proto__\"===o&&(o=\"__proto_\"),$[o]=k()}return $}{let _=new Map;for(let p=0;p<e;p++)_.set(k(),k());return _}}{let y=Array(e-=144);for(let b=0;b<e;b++)y[b]=k();return c.freezeData?Object.freeze(y):y}}if(e<192){let w=e-160;if(d>=a)return s.slice(a-x,(a+=w)-x);if(0==d&&n<140){let m=w<16?C(w):R(w);if(null!=m)return m}return T(w)}{let S;switch(e){case 192:return null;case 193:if(f){if((S=k())>0)return f[1].slice(f.position1,f.position1+=S);return f[0].slice(f.position0,f.position0-=S)}return g;case 194:return!1;case 195:return!0;case 196:if(void 0===(S=r[a++]))throw Error(\"Unexpected end of buffer\");return N(S);case 197:return S=l.getUint16(a),a+=2,N(S);case 198:return S=l.getUint32(a),a+=4,N(S);case 199:return D(r[a++]);case 200:return S=l.getUint16(a),a+=2,D(S);case 201:return S=l.getUint32(a),a+=4,D(S);case 202:if(S=l.getFloat32(a),c.useFloat32>2){let U=Q[(127&r[a])<<1|r[a+1]>>7];return a+=4,(U*S+(S>0?.5:-.5)>>0)/U}return a+=4,S;case 203:return S=l.getFloat64(a),a+=8,S;case 204:return r[a++];case 205:return S=l.getUint16(a),a+=2,S;case 206:return S=l.getUint32(a),a+=4,S;case 207:return\"number\"===c.int64AsType?(S=4294967296*l.getUint32(a),S+=l.getUint32(a+4)):\"string\"===c.int64AsType?S=l.getBigUint64(a).toString():\"auto\"===c.int64AsType?(S=l.getBigUint64(a))<=BigInt(2)<<BigInt(52)&&(S=Number(S)):S=l.getBigUint64(a),a+=8,S;case 208:return l.getInt8(a++);case 209:return S=l.getInt16(a),a+=2,S;case 210:return S=l.getInt32(a),a+=4,S;case 211:return\"number\"===c.int64AsType?(S=4294967296*l.getInt32(a),S+=l.getUint32(a+4)):\"string\"===c.int64AsType?S=l.getBigInt64(a).toString():\"auto\"===c.int64AsType?(S=l.getBigInt64(a))>=BigInt(-2)<<BigInt(52)&&S<=BigInt(2)<<BigInt(52)&&(S=Number(S)):S=l.getBigInt64(a),a+=8,S;case 212:if(114==(S=r[a++]))return J(63&r[a++]);{let I=h[S];if(I){if(I.read)return a++,I.read(k());if(I.noBuffer)return a++,I();return I(r.subarray(a,++a))}throw Error(\"Unknown extension \"+S)}case 213:if(114==(S=r[a]))return a++,J(63&r[a++],r[a++]);return D(2);case 214:return D(4);case 215:return D(8);case 216:return D(16);case 217:if(S=r[a++],d>=a)return s.slice(a-x,(a+=S)-x);return B(S);case 218:if(S=l.getUint16(a),d>=(a+=2))return s.slice(a-x,(a+=S)-x);return L(S);case 219:if(S=l.getUint32(a),d>=(a+=4))return s.slice(a-x,(a+=S)-x);return F(S);case 220:return S=l.getUint16(a),a+=2,z(S);case 221:return S=l.getUint32(a),a+=4,z(S);case 222:return S=l.getUint16(a),a+=2,E(S);case 223:return S=l.getUint32(a),a+=4,E(S);default:if(e>=224)return e-256;if(void 0===e){let v=Error(\"Unexpected end of MessagePack data\");throw v.incomplete=!0,v}throw Error(\"Unknown MessagePack token \"+e)}}}let I=/^[a-zA-Z_$][a-zA-Z\\d_$]*$/;function A(e,t){function $(){if($.count++>b){let r=e.read=Function(\"r\",\"return function(){return \"+(c.freezeData?\"Object.freeze\":\"\")+\"({\"+e.map(e=>\"__proto__\"===e?\"__proto_:r()\":I.test(e)?e+\":r()\":\"[\"+JSON.stringify(e)+\"]:r()\").join(\",\")+\"})}\")(k);return 0===e.highByte&&(e.read=v(t,e.read)),r()}let n={};for(let i=0,s=e.length;i<s;i++){let f=e[i];\"__proto__\"===f&&(f=\"__proto_\"),n[f]=k()}return c.freezeData?Object.freeze(n):n}return($.count=0,0===e.highByte)?v(t,$):$}let v=(e,t)=>function(){let $=r[a++];if(0===$)return t();let n=e<32?-(e+($<<5)):e+($<<5),s=i[n]||O()[n];if(!s)throw Error(\"Record id is not defined for \"+n);return s.read||(s.read=A(s,e)),s.read()};function O(){let e=G(()=>(r=null,c.getStructures()));return i=c._mergeStructures(e,i)}var T=P,B=P,L=P,F=P;function P(e){let t;if(e<16&&(t=C(e)))return t;if(e>64&&$)return $.decode(r.subarray(a,a+=e));let n=a+e,i=[];for(t=\"\";a<n;){let s=r[a++];if((128&s)==0)i.push(s);else if((224&s)==192){let f=63&r[a++];i.push((31&s)<<6|f)}else if((240&s)==224){let u=63&r[a++],l=63&r[a++];i.push((31&s)<<12|u<<6|l)}else if((248&s)==240){let o=63&r[a++],c=63&r[a++],x=63&r[a++],d=(7&s)<<18|o<<12|c<<6|x;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d)}else i.push(s);i.length>=4096&&(t+=M.apply(String,i),i.length=0)}return i.length>0&&(t+=M.apply(String,i)),t}function z(e){let t=Array(e);for(let $=0;$<e;$++)t[$]=k();return c.freezeData?Object.freeze(t):t}function E(e){if(c.mapsAsObjects){let t={};for(let $=0;$<e;$++){let r=W();\"__proto__\"===r&&(r=\"__proto_\"),t[r]=k()}return t}{let n=new Map;for(let i=0;i<e;i++)n.set(k(),k());return n}}var M=String.fromCharCode;function R(e){let t=a,$=Array(e);for(let n=0;n<e;n++){let i=r[a++];if((128&i)>0){a=t;return}$[n]=i}return M.apply(String,$)}function C(e){if(e<4){if(e<2){if(0===e)return\"\";{let t=r[a++];if((128&t)>1){a-=1;return}return M(t)}}{let $=r[a++],n=r[a++];if((128&$)>0||(128&n)>0){a-=2;return}if(e<3)return M($,n);let i=r[a++];if((128&i)>0){a-=3;return}return M($,n,i)}}{let s=r[a++],f=r[a++],u=r[a++],l=r[a++];if((128&s)>0||(128&f)>0||(128&u)>0||(128&l)>0){a-=4;return}if(e<6){if(4===e)return M(s,f,u,l);{let o=r[a++];if((128&o)>0){a-=5;return}return M(s,f,u,l,o)}}if(e<8){let c=r[a++],x=r[a++];if((128&c)>0||(128&x)>0){a-=6;return}if(e<7)return M(s,f,u,l,c,x);let d=r[a++];if((128&d)>0){a-=7;return}return M(s,f,u,l,c,x,d)}{let h=r[a++],_=r[a++],p=r[a++],g=r[a++];if((128&h)>0||(128&_)>0||(128&p)>0||(128&g)>0){a-=8;return}if(e<10){if(8===e)return M(s,f,u,l,h,_,p,g);{let y=r[a++];if((128&y)>0){a-=9;return}return M(s,f,u,l,h,_,p,g,y)}}if(e<12){let b=r[a++],w=r[a++];if((128&b)>0||(128&w)>0){a-=10;return}if(e<11)return M(s,f,u,l,h,_,p,g,b,w);let m=r[a++];if((128&m)>0){a-=11;return}return M(s,f,u,l,h,_,p,g,b,w,m)}{let S=r[a++],U=r[a++],k=r[a++],I=r[a++];if((128&S)>0||(128&U)>0||(128&k)>0||(128&I)>0){a-=12;return}if(e<14){if(12===e)return M(s,f,u,l,h,_,p,g,S,U,k,I);{let A=r[a++];if((128&A)>0){a-=13;return}return M(s,f,u,l,h,_,p,g,S,U,k,I,A)}}{let v=r[a++],O=r[a++];if((128&v)>0||(128&O)>0){a-=14;return}if(e<15)return M(s,f,u,l,h,_,p,g,S,U,k,I,v,O);let T=r[a++];if((128&T)>0){a-=15;return}return M(s,f,u,l,h,_,p,g,S,U,k,I,v,O,T)}}}}}function j(){let e=r[a++],t;if(e<192)t=e-160;else switch(e){case 217:t=r[a++];break;case 218:t=l.getUint16(a),a+=2;break;case 219:t=l.getUint32(a),a+=4;break;default:throw Error(\"Expected string\")}return P(t)}function N(e){return c.copyBuffers?Uint8Array.prototype.slice.call(r,a,a+=e):r.subarray(a,a+=e)}function D(e){let t=r[a++];if(h[t]){let $;return h[t](r.subarray(a,$=a+=e),e=>{a=e;try{return k()}finally{a=$}})}throw Error(\"Unknown extension type \"+t)}var V=Array(4096);function W(){let e=r[a++];if(!(e>=160)||!(e<192))return a--,k().toString();if(e-=160,d>=a)return s.slice(a-x,(a+=e)-x);if(!(0==d&&n<180))return T(e);let t=(e<<5^(e>1?l.getUint16(a):e>0?r[a]:0))&4095,$=V[t],i=a,f=a+e-3,u,o=0;if($&&$.bytes==e){for(;i<f;){if((u=l.getUint32(i))!=$[o++]){i=1879048192;break}i+=4}for(f+=3;i<f;)if((u=r[i++])!=$[o++]){i=1879048192;break}if(i===f)return a=i,$.string;f-=3,i=a}for($=[],V[t]=$,$.bytes=e;i<f;)u=l.getUint32(i),$.push(u),i+=4;for(f+=3;i<f;)u=r[i++],$.push(u);let c=e<16?C(e):R(e);return null!=c?$.string=c:$.string=T(e)}let J=(e,t)=>{let $=k().map(e=>e.toString()),r=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,$.highByte=t);let n=i[e];return n&&(n.isShared||y)&&((i.restoreStructures||(i.restoreStructures=[]))[e]=n),i[e]=$,$.read=A($,r),$.read()};h[0]=()=>{},h[0].noBuffer=!0;let q={Error,TypeError,ReferenceError};h[101]=()=>{let e=k();return(q[e[0]]||Error)(e[1])},h[105]=e=>{let t=l.getUint32(a-4);u||(u=new Map);let $=r[a],n;n=$>=144&&$<160||220==$||221==$?[]:{};let i={target:n};u.set(t,i);let s=k();return i.used?Object.assign(n,s):(i.target=s,s)},h[112]=e=>{let t=l.getUint32(a-4),$=u.get(t);return $.used=!0,$.target},h[115]=()=>new Set(k());let K=[\"Int8\",\"Uint8\",\"Uint8Clamped\",\"Int16\",\"Uint16\",\"Int32\",\"Uint32\",\"Float32\",\"Float64\",\"BigInt64\",\"BigUint64\"].map(e=>e+\"Array\"),Y=\"object\"==typeof globalThis?globalThis:window;h[116]=e=>{let t=e[0],$=K[t];if(!$)throw Error(\"Could not find typed array for code \"+t);return new Y[$](Uint8Array.prototype.slice.call(e,1).buffer)},h[120]=()=>{let e=k();return RegExp(e[0],e[1])};let Z=[];function G(e){let t=n,$=a,o=x,h=d,_=s,p=u,g=f,b=new Uint8Array(r.slice(0,n)),w=i,m=i.slice(0,i.length),S=c,U=y,k=e();return n=t,a=$,x=o,d=h,s=_,u=p,f=g,r=b,y=U,(i=w).splice(0,i.length,...m),c=S,l=new DataView(r.buffer,r.byteOffset,r.byteLength),k}function H(){r=null,u=null,i=null}h[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],$=a;return a+=t-e.length,f=Z,(f=[j(),j()]).position0=0,f.position1=0,f.postBundlePosition=a,a=$,k()},h[255]=e=>4==e.length?new Date((16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((3&e[3])*4294967296+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date(\"invalid\");let Q=Array(147);for(let X=0;X<256;X++)Q[X]=+(\"1e\"+Math.floor(45.15-.30103*X));var ee=new m({useRecords:!1});let et=ee.unpack,e$=ee.unpackMultiple,er=ee.unpack,en={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},ei=new Float32Array(1),es=new Uint8Array(ei.buffer,0,4),ef;try{ef=new TextEncoder}catch(eu){}let el,eo,ea=\"undefined\"!=typeof Buffer,ec=ea?function(e){return Buffer.allocUnsafeSlow(e)}:Uint8Array,ex=ea?Buffer:Uint8Array,ed=ea?4294967296:2144337920,eh,e_,ep,eg=0,ey,e0=null,e2,e1=/[\\u0080-\\uFFFF]/,e6=Symbol(\"record-id\");class e4 extends m{constructor(e){super(e),this.offset=0;let t,$,r,n,i=ex.prototype.utf8Write?function(e,t){return eh.utf8Write(e,t,4294967295)}:!!ef&&!!ef.encodeInto&&function(e,t){return ef.encodeInto(e,eh.subarray(t)).written},s=this;e||(e={});let f=e&&e.sequential,u=e.structures||e.saveStructures,l=e.maxSharedStructures;if(null==l&&(l=u?32:0),l>8160)throw Error(\"Maximum maxSharedStructure is 8160\");e.structuredClone&&void 0==e.moreTypes&&(this.moreTypes=!0);let o=e.maxOwnStructures;null==o&&(o=u?32:64),this.structures||!1==e.useRecords||(this.structures=[]);let a=l>32||o+l>64,c=l+64,x=l+o+64;if(x>8256)throw Error(\"Maximum maxSharedStructure + maxOwnStructure is 8192\");let d=[],h=0,_=0;this.pack=this.encode=function(e,i){if(eh||(ep=(eh=new ec(8192)).dataView||(eh.dataView=new DataView(eh.buffer,0,8192)),eg=0),(ey=eh.length-10)-eg<2048?(ep=(eh=new ec(eh.length)).dataView||(eh.dataView=new DataView(eh.buffer,0,eh.length)),ey=eh.length-10,eg=0):eg=eg+7&2147483640,t=eg,i&eT&&(eg+=255&i),n=s.structuredClone?new Map:null,s.bundleStrings&&\"string\"!=typeof e?(e0=[]).size=1/0:e0=null,r=s.structures){r.uninitialized&&(r=s._mergeStructures(s.getStructures()));let u=r.sharedLength||0;if(u>l)throw Error(\"Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to \"+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let o=0;o<u;o++){let a=r[o];if(!a)continue;let c,x=r.transitions;for(let d=0,h=a.length;d<h;d++){let _=a[d];(c=x[_])||(c=x[_]=Object.create(null)),x=c}x[e6]=o+64}this.lastNamedStructuresLength=u}f||(r.nextId=u+64)}$&&($=!1);try{s.randomAccessStructure&&e&&e.constructor&&e.constructor===Object?A(e):y(e);let g=e0;if(e0&&eS(t,y,0),n&&n.idsToInsert){let b=n.idsToInsert.sort((e,t)=>e.offset>t.offset?1:-1),w=b.length,m=-1;for(;g&&w>0;){let S=b[--w].offset+t;S<g.stringsPosition+t&&-1===m&&(m=0),S>g.position+t?m>=0&&(m+=6):(m>=0&&(ep.setUint32(g.position+t,ep.getUint32(g.position+t)+m),m=-1),g=g.previous,w++)}m>=0&&g&&ep.setUint32(g.position+t,ep.getUint32(g.position+t)+m),(eg+=6*b.length)>ey&&U(eg),s.offset=eg;let k=function e(t,$){let r,n=6*$.length,i=t.length-n;for(;r=$.pop();){let s=r.offset,f=r.id;t.copyWithin(s+n,s,i);let u=s+(n-=6);t[u++]=214,t[u++]=105,t[u++]=f>>24,t[u++]=f>>16&255,t[u++]=f>>8&255,t[u++]=255&f,i=s}return t}(eh.subarray(t,eg),b);return n=null,k}if(s.offset=eg,i&ev)return eh.start=t,eh.end=eg,eh;return eh.subarray(t,eg)}finally{if(r&&(p(),$&&s.saveStructures)){var I,v;let O=r.sharedLength||0,T=eh.subarray(t,eg),B=(I=r,v=s,I.isCompatible=e=>{let t=!e||(v.lastNamedStructuresLength||0)===e.length;return t||v._mergeStructures(e),t},I);if(!1===s.saveStructures(B,B.isCompatible))return s.pack(e,i);return s.lastNamedStructuresLength=O,T}i&eO&&(eg=t)}};let p=()=>{_<10&&_++;let e=r.sharedLength||0;if(r.length>e&&!f&&(r.length=e),h>1e4)r.transitions=null,_=0,h=0,d.length>0&&(d=[]);else if(d.length>0&&!f){for(let t=0,$=d.length;t<$;t++)d[t][e6]=0;d=[]}},g=e=>{var t=e.length;t<16?eh[eg++]=144|t:t<65536?(eh[eg++]=220,eh[eg++]=t>>8,eh[eg++]=255&t):(eh[eg++]=221,ep.setUint32(eg,t),eg+=4);for(let $=0;$<t;$++)y(e[$])},y=e=>{eg>ey&&(eh=U(eg));var $,r=typeof e;if(\"string\"===r){let s=e.length;if(e0&&s>=4&&s<4096){if((e0.size+=s)>21760){let f,u=(e0[0]?3*e0[0].length+e0[1].length:0)+10;eg+u>ey&&(eh=U(eg+u));let l;e0.position?(l=e0,eh[eg]=200,eg+=3,eh[eg++]=98,f=eg-t,eg+=4,eS(t,y,0),ep.setUint16(f+t-3,eg-t-f)):(eh[eg++]=214,eh[eg++]=98,f=eg-t,eg+=4),(e0=[\"\",\"\"]).previous=l,e0.size=0,e0.position=f}let o=e1.test(e);e0[o?0:1]+=e,eh[eg++]=193,y(o?-s:s);return}let a;a=s<32?1:s<256?2:s<65536?3:5;let c=3*s;if(eg+c>ey&&(eh=U(eg+c)),s<64||!i){let x,d,h,_=eg+a;for(x=0;x<s;x++)(d=e.charCodeAt(x))<128?eh[_++]=d:d<2048?(eh[_++]=d>>6|192,eh[_++]=63&d|128):(64512&d)==55296&&(64512&(h=e.charCodeAt(x+1)))==56320?(d=65536+((1023&d)<<10)+(1023&h),x++,eh[_++]=d>>18|240,eh[_++]=d>>12&63|128,eh[_++]=d>>6&63|128,eh[_++]=63&d|128):(eh[_++]=d>>12|224,eh[_++]=d>>6&63|128,eh[_++]=63&d|128);$=_-eg-a}else $=i(e,eg+a);$<32?eh[eg++]=160|$:$<256?(a<2&&eh.copyWithin(eg+2,eg+1,eg+1+$),eh[eg++]=217,eh[eg++]=$):$<65536?(a<3&&eh.copyWithin(eg+3,eg+2,eg+2+$),eh[eg++]=218,eh[eg++]=$>>8,eh[eg++]=255&$):(a<5&&eh.copyWithin(eg+5,eg+3,eg+3+$),eh[eg++]=219,ep.setUint32(eg,$),eg+=4),eg+=$}else if(\"number\"===r){if(e>>>0===e)e<32||e<128&&!1===this.useRecords||e<64&&!this.randomAccessStructure?eh[eg++]=e:e<256?(eh[eg++]=204,eh[eg++]=e):e<65536?(eh[eg++]=205,eh[eg++]=e>>8,eh[eg++]=255&e):(eh[eg++]=206,ep.setUint32(eg,e),eg+=4);else if(e>>0===e)e>=-32?eh[eg++]=256+e:e>=-128?(eh[eg++]=208,eh[eg++]=e+256):e>=-32768?(eh[eg++]=209,ep.setInt16(eg,e),eg+=2):(eh[eg++]=210,ep.setInt32(eg,e),eg+=4);else{let p;if((p=this.useFloat32)>0&&e<4294967296&&e>=-2147483648){eh[eg++]=202,ep.setFloat32(eg,e);let b;if(p<4||(b=e*Q[(127&eh[eg])<<1|eh[eg+1]>>7])>>0===b){eg+=4;return}eg--}eh[eg++]=203,ep.setFloat64(eg,e),eg+=8}}else if(\"object\"===r||\"function\"===r){if(e){if(n){let w=n.get(e);if(w){if(!w.id){let m=n.idsToInsert||(n.idsToInsert=[]);w.id=m.push(w)}eh[eg++]=214,eh[eg++]=112,ep.setUint32(eg,w.id),eg+=4;return}n.set(e,{offset:eg-t})}let k=e.constructor;if(k===Object)S(e,!0);else if(k===Array)g(e);else if(k===Map){if(this.mapAsEmptyObject)eh[eg++]=128;else for(let[I,A]of(($=e.size)<16?eh[eg++]=128|$:$<65536?(eh[eg++]=222,eh[eg++]=$>>8,eh[eg++]=255&$):(eh[eg++]=223,ep.setUint32(eg,$),eg+=4),e))y(I),y(A)}else{for(let v=0,O=el.length;v<O;v++)if(e instanceof eo[v]){let T=el[v];if(T.write){T.type&&(eh[eg++]=212,eh[eg++]=T.type,eh[eg++]=0);let B=T.write.call(this,e);B===e?Array.isArray(e)?g(e):S(e):y(B);return}let L=eh,F=ep,P=eg;eh=null;let z;try{z=T.pack.call(this,e,e=>(eh=L,L=null,(eg+=e)>ey&&U(eg),{target:eh,targetView:ep,position:eg-e}),y)}finally{L&&(eh=L,ep=F,eg=P,ey=eh.length-10)}z&&(z.length+eg>ey&&U(z.length+eg),eg=em(z,eh,eg,T.type));return}if(Array.isArray(e))g(e);else{if(e.toJSON){let E=e.toJSON();if(E!==e)return y(E)}if(\"function\"===r)return y(this.writeFunction&&this.writeFunction(e));S(e,!e.hasOwnProperty)}}}else eh[eg++]=192}else if(\"boolean\"===r)eh[eg++]=e?195:194;else if(\"bigint\"===r){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))eh[eg++]=211,ep.setBigInt64(eg,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)eh[eg++]=207,ep.setBigUint64(eg,e);else if(this.largeBigIntToFloat)eh[eg++]=203,ep.setFloat64(eg,Number(e));else throw RangeError(e+\" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64\");eg+=8}else if(\"undefined\"===r)this.encodeUndefinedAsNil?eh[eg++]=192:(eh[eg++]=212,eh[eg++]=0,eh[eg++]=0);else throw Error(\"Unknown type: \"+r)},b=this.variableMapSize||this.coercibleKeyAsNumber?e=>{let t=Object.keys(e),$=t.length;$<16?eh[eg++]=128|$:$<65536?(eh[eg++]=222,eh[eg++]=$>>8,eh[eg++]=255&$):(eh[eg++]=223,ep.setUint32(eg,$),eg+=4);let r;if(this.coercibleKeyAsNumber)for(let n=0;n<$;n++){let i=Number(r=t[n]);y(isNaN(i)?r:i),y(e[r])}else for(let s=0;s<$;s++)y(r=t[s]),y(e[r])}:(e,$)=>{eh[eg++]=222;let r=eg-t;eg+=2;let n=0;for(let i in e)($||e.hasOwnProperty(i))&&(y(i),y(e[i]),n++);eh[r+++t]=n>>8,eh[r+t]=255&n},w=!1===this.useRecords?b:e.progressiveRecords&&!a?(e,$)=>{let n,i=r.transitions||(r.transitions=Object.create(null)),s=eg++-t,f;for(let u in e)if($||e.hasOwnProperty(u)){if(n=i[u])i=n;else{let l=Object.keys(e),o=i;i=r.transitions;let a=0;for(let c=0,x=l.length;c<x;c++){let d=l[c];!(n=i[d])&&(n=i[d]=Object.create(null),a++),i=n}s+t+1==eg?(eg--,k(i,l,a)):I(i,l,s,a),f=!0,i=o[u]}y(e[u])}if(!f){let h=i[e6];h?eh[s+t]=h:I(i,Object.keys(e),s,0)}}:(e,t)=>{let $,n=r.transitions||(r.transitions=Object.create(null)),i=0;for(let s in e)(t||e.hasOwnProperty(s))&&(!($=n[s])&&($=n[s]=Object.create(null),i++),n=$);let f=n[e6];for(let u in f?f>=96&&a?(eh[eg++]=(31&(f-=96))+96,eh[eg++]=f>>5):eh[eg++]=f:k(n,n.__keys__||Object.keys(e),i),e)(t||e.hasOwnProperty(u))&&y(e[u])},m=\"function\"==typeof this.useRecords&&this.useRecords,S=m?(e,t)=>{m(e)?w(e,t):b(e,t)}:w,U=e=>{let $;if(e>16777216){if(e-t>ed)throw Error(\"Packed buffer would be larger than maximum buffer size\");$=Math.min(ed,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else $=(Math.max(e-t<<2,eh.length-1)>>12)+1<<12;let r=new ec($);return ep=r.dataView||(r.dataView=new DataView(r.buffer,0,$)),e=Math.min(e,eh.length),eh.copy?eh.copy(r,0,t,e):r.set(eh.slice(t,e)),eg-=t,t=0,ey=r.length-10,eh=r},k=(e,t,n)=>{let i=r.nextId;i||(i=64),i<c&&this.shouldShareStructure&&!this.shouldShareStructure(t)?((i=r.nextOwnId)<x||(i=c),r.nextOwnId=i+1):(i>=x&&(i=c),r.nextId=i+1);let s=t.highByte=i>=96&&a?i-96>>5:-1;e[e6]=i,e.__keys__=t,r[i-64]=t,i<c?(t.isShared=!0,r.sharedLength=i-63,$=!0,s>=0?(eh[eg++]=(31&i)+96,eh[eg++]=s):eh[eg++]=i):(s>=0?(eh[eg++]=213,eh[eg++]=114,eh[eg++]=(31&i)+96,eh[eg++]=s):(eh[eg++]=212,eh[eg++]=114,eh[eg++]=i),n&&(h+=_*n),d.length>=o&&(d.shift()[e6]=0),d.push(e),y(t))},I=(e,$,r,n)=>{let i=eh,s=eg,f=ey,u=t;eh=e_,eg=0,t=0,eh||(e_=eh=new ec(8192)),ey=eh.length-10,k(e,$,n),e_=eh;let l=eg;if(eh=i,eg=s,ey=f,t=u,l>1){let o=eg+l-1;o>ey&&U(o);let a=r+t;eh.copyWithin(a+l,a+1,eg),eh.set(e_.slice(0,l),a),eg=o}else eh[r+t]=e_[0]},A=(e,n)=>{let i=e2(e,eh,t,eg,r,U,(e,t,r)=>{if(r)return $=!0;eg=t;let n=eh;return(y(e),p(),n!==eh)?{position:eg,targetView:ep,target:eh}:eg},this);if(0===i)return S(e,!0);eg=i}}useBuffer(e){eh=e,ep=new DataView(eh.buffer,eh.byteOffset,eh.byteLength),eg=0}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}function eb(e,t,$,r){let n=e.byteLength;if(n+1<256){var{target:i,position:s}=$(4+n);i[s++]=199,i[s++]=n+1}else if(n+1<65536){var{target:i,position:s}=$(5+n);i[s++]=200,i[s++]=n+1>>8,i[s++]=n+1&255}else{var{target:i,position:s,targetView:f}=$(7+n);i[s++]=201,f.setUint32(s,n+1),s+=4}i[s++]=116,i[s++]=t,i.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function ew(e,t){let $=e.byteLength;if($<256){var r,n,{target:r,position:n}=t($+2);r[n++]=196,r[n++]=$}else if($<65536){var{target:r,position:n}=t($+3);r[n++]=197,r[n++]=$>>8,r[n++]=255&$}else{var{target:r,position:n,targetView:i}=t($+5);r[n++]=198,i.setUint32(n,$),n+=4}r.set(e,n)}function em(e,t,$,r){let n=e.length;switch(n){case 1:t[$++]=212;break;case 2:t[$++]=213;break;case 4:t[$++]=214;break;case 8:t[$++]=215;break;case 16:t[$++]=216;break;default:n<256?(t[$++]=199,t[$++]=n):n<65536?(t[$++]=200,t[$++]=n>>8,t[$++]=255&n):(t[$++]=201,t[$++]=n>>24,t[$++]=n>>16&255,t[$++]=n>>8&255,t[$++]=255&n)}return t[$++]=r,t.set(e,$),$+=n}function eS(e,t,$){if(e0.length>0){ep.setUint32(e0.position+e,eg+$-e0.position-e),e0.stringsPosition=eg-e;let r=e0;e0=null,t(r[0]),t(r[1])}}eo=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,p],el=[{pack(e,t,$){let r=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<4294967296){let{target:n,targetView:i,position:s}=t(6);n[s++]=214,n[s++]=255,i.setUint32(s,r)}else if(r>0&&r<4294967296){let{target:f,targetView:u,position:l}=t(10);f[l++]=215,f[l++]=255,u.setUint32(l,4e6*e.getMilliseconds()+(r/1e3/4294967296>>0)),u.setUint32(l+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),$(this.onInvalidDate());let{target:o,targetView:a,position:c}=t(3);o[c++]=212,o[c++]=255,o[c++]=255}else{let{target:x,targetView:d,position:h}=t(15);x[h++]=199,x[h++]=12,x[h++]=255,d.setUint32(h,1e6*e.getMilliseconds()),d.setBigInt64(h+4,BigInt(Math.floor(r)))}}},{pack(e,t,$){if(this.setAsEmptyObject)return t(0),$({});let r=Array.from(e),{target:n,position:i}=t(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=115,n[i++]=0),$(r)}},{pack(e,t,$){let{target:r,position:n}=t(this.moreTypes?3:0);this.moreTypes&&(r[n++]=212,r[n++]=101,r[n++]=0),$([e.name,e.message])}},{pack(e,t,$){let{target:r,position:n}=t(this.moreTypes?3:0);this.moreTypes&&(r[n++]=212,r[n++]=120,r[n++]=0),$([e.source,e.flags])}},{pack(e,t){this.moreTypes?eb(e,16,t):ew(ea?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let $=e.constructor;$!==ex&&this.moreTypes?eb(e,K.indexOf($.name),t):ew(e,t)}},{pack(e,t){let{target:$,position:r}=t(1);$[r]=193}}];let eU=new e4({useRecords:!1}),ek=eU.pack,eI=eU.pack,{NEVER:e8,ALWAYS:eA,DECIMAL_ROUND:e5,DECIMAL_FIT:e3}=en,ev=512,eO=1024,eT=2048;async function*eB(e,t){let $=new e4(t);for await(let r of e)yield $.pack(r)}let eL=function e(t,$={}){if(!t||\"object\"!=typeof t)throw Error(\"first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise\");let r=new m($),n,i=e=>{let t;n&&(e=Buffer.concat([n,e]),n=void 0);try{t=r.unpackMultiple(e)}catch($){if($.incomplete)n=e.slice($.lastPosition),t=$.values;else throw $}return t};return\"function\"==typeof t[Symbol.iterator]?function* e(){for(let $ of t)yield*i($)}():\"function\"==typeof t[Symbol.asyncIterator]?async function* e(){for await(let $ of t)yield*i($)}():void 0},eF=function e(t,$={}){if(t&&\"object\"==typeof t){if(\"function\"==typeof t[Symbol.iterator])return function* e(t,$){let r=new e4($);for(let n of t)yield r.pack(n)}(t,$);if(\"function\"==typeof t.then||\"function\"==typeof t[Symbol.asyncIterator])return eB(t,$);else throw Error(\"first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise\")}throw Error(\"first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable\")};e.ALWAYS=eA,e.C1=g,e.DECIMAL_FIT=e3,e.DECIMAL_ROUND=e5,e.Decoder=m,e.Encoder=e4,e.FLOAT32_OPTIONS=en,e.NEVER=e8,e.Packr=e4,e.REUSE_BUFFER_MODE=ev,e.Unpackr=m,e.addExtension=function e(t){var $;if(t.Class){if(!t.pack&&!t.write)throw Error(\"Extension has no pack or write function\");if(t.pack&&!t.type)throw Error(\"Extension has no type (numeric code to identify the extension)\");eo.unshift(t.Class),el.unshift(t)}($=t).unpack?h[$.type]=$.unpack:h[$.type]=$},e.clearSource=H,e.decode=er,e.decodeIter=eL,e.encode=eI,e.encodeIter=eF,e.isNativeAccelerationEnabled=!1,e.mapsAsObjects=!0,e.pack=ek,e.roundFloat32=function e(t){ei[0]=t;let $=Q[(127&es[3])<<1|es[2]>>7];return($*t+(t>0?.5:-.5)>>0)/$},e.unpack=et,e.unpackMultiple=e$,e.useRecords=!1});\n;// ./client/utils.js\n\r\nconst until = (condition, checkInterval=400) => {\r\n    if(!!condition()) return true;\r\n    return new Promise(resolve => {\r\n        let interval = setInterval(() => {\r\n            if (!condition()) return;\r\n            clearInterval(interval);\r\n            resolve();\r\n        }, checkInterval)\r\n    })\r\n}\r\n\r\nconst SCROLL_PARAMS = Object.freeze({\r\n    sensitivity: 10 * 1300,\r\n    minAvgSpeed: 0.5 * 1300,\r\n    maxScrollTime: 150,\r\n    edgeMargin: 117 // out of 900\r\n});\r\n\r\nconst environment = shared/* default */.A.environment = typeof location === 'undefined' ? 'server' : ((location.origin.endsWith('8080') || location.href.endsWith('editor')) ? 'editor' : 'client');\r\nconst isProd = shared/* default */.A.isProd = typeof location === 'undefined' ? true : location.origin.startsWith('http://localhost') ? false : true; \r\n\r\nif(isProd === false){\r\n    window.s = {};\r\n    setInterval(() => {\r\n        for(let key in shared/* default */.A){ window.s[key] = shared/* default */.A[key]; }\r\n    }, 1000)\r\n}\r\n\r\nconst memoizedColors = {};\r\n\r\nshared/* default */.A.blendColor = blendColor;\r\nfunction blendColor(color1, color2, t) {\r\n\tconst memoizedIndex = color1 + '_' + color2 + '_' + t;\r\n\tif (memoizedColors[memoizedIndex] !== undefined) {\r\n\t\treturn memoizedColors[memoizedIndex];\r\n\t}\r\n\tconst rgb1 = {\r\n\t\tr: parseInt(color1.slice(1, 3), 16),\r\n\t\tg: parseInt(color1.slice(3, 5), 16),\r\n\t\tb: parseInt(color1.slice(5, 7), 16)\r\n\t}\r\n\tconst rgb2 = {\r\n\t\tr: parseInt(color2.slice(1, 3), 16),\r\n\t\tg: parseInt(color2.slice(3, 5), 16),\r\n\t\tb: parseInt(color2.slice(5, 7), 16)\r\n\t}\r\n\r\n\tconst result = rgbToHex(Math.floor(rgb1.r * (1 - t) + rgb2.r * t), Math.floor(rgb1.g * (1 - t) + rgb2.g * t), Math.floor(rgb1.b * (1 - t) + rgb2.b * t))\r\n\tmemoizedColors[memoizedIndex] = result;\r\n\treturn result;\r\n}\r\n\r\nfunction rgbToHex(r, g, b) {\r\n\treturn \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n}\r\n\r\nfunction componentToHex(c) {\r\n\tvar hex = c.toString(16);\r\n\treturn hex.length == 1 ? \"0\" + hex : hex;\r\n}\r\n\r\n// function shortAngleDist(a0,a1) {\r\n// \tconst max = Math.PI*2;\r\n// \tconst da = (a1 - a0) % max;\r\n// \treturn 2*da % max - da;\r\n// }\r\n\r\nconst mapsBeatenStr = environment === 'server' ? null : localStorage.getItem('mapsBeaten');\r\nshared/* default */.A.mapsBeaten = {};\r\nif(mapsBeatenStr !== null){\r\n    const split = mapsBeatenStr.split('|');\r\n    for(let i = 0; i < split.length; i++){\r\n        shared/* default */.A.mapsBeaten[split[i]] = true;\r\n    }\r\n}\r\n\r\nshared/* default */.A.decorationImgs = {};\r\nif(typeof Image !== 'undefined'){\r\n\tshared/* default */.A.arrowImg = new Image();\r\n\tshared/* default */.A.starImg = new Image();\r\n\tshared/* default */.A.starImg.crossOrigin = \"Anonymous\";\r\n\tif(environment === 'editor'){\r\n\t\t// editor\r\n\t\t(async() => {\r\n\t\t\tconst exps = await __webpack_require__.e(/* import() */ 254).then(__webpack_require__.bind(__webpack_require__, 230));\r\n\t\t\tshared/* default */.A.arrowImg = exps.default.arrowImg;\r\n\t\t\tshared/* default */.A.starImg = exps.default.starImg;\r\n\t\t})();\r\n\t} else {\r\n\t\t// client\r\n\t\tshared/* default */.A.arrowImg.src = './gfx/arrow.png';\r\n\t\tshared/* default */.A.starImg.src = 'https://upload.wikimedia.org/wikipedia/commons/c/c3/A_Snapshot_of_the_Jewel_Box_cluster_with_the_ESO_VLT.jpg';\r\n\t}\r\n} else {\r\n\t// server\r\n\tshared/* default */.A.arrowImg = shared/* default */.A.starImg = {};\r\n}\r\n\r\nwindow.colourRgb = (r,g,b) => {\r\n\tr = Math.max(Math.min(Number(r), 100), 0) * 2.55;\r\n\tg = Math.max(Math.min(Number(g), 100), 0) * 2.55;\r\n\tb = Math.max(Math.min(Number(b), 100), 0) * 2.55;\r\n\tr = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\r\n\tg = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\r\n\tb = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\r\n\treturn '#' + r + g + b;\r\n}\r\n\r\nif(environment === 'server') global.colourRgb = window.colourRgb;\r\n\r\nwindow.md = (a) => {return (a !== a || a === undefined || a === null) ? 0 : a;}; // make defined\r\nwindow.makeNumber = (a) => {return Number.isFinite(a) === true ? a : 0;};\r\nwindow.makeNotNaN = (a) => {return (a === a) ? a : 0;};\r\nwindow.makeNotNull = (a) => {return a === null ? 0 : a};\r\nwindow.makeNotUndefined = (a) => {return a === undefined ? 0 : a};\r\nwindow.rlt = (a) => {shared/* default */.A.loopTrap = 1000; return a;};// reset loop trap\r\nwindow.makeType = (a,typeArr) => {\r\n\tif(typeArr.includes(shared/* default */.A.generateConnectionType(a)) === true)return a;\r\n\treturn defaultTypeMap[typeof a];\r\n}\r\nshared/* default */.A.generateConnectionType = (val) => {\r\n\tconst type = typeof val;\r\n\tif(type === 'number') return 'Number';\r\n\tif(type === 'string') {\r\n\t  // if(val[0] === '#') return 'Colour';\r\n\t  return ['String', 'Colour'];\r\n\t}\r\n\tif(type === 'boolean') return 'Boolean';\r\n\tif(Array.isArray(val) === true) return 'Array';\r\n\treturn null;\r\n}\r\nconst defaultTypeMap = {undefined: 0, string: '', boolean: true/*glass is half full*/, number: 0, object: []/*exclusively used for blockly, where arrays are the only object*/};\r\n\r\nconst encoder = new TextEncoder();\r\nfunction encodeAtPosition(string, u8array, position) {\r\n\treturn encoder.encodeInto(\r\n\t\tstring,\r\n\t\tposition ? u8array.subarray(position | 0) : u8array,\r\n\t);\r\n}\r\nconst decoder = new TextDecoder();\r\nfunction decodeText(u8array, startPos=0, endPos=Infinity){\r\n\treturn decoder.decode(u8array).slice(startPos, endPos);\r\n}\r\n\r\n\r\nfunction genBannedWordsRegex(...args) {\r\n  let parsed = [];\r\n  args.forEach(e => {\r\n    parsed.push(\"(\\\\S*\" +\r\n      e.replace(/[aа]/gmi, \"[aа4]\")\r\n      .replace(/[cс]/gmi, \"[cс]\")\r\n      .replace(/[eеё]/gmi, \"[eеё3]\")\r\n      .replace(/[oо]/gmi, \"[oо0]\")\r\n      .replace(/[pр]/gmi, \"[pр]\")\r\n      .replace(/[tт]/gmi, \"[tт]\")\r\n      .replace(/[yу]/gmi, \"[yу]\")\r\n      .replace(/[hн]/gmi, \"[hн]\")\r\n      .replace(/[kк]/gmi, \"[kк]\")\r\n      .replace(/[xх]/gmi, \"[xх]\")\r\n      .replace(/[bв]/gmi, \"[bв]\")\r\n      .replace(/[nп]/gmi, \"[nп]\")\r\n      .replace(/[mм]/gmi, \"[mм]\")\r\n      .replace(/[i1]/gmi, \"[i1]\")\r\n      .replace(/[ _\\-]/gmi, \"[ _\\\\-]\") +\r\n      \"\\\\S*)\");\r\n  });\r\n  return new RegExp(parsed.join(\"|\"), \"gmi\"); \r\n}\r\nlet bannedWordsRegex = genBannedWordsRegex(\"nigger\", \"nigga\", \"chink\", \"ching chong\", \"onrender\", \"trash version\", \"evades.\", \"zerotix\", \"zero tix\", \"zero\", \"0tix\", \"cunt\", \"asshole\", \"porn\", \"hentai\", \"slut\", \"whore\", \"faggot\", \"on render\", \"fake evades\", \"real evades\")\r\n\r\nfunction filterText(text){\r\n\treturn text.replace(bannedWordsRegex, \"[https://evadesx.io/]\");\r\n}\r\n\r\nfunction stringHTMLSafe(str) {\r\n\treturn str.replace(/&/g, '&amp;')\r\n\t\t.replace(/ /g, '&nbsp;')\r\n\t\t.replace(/</g, '&lt;')\r\n\t\t.replace(/>/g, '&gt;');\r\n}\r\n\r\n/* harmony default export */ const utils = ({ until, SCROLL_PARAMS, blendColor, environment, encodeAtPosition, decodeText, stringHTMLSafe, filterText });\n;// ./eXclient/networking.js\n\r\n\r\n\r\n// used for decoding chat messages\r\n\r\nconst {decodeText: networking_decodeText, filterText: networking_filterText, stringHTMLSafe: networking_stringHTMLSafe} = utils;\r\n\r\nconst HOST = location.origin.replace(/^http/, 'ws');\r\nlet ws, nextMsgFlag, gameStarted = false, canLoad=false;\r\nlet syncMapFn=undefined, lateSyncMap=false;\r\nshared/* default */.A.mapEntryTime = 0;\r\nshared/* default */.A.disconnected = false;\r\nconst messageQueue = [];\r\nshared/* default */.A.send = (data) => {\r\n    messageQueue.push(data);\r\n}\r\n\r\nfunction initWS() {\r\n    ws = new WebSocket(HOST);\r\n    ws.binaryType = \"arraybuffer\"; // sends messages with binary and stuff o-o yes i am very smart\r\n\r\n    ws.addEventListener(\"message\", function (data) {\r\n        if(nextMsgFlag !== undefined){\r\n            messageMap[nextMsgFlag](data.data);\r\n            nextMsgFlag = undefined;\r\n            return;\r\n        }\r\n        const decoded = new Uint8Array(data.data);\r\n        if(messageMap[decoded[0]] === undefined) console.log(decoded);\r\n        messageMap[decoded[0]](decoded);\r\n    });\r\n\r\n    ws.onopen = () => {\r\n        console.log('connected to the server!');\r\n        shared/* default */.A.send = (data) => {\r\n            ws.send(data);\r\n        }\r\n        for(let i = 0; i < messageQueue.length; i++){\r\n            shared/* default */.A.send(messageQueue[i]);\r\n        }\r\n    }\r\n\r\n    ws.onclose = () => {\r\n        if(shared/* default */.A.username !== null) shared/* default */.A.disconnected = true;\r\n        console.log('Websocket closed.');// Attempting to reconnect...\r\n        // TODO: reconnection.\r\n        shared/* default */.A.send = () => {};\r\n    }\r\n}\r\n\r\nif(shared/* default */.A.isEditor === false) initWS();\r\n\r\nshared/* default */.A.changeMap = function changeMap(url=`/maps/hub`, method='GET', headers=new Headers(), onRejected=(url)=>{console.error(`failed to load map url ${url}`);}){\r\n    lateSyncMap = false; shared/* default */.A.mapEntryTime = window.frames;\r\n    headers.append('id', shared/* default */.A.authId);\r\n    fetch(location.origin + url, {method, headers}).then(async (d) => {\r\n        const levelData = await d.text();\r\n        if(levelData === 'n') {onRejected(url); return;}\r\n        const [players, selfId] = JSON.parse(d.headers.get(\"X-Init-Data\"));\r\n\r\n        const prevScript = document.getElementById('gameScript');\r\n        if(prevScript !== null) prevScript.remove();\r\n\r\n        shared/* default */.A.resetGame();\r\n        shared/* default */.A.mapPath = url;\r\n        shared/* default */.A.players.length = shared/* default */.A.obstacles.length = 0;\r\n\r\n        canLoad = true;\r\n        const s = document.createElement('script');\r\n        s.id = \"gameScript\";\r\n        s.text = levelData;\r\n        document.body.appendChild(s);\r\n\r\n        for(let i = 0; i < players.length; i++){\r\n            if(players[i] === undefined || players[i] === null) {shared/* default */.A.players[i] = undefined; continue;}\r\n            const playerData = players[i];\r\n            const p = createPlayerFromData(playerData);\r\n            shared/* default */.A.players[i] = p;\r\n        }\r\n\r\n        shared/* default */.A.selfId = selfId;\r\n\r\n        shared/* default */.A.won = false;\r\n        if(!gameStarted) {\r\n            shared/* default */.A.startGame();\r\n            gameStarted = true;\r\n        } else {\r\n            shared/* default */.A.respawnPlayer();\r\n        }\r\n    })\r\n}\r\n\r\nwindow.loadMap = (I) => {\r\n    if(canLoad === false) return;\r\n    canLoad = false;\r\n    I(shared/* default */.A);\r\n\r\n    if(syncMapFn !== undefined){\r\n        syncMapFn();\r\n        syncMapFn = undefined;\r\n    } else lateSyncMap = true;\r\n}\r\n\r\n\r\nfunction addToLeaderboard(playerName, mapName){\r\n    let mapDiv = document.getElementById(`leaderboard-map-${mapName}`);\r\n    if(mapDiv === null){\r\n        // create mapDiv\r\n        mapDiv = document.createElement('div');\r\n        mapDiv.classList.add(\"lb-group\");\r\n        mapDiv.id = `leaderboard-map-${mapName}`;\r\n\r\n        const difficulty = shared/* default */.A.mapDifficulties[mapName] ?? 0;\r\n        const displayMapName = networking_stringHTMLSafe(shared/* default */.A.mapLeaderboardNames[mapName] ?? mapName);\r\n\r\n        const mapNameDiv = document.createElement('span');\r\n        mapDiv.appendChild(mapNameDiv);\r\n        mapNameDiv.classList.add('lb-name');\r\n        mapNameDiv.style.color = (mapName === 'winroom') ? '#3528e0' : shared/* default */.A.difficultyImageColors[Math.floor(difficulty)];\r\n        mapNameDiv.innerHTML = displayMapName;\r\n\r\n        leaderboard.appendChild(mapDiv);\r\n    }\r\n\r\n    // add the player to the mapDiv\r\n    const playerContainer = document.createElement('div');\r\n    playerContainer.id = `player-container-${playerName}-${mapName}`;\r\n    playerContainer.classList.add('lb-players');\r\n    mapDiv.appendChild(playerContainer);\r\n\r\n    const playerDiv = document.createElement('div');\r\n    playerContainer.appendChild(playerDiv);\r\n\r\n    const playerNameDiv = document.createElement('span');\r\n    playerNameDiv.classList.add('player-name');\r\n    playerNameDiv.innerHTML = playerName;\r\n    playerDiv.appendChild(playerNameDiv);\r\n}\r\n\r\nshared/* default */.A.addChatMessage = (message, type) => {\r\n    const div = document.createElement('div');\r\n    if (type !== 'system') div.classList.add('chat-message');\r\n    else div.classList.add('system-message');\r\n\r\n    const chatPrefixMap = {\r\n        normal: '',\r\n        system: '<span class=\"rainbow\">[SERVER]</span>',\r\n        dev: '<span class=\"rainbow\">[DEV]</span>',\r\n        guest: '<span class=\"guest\">'\r\n    };\r\n\r\n    const chatSuffixMap = {\r\n        normal: '',\r\n        system: '',\r\n        dev: '',\r\n        guest: '</span>'\r\n    };\r\n\r\n    div.innerHTML = chatPrefixMap[type] + message + chatSuffixMap[type];\r\n    const chatMessageDiv = document.querySelector('.chat-div');\r\n    chatMessageDiv.appendChild(div);\r\n    chatMessageDiv.scrollTop = chatMessageDiv.scrollHeight;\r\n}\r\n\r\n// first byte encodes the message type\r\nconst leaderboard = document.querySelector('.leaderboard-div');\r\nconst messageMap = [\r\n    // 0 - set auth id (not clientid)\r\n    (data) => {\r\n        const u32 = new Uint32Array(data.buffer);\r\n        shared/* default */.A.authId = u32[1];\r\n\r\n        // TEMP\r\n        const username = shared/* default */.A.username = localStorage.getItem('username');\r\n        const password = localStorage.getItem('password');\r\n        if(username === null || password === null){\r\n            // get tutorial\r\n            window.onkeydown({code: 'KeyZ', repeat: false, type: 'keydown'});\r\n            shared/* default */.A.changeMap('/tutorial');\r\n        } else {\r\n            // log in\r\n            const headers = new Headers();\r\n            headers.append('u', username);\r\n            headers.append('p', password);\r\n            shared/* default */.A.changeMap('/join', 'POST', headers);\r\n        }\r\n    },\r\n    // 1 - reload page (for hot refresh)\r\n    () => {\r\n        location.reload();\r\n    },\r\n    // 2 - change to create account page\r\n    (data) => {\r\n        location.replace(location.origin + '/create');\r\n    },\r\n    // 3 - flag next message as type\r\n    (data) => {\r\n        nextMsgFlag = data[1];\r\n    },\r\n    // 4 - player x and y\r\n    (data) => {\r\n        const raw = data.buffer;\r\n        const u16 = new Uint16Array(raw);\r\n        const id = u16[1];\r\n\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        const f32 = new Float32Array(raw);\r\n        shared/* default */.A.players[id].pos.x = f32[1];\r\n        shared/* default */.A.players[id].pos.y = f32[2];\r\n    },\r\n    // 5 - new player\r\n    (data) => {\r\n        let p = createPlayerFromData(msgpackr.unpack(data));\r\n        shared/* default */.A.players[p.id] = p;\r\n    },\r\n    // 6 - remove player\r\n    (data) => {\r\n        let id = new Uint16Array(data.buffer)[1];\r\n        shared/* default */.A.players[id] = undefined;\r\n    },\r\n    // 7 - chat message\r\n    (data) => {\r\n        shared/* default */.A.addChatMessage(\r\n            networking_stringHTMLSafe(networking_filterText(networking_decodeText(data, 2))),\r\n            ['normal', 'system', 'dev', 'guest'][data[1]]\r\n        )\r\n    },\r\n    // 8 - toggle godmode\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        shared/* default */.A.players[id].god = data[1] === 1;\r\n    },\r\n    // 9 - set ship angle\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        const f32 = new Float32Array(data.buffer);\r\n        shared/* default */.A.players[id].ship = true;\r\n        shared/* default */.A.players[id].shipAngle = f32[1];\r\n    },\r\n    // 10 - disable ship\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        shared/* default */.A.players[id].ship = false;\r\n    },\r\n    // 11 - set grapple\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        const f32 = new Float32Array(data.buffer);\r\n        shared/* default */.A.players[id].grapple = true;\r\n        shared/* default */.A.players[id].grappleX = f32[1];\r\n        shared/* default */.A.players[id].grappleY = f32[2];\r\n    },\r\n    // 13 - disable grapple\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        shared/* default */.A.players[id].grapple = false;\r\n    },\r\n    // 13 - set death timer\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        const f32 = new Float32Array(data.buffer);\r\n        shared/* default */.A.players[id].deathTimer = true;\r\n        shared/* default */.A.players[id].deathTime = f32[1];\r\n    },\r\n    // 14 - disable death timer\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        shared/* default */.A.players[id].deathTimer = false;\r\n    },\r\n    // 15 - change dead\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n\r\n        shared/* default */.A.players[id].dead = data[1] === 1;\r\n    },\r\n    // 16 - add to leaderboard\r\n    (data) => {\r\n        // [16, len, mapName, playerName]\r\n        const len = data[1];\r\n        const mapName = networking_decodeText(data, 2, len+2);\r\n        const playerName = networking_stringHTMLSafe(networking_decodeText(data, len+2));\r\n        addToLeaderboard(playerName, mapName);\r\n    },\r\n    // 17 - remove from leaderboard\r\n    (data) => {\r\n        // [17, len, mapName, playerName]\r\n        const len = data[1];\r\n        const mapName = networking_decodeText(data, 2, len+2);\r\n        const playerName = networking_stringHTMLSafe(networking_decodeText(data, len+2));\r\n\r\n        // remove the player from the mapDiv\r\n        document.getElementById(`player-container-${playerName}-${mapName}`).remove();\r\n\r\n        // if no more players then remove the mapDiv\r\n        let mapDiv = document.getElementById(`leaderboard-map-${mapName}`);\r\n        if(mapDiv.children.length === 1/*map name*/) mapDiv.remove();\r\n    },\r\n    // 18 - win msg\r\n    (data) => {\r\n        // [18, len, mapName, name]\r\n        const len = data[1];\r\n        const padding = data[2];\r\n        const mapName = networking_decodeText(data, 8, len+8);\r\n        const playerName = networking_stringHTMLSafe(networking_decodeText(data, len+8, data.byteLength - padding));\r\n\r\n        const difficultyNumber = shared/* default */.A.mapDifficulties[mapName] ?? 0;\r\n        const displayMapName = networking_stringHTMLSafe(shared/* default */.A.mapLeaderboardNames[mapName] ?? mapName);\r\n        const u32 = new Uint32Array(data.buffer);\r\n        const timeToBeat = u32[1] / 1000;\r\n\r\n        let ms = ((~~(timeToBeat*100))%100).toString();\r\n        let seconds = (~~(timeToBeat%60)).toString();\r\n        let minutes = (~~((timeToBeat / 60)%60)).toString();\r\n        if(ms.length === 1) ms = '0' + ms;\r\n        if(seconds.length === 1) seconds = '0' + seconds;\r\n\r\n        let displayMapTime = `${minutes}:${seconds}.${ms}`;\r\n        if(timeToBeat > 3600) {\r\n            if(minutes.length === 1) minutes = '0' + minutes;\r\n            const hours = (~~(timeToBeat / 3600)).toString();\r\n            displayMapTime = `${hours}:${minutes}:${seconds}.${ms}`;\r\n        }\r\n\r\n        const div = document.createElement('div');\r\n        div.classList.add('system-message');\r\n        div.classList.add(`difficulty-${Math.floor(difficultyNumber)}`);\r\n        div.innerHTML = `<span class=\"rainbow\">[SƎRVƎR]</span>: ${playerName} ${['has beaten', 'completed', 'surmounted', 'finished'][Math.floor(Math.random()*4)]} the ${displayMapName} in ${displayMapTime}!`;\r\n\r\n        const chatMessageDiv = document.querySelector('.chat-div');\r\n        chatMessageDiv.appendChild(div);\r\n        chatMessageDiv.scrollTop = chatMessageDiv.scrollHeight;\r\n    },\r\n    // 19 - init leaderboard\r\n    (data) => {\r\n        data[0] = 222;\r\n        const lb = msgpackr.unpack(data);\r\n\r\n        for(let mapName in lb){\r\n            for(let id in lb[mapName]){\r\n                addToLeaderboard(lb[mapName][id], mapName);\r\n            }\r\n        }\r\n    },\r\n    // 20 - map request\r\n    (data) => {\r\n        if(shared/* default */.A.obstacles.length === 0) return;\r\n        // generate function maps that map simulate functions to pack functions\r\n        shared/* default */.A.generateSyncMaps();\r\n\r\n        let ind=0, pack=[], fn, packed=false, lastId=-2;\r\n        for(let i = 0; i < shared/* default */.A.obstacles.length; i++){\r\n            const o = shared/* default */.A.obstacles[i];\r\n            if(o.customSync !== undefined){\r\n                pack[ind] = o.customSync(o);\r\n                packed = true;\r\n            } else {\r\n                pack[ind] = {}; packed = false;\r\n                for(let j = 0; j < o.simulate.length; j++){\r\n                    fn = shared/* default */.A.simulateToSync.get(o.simulate[j]);\r\n                    if(fn !== undefined) {\r\n                        packed ||= fn(o, pack[ind]) !== false;\r\n                        continue;\r\n                    }\r\n                    fn = shared/* default */.A.idleEffectToSync.get(o.simulate[j]);\r\n                    if(fn !== undefined) {\r\n                        packed ||= fn(o, pack[ind]) !== false;\r\n                        continue;\r\n                    }\r\n                    // custom simulate w/o customSync - dont pack\r\n                    packed = false;\r\n                }\r\n            }\r\n\r\n            if(packed === true){\r\n                if(lastId !== i-1) pack[ind].id = i;\r\n                lastId = i;\r\n                ind++;\r\n            }\r\n        }\r\n\r\n        if(pack.length === 0) return;\r\n\r\n        if(packed === false){\r\n            pack.length--;\r\n        }\r\n\r\n        const buf = msgpackr.pack(pack);\r\n\r\n        // First byte is 220 always, so replace it with 0 and reconstruct when client recieves.\r\n        buf[0] = 21;\r\n        shared/* default */.A.send(buf);\r\n    },\r\n    // 21 - map response\r\n    (data) => {\r\n        syncMapFn = () => {\r\n            shared/* default */.A.generateApplySyncMaps();\r\n\r\n            data[0] = 220;\r\n            let pack;\r\n            try {\r\n                pack = msgpackr.unpack(data);\r\n            } catch(e){\r\n                console.log('failed sync map parsing!', data);\r\n                console.error(e);\r\n                return;\r\n            }\r\n\r\n            if(Array.isArray(pack) === false || pack[0].id === undefined) return;\r\n            let lastId = pack[0].id, id, fn;\r\n\r\n            for(let i = 0; i < pack.length; i++){\r\n                id = pack[i].id;\r\n                if(id === undefined) id = ++lastId;\r\n                else lastId = id;\r\n\r\n                const o = shared/* default */.A.obstacles[id];\r\n                if(o === undefined) continue;\r\n\r\n                if(o.applyCustomSync !== undefined){\r\n                    o.applyCustomSync(o, pack[i]);\r\n                    continue;\r\n                }\r\n\r\n                for(let j = 0; j < o.simulate.length; j++){\r\n                    fn = shared/* default */.A.simulateToApplySync.get(o.simulate[j]);\r\n                    if(fn !== undefined) {\r\n                        fn(o, pack[i]);\r\n                        continue;\r\n                    }\r\n                    fn = shared/* default */.A.idleEffectToApplySync.get(o.simulate[j]);\r\n                    if(fn !== undefined) {\r\n                        fn(o, pack[i]);\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        if(lateSyncMap === true){\r\n            syncMapFn();\r\n            syncMapFn = undefined;\r\n            lateSyncMap = false;\r\n        }\r\n\r\n        const ticksToSimulate = (window.frames - shared/* default */.A.mapEntryTime) / 2;\r\n        if(ticksToSimulate > 2000) return;\r\n        shared/* default */.A.accum += shared/* default */.A.FRAME_TIME * ticksToSimulate;\r\n    },\r\n    // 22 - change radius\r\n    (data) => {\r\n        const u16 = new Uint16Array(data.buffer);\r\n        const id = u16[1];\r\n        if(id === shared/* default */.A.selfId) return;\r\n        const f32 = new Float32Array(data.buffer);\r\n        shared/* default */.A.players[id].sat.r = f32[1];\r\n    }\r\n]\r\n\r\nfunction createPlayerFromData(data){\r\n    const p = shared/* default */.A.createPlayer();\r\n    // if this gets bigger we may want to\r\n    // for(let key in data)\r\n    p.pos.x = data.pos.x;\r\n    p.pos.y = data.pos.y;\r\n    p.sat.r = data.r;\r\n    p.name = data.name;\r\n    p.dead = data.dead;\r\n    p.id = data.id;\r\n    p.god = data.god;\r\n    p.ship = data.ship;\r\n    p.shipAngle = data.shipAngle;\r\n    p.grapple = data.grapple;\r\n    p.grappleX = data.grappleX;\r\n    p.grappleY = data.grappleY;\r\n    p.deathTimer = data.deathTimer;\r\n    p.deathTime = data.deathTime;\r\n\r\n    return p;\r\n}\n;// ./client/scroll.js\n\r\n\r\nconst { until: scroll_until, environment: scroll_environment } = utils;\r\n\r\nlet nextCode;\r\nconst nextCodeLoaded = () => { return nextCode !== undefined; };\r\nconst isServer = typeof location === 'undefined';\r\nlet reqUrl = isServer === true ? '' : `${location.origin}/game`;\r\nlet loadingCurrent = false;\r\nlet nextFileName = '';\r\nlet lastFileNameStack = [];\r\nlet forwardFileNameStack = [];\r\nshared/* default */.A.levelFileName = '';\r\n\r\nshared/* default */.A.isExClient = true;// TEMP\r\n\r\n// never get code from server in editor\r\nif(scroll_environment === 'editor' || scroll_environment === 'server' || shared/* default */.A.isExClient === true){\r\n    getNextCode = async () => {\r\n        await scroll_until(() => { return false; })\r\n    };\r\n    scroll_scroll = () => {};\r\n} else if(location.href.includes('standalone') === true){\r\n    shared/* default */.A.standalone = true;\r\n    const split = location.href.split('/');\r\n    reqUrl += '/' + split[split.length - 1];\r\n    scroll_scroll = () => {};\r\n} else if(localStorage.getItem('tutorialCompleted') === null) {\r\n    let getNextCodeLoaded = false;\r\n    getNextCode = async () => {\r\n        await scroll_until(() => {return getNextCodeLoaded !== false});\r\n        return getNextCode();\r\n    };\r\n    shared/* default */.A.tutorial = true;\r\n    (async () => {\r\n        const exps = await __webpack_require__.e(/* import() */ 186).then(__webpack_require__.bind(__webpack_require__, 186));\r\n        getNextCode = exps.default;\r\n        getNextCodeLoaded = true;\r\n    })();\r\n}\r\n\r\n// get first code\r\ngetNextCode().then(async (code) => {\r\n    // load first request\r\n    nextCode = code;\r\n    replaceScript();\r\n\r\n    if(shared/* default */.A.standalone === true){\r\n        getNextCode = async () => {\r\n            await scroll_until(() => { return false; })\r\n        };\r\n        return;\r\n    }\r\n\r\n    // load next code when it arrives\r\n    nextCode = await firstNextCode;\r\n})\r\n\r\n// get next code\r\nlet firstNextCode = getNextCode();\r\n\r\n// on scroll\r\nasync function scroll_scroll(up=false){\r\n    // don't allow scrolling if we're loading the current code\r\n    // it'll look the same to the user anyways\r\n    if(loadingCurrent === true) return;\r\n    if(up === true){\r\n        if(lastFileNameStack.length === 0) return;\r\n        var lastCode = nextCode;\r\n        forwardFileNameStack.push(shared/* default */.A.levelFileName);\r\n        nextCode = await getLastCode(lastFileNameStack.pop());\r\n    } else if(shared/* default */.A.levelFileName !== ''){\r\n        lastFileNameStack.push(shared/* default */.A.levelFileName);\r\n        if(lastFileNameStack.length > 42) lastFileNameStack.shift();\r\n        if(forwardFileNameStack.length !== 0) nextCode = await getLastCode(forwardFileNameStack.pop());\r\n    }\r\n\r\n    shared/* default */.A.scrollingUp = up === true;\r\n    shared/* default */.A.lastObstacles = [];\r\n    for(let i = 0; i < obstacles.length; i++){\r\n        shared/* default */.A.lastObstacles.push(obstacles[i]);\r\n    }\r\n    for(let key in shared/* default */.A.colors){\r\n        shared/* default */.A.lastColors[key] = shared/* default */.A.colors[key];\r\n        shared/* default */.A.colors[key] = shared/* default */.A.defaultColors[key];\r\n    }\r\n    shared/* default */.A.lastPlayerData = [player.pos.x, player.pos.y];\r\n\r\n    // if we already have the next code\r\n    if(nextCode !== undefined){\r\n        // append new script to run second game\r\n        replaceScript();\r\n\r\n        // animation timer\r\n        shared/* default */.A.scrollAnimation = 0;\r\n\r\n        // fetch new next code\r\n        if(up === true) nextCode = lastCode;\r\n        else nextCode = await getNextCode();\r\n    } else {\r\n        // loading current, nextcode\r\n        loadingCurrent = true;\r\n\r\n        // load blank screen for now\r\n        removeScript();\r\n\r\n        // animation timer\r\n        shared/* default */.A.scrollAnimation = 0;\r\n\r\n        // code is on its way, wait until it gets here\r\n        await scroll_until(nextCodeLoaded, 16.66);\r\n\r\n        // set code\r\n        replaceScript();\r\n\r\n        // unlock mutex\r\n        loadingCurrent = false;\r\n\r\n        // fetch new next code\r\n        nextCode = await getNextCode();\r\n    }\r\n}\r\n\r\nshared/* default */.A.won = false;\r\nasync function getNextCode(){\r\n    const response = await fetch(reqUrl);\r\n    if (!response.ok) throw new Error(`Failed to fetch ${reqUrl}`);\r\n    nextFileName = response.headers.get('Fn');\r\n    return response.text();\r\n}\r\n\r\nasync function getLastCode(fileName){\r\n    const fileNameWithoutTheJS = fileName.slice(0, fileName.length-3);\r\n    const response = await fetch(reqUrl + '/' + fileNameWithoutTheJS);\r\n    if (!response.ok) throw new Error(`Failed to fetch ${reqUrl}`);\r\n    nextFileName = fileName;\r\n    return response.text();\r\n}\r\n\r\n// replaces code running with nextCode\r\nasync function replaceScript(){\r\n    removeScript();\r\n\r\n    shared/* default */.A.resetGame();\r\n    stopMusic();\r\n\r\n    const scriptElement = document.createElement('script');\r\n    scriptElement.id = \"gameScript\";\r\n    scriptElement.text = nextCode;\r\n    document.body.appendChild(scriptElement);\r\n\r\n    nextCode = undefined;\r\n    shared/* default */.A.levelFileName = nextFileName;\r\n}\r\n\r\nshared/* default */.A.removeScript = function removeScript(){\r\n    const last = document.getElementById(\"gameScript\");\r\n    if(last !== null) last.remove();\r\n    shared/* default */.A.resetGame();\r\n    stopMusic();\r\n}\r\n\r\nshared/* default */.A.resetFns = [];\r\nshared/* default */.A.resetGame = () => {\r\n    for(let i = 0; i < shared/* default */.A.resetFns.length; i++){\r\n        shared/* default */.A.resetFns[i]();\r\n    }\r\n    shared/* default */.A.resetFns.length = shared/* default */.A.obstacles.length = shared/* default */.A.mouseUpFunctions.length = shared/* default */.A.mouseDownFunctions.length = shared/* default */.A.mouseMoveFunctions.length = shared/* default */.A.resizeFns.length = 0;\r\n    if(shared/* default */.A.environment !== 'editor') {shared/* default */.A.respawnPlayer(); shared/* default */.A.changeCameraScale(1); /*player.renderRadius = player.sat.r;*/ }\r\n    else {shared/* default */.A.infiniteLoop = false; shared/* default */.A.onEditorReset();}\r\n    for(let key in shared/* default */.A.defaultColors) { shared/* default */.A.colors[key] = shared/* default */.A.defaultColors[key]; }\r\n    if(shared/* default */.A.colors.vignette !== undefined) shared/* default */.A.colors.vignette = structuredClone(shared/* default */.A.defaultColors.vignette);\r\n    shared/* default */.A.mouseDownFunctions.push(() => {\r\n        if(player.dead === true) shared/* default */.A.respawnPlayer();\r\n    })\r\n    if(shared/* default */.A.addSideMenuEvtListeners !== undefined) shared/* default */.A.addSideMenuEvtListeners(nextFileName);\r\n    shared/* default */.A.spawnPosition.x = 100;\r\n    shared/* default */.A.spawnPosition.y = 100;\r\n    shared/* default */.A.mapDimensions.x = 2000;\r\n    shared/* default */.A.mapDimensions.y = 2000;\r\n    shared/* default */.A.camera.numControlledBy = 0;\r\n    const player = shared/* default */.A.players[shared/* default */.A.selfId];\r\n    if(player !== undefined){\r\n        player.sat.r = 49.5;\r\n        player.speed = player.baseSpeed = 7.167;\r\n    }\r\n    shared/* default */.A.idToObs = {};\r\n}\r\n\r\n/* harmony default export */ const client_scroll = (scroll_scroll);\n;// ./client/components.js\n\r\nconst { environment: components_environment, blendColor: components_blendColor, encodeAtPosition: components_encodeAtPosition } = utils;\r\n\r\nlet toScroll = false;\r\n\r\n\r\nshared/* default */.A.respawnPlayer = () => {\r\n    const player = shared/* default */.A.players[shared/* default */.A.selfId];\r\n    if(player === undefined) return;\r\n    player.pos.x = shared/* default */.A.spawnPosition.x;\r\n    player.pos.y = shared/* default */.A.spawnPosition.y;\r\n    player.renderRadius = 0;\r\n    player.dead = false;\r\n    player.forces.length = 0;\r\n    if(shared/* default */.A.dragging === true) {window.onmouseup(); shared/* default */.A.dragging = true;}\r\n    else window.onmouseup();\r\n}\r\n\r\nconst SAT = window.SAT;\r\nSAT.Circle.prototype.rotate = function (angle) {\r\n    this.pos.rotate(angle);\r\n}\r\n\r\nfunction create(shape, simulates, effects, params){\r\n    const e = {\r\n        sat: satMap[shape](params),\r\n        simulate: [],\r\n        effect: [],\r\n        renderShape: renderShapeMap[shape],\r\n        renderEffect: effects.map(e => renderEffectMap[e]),\r\n    };\r\n    e.renderEffectTimer = 0;\r\n    e.pos = e.sat.pos;\r\n    if(shape === 0) e.sat.r = Math.max(e.sat.r, 0.001);\r\n    else if(shape === 3) {e.isText = true; e.text = params.text; e.fontSize = params.fontSize; }\r\n    else if(shape === 4){\r\n        e.sat.r = Math.max(e.sat.r, 0.001); e.innerRadius = Math.max(params.innerRadius, 0);\r\n        e.startSlice = params.startSlice; e.startSliceAngle = params.startSliceAngle;\r\n        e.endSlice = params.endSlice; e.endSliceAngle = params.endSliceAngle;\r\n        e.startSliceAngleRotateSpeed = params.startSliceAngleRotateSpeed;\r\n        e.endSliceAngleRotateSpeed = params.endSliceAngleRotateSpeed;\r\n        if(params.circleSliceRotate !== undefined) e.simulate.push(params.circleSliceRotate);\r\n    }\r\n    for(let key in shared/* default */.A.satConstraintsMap[shape]){\r\n        // [min, max, mustBeInt, customValidator(e)]\r\n        const c = shared/* default */.A.satConstraintsMap[shape][key];\r\n        if(c[2] === true) e[key] = Math.round(e[key]);\r\n        if(e[key] < c[0]) e[key] = c[0];\r\n        else if(e[key] > c[1]) e[key] = c[1];\r\n    }\r\n    e.dimensions = generateDimensions(e);\r\n    e.topLeft = generateTopLeftCoordinates(e);\r\n    for(let i = 0; i < simulates.length; i++){\r\n        e.simulate.push(simulateMap[simulates[i]]);\r\n        initSimulateMap[simulates[i]](e, params);\r\n        for(let key in shared/* default */.A.simulateConstraintsMap[simulates[i]]){\r\n            // [min, max, mustBeInt, customValidator(e)]\r\n            const c = shared/* default */.A.simulateConstraintsMap[simulates[i]][key];\r\n            if(c[2] === true) e[key] = Math.round(e[key]);\r\n            if(e[key] < c[0]) e[key] = c[0];\r\n            else if(e[key] > c[1]) e[key] = c[1];\r\n        }\r\n    }\r\n    for(let i = 0; i < effects.length; i++){\r\n        e.effect.push(effectMap[effects[i]]);\r\n        initEffectMap[effects[i]](e, params);\r\n        if(idleEffectMap[effects[i]] !== undefined) e.simulate.push(idleEffectMap[effects[i]]);\r\n        for(let key in shared/* default */.A.effectConstraintsMap[effects[i]]){\r\n            // [min, max, mustBeInt, customValidator(e)]\r\n            const c = shared/* default */.A.effectConstraintsMap[effects[i]][key];\r\n            if(c[2] === true) e[key] = Math.round(e[key]);\r\n            if(e[key] < c[0]) e[key] = c[0];\r\n            else if(e[key] > c[1]) e[key] = c[1];\r\n        }\r\n    }\r\n    if(params.sf !== undefined) e.simulate.push(params.sf);\r\n    if(params.ef !== undefined) {e.effect.push(params.ef); e.renderEffect.push(renderEffectMap[3]);}\r\n    if(params.sf !== undefined || params.ef !== undefined) {\r\n        e.simulate.push(()=>{e.dimensions=generateDimensions(e);e.topLeft=generateTopLeftCoordinates(e);});\r\n        if(params.customSync !== undefined && params.applyCustomSync !== undefined)\r\n        {e.customSync = params.customSync; e.applyCustomSync = params.applyCustomSync;}\r\n    };\r\n    if(params.cr !== undefined) e.cr = params.cr;\r\n    \r\n    components_obstacles.push(e);\r\n\r\n    // fixing polygon points if they're dynamically generated\r\n    if(params.fixPoly !== undefined){\r\n        if(components_environment === 'editor'){\r\n            e.sat.setPoints(shared/* default */.A.fixPolygon(params.points).map(pt => new SAT.Vector(pt[0], pt[1])));\r\n            e.dimensions = generateDimensions(e);\r\n            e.topLeft = generateTopLeftCoordinates(e);\r\n        } else {\r\n            (async()=>{\r\n                await __webpack_require__.e(/* import() */ 281).then(__webpack_require__.bind(__webpack_require__, 281));\r\n                e.sat.setPoints(shared/* default */.A.fixPolygon(params.points).map(pt => new SAT.Vector(pt[0], pt[1])));\r\n                e.dimensions = generateDimensions(e);\r\n                e.topLeft = generateTopLeftCoordinates(e);\r\n            })();\r\n        }\r\n    }\r\n}\r\nshared/* default */.A.C = create;\r\nshared/* default */.A.idToObs = {};\r\nshared/* default */.A.tickFns = [];\r\nshared/* default */.A.R = remove;\r\nfunction remove(i/*ndex*/){\r\n    if(i === components_obstacles.length-1){\r\n        do {\r\n            components_obstacles.pop();\r\n        } while(components_obstacles[components_obstacles.length-1].removed === true)\r\n        return;\r\n    }\r\n    const o = components_obstacles[i];\r\n    o.simulate.length = o.effect.length = 0;\r\n    delete o.sf; delete o.ef; delete o.cr;\r\n    o.pos.x = -1E9;\r\n    o.removed = true;\r\n}\r\n\r\nfunction components_interpolate(start, end, t){\r\n    return (1-t) * start + t * end;\r\n}\r\n\r\nlet res = new SAT.Response();\r\nlet angle, collided = false;\r\nfunction simulate(){\r\n    // player simulation\r\n    const player = shared/* default */.A.players[shared/* default */.A.selfId];\r\n\r\n    if(shared/* default */.A.isExClient === true && player.dead === false) {\r\n        if(shared/* default */.A.touchMode === true){\r\n            player.xa = Math.cos(shared/* default */.A.touchAngle) * player.speed;\r\n            player.ya = Math.sin(shared/* default */.A.touchAngle) * player.speed;\r\n        } else {\r\n            player.xa = (shared/* default */.A.input.right - shared/* default */.A.input.left) * player.speed;\r\n            player.ya = (shared/* default */.A.input.down - shared/* default */.A.input.up) * player.speed;\r\n        }\r\n\r\n        if(shared/* default */.A.input.shift === true) {\r\n            if(player.god === true){\r\n                player.xa *= 5;\r\n                player.ya *= 5;\r\n            } else {\r\n                player.xa *= 0.5;\r\n                player.ya *= 0.5;\r\n            }\r\n        }\r\n\r\n        if(player.ship === false){\r\n            player.xv += player.xa * player.axisSpeedMultX;\r\n            player.yv += player.ya * player.axisSpeedMultY;\r\n        } else {\r\n            player.shipAngle += player.xa * player.shipTurnSpeed;\r\n\r\n            player.xv -= Math.cos(player.shipAngle) * player.ya * player.axisSpeedMultX;\r\n            player.yv -= Math.sin(player.shipAngle) * player.ya * player.axisSpeedMultY;\r\n        }\r\n\r\n        player.pos.x += player.xv;\r\n        player.pos.y += player.yv;\r\n\r\n        player.xv *= player.friction;\r\n        player.yv *= player.friction;\r\n    } else if(shared/* default */.A.dragging === true && player.dead === false){\r\n        if(player.axisSpeedMultX === 0 || player.axisSpeedMultY === 0) angle = Math.atan2((shared/* default */.A.mouseY - player.pos.y), (shared/* default */.A.mouseX - player.pos.x));\r\n        else angle = Math.atan2((shared/* default */.A.mouseY - player.pos.y) * player.axisSpeedMultX, (shared/* default */.A.mouseX - player.pos.x) * player.axisSpeedMultY);\r\n        player.xv = Math.cos(angle) * player.speed * player.axisSpeedMultX;\r\n        player.yv = Math.sin(angle) * player.speed * player.axisSpeedMultY;\r\n        if(Math.abs(player.xv) > Math.abs(player.pos.x - shared/* default */.A.mouseX)) player.xv = shared/* default */.A.mouseX - player.pos.x;\r\n        if(Math.abs(player.yv) > Math.abs(player.pos.y - shared/* default */.A.mouseY)) player.yv = shared/* default */.A.mouseY - player.pos.y;\r\n        player.pos.x += player.xv;\r\n        player.pos.y += player.yv; \r\n    } else {\r\n        player.xv = player.yv = 0;\r\n    }\r\n    player.axisSpeedMultX = player.axisSpeedMultY = 1;\r\n\r\n    if(player.stopForces === true){\r\n        player.stopForces = false;\r\n        player.forces.length = 0;\r\n    } else {\r\n        for(let i = 0; i < player.forces.length; i+=3){\r\n            player.pos.x += player.forces[i];\r\n            player.pos.y += player.forces[i+1];\r\n\r\n            player.forces[i] *= player.forces[i+2];\r\n            player.forces[i+1] *= player.forces[i+2];\r\n\r\n            if(Math.abs(player.forces[i]) < 0.01 && Math.abs(player.forces[i+1]) < 0.01){\r\n                player.forces.splice(i,3);\r\n                i-=3;\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n\r\n    if(player.dead === true){\r\n        player.forces.length = 0;\r\n        player.renderRadius = player.lastAliveRadius;\r\n        for(let i = 0; i < components_obstacles.length; i++){\r\n            // obstacle simulation\r\n            for(let j = 0; j < components_obstacles[i].simulate.length; j++){\r\n                components_obstacles[i].simulate[j](components_obstacles[i], player);\r\n            }\r\n        }\r\n    } else {\r\n        player.lastAliveRadius = player.sat.r;\r\n        if(player.god !== true){\r\n            if(player.pos.x - player.sat.r < 0) player.pos.x = player.sat.r;\r\n            else if(player.pos.x + player.sat.r > shared/* default */.A.mapDimensions.x) player.pos.x = shared/* default */.A.mapDimensions.x - player.sat.r;\r\n            if(player.pos.y - player.sat.r < 0) player.pos.y = player.sat.r;\r\n            else if(player.pos.y + player.sat.r > shared/* default */.A.mapDimensions.y) player.pos.y = shared/* default */.A.mapDimensions.y - player.sat.r;\r\n        \r\n            for(let i = 0; i < components_obstacles.length; i++){\r\n                // collision (done before simulation because that is what last rendered frame sees)\r\n                if(components_obstacles[i].sat.r !== undefined){\r\n                    if(components_obstacles[i].startSlice !== undefined){\r\n                        collided = testCircleSliceCircle(components_obstacles[i], player, res);\r\n                    } else {\r\n                        collided = SAT.testCircleCircle(components_obstacles[i].sat, player.sat, res);\r\n                    }\r\n                } else {\r\n                    collided = SAT.testPolygonCircle(components_obstacles[i].sat, player.sat, res);\r\n                }\r\n                if(collided === true){\r\n                    for(let j = 0; j < components_obstacles[i].effect.length; j++){\r\n                        components_obstacles[i].effect[j](player, res, components_obstacles[i], i);\r\n                    }\r\n                }\r\n                res.clear();// TODO: test if this is really needed\r\n        \r\n                // obstacle simulation\r\n                for(let j = 0; j < components_obstacles[i].simulate.length; j++){\r\n                    components_obstacles[i].simulate[j](components_obstacles[i], player);\r\n                }\r\n            }\r\n        } else {\r\n            // just do simulation if in godmode\r\n            for(let i = 0; i < components_obstacles.length; i++){\r\n                for(let j = 0; j < components_obstacles[i].simulate.length; j++){\r\n                    components_obstacles[i].simulate[j](components_obstacles[i], player);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(player.grapple === true){\r\n            if(shared/* default */.A.input.action1 === true && player.grappleX === -1){\r\n                let resetRadius = player.sat.r;\r\n                player.sat.r = player.grappleRange;\r\n                let closestAngle = 0;\r\n                let priorityResetRadius = 0;\r\n                let grapPointPriority = false;\r\n                for(let i = 0; i < components_obstacles.length; i++){\r\n                    if(components_obstacles[i].isGrapplePoint === true && grapPointPriority === false){\r\n                        priorityResetRadius = player.sat.r;\r\n                        player.sat.r = player.grappleRange;\r\n                    }\r\n\r\n                    if(components_obstacles[i].sat.r !== undefined){\r\n                        if(components_obstacles[i].startSlice !== undefined){\r\n                            collided = testCircleSliceCircle(components_obstacles[i], player, res);\r\n                        } else {\r\n                            collided = SAT.testCircleCircle(components_obstacles[i].sat, player.sat, res);\r\n                        }\r\n                    } else {\r\n                        collided = SAT.testPolygonCircle(components_obstacles[i].sat, player.sat, res);\r\n                    }\r\n                    \r\n                    if(components_obstacles[i].isGrapplePoint === true){\r\n                        if(collided === true){\r\n                            grapPointPriority = true;\r\n                            player.sat.r -= res.overlap;\r\n                            closestAngle = Math.atan2(res.overlapN.y, res.overlapN.x);\r\n                        } else if(grapPointPriority === false){\r\n                            player.sat.r = priorityResetRadius;\r\n                        }\r\n                    } else if(collided === true && grapPointPriority === false){\r\n                        player.sat.r -= res.overlap;\r\n                        closestAngle = Math.atan2(res.overlapN.y, res.overlapN.x);\r\n                    }\r\n                    \r\n                    res.clear();// TODO: test if this is really needed\r\n                }\r\n\r\n                if(player.sat.r < player.grappleRange){\r\n                    player.sat.r = Math.max(player.sat.r, 0);\r\n                    player.grappleX = player.pos.x - Math.cos(closestAngle) * player.sat.r;\r\n                    player.grappleY = player.pos.y - Math.sin(closestAngle) * player.sat.r;\r\n                }\r\n                player.sat.r = resetRadius;\r\n            } else if(player.grappleX !== -1){\r\n                if(shared/* default */.A.input.action1 === false){\r\n                    player.grappleX = player.grappleY = -1;\r\n                } else {\r\n                    let grappleLen = Math.sqrt((player.pos.x - player.grappleX) ** 2 + (player.pos.y - player.grappleY) ** 2);\r\n                    let grappleAngle = Math.atan2(player.grappleY - player.pos.y, player.grappleX - player.pos.x);\r\n\r\n                    player.forces.push(\r\n                        Math.cos(grappleAngle) * grappleLen * player.grappleForce,\r\n                        Math.sin(grappleAngle) * grappleLen * player.grappleForce,\r\n                        player.grappleFric\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n        const v = shared/* default */.A.colors.vignette;\r\n        for(let key in v.innerInterp){\r\n            v.innerInterp[key] = components_interpolate(v.innerInterp[key], v.inner[key], 0.03);\r\n        }\r\n        for(let key in v.outerInterp){\r\n            v.outerInterp[key] = components_interpolate(v.outerInterp[key], v.outer[key], 0.03);\r\n        }\r\n    }\r\n\r\n    for(let i = 0; i < shared/* default */.A.players.length; i++){\r\n        const p = shared/* default */.A.players[i];\r\n        if(p === undefined) continue;\r\n        if((p.interpX-p.pos.x)**2+(p.interpY-p.pos.y)**2>352**2){\r\n            p.interpX = p.pos.x;\r\n            p.interpY = p.pos.y;\r\n        }\r\n        p.interpX = components_interpolate(p.interpX, p.pos.x, 0.4);\r\n        p.interpY = components_interpolate(p.interpY, p.pos.y, 0.4);\r\n        p.renderRadius = components_interpolate(p.renderRadius, p.sat.r, 1 / 5.4);\r\n    }\r\n\r\n    if(player.touchingNormalIndexes.length !== 0 || player.lastTouchingNormalIndexes.length !== 0){\r\n        player.lastTouchingNormalIndexes = player.touchingNormalIndexes;\r\n        player.touchingNormalIndexes = [];\r\n    }\r\n\r\n    if(player.onSafe === true){\r\n        player.onSafe = false;\r\n        if(player.timeTrapOverrideSafe === true){\r\n            player.timeTrapOverrideSafe = false;\r\n        } else {\r\n            player.dead = false;\r\n        }\r\n    }\r\n\r\n    if(player.deathTimer === true){\r\n        player.deathTime--;\r\n        if(player.deathTime < 0 || player.dead === true){\r\n            player.deathTime = Infinity;\r\n            player.deathTimer = false;\r\n            player.dead = true;\r\n\r\n            shared/* default */.A.u4[0] = 14;\r\n            shared/* default */.A.send(shared/* default */.A.u4);\r\n        }\r\n    }\r\n\r\n    // bounding the player by the walls\r\n    player.touchingWall = false;\r\n    if(player.sat.r > 900) player.sat.r = 900;\r\n\r\n    if(player.god !== true){\r\n        if(player.pos.x - player.sat.r < 0){\r\n            player.pos.x = player.sat.r;\r\n            player.touchingWall = true;\r\n        } else if(player.pos.x + player.sat.r > shared/* default */.A.mapDimensions.x){\r\n            player.pos.x = shared/* default */.A.mapDimensions.x - player.sat.r;\r\n            player.touchingWall = true;\r\n        }\r\n        if(player.pos.y - player.sat.r < 0){\r\n            player.pos.y = player.sat.r;\r\n            player.touchingWall = true;\r\n        } else if(player.pos.y + player.sat.r > shared/* default */.A.mapDimensions.y){\r\n            player.pos.y = shared/* default */.A.mapDimensions.y - player.sat.r;\r\n            player.touchingWall = true;\r\n        }\r\n    } else {\r\n        player.dead = false;\r\n    }\r\n\r\n    if(shared/* default */.A.tickFns.length > 0){\r\n        for(let i = 0; i < shared/* default */.A.tickFns.length; i++){\r\n            shared/* default */.A.tickFns[i]();\r\n        }\r\n        shared/* default */.A.tickFns.length = 0;\r\n    }\r\n\r\n    // scrolling if specified by a simulate type\r\n    if(toScroll === true){\r\n        toScroll = false;\r\n        if(shared/* default */.A.dragging === true) window.onmouseup();\r\n        client_scroll();\r\n    }\r\n\r\n    window.frames++;\r\n}\r\n\r\nlet runningOverlapN = new SAT.Vector(), runningOverlapV = new SAT.Vector();\r\nconst testCircleSliceCircle = shared/* default */.A.testCircleSliceCircle = (circleSlice, circle, res) => {\r\n    let collisionAngle, collisionDistSq, gts, lte, angleOverflow, collided = false;\r\n\r\n    // do circle first, then slices. If we collide with the circle then we don't want to collide w/ slices\r\n    collisionAngle = Math.atan2(circle.pos.y - circleSlice.pos.y, circle.pos.x - circleSlice.pos.x);\r\n    if(collisionAngle < 0) collisionAngle += Math.PI * 2;\r\n\r\n    gts = circleSlice.startSliceAngle < collisionAngle;\r\n    lte = collisionAngle < circleSlice.endSliceAngle;\r\n    \r\n    angleOverflow = circleSlice.startSliceAngle > circleSlice.endSliceAngle;\r\n\r\n    if(angleOverflow === true ? (gts === true || lte === true) : (gts === true && lte === true)){\r\n        collided = SAT.testCircleCircle(circleSlice.sat, circle.sat, res);\r\n\r\n        if(collided === true){\r\n            collisionDistSq = (circle.pos.y - circleSlice.pos.y) ** 2 + (circle.pos.x - circleSlice.pos.x) ** 2;\r\n\r\n            if(collisionDistSq > ((circleSlice.innerRadius + circleSlice.sat.r + circle.sat.r) / 2) ** 2){\r\n                // normal circle collision\r\n                return true;\r\n            } else {\r\n                if(collisionDistSq <= (circleSlice.innerRadius - circle.sat.r) ** 2){\r\n                    // we're too far inside, no collision\r\n                    res.clear();\r\n                    res.overlapN.x = res.overlapN.y = 0;\r\n                    res.overlapV.x = res.overlapV.y = 0;\r\n                    return false;\r\n                } else {\r\n                    // we're inside the circle - bound the opp way\r\n                    res.overlapN = res.overlapN.scale(-1,-1);\r\n                    res.overlap = (circleSlice.sat.r - circleSlice.innerRadius + circle.sat.r * 2) - res.overlap;\r\n                    res.overlapV = new SAT.Vector(res.overlapN.x * res.overlap, res.overlapN.y * res.overlap);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if(Math.abs((circleSlice.startSliceAngle - circleSlice.endSliceAngle) % (Math.PI * 2)) < 0.001){\r\n        // circle slices are on top of each other. We missed collision with the circle, so we're done\r\n        return false;\r\n    }\r\n\r\n    runningOverlapN.x = runningOverlapN.y = 0;\r\n    runningOverlapV.x = runningOverlapV.y = 0;\r\n\r\n    // collision with startSlice\r\n    if(SAT.testPolygonCircle(circleSlice.startSlice, circle.sat, res) === true){\r\n        collided = true;\r\n        runningOverlapN.x += res.overlapN.x;\r\n        runningOverlapN.y += res.overlapN.y;\r\n        runningOverlapV.x += res.overlapV.x;\r\n        runningOverlapV.y += res.overlapV.y;\r\n        res.clear();\r\n        res.overlapN.x = res.overlapN.y = 0;\r\n        res.overlapV.x = res.overlapV.y = 0;\r\n    }\r\n    \r\n    // collision with endSlice\r\n    collided ||= SAT.testPolygonCircle(circleSlice.endSlice, circle.sat, res);\r\n\r\n    res.overlapN.x += runningOverlapN.x;\r\n    res.overlapN.y += runningOverlapN.y;\r\n    res.overlapN = res.overlapN.normalize();\r\n    res.overlapV.x += runningOverlapV.x;\r\n    res.overlapV.y += runningOverlapV.y;\r\n    res.overlap = res.overlapV.x / res.overlapN.x;\r\n\r\n    return collided;\r\n}\r\n\r\n// 0 - circle, 1 - polygon\r\nconst collisionMatrix = [\r\n    SAT.testCircleCircle, SAT.testCirclePolygon,\r\n    SAT.testPolygonCircle, SAT.testPolygonPolygon\r\n]\r\nshared/* default */.A.collide = (a,b) => {\r\n    res.hasCollided = collisionMatrix[(a.sat.r === undefined) * 2 + (b.sat.r === undefined)](a.sat, b.sat, res);\r\n    return res;// make sure to clear after use!\r\n}\r\nshared/* default */.A.boundAB = (a,b) => {\r\n    const res = shared/* default */.A.collide(a,b);\r\n    if(res.hasCollided === true) {\r\n        a.pos.x -= res.overlapV.x;\r\n        a.pos.y -= res.overlapV.y;\r\n    }\r\n    res.clear();\r\n}\r\nshared/* default */.A.isABColliding = (a,b) => {\r\n    if(a === undefined || b === undefined) return false;\r\n    const res = shared/* default */.A.collide(a,b);\r\n    const hasCollided = res.hasCollided;\r\n    res.clear();\r\n    return hasCollided;\r\n}\r\n\r\nconst satMap = [\r\n    /*circle*/\r\n    (p) => {\r\n        // x,y,r\r\n        return new SAT.Circle(new SAT.Vector(p.x, p.y), p.r);\r\n    },\r\n    /*rectangle*/\r\n    (p) => {\r\n        // x,y,w,h\r\n        return new SAT.Box(new SAT.Vector(p.x, p.y), p.w, p.h).toPolygon();\r\n    },\r\n    /*polygon*/\r\n    (p) => {\r\n        // points: [[x,y], ...]\r\n        if(p.points.length < 2) p.points = shared/* default */.A.satDefaultMap[2].points;\r\n        p.x = 0; p.y = 0;\r\n        const s = new SAT.Polygon(new SAT.Vector(), p.points.map(pt => new SAT.Vector(pt[0], pt[1])));\r\n        s.pos.x = p.x;\r\n        s.pos.y = p.y;\r\n        return s;\r\n    },\r\n    /*text*/\r\n    (p) => {\r\n        if(shared/* default */.A.isServer === true) return new SAT.Box(new SAT.Vector(p.x, p.y), 100, 100).toPolygon();\r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.font = `${p.fontSize}px Inter`;\r\n        const dimensions = ctx.measureText(p.text);\r\n        const w = dimensions.actualBoundingBoxRight + dimensions.actualBoundingBoxLeft;\r\n        const h = dimensions.actualBoundingBoxDescent + dimensions.actualBoundingBoxAscent;\r\n        const s = new SAT.Box(new SAT.Vector(p.x - w / 2, p.y - h / 2), w, h).toPolygon();\r\n        return s;\r\n    },\r\n    /*circleSlice*/\r\n    (p) => {\r\n        const sat = new SAT.Circle(new SAT.Vector(p.x, p.y), p.r);\r\n        const o = p;\r\n        o.startSliceAngle %= Math.PI * 2;\r\n        o.endSliceAngle %= Math.PI * 2;\r\n        if(o.startSliceAngle < 0) o.startSliceAngle += Math.PI * 2;\r\n        if(o.endSliceAngle < 0) o.endSliceAngle += Math.PI * 2;\r\n        o.startSlice = new SAT.Polygon(new SAT.Vector(), [\r\n            new SAT.Vector(Math.cos(o.startSliceAngle) * o.r, Math.sin(o.startSliceAngle) * o.r),\r\n            new SAT.Vector(Math.cos(o.startSliceAngle) * o.innerRadius, Math.sin(o.startSliceAngle) * o.innerRadius),\r\n        ]);\r\n        o.endSlice = new SAT.Polygon(new SAT.Vector(), [\r\n            new SAT.Vector(Math.cos(o.endSliceAngle) * o.r, Math.sin(o.endSliceAngle) * o.r),\r\n            new SAT.Vector(Math.cos(o.endSliceAngle) * o.innerRadius, Math.sin(o.endSliceAngle) * o.innerRadius),\r\n        ]);\r\n        o.startSlice.pos = o.endSlice.pos = sat.pos;\r\n        if(p.startSliceAngleRotateSpeed !== 0 || p.endSliceAngleRotateSpeed !== 0){\r\n            p.circleSliceRotate = (o) => {\r\n                o.startSliceAngle += o.startSliceAngleRotateSpeed;\r\n                o.endSliceAngle += o.endSliceAngleRotateSpeed;\r\n                o.startSliceAngle %= Math.PI * 2;\r\n                o.endSliceAngle %= Math.PI * 2;\r\n                if(o.startSliceAngle < 0) o.startSliceAngle += Math.PI * 2;\r\n                if(o.endSliceAngle < 0) o.endSliceAngle += Math.PI * 2;\r\n                o.startSlice.setPoints([\r\n                    new SAT.Vector(Math.cos(o.startSliceAngle) * o.sat.r, Math.sin(o.startSliceAngle) * o.sat.r),\r\n                    new SAT.Vector(Math.cos(o.startSliceAngle) * o.innerRadius, Math.sin(o.startSliceAngle) * o.innerRadius),\r\n                ]);\r\n                o.endSlice.setPoints([\r\n                    new SAT.Vector(Math.cos(o.endSliceAngle) * o.sat.r, Math.sin(o.endSliceAngle) * o.sat.r),\r\n                    new SAT.Vector(Math.cos(o.endSliceAngle) * o.innerRadius, Math.sin(o.endSliceAngle) * o.innerRadius),\r\n                ])\r\n                o.startSlice.pos = o.endSlice.pos = o.sat.pos;\r\n            }\r\n        }\r\n        return sat;\r\n    }\r\n];\r\n\r\n// font loading fix\r\nfunction fixFonts() {\r\n    const os = shared/* default */.A.obstacles;\r\n    for(let i = 0; i < os.length; i++){\r\n        if(os[i].isText !== true) continue;\r\n        const oldDimensions = os[i].dimensions;\r\n        os[i].dimensions = generateDimensions(os[i]);\r\n        os[i].pos.x += (oldDimensions.x - os[i].dimensions.x) / 2;\r\n        os[i].pos.y += (oldDimensions.y - os[i].dimensions.y) / 2;\r\n        os[i].topLeft = generateTopLeftCoordinates(os[i]);\r\n    }\r\n}\r\nsetTimeout(fixFonts, 1000);\r\nsetTimeout(fixFonts, 3000);\r\n\r\nfunction generateDimensions(o){\r\n    const sat = o.sat;\r\n    if(sat.r !== undefined){\r\n        return {\r\n            x: sat.r * 2,\r\n            y: sat.r * 2\r\n        }\r\n    }\r\n    \r\n    // if(o.isText === true){\r\n    //     ctx.textAlign = 'center';\r\n    //     ctx.textBaseline = 'middle';\r\n    //     ctx.font = `${o.fontSize}px Inter`;\r\n    //     const dimensions = ctx.measureText(o.text);\r\n    //     o.wOffset = (dimensions.actualBoundingBoxRight - dimensions.actualBoundingBoxLeft) / 2;\r\n    //     o.hOffset = (dimensions.actualBoundingBoxDescent - dimensions.actualBoundingBoxAscent) / 2; // *0.75?\r\n    //     // if(o.rotation === undefined){\r\n    //         // return {\r\n    //         //     x: dimensions.actualBoundingBoxRight + dimensions.actualBoundingBoxLeft,\r\n    //         //     y: dimensions.actualBoundingBoxDescent + dimensions.actualBoundingBoxAscent,\r\n    //         // }\r\n    //     // }\r\n    //     // const x = dimensions.actualBoundingBoxRight + dimensions.actualBoundingBoxLeft;\r\n    //     // const y = dimensions.actualBoundingBoxDescent + dimensions.actualBoundingBoxAscent;\r\n\r\n    //     // const c = Math.cos(o.rotation); const s = Math.sin(o.rotation);\r\n    //     // return {\r\n    //     //     x: x * c + y * s,\r\n    //     //     y: x * s + y * c\r\n    //     // }\r\n    // }\r\n    \r\n    let top, right, bottom, left;\r\n    bottom = right = -Infinity;\r\n    top = left = Infinity;\r\n    for(let p of sat.points){\r\n        if(p.x < left) left = p.x;\r\n        if(p.x > right) right = p.x;\r\n        if(p.y > bottom) bottom = p.y;\r\n        if(p.y < top) top = p.y;\r\n    }\r\n\r\n    return {\r\n        x: right - left,\r\n        y: bottom - top\r\n    }\r\n}\r\nshared/* default */.A.generateDimensions = generateDimensions;\r\n\r\nfunction generateTopLeftCoordinates(o){\r\n    let topLeftX = o.pos.x, topLeftY = o.pos.y;\r\n    if(o.sat.r !== undefined) {\r\n        topLeftX -= o.sat.r;\r\n        topLeftY -= o.sat.r; \r\n    } else {\r\n        let minX = Infinity;\r\n        let minY = Infinity;\r\n        for(let i = 0; i < o.sat.points.length; i++){\r\n            if(o.sat.points[i].x < minX) minX = o.sat.points[i].x;\r\n            if(o.sat.points[i].y < minY) minY = o.sat.points[i].y;\r\n        }\r\n        topLeftX += minX;\r\n        topLeftY += minY;\r\n    }\r\n    return {x: topLeftX, y: topLeftY};\r\n}\r\nshared/* default */.A.generateTopLeftCoordinates = generateTopLeftCoordinates;\r\n\r\nshared/* default */.A.satMapI2N = [\r\n    'circle',\r\n    'rectangle',\r\n    'polygon',\r\n    'text',\r\n    'circleSlice'\r\n];\r\n\r\nshared/* default */.A.satConstraintsMap = [\r\n    undefined,\r\n    undefined,\r\n    undefined,\r\n    {fontSize: [1]},\r\n    undefined,\r\n];\r\n\r\nshared/* default */.A.satDefaultMap = [\r\n    // circle\r\n    {\r\n        x: 300,\r\n        y: 100,\r\n        r: 100\r\n    },\r\n    // rectangle\r\n    {\r\n        x: 0,\r\n        y: 0,\r\n        w: 200,\r\n        h: 200\r\n    },\r\n    // polygon\r\n    {\r\n        points: [[0,400],[50,200],[150,200],[200,400]],\r\n    },\r\n    // text\r\n    {\r\n        x: 300,\r\n        y: 250,\r\n        text: 'Text',\r\n        fontSize: 80,\r\n    },\r\n    // circleSlice\r\n    {\r\n        x: 300,\r\n        y: 300,\r\n        r: 100,\r\n        innerRadius: 50,\r\n        startSliceAngle: 0,\r\n        endSliceAngle: Math.PI,\r\n        startSliceAngleRotateSpeed: 0,\r\n        endSliceAngleRotateSpeed: 0\r\n    }\r\n]\r\n\r\nconst TAU = Math.PI * 2;\r\nconst renderShapeMap = [\r\n    /*circle*/\r\n    (o) => {\r\n        ctx.arc(o.pos.x, o.pos.y, o.sat.r, 0, TAU);\r\n    },\r\n    /*rectangle*/\r\n    (o) => {\r\n        // o.sat.calcPoints[0] is at 0,0 so we can drop that from the first two args\r\n        if(o.rotation !== undefined){\r\n            renderShapeMap[2](o);\r\n            return;\r\n        }\r\n        ctx.rect(o.topLeft.x, o.topLeft.y, o.dimensions.x, o.dimensions.y);\r\n    },\r\n    /*polygon*/\r\n    (o) => {\r\n        for(let i = 0; i < o.sat.points.length; i++){\r\n            ctx.lineTo(o.pos.x + o.sat.points[i].x, o.pos.y + o.sat.points[i].y);\r\n        }\r\n        ctx.lineTo(o.pos.x + o.sat.points[0].x, o.pos.y + o.sat.points[0].y);\r\n    },\r\n    /*text*/\r\n    (o) => {\r\n        // draw rectangle for clipping purposes\r\n        renderShapeMap[1](o);\r\n    },\r\n    /*circleSlice*/\r\n    (o) => {\r\n        ctx.moveTo(o.pos.x + Math.cos(o.startSliceAngle) * o.innerRadius, o.pos.y + Math.sin(o.startSliceAngle) * o.innerRadius);\r\n        ctx.lineTo(o.pos.x + Math.cos(o.startSliceAngle) * o.sat.r, o.pos.y + Math.sin(o.startSliceAngle) * o.sat.r);\r\n        ctx.arc(o.pos.x, o.pos.y, o.sat.r, o.startSliceAngle, o.endSliceAngle);\r\n        ctx.lineTo(o.pos.x + Math.cos(o.endSliceAngle) * o.innerRadius, o.pos.y + Math.sin(o.endSliceAngle) * o.innerRadius);\r\n        if(o.innerRadius !== 0)ctx.arc(o.pos.x, o.pos.y, o.innerRadius, o.endSliceAngle, o.startSliceAngle, true);\r\n    }\r\n]\r\n\r\nconst initSimulateMap = [\r\n    /*pathMove*/\r\n    (o, init) => {\r\n\t\to.path = init.path;// like [[x,y,speed], ...]\r\n\r\n        // filtering out consecutive duplicates\r\n        for(let i = o.path.length-1; i >= 1; i--){\r\n            if(o.path[i][0] === o.path[i-1][0] && o.path[i][1] === o.path[i-1][1]) o.path.splice(i,1);\r\n        }\r\n\r\n        if(o.path.length < 2) o.path = shared/* default */.A.simulateDefaultMap[0].path;\r\n\r\n        o.currentPoint = Math.floor(init.currentPoint) % o.path.length;\r\n\r\n        o.pointOn = o.path[o.currentPoint];\r\n        o.speed = o.pointOn[2];\r\n        \r\n        let nextPointIndex = o.currentPoint + 1;\r\n        if (nextPointIndex === o.path.length) nextPointIndex = 0;\r\n        \r\n        o.pointTo = o.path[nextPointIndex];\r\n        angle = Math.atan2(o.pointTo[1] - o.pointOn[1], o.pointTo[0] - o.pointOn[0]);\r\n        o.xv = Math.cos(angle) * o.speed;\r\n        o.yv = Math.sin(angle) * o.speed;\r\n\r\n        o.timeRemain = Math.sqrt((o.pointOn[0] - o.pointTo[0])**2 + (o.pointOn[1] - o.pointTo[1])**2) / o.speed;\r\n        \r\n        const fractionalPointOffset = init.currentPoint - Math.floor(init.currentPoint);\r\n        if(fractionalPointOffset !== 0){\r\n            const newTimeRemain = o.timeRemain * (1 - fractionalPointOffset);\r\n            const delta = o.timeRemain - newTimeRemain;\r\n            o.pos.x += delta * o.xv;\r\n            o.pos.y += delta * o.yv;\r\n            o.timeRemain = newTimeRemain;\r\n        }\r\n\r\n        o.pos.x += o.pointOn[0] - o.path[0][0];\r\n        o.pos.y += o.pointOn[1] - o.path[0][1];\r\n    },\r\n    // /*rotate*/\r\n    (o, init) => {\r\n        o.pivotX = init.pivotX;\r\n        o.pivotY = init.pivotY;\r\n        o.rotation = 0;\r\n        if(init.initialRotation !== 0 && init.initialRotation !== undefined){\r\n            o.rotateSpeed = init.initialRotation;\r\n            simulateMap[1](o);\r\n        }\r\n        o.rotateSpeed = init.rotateSpeed;\r\n    },\r\n    // /*grow*/\r\n    (o, init) => {\r\n        o.growSpeed = init.growSpeed;\r\n        o.shrinkSpeed = init.shrinkSpeed;\r\n        o.maxGrowth = init.maxGrowth;\r\n        o.minGrowth = init.minGrowth;\r\n        o.growing = init.toStartGrowing;\r\n        o.growth = o.lastGrowth = init.startGrowth;\r\n        o.growPivotX = init.growPivotX;\r\n        o.growPivotY = init.growPivotY;\r\n    },\r\n    // /*custom*/\r\n    () => {},\r\n    // /*id*/\r\n    (o, init) => {\r\n        let id = init.id.toString().trim();\r\n        if(shared/* default */.A.idToObs[id] !== undefined && components_environment === 'editor') alert(`Warning! Duplicate id \"${id}\" found! Duplicate ids override each other.`);\r\n        shared/* default */.A.idToObs[id] = o;\r\n    },\r\n    // /*rotateHoming*/\r\n    (o, init) => {\r\n        o.toRest = init.toRest;\r\n        o.restAngles = init.restAngles;\r\n        o.homingRotateSpeed = init.homingRotateSpeed;\r\n        o.rotation = 0;\r\n        o.detectionRadiusSquared = init.detectionRadius ** 2;\r\n        o.spokeAngles = init.spokeAngles;// array of angles of spokes\r\n        o.pivotX = init.pivotX;\r\n        o.pivotY = init.pivotY;\r\n    }\r\n]\r\n\r\nconst simulateMap = [\r\n    /*pathMove*/\r\n    (o) => {\r\n        o.pos.x += o.xv;\r\n        o.pos.y += o.yv;\r\n\r\n        o.timeRemain--;\r\n        if (o.timeRemain <= 0) {\r\n            o.currentPoint++;\r\n            if (o.currentPoint === o.path.length) o.currentPoint = 0;\r\n            \r\n            o.pointOn = o.path[o.currentPoint];\r\n            o.speed = o.pointOn[2];\r\n    \r\n            // snapping back to the point that we should be on\r\n            o.pos.x += o.xv * o.timeRemain;\r\n            o.pos.y += o.yv * o.timeRemain;\r\n    \r\n            let nextPointIndex = o.currentPoint + 1;\r\n            if (nextPointIndex === o.path.length) nextPointIndex = 0;\r\n            \r\n            o.pointTo = o.path[nextPointIndex];\r\n    \r\n            angle = Math.atan2(o.pointTo[1] - o.pointOn[1], o.pointTo[0] - o.pointOn[0]);\r\n            o.xv = Math.cos(angle) * o.speed;\r\n            o.yv = Math.sin(angle) * o.speed;\r\n            \r\n            let dist = Math.sqrt((o.pointOn[0]-o.xv*o.timeRemain - o.pointTo[0])**2 + (o.pointOn[1]-o.yv*o.timeRemain - o.pointTo[1])**2);\r\n            \r\n            if((o.xv ** 2 + o.yv ** 2) * (o.timeRemain ** 2) > dist){\r\n                // we've overshot the next point, just stay on the inital point (no sync)\r\n                dist = Math.sqrt((o.pointOn[0] - o.pointTo[0])**2 + (o.pointOn[1] - o.pointTo[1])**2);\r\n            } else {\r\n                // correct to next pt (sync)\r\n                o.pos.x -= o.xv * o.timeRemain;\r\n                o.pos.y -= o.yv * o.timeRemain;\r\n            }\r\n\r\n            // time = distance / speed\r\n            o.timeRemain = dist / o.speed;\r\n        }\r\n\r\n        o.topLeft = shared/* default */.A.generateTopLeftCoordinates(o);\r\n    },\r\n    /*rotate*/\r\n    (o) => {\r\n        if(o.sat.r !== undefined){\r\n            o.pos.x -= o.pivotX;\r\n            o.pos.y -= o.pivotY;\r\n            o.sat.rotate(o.rotateSpeed);\r\n            o.pos.x += o.pivotX;\r\n            o.pos.y += o.pivotY;\r\n        } else {\r\n            o.sat.translate(o.pos.x-o.pivotX, o.pos.y-o.pivotY);\r\n            o.sat.rotate(o.rotateSpeed);\r\n            o.sat.translate(o.pivotX-o.pos.x, o.pivotY-o.pos.y);\r\n        }\r\n        \r\n        o.rotation += o.rotateSpeed;\r\n        o.dimensions = generateDimensions(o);\r\n        o.topLeft = shared/* default */.A.generateTopLeftCoordinates(o);\r\n    },\r\n    /*grow*/\r\n    (o) => {\r\n        if(o.growing === true) {\r\n            o.growth += o.growSpeed;\r\n            if(o.growth >= o.maxGrowth){\r\n                o.growing = false;\r\n                o.growth = o.maxGrowth;\r\n            }\r\n        }\r\n        else {\r\n            o.growth -= o.shrinkSpeed;\r\n            if(o.growth <= o.minGrowth){\r\n                o.growing = true;\r\n                o.growth = o.minGrowth;\r\n            }\r\n        }\r\n\r\n        const growthRatio = o.growth / o.lastGrowth;\r\n\r\n        if(o.sat.r !== undefined){\r\n            // circle\r\n            o.pos.x -= o.growPivotX;\r\n            o.pos.y -= o.growPivotY;\r\n            o.pos.x *= growthRatio;\r\n            o.pos.y *= growthRatio;\r\n            o.pos.x += o.growPivotX;\r\n            o.pos.y += o.growPivotY;\r\n\r\n            o.sat.r *= growthRatio;\r\n        } else {\r\n            // poly\r\n            for(let i = 0; i < o.sat.points.length; i++){\r\n                o.sat.points[i].x += o.pos.x - o.growPivotX;\r\n                o.sat.points[i].y += o.pos.y - o.growPivotY;\r\n                o.sat.points[i].x *= growthRatio;\r\n                o.sat.points[i].y *= growthRatio;\r\n                o.sat.points[i].x -= o.pos.x - o.growPivotX;\r\n                o.sat.points[i].y -= o.pos.y - o.growPivotY;\r\n            }\r\n            o.sat.setPoints(o.sat.points);\r\n\r\n            if(o.isText === true){\r\n                o.fontSize *= growthRatio;\r\n            }\r\n        }\r\n\r\n        o.topLeft = generateTopLeftCoordinates(o);\r\n        o.dimensions = generateDimensions(o);\r\n        o.lastGrowth = o.growth;\r\n    },\r\n    /*custom*/\r\n    () => {},\r\n    /*id*/\r\n    () => {},\r\n    /*rotateHoming*/\r\n    (o, p) => {\r\n        let middleX = o.topLeft.x + o.dimensions.x/2;\r\n        let middleY = o.topLeft.y + o.dimensions.y/2; \r\n\r\n        if(p.dead === true || (p.pos.x - middleX)**2 + (p.pos.y - middleY) ** 2 > o.detectionRadiusSquared) {\r\n            if(o.toRest === false) return;\r\n\r\n            let minSpokeAngularDist = Infinity;\r\n\r\n            for(let i = 0; i < o.restAngles.length; i++){\r\n                let angleDist = shortAngleDist(o.rotation, o.restAngles[i]);\r\n                if(Math.abs(angleDist) < Math.abs(minSpokeAngularDist)){\r\n                    minSpokeAngularDist = angleDist;\r\n                }\r\n            }\r\n\r\n            if(minSpokeAngularDist === Infinity) return;\r\n\r\n            if(Math.abs(minSpokeAngularDist) < o.homingRotateSpeed) o.rotateSpeed = minSpokeAngularDist;\r\n            else o.rotateSpeed = Math.sign(minSpokeAngularDist) * o.homingRotateSpeed;\r\n            simulateMap[1](o);\r\n            return;\r\n        }\r\n\r\n        angle = Math.atan2(p.pos.y - middleY, p.pos.x - middleX);\r\n\r\n        let minSpokeAngularDist = Infinity;\r\n\r\n        for(let i = 0; i < o.spokeAngles.length; i++){\r\n            let angleDist = shortAngleDist(o.spokeAngles[i] + o.rotation, angle);\r\n            if(Math.abs(angleDist) < Math.abs(minSpokeAngularDist)){\r\n                minSpokeAngularDist = angleDist;\r\n            }\r\n        }\r\n\r\n        if(minSpokeAngularDist === Infinity) return;\r\n\r\n        if(Math.abs(minSpokeAngularDist) < o.homingRotateSpeed) o.rotateSpeed = minSpokeAngularDist;\r\n        else o.rotateSpeed = Math.sign(minSpokeAngularDist) * o.homingRotateSpeed;\r\n\r\n        simulateMap[1](o);\r\n    }\r\n]\r\n\r\nfunction shortAngleDist(a0,a1) {\r\n    let da = (a1 - a0) % TAU;\r\n    return 2*da % TAU - da;\r\n}\r\n\r\nshared/* default */.A.simulateMapI2N = [\r\n    'pathMove',\r\n    'rotate',\r\n    'grow',\r\n    'custom',\r\n    'id',\r\n    'rotateHoming',\r\n]\r\n\r\nshared/* default */.A.simulateDefaultMap = [\r\n    // pathMove\r\n    {\r\n        currentPoint: 0,\r\n        path: [[0,0,2],[50,0,1],[-50,0,2]],\r\n    },\r\n    // rotate\r\n    {\r\n        initialRotation: 0,\r\n        rotateSpeed: 0.01,\r\n        pivotX: 300,\r\n        pivotY: 100\r\n    },\r\n    // grow\r\n    {\r\n        growSpeed: 0.006,\r\n        shrinkSpeed: 0.006,\r\n        maxGrowth: 1.25,\r\n        minGrowth: 1,\r\n        startGrowth: 1,\r\n        toStartGrowing: true,\r\n        growPivotX: 100,\r\n        growPivotY: 300\r\n    },\r\n    // custom\r\n    {},\r\n    // id\r\n    {\r\n        id: 'uniqueId'\r\n    },\r\n    // rotateHoming\r\n    {\r\n        toRest: true,\r\n        restAngles: [0, Math.PI],\r\n        homingRotateSpeed: 0.01,\r\n        detectionRadius: 200,\r\n        spokeAngles: [0, Math.PI],\r\n        pivotX: 300,\r\n        pivotY: 300\r\n    }\r\n]\r\n\r\nshared/* default */.A.simulateConstraintsMap = [\r\n    {currentPoint: [0]},\r\n    undefined,\r\n    {growSpeed: [0], shrinkSpeed: [0], minGrowth: [0.001], maxGrowth: [0.001]},\r\n    undefined,\r\n    undefined,\r\n];\r\n\r\nconst simulateSyncKeys = [\r\n    /*pathMove*/\r\n    (o, sync) => {\r\n        sync.x = o.pos.x;\r\n        sync.y = o.pos.y;\r\n        const maxTimeRemain = Math.sqrt((o.pointOn[0] - o.pointTo[0])**2 + (o.pointOn[1] - o.pointTo[1])**2) / o.speed;\r\n        sync.currentPoint = o.currentPoint + (1 - o.timeRemain / maxTimeRemain);\r\n    },\r\n    // /*rotate*/\r\n    (o, sync) => {\r\n        if(o.rotateSpeed === 0) return false;\r\n        sync.initialRotation = o.rotation;\r\n    },\r\n    // /*grow*/\r\n    undefined,\r\n    // /*custom*/\r\n    undefined,\r\n    // /*id*/\r\n    undefined,\r\n    // /*rotateHoming*/\r\n    undefined,\r\n]\r\n\r\nconst applySimulateSyncKeys = [\r\n    /*pathMove*/\r\n    (o, init) => {\r\n        if(Number.isFinite(init.x + init.y + init.currentPoint) === false) return;\r\n        init.path = o.path;\r\n        initSimulateMap[0](o, init);\r\n        o.pos.x = init.x;\r\n        o.pos.y = init.y;\r\n    },\r\n    // /*rotate*/\r\n    (o, init) => {\r\n        if(Number.isFinite(init.initialRotation) === false) return;\r\n        const r = init.initialRotation;\r\n        init.initialRotation -= o.rotation;\r\n        init.pivotX = o.pivotX;\r\n        init.pivotY = o.pivotY;\r\n        init.rotateSpeed = o.rotateSpeed;\r\n        initSimulateMap[1](o, init);\r\n        o.rotation = r;\r\n    },\r\n    // /*grow*/\r\n    undefined,\r\n    // /*custom*/\r\n    undefined,\r\n    // /*id*/\r\n    undefined,\r\n    // /*rotateHoming*/\r\n    undefined,\r\n]\r\n\r\nconst initEffectMap = [\r\n    /*bound*/\r\n    () => {},\r\n    /*kill*/\r\n    (o, params) => {\r\n        o.boundPlayer = params.boundPlayer ?? false;\r\n    },\r\n    /*bounce*/\r\n    (o, params) => {\r\n        // bounciness, decay\r\n        o.bounciness = params.bounciness;\r\n        o.decay = params.decay;\r\n    },\r\n    /*custom*/\r\n    () => {},\r\n    /*customImage*/\r\n    (o, params) => {\r\n        o.img = typeof Image === 'undefined' ? {} : new Image();\r\n        o.img.src = params.url;\r\n        o.imgLoaded = false;\r\n        o.img.onload = () => {o.imgLoaded = true;}\r\n    },\r\n    /*stopForces*/\r\n    () => {},\r\n    /*winpad*/\r\n    (o, params) => {\r\n        o.isWinpad = true;\r\n    },\r\n    /*coin*/\r\n    (o, params) => {\r\n        o.collected = false;\r\n        o.coinAmount = params.coinAmount;\r\n        o.color = params.color;\r\n    },\r\n    /*coindoor*/\r\n    (o, params) => {\r\n        o.isCoindoor = true;\r\n        o.maxCoins = o.coins = params.coindoorCoinAmount;\r\n        o.coinDoorColor = params.coinDoorColor;\r\n    },\r\n    /*checkpoint*/\r\n    (o, params) => {\r\n        o.checkpointCollected = false;\r\n        o.checkpointOffsetX = params.checkpointOffsetX;\r\n        o.checkpointOffsetY = params.checkpointOffsetY;\r\n    },\r\n    /*breakable*/\r\n    (o, params) => {\r\n        o.maxStrength = params.maxStrength;//60\r\n        o.strength = o.maxStrength;\r\n        o.regenTime = params.regenTime;\r\n        o.lastBrokeTime = -1E99;\r\n        o.healSpeed = params.healSpeed;\r\n    },\r\n    /*safe*/\r\n    () => {},\r\n    /*tp*/\r\n    (o, params) => {\r\n        o.tpx = params.tpx;\r\n        o.tpy = params.tpy;\r\n    },\r\n    /*conveyor*/\r\n    (o, params) => {\r\n        o.conveyorForce = params.conveyorForce;\r\n        o.conveyorAngle = params.conveyorAngle * Math.PI / 180;\r\n        o.conveyorAngleRotateSpeed = params.conveyorAngleRotateSpeed * Math.PI/180;\r\n        o.conveyorFriction = params.conveyorFriction;\r\n    },\r\n    /*platformer*/\r\n    (o, params) => {\r\n        o.platformerForce = params.platformerForce;\r\n        o.platformerAngle = params.platformerAngle * Math.PI/180;\r\n        o.platformerAngleRotateSpeed = params.platformerAngleRotateSpeed * Math.PI/180;\r\n        o.platformerFriction = params.platformerFriction;\r\n\r\n        // o.maxJumps = params.maxJumps// TODO: IMPLEMENT JUMPS. also TODO: add a preserve jump parameter that makes jumps conserve even if you are not bounded that frame. If disabled, platformer only lets you jump when you're on a plat THAT FRAME\r\n        o.maxJumpCooldown = params.maxJumpCooldown;// in ticks\r\n        o.jumpCooldown = 0;\r\n        o.jumpForce = params.jumpForce;\r\n        o.jumpFriction = params.jumpDecay;\r\n\r\n        o.canJumpMidair = params.canJumpMidair;\r\n        o.midairStoredJump = false;\r\n        o.justJumped = false;\r\n\r\n        o.jumpForceObj = {playerForceId: undefined};\r\n\r\n        o.touchingPlatformer = false;\r\n        o.canJump = false;\r\n    },\r\n    /*restrictAxis*/\r\n    (o, params) => {\r\n        o.axisSpeedMultX = params.axisSpeedMultX;\r\n        o.axisSpeedMultY = params.axisSpeedMultY;\r\n    },\r\n    /*snapGrid*/\r\n    (o, params) => {\r\n        o.toSnapX = params.toSnapX;\r\n        o.toSnapY = params.toSnapY;\r\n        o.snapDistanceX = params.snapDistanceX;\r\n        o.snapDistanceY = params.snapDistanceY;\r\n        o.snapCooldown = o.maxSnapCooldown = params.snapCooldown;\r\n        o.snapAngle = params.snapAngle * Math.PI / 180;\r\n        o.snapCollided = false;\r\n        o.snapAngleRotateSpeed = params.snapAngleRotateSpeed * Math.PI/180;\r\n\r\n        o.interpolatePlayerData = {time: 0, nextX: -1, nextY: -1};\r\n        // o.snapDistanceX = Math.max(35, o.snapDistanceX);\r\n        // o.snapDistanceY = Math.max(35, o.snapDistanceY);\r\n        \r\n        o.snapMagnitude = Math.sqrt(o.snapDistanceX ** 2 + o.snapDistanceY ** 2); //(o.snapDistanceX + o.snapDistanceY)/2\r\n    },\r\n    /*timeTrap*/\r\n    (o, params) => {\r\n        o.timeTrapTime = o.timeTrapMaxTime = params.timeTrapMaxTime;\r\n        o.timeTrapRecoverySpeed = params.timeTrapRecoverySpeed;\r\n        o.timeTrapToKill = params.timeTrapToKill;\r\n        o.timeTrapToShowTenth = params.timeTrapToShowTenth;\r\n        o.timeTrapIntersecting = false;\r\n    },\r\n    /*changeSize*/\r\n    (o, params) => {\r\n        o.sizeMult = params.sizeMult;\r\n        o.sizeChangePermanent = params.sizeChangePermanent;\r\n        o.lastChangeSizeColliding = o.changeSizeColliding = false;\r\n    },\r\n    /*changeSpeed*/\r\n    (o, params) => {\r\n        o.speedMult = params.speedMult;\r\n        o.speedChangePermanent = params.speedChangePermanent;\r\n    },\r\n    /*solidColor*/\r\n    (o, params) => {\r\n        o.hex = params.hex;\r\n        o.alpha = params.alpha;\r\n    },\r\n    /*invisible*/\r\n    (o, params) => {\r\n        o.cr = ()=>{};\r\n    },\r\n    /*changeMap*/\r\n    (o, params) => {\r\n        o.mapName = params.mapName;\r\n        o.difficulty = shared/* default */.A.mapDifficulties[params.mapName] ?? 0;\r\n        o.toCustomPlanet = params.toCustomPlanet;\r\n    },\r\n    /*tornado*/\r\n    (o, params) => {\r\n        o.tornadoStrength = params.tornadoStrength;\r\n    },\r\n    /*changeVignette*/\r\n    (o, params) => {\r\n        o.innerR = params.innerR;\r\n        o.innerG = params.innerG;\r\n        o.innerB = params.innerB;\r\n        o.innerSize = params.innerSize;\r\n        o.innerOpacity = params.innerOpacity;\r\n\r\n        o.outerR = params.outerR;\r\n        o.outerG = params.outerG;\r\n        o.outerB = params.outerB;\r\n        o.outerSize = params.outerSize;\r\n        o.outerOpacity = params.outerOpacity;\r\n    },\r\n    /*pushable*/\r\n    (o, params) => {\r\n        o.lastPushAngle = o.pushAngle = params.pushAngle * Math.PI / 180;\r\n        o.maxPushDistance = params.maxPushDistance;\r\n        o.idlePushBackSpeed = params.idlePushBackSpeed;\r\n        o.pushConversionRatio = params.pushConversionRatio;\r\n        o.positiveDirectionOnly = params.positiveDirectionOnly;\r\n        o.pushAngleVecX = Math.cos(o.pushAngle);\r\n        o.pushAngleVecY = Math.sin(o.pushAngle);\r\n        o.pushPercent = 0;\r\n    },\r\n    /*changeMusic*/\r\n    (o, params) => {\r\n        // either a youtube url (https://youtube.com/watch/...) or a local filepath\r\n        // that the client can access via a fetch req, e.g. sounds/... .mp3\r\n        o.musicPath = params.musicPath;\r\n        o.musicStartTime = params.musicStartTime;\r\n    },\r\n    /*changeShip*/\r\n    (o, params) => {\r\n        o.changeShipStateTo = params.changeShipStateTo;\r\n        o.initialShipAngle = params.initialShipAngle;\r\n        o.shipTurnSpeed = params.shipTurnSpeed;\r\n    },\r\n    /*changeGrapple*/\r\n    (o, params) => {\r\n        o.changeGrappleStateTo = params.changeGrappleStateTo;\r\n        o.grappleRange = params.grappleRange;\r\n        o.grappleForce = params.grappleForce;\r\n        o.grappleFric = params.grappleFric;\r\n    },\r\n    /*changeDeathTimer*/\r\n    (o, params) => {\r\n        o.changeDeathTimerStateTo = params.changeDeathTimerStateTo;\r\n        o.drainAmountWhileStandingOn = params.drainAmountWhileStandingOn;\r\n        o.deathTime = params.deathTime;\r\n\r\n        // for vignette\r\n        for(let key in shared/* default */.A.effectDefaultMap[24]){\r\n            o[key] = shared/* default */.A.effectDefaultMap[24][key];\r\n        }\r\n\r\n        o.innerR = o.outerR = 255;\r\n    }\r\n]\r\n\r\nlet freeVariable = -1;\r\nconst effectMap = [\r\n    /*bound*/\r\n    (p, res, o, id) => {\r\n        p.pos.x += res.overlapV.x;\r\n        p.pos.y += res.overlapV.y;\r\n        p.touchingNormalIndexes.push(id);\r\n    },\r\n    /*kill*/\r\n    (p, res, o) => {\r\n        if(res.overlap > 1) {\r\n            p.dead = true;\r\n            if(o.boundPlayer === true){\r\n                p.pos.x += res.overlapV.x;\r\n                p.pos.y += res.overlapV.y;\r\n            }\r\n        }\r\n    },\r\n    /*bounce*/\r\n    (p, res, o) => {\r\n        p.pos.x += res.overlapV.x;\r\n        p.pos.y += res.overlapV.y;\r\n\r\n        angle = Math.atan2(res.overlapV.y, res.overlapV.x);\r\n\r\n        p.forces.push(\r\n            Math.cos(angle) * o.bounciness,\r\n            Math.sin(angle) * o.bounciness,\r\n            o.decay\r\n        )\r\n    },\r\n    /*custom*/\r\n    () => {},\r\n    /*customImage*/\r\n    () => {},\r\n    /*stopForces*/\r\n    (p) => {\r\n        p.stopForces = true;\r\n    },\r\n    /*winpad*/\r\n    (p, res, o) => {\r\n        if(components_environment === 'editor' || shared/* default */.A.standalone === true){\r\n            // respawn\r\n            shared/* default */.A.respawnPlayer();\r\n            if(shared/* default */.A.inClearCheckMode === true){\r\n                shared/* default */.A.exitClearCheckMode();\r\n                uploadCode();\r\n            }\r\n        } else if(shared/* default */.A.won !== true){\r\n            shared/* default */.A.won = true;\r\n            if(shared/* default */.A.isExClient === true){\r\n                if(shared/* default */.A.mapPath === '/maps/winroom') shared/* default */.A.changeMap('/maps/hub');\r\n                else {\r\n                    shared/* default */.A.changeMap('/maps/winroom');\r\n                    shared/* default */.A.mapsBeaten[shared/* default */.A.mapPath] = true;\r\n                    localStorage.setItem('mapsBeaten', Object.keys(shared/* default */.A.mapsBeaten).join('|'));\r\n                }\r\n            } else {\r\n                // scroll\r\n                toScroll = true;\r\n\r\n                if(shared/* default */.A.tutorial === true){\r\n                    shared/* default */.A.beatCurrentTutorialMap();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /*coin*/\r\n    (p, res, o) => {\r\n        if(o.collected === true){\r\n            return;\r\n        }\r\n        o.collected = true;\r\n        for(let i = 0; i < components_obstacles.length; i++){\r\n            if(components_obstacles[i].isCoindoor === true && components_obstacles[i].coinDoorColor === o.color){\r\n                components_obstacles[i].coins -= o.coinAmount;\r\n            }\r\n        }\r\n    },\r\n    /*coindoor*/\r\n    (p, res, o) => {\r\n        if(o.coins > 0){\r\n            p.pos.x += res.overlapV.x;\r\n            p.pos.y += res.overlapV.y;\r\n        }\r\n    },\r\n    /*checkpoint*/\r\n    (p, res, o) => {\r\n        if(o.checkpointCollected === true) return;\r\n        o.checkpointCollected = true;\r\n        \r\n        shared/* default */.A.spawnPosition.x = o.topLeft.x + o.dimensions.x / 2;\r\n        shared/* default */.A.spawnPosition.y = o.topLeft.y + o.dimensions.y / 2;\r\n    },\r\n    /*breakable*/\r\n    (p, res, o, id) => {\r\n        if(o.strength > 0){\r\n            p.pos.x += res.overlapV.x;\r\n            p.pos.y += res.overlapV.y;\r\n            o.strength--;\r\n            if(o.strength < 0) o.strength = 0;\r\n            p.touchingNormalIndexes.push(id);\r\n        }\r\n\r\n        // breakable obs shouldn't regenerate on top of you\r\n        o.lastBrokeTime = window.frames;\r\n    },\r\n    /*safe*/\r\n    (p, res, o) => {\r\n        p.onSafe = true;\r\n    },\r\n    /*tp*/\r\n    (p, res, o) => {\r\n        // whoosh sound effect?\r\n        p.pos.x = o.tpx;\r\n        p.pos.y = o.tpy;\r\n        p.renderRadius = Math.min(p.renderRadius, p.sat.r / 2);\r\n    },\r\n    /*conveyor*/\r\n    (p, res, o) => {\r\n        p.forces.push(Math.cos(o.conveyorAngle) * o.conveyorForce, Math.sin(o.conveyorAngle) * o.conveyorForce, o.conveyorFriction);\r\n    },\r\n    /*platformer*/\r\n    (p, res, o, id) => {\r\n        o.touchingPlatformer = true;\r\n        o.jumpCooldown--;\r\n\r\n        // add conveyor force\r\n        p.forces.push(Math.cos(o.platformerAngle) * o.platformerForce, Math.sin(o.platformerAngle) * o.platformerForce, o.platformerFriction);\r\n\r\n        // idea: find the amount of x/y the player moves in the platformer and move the opposite to effectively lock the player's motion perpendicular to the platformer's direction\r\n        const playerVelAngle = Math.atan2(p.yv, p.xv);\r\n\r\n        const angleBetween = o.platformerAngle - playerVelAngle;\r\n\r\n        const distMovedOnPlatAngle = Math.cos(angleBetween) * Math.sqrt(p.yv ** 2 + p.xv ** 2) / p.friction;\r\n\r\n        p.pos.x -= Math.cos(o.platformerAngle) * distMovedOnPlatAngle;\r\n        p.pos.y -= Math.sin(o.platformerAngle) * distMovedOnPlatAngle;\r\n\r\n        const touchingNormalThisFrame = p.touchingNormalIndexes.length !== 0 || (p.lastTouchingNormalIndexes[p.lastTouchingNormalIndexes.length-1] >= id && o.justJumped === false) || p.touchingWall === true;\r\n        o.justJumped = false;\r\n\r\n        // checking if we were either intersecting with a normal last frame that's indexed after the obs or we are intersecting with a normal rn\r\n        if(o.jumpCooldown <= 0 && (touchingNormalThisFrame === true || (o.canJumpMidair === true && o.midairStoredJump === true))){\r\n            o.midairStoredJump = o.midairStoredJump || touchingNormalThisFrame;\r\n            o.canJump = true;\r\n            if(Math.abs(shortAngleDist(o.platformerAngle + Math.PI, playerVelAngle)) < Math.PI * 0.48 && -Math.sqrt(p.xv**2+p.yv**2)*Math.cos(angleBetween)>.1){\r\n                p.forces.push(-Math.cos(o.platformerAngle) * o.jumpForce, -Math.sin(o.platformerAngle) * o.jumpForce, o.jumpFriction);\r\n                o.jumpCooldown = o.maxJumpCooldown;\r\n                o.midairStoredJump = false;\r\n                o.justJumped = true;\r\n            }\r\n        } else {\r\n            o.canJump = false;\r\n        }\r\n    },\r\n    /*restrictAxis*/\r\n    (p, res, o) => {\r\n        p.axisSpeedMultX *= o.axisSpeedMultX;\r\n        p.axisSpeedMultY *= o.axisSpeedMultY;\r\n    },\r\n    /*snapGrid*/\r\n    (p, res, o) => {\r\n        // for those who haven't seen it, this is kind of my magnum opus of simulation functions.\r\n        // Developed a few years back later presented at a conference. Ask me (serum) about it!\r\n        // the basic idea of how it works is we have to snap to a rotated snap grid in space, so we\r\n        // translate the player to the snapGrid until its like the snap grid is unrotated. Then we snap\r\n        // by moduloing the x to the grid and then rotate back to get the final position.\r\n        o.snapCooldown--;\r\n        o.snapCollided = true;\r\n\r\n        if(o.snapCooldown <= 0 && ((o.toSnapX === true && Math.abs(p.xv) > 0.01) || (o.toSnapY === true && Math.abs(p.yv) > 0.01))){\r\n            o.snapCooldown = o.maxSnapCooldown;\r\n            let playerSnapAngle = Math.atan2(o.toSnapY === true ? p.yv : 0, o.toSnapX === true ? p.xv : 0);\r\n            o.interpolatePlayerData = {\r\n                time: Math.min(o.maxSnapCooldown-1, 5),\r\n                nextX: p.pos.x + Math.cos(playerSnapAngle) * o.snapMagnitude * 0.95,\r\n                nextY: p.pos.y + Math.sin(playerSnapAngle) * o.snapMagnitude * 0.95\r\n            };\r\n        }\r\n\r\n        if(o.interpolatePlayerData.time > 1){\r\n            o.interpolatePlayerData.time--;\r\n            p.pos.x = p.pos.x * 0.8 + 0.2 * o.interpolatePlayerData.nextX;\r\n            p.pos.y = p.pos.y * 0.8 + 0.2 * o.interpolatePlayerData.nextY;\r\n        } else {\r\n            let middleX = o.topLeft.x + o.dimensions.x / 2;\r\n            let middleY = o.topLeft.y + o.dimensions.y / 2;\r\n            // in order to snap correctly, rotate both the p and the o the negative snapAngle relative to the o's center\r\n            // this means that the player will be relatively correct to the obs and the obs will be axis-aligned\r\n            let prt = {\r\n                angle: Math.atan2(p.pos.y - middleY, p.pos.x - middleX) - o.snapAngle,\r\n                distance: Math.sqrt((p.pos.y - middleY)**2 + (p.pos.x - middleX)**2)\r\n            }\r\n\r\n            prt.x = Math.cos(prt.angle) * prt.distance;\r\n            prt.y = Math.sin(prt.angle) * prt.distance;\r\n\r\n            // applying the transform just like the norotate snap that i coded earlier\r\n            // in other words, snap the relative p to the relative grid\r\n            if(o.toSnapX === true) prt.x = prt.x * 0.4 + 0.6 * (Math.round(prt.x / o.snapDistanceX) * o.snapDistanceX);\r\n            if(o.toSnapY === true) prt.y = prt.y * 0.4 + 0.6 * (Math.round(prt.y / o.snapDistanceY) * o.snapDistanceY);\r\n\r\n            prt.angle = Math.atan2(prt.y, prt.x) + o.snapAngle;\r\n            prt.distance = Math.sqrt(prt.y**2 + prt.x**2);\r\n\r\n            // rotating back\r\n            // translating the relative coordinates back to absolute ones\r\n            p.pos.x = Math.cos(prt.angle) * prt.distance + middleX;\r\n            p.pos.y = Math.sin(prt.angle) * prt.distance + middleY;\r\n\r\n            // checking if the original point was outside of the snapgrid as a result of rotation. If so, apply translations to make it right\r\n            // if(p.pos.x < o.topLeft.x - p.speed || p.pos.x > o.topLeft.x + o.dimensions.x + p.speed){\r\n            //     p.pos.x += Math.sign(p.xv) * o.snapDistanceX*0.6;\r\n            // }\r\n\r\n            // if(p.pos.y < o.topLeft.y - p.speed || p.pos.y > o.topLeft.y + o.dimensions.y + p.speed){\r\n            //     p.pos.y += Math.sign(p.yv) * o.snapDistanceY*0.6;\r\n            // }\r\n        }\r\n    },\r\n    /*timeTrap*/\r\n    (p, res, o) => {\r\n        o.timeTrapIntersecting = true;\r\n        o.timeTrapTime--;\r\n        if(o.timeTrapTime < 0){\r\n            if(o.timeTrapToKill === true) p.dead = p.timeTrapOverrideSafe = true;\r\n            o.timeTrapTime = 0;\r\n        }\r\n    },\r\n    /*changeSize*/\r\n    (p, res, o) => {\r\n        if(o.sizeMult < 1 && o.lastChangeSizeColliding === false){\r\n            // if the player would not be colliding with the obstacle with the smaller radius,\r\n            // don't scale the player to avoid frame 1 yes frame 2 no jitter effects\r\n\r\n            // basically, we do this by effectively decreasing the obstacle's border radius (so poly would just be smaller poly)\r\n            // if the player has not already collided. If the player is colliding, we already decreased the radius so there's no need to decrease the border\r\n            res.clear();\r\n            p.sat.r *= o.sizeMult;\r\n            if(o.sat.r !== undefined){\r\n                collided = SAT.testCircleCircle(o.sat, p.sat, res);\r\n            } else {\r\n                collided = SAT.testPolygonCircle(o.sat, p.sat, res);\r\n            }\r\n            p.sat.r /= o.sizeMult;\r\n            if(collided === false){\r\n                return;\r\n            }\r\n        }\r\n        if(o.sizeChangePermanent === true){\r\n            if(o.permanentSizeChangeDone === undefined){\r\n                o.permanentSizeChangeDone = true;\r\n                p.sat.r *= o.sizeMult;\r\n            }\r\n        }\r\n        o.changeSizeColliding = true;\r\n    },\r\n    /*changeSpeed*/\r\n    (p, res, o) => {\r\n        if(o.speedChangePermanent === true){\r\n            if(o.permanentSpeedChangeDone === undefined){\r\n                o.permanentSpeedChangeDone = true;\r\n                p.speed *= o.speedMult;\r\n            }\r\n        } else {\r\n            p.axisSpeedMultX *= o.speedMult;\r\n            p.axisSpeedMultY *= o.speedMult;\r\n        }\r\n    },\r\n    /*solidColor*/\r\n    (p, res, o) => {},\r\n    /*invisible*/\r\n    (p, res, o) => {},\r\n    /*changeMap*/\r\n    (p, res, o) => {\r\n        if(shared/* default */.A.won === true) return;\r\n        shared/* default */.A.won = true;\r\n        if(shared/* default */.A.isExClient === true){\r\n            if(o.toCustomPlanet === true && o.changeMapBroken === undefined){\r\n                const headers = new Headers();\r\n                headers.append('mapname', o.mapName);\r\n                shared/* default */.A.changeMap('/customPlanet', 'GET', headers, ()=>{shared/* default */.A.won = false;o.changeMapBroken=true;});\r\n            }\r\n            else shared/* default */.A.changeMap('/maps/' + o.mapName);\r\n        } else {\r\n            // TODO: send user to the specified omni\r\n        }\r\n    },\r\n    /*tornado*/\r\n    (p, res, o) => {\r\n        p.pos.x += Math.cos(Math.random() * 360) * o.tornadoStrength;\r\n        p.pos.y += Math.sin(Math.random() * 360) * o.tornadoStrength;\r\n    },\r\n    /*changeVignette*/\r\n    (p, res, o) => {\r\n        const v = shared/* default */.A.colors.vignette;\r\n        v.inner.r = o.innerR;\r\n        v.inner.g = o.innerG;\r\n        v.inner.b = o.innerB;\r\n        v.inner.size = o.innerSize;\r\n        v.inner.opacity = o.innerOpacity;\r\n\r\n        v.outer.r = o.outerR;\r\n        v.outer.g = o.outerG;\r\n        v.outer.b = o.outerB;\r\n        v.outer.size = o.outerSize;\r\n        v.outer.opacity = o.outerOpacity;\r\n    },\r\n    /*pushable*/\r\n    (p, res, o) => {\r\n        if(o.pushAngle !== o.lastPushAngle){\r\n            o.lastPushAngle = o.pushAngle;\r\n            o.pushAngleVecX = Math.cos(o.pushAngle);\r\n            o.pushAngleVecY = Math.sin(o.pushAngle);\r\n        }\r\n\r\n        // dot product of the two vectors = amount they are pointing together\r\n        // freeVariable = pushDelta\r\n        freeVariable = -(o.pushAngleVecX * res.overlapV.x + o.pushAngleVecY * res.overlapV.y) * o.pushConversionRatio;\r\n\r\n        if(o.positiveDirectionOnly === false || freeVariable > 0){\r\n            o.pushPercent += freeVariable / o.maxPushDistance;\r\n\r\n            if(o.pushPercent > 1){\r\n                freeVariable -= (o.pushPercent-1) * o.maxPushDistance;\r\n                o.pushPercent = 1;\r\n            } else if(o.pushPercent < 0){\r\n                freeVariable -= o.pushPercent * o.maxPushDistance;\r\n                o.pushPercent = 0;\r\n            }\r\n\r\n            o.pos.x += o.pushAngleVecX * freeVariable;\r\n            o.pos.y += o.pushAngleVecY * freeVariable;\r\n        }\r\n\r\n        // test collision again to bound the player\r\n        res.clear();\r\n        if(o.sat.r !== undefined){\r\n            collided = SAT.testCircleCircle(o.sat, p.sat, res);\r\n        } else {\r\n            collided = SAT.testPolygonCircle(o.sat, p.sat, res);\r\n        }\r\n\r\n        if(collided === true){\r\n            p.pos.x += res.overlapV.x;\r\n            p.pos.y += res.overlapV.y;\r\n        }\r\n    },\r\n    /*changeMusic*/\r\n    (p, res, o) => {\r\n        shared/* default */.A.playMusic(o.musicPath, o.musicStartTime);\r\n    },\r\n    /*changeShip*/\r\n    (p, res, o) => {\r\n        if(p.ship === o.changeShipStateTo) return;\r\n            \r\n        if(shared/* default */.A.isExClient === true && o.changeShipStateTo === false) {\r\n            // send disable ship\r\n            shared/* default */.A.u4[0] = 10;\r\n            shared/* default */.A.send(shared/* default */.A.u4);\r\n        }\r\n        if(p.ship === false && o.changeShipStateTo === true) {p.shipAngle = o.initialShipAngle; p.shipTurnSpeed = o.shipTurnSpeed; }\r\n        \r\n        p.ship = o.changeShipStateTo;\r\n    },\r\n    /*changeGrapple*/\r\n    (p, res, o) => {\r\n        if(p.grapple === true && o.changeGrappleStateTo === false){\r\n            if(shared/* default */.A.isExClient === true){\r\n                // send disable grapple\r\n                shared/* default */.A.u4[0] = 12;\r\n                shared/* default */.A.send(shared/* default */.A.u4);\r\n            }\r\n            p.grappleX = p.grappleY = -1;\r\n        }\r\n\r\n        p.grapple = o.changeGrappleStateTo;\r\n        p.grappleRange = o.grappleRange;\r\n        p.grappleForce = o.grappleForce;\r\n        p.grappleFric = o.grappleFric;\r\n    },\r\n    /*changeDeathTimer*/\r\n    (p, res, o) => {\r\n        if(shared/* default */.A.isExClient === true && p.deathTimer === true && o.changeDeathTimerStateTo === false){\r\n            // send disable death timer\r\n            shared/* default */.A.u4[0] = 14;\r\n            shared/* default */.A.send(shared/* default */.A.u4);\r\n        }\r\n\r\n        if(o.changeDeathTimerStateTo === true){\r\n            if(p.deathTimer === false) p.deathTime = o.deathTime;\r\n            else p.deathTime = Math.min(p.deathTime, o.deathTime);\r\n            p.deathTime -= o.drainAmountWhileStandingOn;\r\n\r\n            // changeVignette\r\n            effectMap[24](p, res, o);\r\n        }\r\n        p.deathTimer = o.changeDeathTimerStateTo;\r\n    }\r\n]\r\n\r\nconst idleEffectMap = [\r\n    // 'bound',\r\n    undefined,\r\n    // 'kill',\r\n    undefined,\r\n    // 'bounce',\r\n    undefined,\r\n    // 'custom'\r\n    undefined,\r\n    // 'customImage'\r\n    undefined,\r\n    // 'stopForces',\r\n    undefined,\r\n    // 'winpad',\r\n    undefined,\r\n    // 'coin',\r\n    undefined,\r\n    // 'coindoor',\r\n    undefined,\r\n    // 'checkpoint',\r\n    undefined,\r\n    // 'breakable',\r\n    (o) => {\r\n        if (o.strength < o.maxStrength && window.frames-o.lastBrokeTime > o.regenTime) {\r\n            o.strength += o.healSpeed;\r\n            if(o.strength >= o.maxStrength){\r\n                o.lastBrokeTime = window.frames;\r\n                o.strength = o.maxStrength;\r\n            }\r\n        }\r\n    },\r\n    // 'safe',\r\n    undefined,\r\n    // 'tp',\r\n    undefined,\r\n    // 'conveyor',\r\n    (o) => {\r\n        o.conveyorAngle += o.conveyorAngleRotateSpeed;\r\n    },\r\n    // 'platformer',\r\n    (o) => {\r\n        o.platformerAngle += o.platformerAngleRotateSpeed;\r\n    },\r\n    // 'restrictAxis',\r\n    undefined,\r\n    // 'snapGrid',\r\n    (o) => {\r\n        o.snapAngle += o.snapAngleRotateSpeed;\r\n        if(o.snapCollided === false) o.interpolatePlayerData.time = -1;\r\n        o.snapCollided = false;\r\n    },\r\n    // 'timeTrap'\r\n    (o) => {\r\n        if(o.timeTrapIntersecting !== true) o.timeTrapTime += o.timeTrapRecoverySpeed;\r\n        if(o.timeTrapTime > o.timeTrapMaxTime) o.timeTrapTime = o.timeTrapMaxTime;\r\n        o.timeTrapIntersecting = false;\r\n    },\r\n    // 'changeSize'\r\n    (o, p) => {\r\n        if(o.sizeChangePermanent === true) return;\r\n\r\n        if(o.lastChangeSizeColliding === true && o.changeSizeColliding === false){\r\n            // exit\r\n            p.sat.r /= o.sizeMult;\r\n        } else if(o.lastChangeSizeColliding === false && o.changeSizeColliding === true){\r\n            // enter\r\n            p.sat.r *= o.sizeMult;\r\n        }\r\n\r\n        o.lastChangeSizeColliding = o.changeSizeColliding;\r\n        o.changeSizeColliding = false;\r\n    },\r\n    // 'changeSpeed'\r\n    undefined,\r\n    // 'solidColor'\r\n    undefined,\r\n    // 'invisible'\r\n    undefined,\r\n    // 'changeMap'\r\n    undefined,\r\n    // 'tornado'\r\n    undefined,\r\n    // 'changeVignette'\r\n    undefined,\r\n    // 'pushable'\r\n    (o, p) => {\r\n        // freeVariable = pushDelta\r\n        freeVariable = -o.idlePushBackSpeed;\r\n        o.pushPercent += freeVariable / o.maxPushDistance;\r\n\r\n        if(o.pushPercent > 1){\r\n            freeVariable -= (o.pushPercent-1) * o.maxPushDistance;\r\n            o.pushPercent = 1;\r\n        } else if(o.pushPercent < 0){\r\n            freeVariable -= o.pushPercent * o.maxPushDistance;\r\n            o.pushPercent = 0;\r\n        }\r\n\r\n        o.pos.x += freeVariable * Math.cos(o.pushAngle);\r\n        o.pos.y += freeVariable * Math.sin(o.pushAngle);\r\n    },\r\n    // changeMusic\r\n    undefined,\r\n    // changeShip\r\n    undefined,\r\n    // changeGrapple\r\n    undefined,\r\n    // changeDeathTimer\r\n    undefined,\r\n]\r\n\r\nshared/* default */.A.effectConstraintsMap = [\r\n    /*bound*/\r\n    undefined,\r\n    /*kill*/\r\n    undefined,\r\n    /*bounce*/\r\n    {decay: [undefined, 1]},\r\n    /*custom*/\r\n    undefined,\r\n    /*customImage*/\r\n    undefined,\r\n    /*stopForces*/\r\n    undefined,\r\n    /*winpad*/\r\n    undefined,\r\n    /*coin*/\r\n    {coinAmount: [1]},\r\n    /*coindoor*/\r\n    {coins: [1], maxCoins: [1]},\r\n    /*checkpoint*/\r\n    undefined,\r\n    /*breakable*/\r\n    {maxStrength: [1], regenTime: [0], healSpeed: [0]},\r\n    /*safe*/\r\n    undefined,\r\n    /*tp*/\r\n    undefined,\r\n    /*conveyor*/\r\n    {conveyorFriction: [undefined, 1]},\r\n    /*platformer*/\r\n    {platformerFriction: [undefined, 1], jumpFriction: [undefined, 1]},\r\n    /*restrictAxis*/\r\n    undefined,\r\n    /*snapGrid*/\r\n    {snapDistanceX: [0.1], snapDistanceY: [0.1], snapCooldown: [0]},\r\n    /*timeTrap*/\r\n    {timeTrapTime: [0], timeTrapMaxTime: [0]},\r\n    /*changeSize*/\r\n    undefined,\r\n    /*changeSpeed*/\r\n    undefined,\r\n    /*solidColor*/\r\n    undefined,\r\n    /*invisible*/\r\n    undefined,\r\n    /*changeMap*/\r\n    undefined,\r\n    /*tornado*/\r\n    undefined,\r\n    /*changeVignette*/\r\n    undefined,\r\n    /*pushable*/\r\n    {maxPushDistance: [0]},\r\n    /*changeMusic*/\r\n    undefined,\r\n    /*changeShip*/\r\n    undefined,\r\n    /*changeGrapple*/\r\n    undefined,\r\n    /*changeDeathTimer*/\r\n    undefined,\r\n]\r\n\r\nshared/* default */.A.effectMapI2N = [\r\n    'bound',\r\n    'kill',\r\n    'bounce',\r\n    'custom',\r\n    'customImage',\r\n    'stopForces',\r\n    'winpad',\r\n    'coin',\r\n    'coindoor',\r\n    'checkpoint',\r\n    'breakable',\r\n    'safe',\r\n    'tp',\r\n    'conveyor',\r\n    'platformer',\r\n    'restrictAxis',\r\n    'snapGrid',\r\n    'timeTrap',\r\n    'changeSize',\r\n    'changeSpeed',\r\n    'solidColor',\r\n    'invisible',\r\n    'changeMap',\r\n    'tornado',\r\n    'changeVignette',\r\n    'pushable',\r\n    'changeMusic',\r\n    'changeShip',\r\n    'changeGrapple',\r\n    'changeDeathTimer',\r\n]\r\n\r\nshared/* default */.A.effectDefaultMap = [\r\n    // bound\r\n    {},\r\n    // kill\r\n    {\r\n        boundPlayer: false,\r\n    },\r\n    // bounce\r\n    {\r\n        bounciness: 1,\r\n        decay: 0.98\r\n    },\r\n    // custom\r\n    {},\r\n    // customImage\r\n    {\r\n        url: 'http://tinyurl.com/dwayne-t-rj'\r\n    },\r\n    // stopForces\r\n    {},\r\n    // winpad\r\n    {},\r\n    // coin\r\n    {\r\n        coinAmount: 1,\r\n        color: '#d6d611'\r\n    },\r\n    // coindoor\r\n    {\r\n        coindoorCoinAmount: 3,\r\n        coinDoorColor: '#d6d611'\r\n    },\r\n    // checkpoint\r\n    {\r\n        checkpointOffsetX: 0,\r\n        checkpointOffsetY: 0\r\n    },\r\n    // breakable\r\n    {\r\n        maxStrength: 60,\r\n        regenTime: 100,\r\n        healSpeed: 1\r\n    },\r\n    // safe\r\n    {},\r\n    // tp\r\n    {\r\n        tpx: 100,\r\n        tpy: 100\r\n    },\r\n    // conveyor\r\n    {\r\n        conveyorForce: 0.3,\r\n        conveyorAngle: 90,\r\n        conveyorAngleRotateSpeed: 0,\r\n        conveyorFriction: 0.8\r\n    },\r\n    // platformer\r\n    {\r\n        platformerForce: 1,\r\n        platformerAngle: 90,\r\n        platformerAngleRotateSpeed: 0,\r\n        platformerFriction: 0.875,\r\n        maxJumpCooldown: 30,\r\n        jumpForce: 20,\r\n        jumpDecay: 0.95,\r\n        // maxJumps: 1\r\n    },\r\n    // restrictAxis\r\n    {\r\n        axisSpeedMultX: 0,\r\n        axisSpeedMultY: 1\r\n    },\r\n    // snapGrid\r\n    {\r\n        toSnapX: true,\r\n        toSnapY: true,\r\n        snapDistanceX: 100,\r\n        snapDistanceY: 100,\r\n        snapCooldown: 40,\r\n        snapAngle: 0,\r\n        snapAngleRotateSpeed: 0\r\n    },\r\n    // timeTrap\r\n    {\r\n        timeTrapMaxTime: 300,\r\n        timeTrapRecoverySpeed: 1.5,\r\n        timeTrapToKill: true,\r\n        timeTrapToShowTenth: false\r\n    },\r\n    // changeSize\r\n    {\r\n        sizeMult: 1.5,\r\n        sizeChangePermanent: false\r\n    },\r\n    // changeSpeed\r\n    {\r\n        speedMult: 2.5,\r\n        speedChangePermanent: false\r\n    },\r\n    // solidColor\r\n    {\r\n        hex: '#FFFFFF',\r\n        alpha: 1\r\n    },\r\n    // invisible\r\n    {},\r\n    // changeMap\r\n    {mapName: 'hub', toCustomPlanet: true},\r\n    // tornado\r\n    {tornadoStrength: 1},\r\n    // changeVignette\r\n    {\r\n        innerR: 0, innerG: 0, innerB: 0, innerSize: 0.1, innerOpacity: 0,\r\n        outerR: 0, outerG: 0, outerB: 0, outerSize: 0.5, outerOpacity: 1\r\n    },\r\n    // pushable\r\n    {\r\n        pushAngle: 180,\r\n        maxPushDistance: 100,\r\n        idlePushBackSpeed: 0.25,\r\n        positiveDirectionOnly: false,\r\n        pushConversionRatio: 0.8\r\n    },\r\n    // changeMusic\r\n    {musicPath: 'https://www.youtube.com/watch?v=OidXKRVVV70', musicStartTime: 0},\r\n    // changeShip\r\n    {changeShipStateTo: true, initialShipAngle: 0, shipTurnSpeed: Math.PI / 100},\r\n    // changeGrapple\r\n    {changeGrappleStateTo: true, grappleRange: 488, grappleForce: 0.01, grappleFric: 0.4},\r\n    // changeDeathTimer\r\n    {changeDeathTimerStateTo: true, drainAmountWhileStandingOn: 0, deathTime: 10},\r\n]\r\n\r\nconst idleEffectSyncKeys = [\r\n    // 'bound',\r\n    undefined,\r\n    // 'kill',\r\n    undefined,\r\n    // 'bounce',\r\n    undefined,\r\n    // 'custom'\r\n    undefined,\r\n    // 'customImage'\r\n    undefined,\r\n    // 'stopForces',\r\n    undefined,\r\n    // 'winpad',\r\n    undefined,\r\n    // 'coin',\r\n    undefined,\r\n    // 'coindoor',\r\n    undefined,\r\n    // 'checkpoint',\r\n    undefined,\r\n    // 'breakable',\r\n    undefined,\r\n    // 'safe',\r\n    undefined,\r\n    // 'tp',\r\n    undefined,\r\n    // 'conveyor',\r\n    (o, sync) => {\r\n        if(o.conveyorAngleRotateSpeed === 0) return false;\r\n        sync.conveyorAngle = o.conveyorAngle;\r\n    },\r\n    // 'platformer',\r\n    (o, sync) => {\r\n        if(o.platformerAngleRotateSpeed === 0) return false;\r\n        sync.platformerAngle = o.platformerAngle;\r\n    },\r\n    // 'restrictAxis',\r\n    undefined,\r\n    // 'snapGrid',\r\n    (o, sync) => {\r\n        if(o.snapAngleRotateSpeed === 0) return false;\r\n        sync.snapAngle = o.snapAngle;\r\n    },\r\n    // 'timeTrap'\r\n    undefined,\r\n    // 'changeSize'\r\n    undefined,\r\n    // 'changeSpeed'\r\n    undefined,\r\n    // 'solidColor'\r\n    undefined,\r\n    // 'invisible'\r\n    undefined,\r\n    // 'changeMap'\r\n    undefined,\r\n    // 'tornado'\r\n    undefined,\r\n    // 'changeVignette'\r\n    undefined,\r\n    // 'pushable'\r\n    undefined,\r\n    // changeMusic\r\n    undefined,\r\n    // changeShip\r\n    undefined,\r\n    // changeGrapple\r\n    undefined,\r\n    // changeDeathTimer\r\n    undefined,\r\n]\r\n\r\nconst applyIdleEffectSyncKeys = [\r\n    // 'bound',\r\n    undefined,\r\n    // 'kill',\r\n    undefined,\r\n    // 'bounce',\r\n    undefined,\r\n    // 'custom'\r\n    undefined,\r\n    // 'customImage'\r\n    undefined,\r\n    // 'stopForces',\r\n    undefined,\r\n    // 'winpad',\r\n    undefined,\r\n    // 'coin',\r\n    undefined,\r\n    // 'coindoor',\r\n    undefined,\r\n    // 'checkpoint',\r\n    undefined,\r\n    // 'breakable',\r\n    undefined,\r\n    // 'safe',\r\n    undefined,\r\n    // 'tp',\r\n    undefined,\r\n    // 'conveyor',\r\n    (o) => {\r\n        if(Number.isFinite(o.conveyorAngle) === false) return;\r\n        o.conveyorAngle = conveyorAngle;\r\n    },\r\n    // 'platformer',\r\n    (o) => {\r\n        if(Number.isFinite(o.platformerAngle) === false) return;\r\n        o.platformerAngle = platformerAngle;\r\n    },\r\n    // 'restrictAxis',\r\n    undefined,\r\n    // 'snapGrid',\r\n    (o) => {\r\n        if(Number.isFinite(o.snapAngle) === false) return;\r\n        o.snapAngle = snapAngle;\r\n    },\r\n    // 'timeTrap'\r\n    undefined,\r\n    // 'changeSize'\r\n    undefined,\r\n    // 'changeSpeed'\r\n    undefined,\r\n    // 'solidColor'\r\n    undefined,\r\n    // 'invisible'\r\n    undefined,\r\n    // 'changeMap'\r\n    undefined,\r\n    // 'tornado'\r\n    undefined,\r\n    // 'changeVignette'\r\n    undefined,\r\n    // 'pushable'\r\n    undefined,\r\n    // changeMusic\r\n    undefined,\r\n    // changeShip\r\n    undefined,\r\n    // changeGrapple\r\n    undefined,\r\n    // changeDeathTimer\r\n    undefined,\r\n]\r\n\r\nshared/* default */.A.generateSyncMaps = () => {\r\n    if(shared/* default */.A.simulateToSync !== undefined) return;\r\n    shared/* default */.A.simulateToSync = new Map(); shared/* default */.A.idleEffectToSync = new Map();\r\n    for(let i = 0; i < simulateMap.length; i++){\r\n        if(simulateSyncKeys[i] !== undefined){\r\n            shared/* default */.A.simulateToSync.set(simulateMap[i], simulateSyncKeys[i]);\r\n        }\r\n    }\r\n\r\n    for(let i = 0; i < idleEffectMap.length; i++){\r\n        if(idleEffectSyncKeys[i] !== undefined){\r\n            shared/* default */.A.idleEffectToSync.set(idleEffectMap[i], idleEffectSyncKeys[i]);\r\n        }\r\n    }\r\n}\r\n\r\nshared/* default */.A.generateApplySyncMaps = () => {\r\n    if(shared/* default */.A.simulateToApplySync !== undefined) return;\r\n    shared/* default */.A.simulateToApplySync = new Map(); shared/* default */.A.idleEffectToApplySync = new Map();\r\n    for(let i = 0; i < simulateMap.length; i++){\r\n        if(applySimulateSyncKeys[i] !== undefined){\r\n            shared/* default */.A.simulateToApplySync.set(simulateMap[i], applySimulateSyncKeys[i]);\r\n        }\r\n    }\r\n\r\n    for(let i = 0; i < idleEffectMap.length; i++){\r\n        if(applyIdleEffectSyncKeys[i] !== undefined){\r\n            shared/* default */.A.idleEffectToApplySync.set(idleEffectMap[i], applyIdleEffectSyncKeys[i]);\r\n        }\r\n    }\r\n}\r\n\r\nconst renderEffectMap = [\r\n    /*bound*/\r\n    (o) => { \r\n        ctx.fillStyle = shared/* default */.A.colors.tile;\r\n    },\r\n    /*kill*/\r\n    (o) => {\r\n        ctx.fillStyle = o.boundPlayer === true ? '#c70000' : '#9e0000';\r\n        ctx.strokeStyle = 'black';\r\n        ctx.toStroke = true;\r\n        ctx.lineWidth = 4;\r\n    },\r\n    /*bounce*/\r\n    (o) => {\r\n        ctx.fillStyle = 'blue';\r\n    },\r\n    /*custom*/\r\n    (o) => {\r\n        ctx.toFill = false;\r\n\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.save();\r\n            ctx.clip();\r\n\r\n            ctx.drawImage(shared/* default */.A.starImg, o.topLeft.x, o.topLeft.y, o.dimensions.x, o.dimensions.y);\r\n\r\n            ctx.restore();\r\n        }\r\n    },\r\n    /*customImage*/\r\n    (o) => {\r\n        ctx.toFill = false;\r\n        if(o.imgLoaded === false) return;\r\n\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.save();\r\n            ctx.clip();\r\n\r\n            ctx.drawImage(o.img, o.topLeft.x, o.topLeft.y, o.dimensions.x, o.dimensions.y);\r\n\r\n            ctx.restore();\r\n        }\r\n    },\r\n    /*stopForces*/\r\n    (o) => {\r\n        ctx.fillStyle = 'orange';\r\n        ctx.strokeStyle = 'black';\r\n        ctx.lineWidth = 6;\r\n        ctx.globalAlpha = 0.1;\r\n        ctx.toStroke = true;\r\n    },\r\n    /*winpad*/\r\n    (o) => {\r\n        ctx.fillStyle = `hsl(${window.frames*1000/60/12},50%,50%)`;\r\n        ctx.shadowColor = ctx.fillStyle;\r\n        ctx.shadowBlur = 15;\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.shadowBlur = 0;\r\n        }\r\n    },\r\n    /*coin*/\r\n    (o) => {\r\n        ctx.fillStyle = o.color;\r\n        if(o.collected === true){\r\n            ctx.globalAlpha = 0.2;\r\n        } else {\r\n            ctx.globalAlpha = 0.8;\r\n        }\r\n        if(o.coinAmount !== 1){\r\n            ctx.cleanUpFunction = () => {\r\n                let middleX = o.topLeft.x + o.dimensions.x/2;\r\n                let middleY = o.topLeft.y + o.dimensions.y/2; \r\n\r\n                ctx.fillStyle = shared/* default */.A.colors.tile;//'#313131';\r\n                ctx.font = `${Math.min(60, o.dimensions.x/4, o.dimensions.y/4)}px Inter`;\r\n                ctx.textAlign = 'center';\r\n                ctx.textBaseline = 'middle';\r\n                ctx.fillText(\r\n                    Math.max(0, o.coinAmount),\r\n                    middleX,\r\n                    middleY\r\n                );\r\n            }\r\n        }\r\n    },\r\n    /*coindoor*/\r\n    (o) => {\r\n        ctx.fillStyle = shared/* default */.A.colors.tile;\r\n        ctx.globalAlpha = o.coins <= 0 ? 0.5 : 1;\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.fillStyle = o.coinDoorColor;\r\n\r\n            let middleX = o.topLeft.x + o.dimensions.x/2;\r\n            let middleY = o.topLeft.y + o.dimensions.y/2; \r\n\r\n            ctx.beginPath();\r\n            ctx.roundRect(middleX-o.dimensions.x/4, middleY-o.dimensions.y/4, o.dimensions.x/2, o.dimensions.y/2, Math.min(o.dimensions.x,o.dimensions.y)/20);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n    \r\n            ctx.fillStyle = shared/* default */.A.colors.tile;//'#313131'//'#484a00';\r\n            ctx.font = `${Math.min(60, o.dimensions.x/4, o.dimensions.y/4)}px Inter`;\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText(\r\n                Math.max(0, o.coins),\r\n                middleX,\r\n                middleY\r\n            );\r\n        }\r\n    },\r\n    /*checkpoint*/\r\n    (o) => {\r\n        if (o.checkpointCollected === true) {\r\n            ctx.fillStyle = '#0fba09';\r\n            ctx.globalAlpha = 0.15;\r\n        } else {\r\n            ctx.fillStyle = '#05962b';\r\n            ctx.globalAlpha = 0.8;\r\n        }\r\n        // ctx.cleanUpFunction = () => {\r\n        //     ctx.globalAlpha /= 5;\r\n        //     const grd = ctx.createRadialGradient(o.pos.x, o.pos.y, 0, o.pos.x, o.pos.y, (o.dimensions.x + o.dimensions.y)/3);\r\n\r\n        //     grd.addColorStop(0, \"rgba(255,255,255,1)\");\r\n        //     grd.addColorStop(1, \"rgba(255,255,255,0)\");\r\n\r\n        //     ctx.fillStyle = grd;\r\n        //     renderEffectMap[7](o);\r\n        // }\r\n    },\r\n    /*breakable*/\r\n    (o) => {\r\n        ctx.fillStyle = shared/* default */.A.colors.tile;// to make it into hex\r\n        ctx.fillStyle = components_blendColor('#000000', ctx.fillStyle, 0.5);\r\n        ctx.globalAlpha = o.strength / o.maxStrength;\r\n    },\r\n    /*safe*/\r\n    (o) => {\r\n        // #8c8c8c hex, .25 globalAlpha\r\n        ctx.fillStyle = 'rgba(140,140,140,.25)';\r\n        ctx.strokeStyle = 'black';\r\n        ctx.lineWidth = 4;\r\n        ctx.toStroke = true;\r\n\r\n        // ctx.fillStyle = shared.safeColor || \"#8c8c8c\",\r\n        // ctx.globalAlpha = .25,\r\n        // ctx.beginPath(),\r\n        // ctx.arc(pos.x, pos.y, obstacle.r, 0, 2 * Math.PI),\r\n        // ctx.fill(),\r\n        // ctx.strokeStyle = \"black\",\r\n        // ctx.lineWidth = lineWidth,\r\n        // ctx.globalAlpha = 1,\r\n        // ctx.stroke();\r\n    },\r\n    /*tp*/\r\n    (o) => {\r\n        ctx.fillStyle = '#38ab30';\r\n    },\r\n    /*conveyor*/\r\n    (o) => {\r\n        ctx.fillStyle = shared/* default */.A.colors.tile;\r\n        ctx.globalAlpha = 0.1;\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.save();\r\n            ctx.clip();\r\n\r\n            ctx.globalAlpha = 1;\r\n            for(let x = o.topLeft.x + 50; x <= o.topLeft.x + o.dimensions.x + 50; x += 100){\r\n                for(let y = o.topLeft.y + 50; y <= o.topLeft.y + o.dimensions.y + 50; y += 100){\r\n                    ctx.translate(x,y);\r\n                    ctx.rotate(o.conveyorAngle+Math.PI/2);\r\n                    ctx.drawImage(shared/* default */.A.arrowImg, -50, -50, 100, 100);\r\n                    ctx.rotate(-o.conveyorAngle-Math.PI/2);\r\n                    ctx.translate(-x,-y);\r\n                }\r\n            }\r\n\r\n            ctx.restore();\r\n            // ctx.beginPath();\r\n            // ctx.fillStyle = 'red';\r\n            // ctx.arc(o.topLeft.x, o.topLeft.y, 30, 0, Math.PI * 2);\r\n            // ctx.fill();\r\n            // ctx.closePath();\r\n        }\r\n    },\r\n    /*platformer*/\r\n    (o) => {\r\n        ctx.fillStyle = shared/* default */.A.colors.tile;\r\n        ctx.globalAlpha = 0.1;\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.save();\r\n            ctx.clip();\r\n\r\n            const offsetX = (window.frames*1000/60 * o.platformerForce * Math.cos(o.platformerAngle) / 10) % 100 - 100;\r\n            const offsetY = (window.frames*1000/60 * o.platformerForce * Math.sin(o.platformerAngle) / 10) % 100 - 100;\r\n\r\n            ctx.globalAlpha = 1;\r\n            for(let x = o.topLeft.x + offsetX + 50; x <= o.topLeft.x + o.dimensions.x + 50; x += 100){\r\n                for(let y = o.topLeft.y + offsetY + 50; y <= o.topLeft.y + o.dimensions.y + 50; y += 100){\r\n                    ctx.translate(x,y);\r\n                    ctx.rotate(o.platformerAngle+Math.PI/2);\r\n                    ctx.drawImage(shared/* default */.A.arrowImg, -50, -50, 100, 100);\r\n                    ctx.rotate(-o.platformerAngle-Math.PI/2);\r\n                    ctx.translate(-x,-y);\r\n                }\r\n            }\r\n\r\n            ctx.restore();\r\n\r\n            // rendering 👍 if player can jump\r\n            // if there ever is to be more emojis like this, then make an array of emojis that i can push to that render on top of each other every frame (w/ priority? sorted?)\r\n            if(o.canJump === true && o.touchingPlatformer === true){\r\n                const player = shared/* default */.A.players[shared/* default */.A.selfId];\r\n                if(player !== undefined){\r\n                    ctx.globalAlpha = 1;\r\n                    ctx.fillStyle = 'white';\r\n                    ctx.font = `56px Inter`;\r\n                    ctx.textAlign = 'center';\r\n                    ctx.textBaseline = 'middle';\r\n                    ctx.fillText('👍', player.pos.x, player.pos.y - player.sat.r - 50);\r\n                }\r\n            }\r\n            o.touchingPlatformer = false;\r\n        }\r\n    },\r\n    /*restrictAxis*/\r\n    (o) => {\r\n        if(o.axisSpeedMultX < 0 && o.axisSpeedMultY < 0){\r\n            ctx.strokeStyle = 'red';\r\n        } else if(o.axisSpeedMultX < 0 || o.axisSpeedMultY < 0){\r\n            ctx.strokeStyle = '#ff6969';\r\n        } else if(o.axisSpeedMultY > 1 || o.axisSpeedMultY > 1){\r\n            ctx.strokeStyle = '#c5c500';\r\n        } else {\r\n            ctx.strokeStyle = 'white';\r\n        }\r\n        ctx.lineWidth = 4;\r\n        ctx.toFill = false;\r\n        ctx.toStroke = true;\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.lineWidth = 3;\r\n            ctx.save();\r\n\r\n            ctx.translate(o.topLeft.x + o.dimensions.x / 2, o.topLeft.y + o.dimensions.y / 2);\r\n\r\n            ctx.clip();\r\n\r\n            ctx.globalAlpha = o.axisSpeedMultX > 1 ? 0.8 : (Math.max(0.3,o.axisSpeedMultX < 0 ? -o.axisSpeedMultX : 1-o.axisSpeedMultX));\r\n            ctx.strokeStyle = o.axisSpeedMultX < 0 ? 'red' : (o.axisSpeedMultX > 1 ? '#c5c500' : 'white');\r\n\r\n            ctx.beginPath();\r\n            for(let x = -o.dimensions.x/2; x <= o.dimensions.x/2; x += 100){\r\n                ctx.moveTo(x,-o.dimensions.y/2);\r\n                ctx.lineTo(x,o.dimensions.y/2);\r\n            }\r\n            ctx.stroke();\r\n            ctx.closePath();\r\n\r\n            ctx.globalAlpha = o.axisSpeedMultY > 1 ? 0.8 : (Math.max(0.3,o.axisSpeedMultY < 0 ? -o.axisSpeedMultY : 1-o.axisSpeedMultY));\r\n            ctx.strokeStyle = o.axisSpeedMultY < 0 ? 'red' : (o.axisSpeedMultY > 1 ? '#c5c500' : 'white');\r\n\r\n            ctx.beginPath();\r\n            for(let y = -o.dimensions.y/2; y <= o.dimensions.y/2; y += 100){\r\n                ctx.moveTo(-o.dimensions.x/2,y);\r\n                ctx.lineTo(o.dimensions.x/2,y);\r\n            }\r\n            ctx.stroke();\r\n            ctx.closePath();\r\n\r\n            ctx.restore();\r\n        }\r\n    },\r\n    /*snapGrid*/\r\n    (o) => {\r\n        ctx.fillStyle = '#00008a';\r\n        ctx.globalAlpha = 0.1;\r\n        ctx.toClip = true;\r\n\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.save();\r\n            ctx.clip();\r\n\r\n            ctx.strokeStyle = components_blendColor('#0f0000', '#000000', Math.max(0,o.snapCooldown) / o.maxSnapCooldown);\r\n            ctx.lineWidth = 4;\r\n            ctx.globalAlpha = 0.17;\r\n\r\n            let middleX = o.topLeft.x + o.dimensions.x/2;\r\n            let middleY = o.topLeft.y + o.dimensions.y/2; \r\n            ctx.translate(middleX, middleY);\r\n\r\n            o.snapRotateMovementExpansion = {\r\n                base: (Math.max(o.dimensions.x,o.dimensions.y)**2/Math.sqrt(o.dimensions.x**2+o.dimensions.y**2))\r\n            }\r\n            o.snapRotateMovementExpansion.x = Math.ceil(o.snapRotateMovementExpansion.base/o.snapDistanceX+1)*o.snapDistanceX;\r\n            o.snapRotateMovementExpansion.y = Math.ceil(o.snapRotateMovementExpansion.base/o.snapDistanceY+1)*o.snapDistanceY;\r\n\r\n            ctx.rotate(o.snapAngle);\r\n\r\n            let renderPath = new Path2D();\r\n            if(o.toSnapX === true){\r\n                for(let x = -o.snapRotateMovementExpansion.x; x <= o.snapRotateMovementExpansion.x; x += o.snapDistanceX){\r\n                    renderPath.rect(-10 + x, -o.snapRotateMovementExpansion.x - 10, 20, 2 * o.snapRotateMovementExpansion.x + 20);\r\n                    // ctx.moveTo(x,-o.snapRotateMovementExpansion);\r\n                    // ctx.lineTo(x,o.snapRotateMovementExpansion);\r\n                }\r\n            }\r\n\r\n            if(o.toSnapY === true){\r\n                for(let y = -o.snapRotateMovementExpansion.y; y <= o.snapRotateMovementExpansion.y; y += o.snapDistanceY){\r\n                    renderPath.rect(-o.snapRotateMovementExpansion.y - 10, -10 + y, 2 * o.snapRotateMovementExpansion.y + 20, 20);\r\n                    // ctx.moveTo(-o.snapRotateMovementExpansion,y);\r\n                    // ctx.lineTo(o.snapRotateMovementExpansion,y);\r\n                }\r\n            }\r\n            ctx.stroke(renderPath);\r\n            ctx.closePath();\r\n            \r\n            // drawing snapMagnitude indicator\r\n            const player = shared/* default */.A.players[shared/* default */.A.selfId];\r\n            if(player.pos.x + o.snapMagnitude < middleX - o.dimensions.x/2 || player.pos.x - o.snapMagnitude > middleX + o.dimensions.x/2 || player.pos.y + o.snapMagnitude < middleY - o.dimensions.y/2 || player.pos.y - o.snapMagnitude > middleY + o.dimensions.y/2){\r\n                ctx.restore();\r\n                return;\r\n            }\r\n            ctx.strokeStyle = 'grey';\r\n            ctx.fillStyle = 'black';\r\n            ctx.globalAlpha = 0.2;\r\n            ctx.beginPath();\r\n\r\n            ctx.clip(renderPath);\r\n\r\n            ctx.rotate(-o.snapAngle);\r\n            ctx.translate(-middleX,-middleY);\r\n\r\n            ctx.arc(player.pos.x, player.pos.y, o.snapMagnitude, 0, Math.PI*2);\r\n            ctx.stroke();\r\n            ctx.fill();\r\n            ctx.closePath();\r\n\r\n            ctx.restore();\r\n        }\r\n    },\r\n    /*timeTrap*/\r\n    (o) => {\r\n        let middleX = o.topLeft.x + o.dimensions.x/2;\r\n        let middleY = o.topLeft.y + o.dimensions.y/2; \r\n\r\n        let grd = ctx.createRadialGradient(middleX, middleY, 0, middleX, middleY, Math.min(100, (o.dimensions.x + o.dimensions.y)/3));\r\n\r\n        if(o.timeTrapToKill === false){\r\n            grd.addColorStop(0, \"rgba(199,199,199,0)\");\r\n            grd.addColorStop(1, \"rgba(199,199,199,1)\");\r\n        } else {\r\n            grd.addColorStop(0, \"rgba(199,0,0,0)\");\r\n            grd.addColorStop(1, \"rgba(199,0,0,1)\");\r\n        }\r\n\r\n        ctx.fillStyle = grd;\r\n        ctx.globalAlpha = Math.max(0.12, 0.5 - o.timeTrapTime / o.timeTrapMaxTime / 2);\r\n        \r\n        ctx.cleanUpFunction = () => {\r\n            ctx.globalAlpha = Math.max(0.3, o.timeTrapTime / o.timeTrapMaxTime / 3);\r\n            ctx.fillStyle = 'white';\r\n            ctx.font = `${Math.min(o.dimensions.x, o.dimensions.y)/2}px Inter`;\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n\r\n            ctx.fillText(o.timeTrapToShowTenth === true ? Math.round(o.timeTrapTime/60 * 10) / 10 : Math.round(o.timeTrapTime/60), middleX, middleY);\r\n        }\r\n    },\r\n    /*changeSize*/\r\n    (o) => {\r\n        if(o.sizeChangePermanent === true){\r\n            ctx.toStroke = true;\r\n            ctx.lineWidth = 10;\r\n            ctx.lineDashOffset = -window.frames*1000/60 / 15;\r\n            if (o.sizeMult > 1){\r\n                ctx.strokeStyle = '#0e30ad';\r\n            } else {\r\n                ctx.strokeStyle = '#1c1852';\r\n            }\r\n            ctx.setLineDash([30, 40]);\r\n\r\n            ctx.cleanUpFunction = () => {\r\n                ctx.setLineDash([]);\r\n            }\r\n        }\r\n        \r\n        if(o.permanentSizeChangeDone === true) {\r\n            ctx.toFill = false;\r\n        } else {\r\n            if (o.sizeMult > 1){\r\n                ctx.fillStyle = '#0e30ad';\r\n            } else {\r\n                ctx.fillStyle = '#1c1852';\r\n            }\r\n        }\r\n        \r\n        ctx.globalAlpha = 0.28;\r\n    },\r\n    /*changeSpeed*/\r\n    (o) => {\r\n        if(o.speedChangePermanent === true){\r\n            ctx.toStroke = true;\r\n            ctx.lineWidth = 10;\r\n            ctx.lineDashOffset = -window.frames*1000/60 / 15;\r\n            ctx.strokeStyle = '#eba500';\r\n            ctx.setLineDash([30, 40]);\r\n\r\n            ctx.cleanUpFunction = () => {\r\n                ctx.setLineDash([]);\r\n            }\r\n        }\r\n\r\n        if(o.permanentSpeedChangeDone === true) {\r\n            ctx.toFill = false;\r\n        } else {\r\n            ctx.fillStyle = '#eba500';\r\n            ctx.toStroke = true;\r\n            ctx.lineWidth = 3;\r\n            ctx.strokeStyle = ctx.fillStyle;\r\n        }\r\n        ctx.globalAlpha = 0.25;\r\n\r\n        // permanents should dissapear upon use i think\r\n    },\r\n    /*solidColor*/\r\n    (o) => {\r\n        ctx.fillStyle = o.hex;\r\n        if(o.isText === true)ctx.globalAlpha = 0;\r\n        else ctx.globalAlpha = o.alpha;\r\n    },\r\n    /*invisible*/\r\n    (o) => {},\r\n    /*changeMap*/\r\n    (o) => {\r\n        // ctx.fillStyle = `hsl(${window.frames*1000/60/12},50%,50%)`;\r\n        // ctx.shadowColor = ctx.fillStyle;\r\n        // ctx.shadowBlur = 15;\r\n        // ctx.cleanUpFunction = () => {\r\n        //     ctx.shadowBlur = 0;\r\n        // }\r\n\r\n        if(o.toCustomPlanet === true){\r\n            ctx.fillStyle = '#646464';\r\n            ctx.fillRect(o.topLeft.x, o.topLeft.y, o.dimensions.x, o.dimensions.y);\r\n\r\n            ctx.font = `1000 ${Math.min(o.dimensions.x, o.dimensions.y)/2}px Inter`;\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillStyle = '#464646';\r\n            ctx.translate(o.topLeft.x + o.dimensions.x/2, o.topLeft.y + o.dimensions.y/2);\r\n\r\n            if(o.randomSineOffset === undefined) o.randomSineOffset = Math.random() * Math.PI * 2;\r\n            const r = Math.sin(window.frames / 36 + o.randomSineOffset) * 0.32;\r\n            ctx.rotate(r);\r\n            ctx.fillText('?', 0, 0);\r\n            ctx.rotate(-r);\r\n            ctx.translate(-(o.topLeft.x + o.dimensions.x/2), -(o.topLeft.y + o.dimensions.y/2));\r\n\r\n            ctx.fillStyle = 'white';\r\n            ctx.font = `${o.dimensions.x / 3.5}px Inter`;\r\n\r\n            // same fillText\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n\r\n            ctx.globalAlpha = Math.min(1,((shared/* default */.A.players[shared/* default */.A.selfId].pos.y + canvas.h/2) - (o.topLeft.y)) / (o.dimensions.y));\r\n\r\n            ctx.globalAlpha *= 0.8;\r\n            ctx.fillText(\r\n                o.mapName,\r\n                o.topLeft.x + o.dimensions.x / 2,\r\n                o.topLeft.y - o.dimensions.y / 4\r\n            );\r\n            ctx.globalAlpha = 1;\r\n\r\n            ctx.toFill = false;\r\n            return;\r\n        }\r\n\r\n        let t = (1+Math.sin(window.frames/36))/2 * (o.difficulty % 1);\r\n\r\n        ctx.fillStyle = components_blendColor(difficultyImageColors[Math.floor(o.difficulty)],difficultyImageColors[Math.min(8,Math.ceil(o.difficulty))],t);\r\n\r\n        ctx.cleanUpFunction = () => {\r\n            if(o.dimensions.x > o.dimensions.y){\r\n                ctx.translate(o.dimensions.x - o.dimensions.y + o.topLeft.x, o.topLeft.y);\r\n            } else {\r\n                ctx.translate(o.topLeft.x, o.dimensions.y - o.dimensions.x + o.topLeft.y);\r\n            }\r\n\r\n            ctx.lineCap = 'round';\r\n            ctx.globalAlpha = t;\r\n            difficultyImageMap[Math.min(8,Math.ceil(o.difficulty))](Math.min(o.dimensions.x, o.dimensions.y));\r\n\r\n            ctx.globalAlpha = 1 - t;\r\n            difficultyImageMap[Math.floor(o.difficulty)](Math.min(o.dimensions.x, o.dimensions.y));\r\n            ctx.lineCap = 'square';\r\n            ctx.globalAlpha = 1;\r\n\r\n            if(o.dimensions.x > o.dimensions.y){\r\n                ctx.translate(-(o.dimensions.x - o.dimensions.y + o.topLeft.x), -o.topLeft.y);\r\n            } else {\r\n                ctx.translate(-o.topLeft.x, -(o.dimensions.y - o.dimensions.x + o.topLeft.y));\r\n            }\r\n\r\n            ctx.font = `${o.dimensions.x / 3.5}px Inter`;\r\n\r\n            if(shared/* default */.A.mapsBeaten['/maps/' + o.mapName] === true){\r\n                const baseColor = components_blendColor(\r\n                    difficultyImageColors[Math.floor(o.difficulty)],\r\n                    difficultyImageColors[Math.ceil(o.difficulty)],\r\n                    t\r\n                );\r\n                ctx.fillStyle = shared/* default */.A.blendColor(baseColor, '#000000', 0.12);//'#5fbe50'\r\n            } else {\r\n                ctx.fillStyle = 'white';\r\n            }\r\n            \r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n\r\n            ctx.globalAlpha = Math.min(1,((shared/* default */.A.players[shared/* default */.A.selfId].pos.y + canvas.h/2) - (o.topLeft.y)) / (o.dimensions.y));\r\n            ctx.fillText(\r\n                o.mapName.toUpperCase().replace('O','o'),\r\n                o.topLeft.x + o.dimensions.x / 2,\r\n                o.topLeft.y - o.dimensions.y / 4\r\n            );\r\n            ctx.globalAlpha = 1;\r\n\r\n            // // line marking - scrapped\r\n            // ctx.fillStyle = 'black';\r\n            // ctx.fillRect(\r\n            //     topX,\r\n            //     topY + (1 - o.difficulty%1) * (o.dimensions.y*0.95),\r\n            //     o.dimensions.x / 5,\r\n            //     o.dimensions.y * .05\r\n            // )\r\n        }\r\n    },\r\n    /*tornado*/\r\n    (o) => {\r\n        ctx.fillStyle = '#c0bbc9';\r\n        ctx.globalAlpha = 0.25;\r\n    },\r\n    /*changeVignette*/\r\n    (o) => {\r\n        ctx.toFill = false;\r\n    },\r\n    /*pushable*/\r\n    (o) => {\r\n        ctx.fillStyle = shared/* default */.A.colors.tile;\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.save();\r\n            ctx.clip();\r\n\r\n            ctx.strokeStyle = 'white';\r\n            ctx.lineWidth = 3;\r\n            ctx.globalAlpha = 0.25;\r\n            ctx.beginPath();\r\n            o.topLeft = generateTopLeftCoordinates(o);\r\n            ctx.lineTo(o.topLeft.x, o.topLeft.y);\r\n            ctx.lineTo(o.topLeft.x + o.dimensions.x, o.topLeft.y + o.dimensions.y);\r\n            ctx.stroke();\r\n            ctx.beginPath();\r\n            ctx.lineTo(o.topLeft.x + o.dimensions.x, o.topLeft.y);\r\n            ctx.lineTo(o.topLeft.x, o.topLeft.y + o.dimensions.y);\r\n            ctx.stroke();\r\n            ctx.globalAlpha = 1;\r\n            ctx.lineWidth = 3;\r\n\r\n            ctx.restore();\r\n\r\n            // TODO: white lines where the angles are? oneDirectional parameter?\r\n            // also TODO: \r\n        }\r\n    },\r\n    /*changeMusic*/\r\n    (o) => {\r\n        ctx.toFill = false;\r\n    },\r\n    /*changeShip*/\r\n    (o) => {\r\n        ctx.fillStyle = o.changeShipStateTo === true ? 'rgba(0,0,255,0.3)' : 'rgba(255,255,0,0.3)';\r\n        ctx.strokeStyle = o.changeShipStateTo === true ? 'blue' : 'yellow';\r\n        ctx.lineDashOffset = -window.frames*1000/60 * 150 / 1000;\r\n        ctx.lineWidth = 4;\r\n        ctx.setLineDash([30, 30]);\r\n        ctx.toStroke = true;\r\n\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.setLineDash([]);\r\n        }\r\n    },\r\n    /*changeGrapple*/\r\n    (o) => {\r\n        let middleX = o.topLeft.x + o.dimensions.x/2;\r\n        let middleY = o.topLeft.y + o.dimensions.y/2; \r\n\r\n        let grd = ctx.createRadialGradient(middleX, middleY, 0, middleX, middleY, Math.sqrt(o.dimensions.x**2 + o.dimensions.y**2)/2);\r\n\r\n        let t;\r\n        if(o.changeGrappleStateTo === true){\r\n            t = (window.frames*1000/60 / 1600) % 0.33;\r\n            grd.addColorStop(1, \"rgba(127,127,255,0)\");\r\n            grd.addColorStop((0.67+t), \"rgba(127,127,255,1)\");\r\n\r\n            grd.addColorStop((0.66+t), \"rgba(127,127,255,0)\");\r\n            grd.addColorStop((0.34+t), \"rgba(127,127,255,1)\");\r\n\r\n            grd.addColorStop((0.33+t), \"rgba(127,127,255,0)\");\r\n            grd.addColorStop((0.0101+t), \"rgba(127,127,255,1)\");\r\n\r\n            if(0.01+t > 0)grd.addColorStop(0.01+t, \"rgba(127,127,255,0)\");\r\n            grd.addColorStop(0, \"rgba(127,127,255,1)\");\r\n        } else {\r\n            t = 0.33 - (window.frames*1000/60 / 1600) % 0.33;\r\n            grd.addColorStop(1, \"rgba(255,255,127,0)\");\r\n            grd.addColorStop((0.67+t), \"rgba(255,255,127,1)\");\r\n\r\n            grd.addColorStop((0.66+t), \"rgba(255,255,127,0)\");\r\n            grd.addColorStop((0.34+t), \"rgba(255,255,127,1)\");\r\n\r\n            grd.addColorStop((0.33+t), \"rgba(255,255,127,0)\");\r\n            grd.addColorStop((0.0101+t), \"rgba(255,255,127,1)\");\r\n\r\n            if(0.01+t > 0)grd.addColorStop(0.01+t, \"rgba(255,255,127,0)\");\r\n            grd.addColorStop(0, \"rgba(255,255,127,1)\");\r\n        }\r\n\r\n        ctx.fillStyle = grd;\r\n        // ctx.globalAlpha = Math.abs(Math.sin(window.frames*1000/60 / 760));\r\n    },\r\n    /*changeDeathTimer*/\r\n    (o) => {\r\n        if(shared/* default */.A.skullImg === undefined){\r\n            shared/* default */.A.skullImg = new Image();\r\n            shared/* default */.A.skullImg.src = 'https://svgsilh.com/svg/1294357.svg';\r\n            shared/* default */.A.skullImg.onload = () => {\r\n                shared/* default */.A.skullImgLoaded = true;\r\n            }\r\n            return;\r\n        }\r\n\r\n        ctx.fillStyle = o.changeDeathTimerStateTo === true ? 'red' : 'white';\r\n        ctx.globalAlpha = 0.4;\r\n\r\n        if(shared/* default */.A.skullImgLoaded === false) return;\r\n\r\n        ctx.cleanUpFunction = () => {\r\n            ctx.globalAlpha = 1;\r\n            let middleX = o.topLeft.x + o.dimensions.x/2;\r\n            let middleY = o.topLeft.y + o.dimensions.y/2; \r\n\r\n            let minDimension = Math.min(o.dimensions.x, o.dimensions.y);\r\n\r\n            ctx.drawImage(shared/* default */.A.skullImg, middleX - minDimension/2, middleY - minDimension/2, minDimension, minDimension);\r\n        }\r\n    },\r\n]\r\n\r\nconst difficultyImageColors = shared/* default */.A.difficultyImageColors = [\r\n    /*0 - Peaceful*/\r\n    \"#6cd95b\",\r\n    /*1 - Moderate*/\r\n    \"#58ccb3\",\r\n    /*2 - Difficult*/\r\n    \"#0a77bf\",\r\n    /*3 - Hardcore*/\r\n    \"#3528e0\",\r\n    /*4 - Exhausting*/\r\n    \"#a142c9\",\r\n    /*5 - Relentless*/\r\n    \"#e32d8b\",\r\n    /*6 - Agonizing*/\r\n    \"#fc5434\",\r\n    /*7 - Terrorizing*/\r\n    \"#fc3a3a\",\r\n    /*8 - Cataclysmic*/\r\n    \"#c95d5d\"\r\n]\r\n\r\nconst difficultyImageMap = shared/* default */.A.difficultyImageMap = [\r\n    /*0 - Peaceful*/\r\n    (size) => {\r\n        ctx.globalAlpha *= 0.3;\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.lineWidth = size * 3 / 40;\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(size/2, size/2, size / 4, 0, Math.PI * 2);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    },\r\n    /*1 - Moderate*/\r\n    (size) => {\r\n        ctx.strokeStyle = \"#288a75\";\r\n        ctx.lineWidth = size * 3 / 40;\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(size * 5/12, size * 5/12, size / 4, 0, Math.PI * 2);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(size * 7/12, size * 7/12, size / 4, 0, Math.PI * 2);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    },\r\n    /*2 - Difficult*/\r\n    (size) => {\r\n        ctx.globalAlpha *= 0.3;\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.lineWidth = size * 3 / 40;\r\n        ctx.strokeRect(size / 4, size / 4, size / 2, size / 2);\r\n    },\r\n    /*3 - Hardcore*/\r\n    (size) => {\r\n        ctx.globalAlpha *= 0.3;\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.lineWidth = size * 3 / 40;\r\n        ctx.strokeRect(size / 6, size / 6, size * 5 / 12, size * 5 / 12);\r\n        ctx.strokeRect(size * 5 / 12, size * 5 / 12, size * 5 / 12, size * 5 / 12);\r\n    },\r\n    /*4 - Exhausting*/\r\n    (size) => {\r\n        ctx.globalAlpha *= 0.3;\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.lineWidth = size * 3 / 40;\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 5 / 24, size * 12 / 24);\r\n        ctx.lineTo(size * 12 / 24, size * 19 / 24);\r\n        ctx.lineTo(size * 19 / 24, size * 12 / 24);\r\n        ctx.lineTo(size * 12 / 24, size * 5 / 24);\r\n        ctx.lineTo(size * 5 / 24, size * 12 / 24);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    },\r\n    /*5 - Relentless*/\r\n    (size) => {\r\n        ctx.strokeStyle = \"#991d5d\";\r\n        ctx.lineWidth = size * 3 / 40;\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 1 / 6, size * 3 / 6);\r\n        ctx.lineTo(size * 3 / 6, size * 5 / 6);\r\n        ctx.lineTo(size * 5 / 6, size * 3 / 6);\r\n        ctx.lineTo(size * 3 / 6, size * 1 / 6);\r\n        ctx.lineTo(size * 1 / 6, size * 3 / 6);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n\r\n        ctx.strokeRect(size * 5 / 24, size * 5 / 24, size * 14 / 24, size * 14 / 24);\r\n    },\r\n    /*6 - Agonizing*/\r\n    (size) => {\r\n        ctx.fillStyle = \"#d94a2e\";\r\n        ctx.fillRect(0, size * 80 / 120, size * 120 / 120, size * 40 / 120);\r\n        ctx.fillRect(size * 40 / 120, size * 60 / 120, size * 40 / 120, size * 20 / 120);\r\n        ctx.beginPath();\r\n        ctx.lineTo(0, size * 80 / 120);\r\n        ctx.lineTo(size * 20 / 120, size * 40 / 120);\r\n        ctx.lineTo(size * 40 / 120, size * 80 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 40 / 120, size * 60 / 120);\r\n        ctx.lineTo(size * 60 / 120, size * 20 / 120);\r\n        ctx.lineTo(size * 80 / 120, size * 60 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 80 / 120, size * 80 / 120);\r\n        ctx.lineTo(size * 100 / 120, size * 40 / 120);\r\n        ctx.lineTo(size * 120 / 120, size * 80 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n    },\r\n    /*7 - Terrorizing*/\r\n    (size) => {\r\n        ctx.fillStyle = \"#d63131\";\r\n\r\n        ctx.fillRect(size * 40 / 120, 0, size * 40 / 120, size * 20 / 120);\r\n        ctx.fillRect(size * 40 / 120, size * 100 / 120, size * 40 / 120, size * 20 / 120);\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(0, size * 120 / 120);\r\n        ctx.lineTo(size * 20 / 120, size * 80 / 120);\r\n        ctx.lineTo(size * 40 / 120, size * 120 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 40 / 120, size * 100 / 120);\r\n        ctx.lineTo(size * 60 / 120, size * 60 / 120);\r\n        ctx.lineTo(size * 80 / 120, size * 100 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 80 / 120, size * 120 / 120);\r\n        ctx.lineTo(size * 100 / 120, size * 80 / 120);\r\n        ctx.lineTo(size * 120 / 120, size * 120 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n    \r\n        ctx.beginPath();\r\n        ctx.lineTo(0, 0);\r\n        ctx.lineTo(size * 20 / 120, size * 40 / 120);\r\n        ctx.lineTo(size * 40 / 120, 0);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 40 / 120, size * 20 / 120);\r\n        ctx.lineTo(size * 60 / 120, size * 60 / 120);\r\n        ctx.lineTo(size * 80 / 120, size * 20 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 80 / 120, 0);\r\n        ctx.lineTo(size * 100 / 120, size * 40 / 120);\r\n        ctx.lineTo(size * 120 / 120, 0);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n    },\r\n    /*8 - Cataclysmic*/\r\n    (size) => {\r\n        ctx.fillStyle = \"#8c4141\";\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(0, 0);\r\n        ctx.lineTo(size * 40 / 120, 0);\r\n        ctx.lineTo(0, size * 40 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 40 / 120, 0);\r\n        ctx.lineTo(size * 60 / 120, size * 20 / 120);\r\n        ctx.lineTo(size * 80 / 120, 0);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 120 / 120, 0);\r\n        ctx.lineTo(size * 80 / 120, 0);\r\n        ctx.lineTo(size * 120 / 120, size * 40 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 120 / 120, size * 40 / 120);\r\n        ctx.lineTo(size * 100 / 120, size * 60 / 120);\r\n        ctx.lineTo(size * 120 / 120, size * 80 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 120 / 120, size * 120 / 120);\r\n        ctx.lineTo(size * 80 / 120, size * 120 / 120);\r\n        ctx.lineTo(size * 120 / 120, size * 80 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(size * 40 / 120, size * 120 / 120);\r\n        ctx.lineTo(size * 60 / 120, size * 100 / 120);\r\n        ctx.lineTo(size * 80 / 120, size * 120 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(0, size * 120 / 120);\r\n        ctx.lineTo(size * 40 / 120, size * 120 / 120);\r\n        ctx.lineTo(0, size * 80 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n\r\n        ctx.beginPath();\r\n        ctx.lineTo(0, size * 80 / 120);\r\n        ctx.lineTo(size * 20 / 120, size * 60 / 120);\r\n        ctx.lineTo(0, size * 40 / 120);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n    },\r\n];\r\n\r\n// an obstacle is an ECS\r\nconst components_obstacles = shared/* default */.A.obstacles = [];\r\n\r\nshared/* default */.A.spawnPosition = {x: 100, y: 100};\r\n// a player is also an ecs\r\nshared/* default */.A.createPlayer = () => {\r\n    create(0/*circle*/, [], [], /*no simulate/ effects*/ {x: shared/* default */.A.spawnPosition.x, y: shared/* default */.A.spawnPosition.y, r: /*24.5*/49.5})\r\n    const player = components_obstacles.pop();\r\n    player.axisSpeedMultX = player.axisSpeedMultY = 1;\r\n    player.touchingNormalIndexes = [];\r\n    player.lastTouchingNormalIndexes = [];\r\n    player.renderRadius = player.lastAliveRadius = player.sat.r;\r\n    player.xv = player.yv = player.xa = player.ya = 0;\r\n    player.interpX = player.interpY = 0;\r\n    player.speed = player.baseSpeed = 7.167;\r\n    player.dead = false;\r\n    player.onSafe = false;\r\n    player.touchingWall = false;\r\n    player.stopForces = false;\r\n    player.forces = [];\r\n    player.id = undefined;\r\n    player.dev = !shared/* default */.A.isProd; /*dev only for players[selfId]*/ player.god = false;\r\n    player.friction = 0.4;\r\n    player.ship = false; player.shipAngle = 0; player.shipTurnSpeed = Math.PI / 100;\r\n    player.deathTime = 0; player.deathTimer = false;\r\n    player.grappleX = -1; player.grappleY = -1; player.grapple = false;\r\n    player.grappleRange = 488; player.grappleForce = 0.01; player.grappleFric = 0.414;\r\n    player.timeTrapOverrideSafe = false;\r\n    return player;\r\n}\r\n\r\nshared/* default */.A.players = [];\r\n\r\nif(shared/* default */.A.isExClient !== true || shared/* default */.A.isEditor === true) {shared/* default */.A.players.push(shared/* default */.A.createPlayer()); shared/* default */.A.selfId = 0; shared/* default */.A.mapDimensions = {x:2000,y:2000}}\r\nif(shared/* default */.A.isExClient === true || components_environment === 'server') shared/* default */.A.mapDimensions = {x: 2000, y: 2000};\r\n\r\n/* harmony default export */ const components = (simulate);\n;// ./eXclient/input.js\n\r\nshared/* default */.A.mouse = {\r\n    screen: {\r\n        x: -1,\r\n        y: -1\r\n    },\r\n    world: {\r\n        x: -1,\r\n        y: -1\r\n    }\r\n}\r\n\r\nshared/* default */.A.mouseX = -1;\r\nshared/* default */.A.mouseY = -1;\r\nshared/* default */.A.scrollLocked = false;\r\nshared/* default */.A.mouseDownFunctions = [];\r\nshared/* default */.A.mouseMoveFunctions = [];\r\nshared/* default */.A.mouseUpFunctions = [];\r\nshared/* default */.A.mouseOut = false;\r\nshared/* default */.A.pageX = -1;\r\nshared/* default */.A.pageY = -1;\r\n\r\nshared/* default */.A.dragging = false;\r\n\r\nwindow.onmousedown = (e) => {}\r\n\r\nwindow.onmousemove = (e) => {}\r\n\r\nwindow.onmouseup = () => {}\r\n\r\nwindow.oncontextmenu = (e) => { return e.preventDefault(); };\r\n\r\nconst Controls = {\r\n    KeyW: 'up',\r\n    KeyS: 'down',\r\n    KeyA: 'left',\r\n    KeyD: 'right',\r\n    ArrowUp: 'up',\r\n    ArrowDown: 'down',\r\n    ArrowLeft: 'left',\r\n    ArrowRight: 'right',\r\n    ShiftLeft: 'shift',\r\n    ShiftRight: 'shift',\r\n    KeyC: 'action1',\r\n    KeyJ: 'action1',\r\n    KeyY: 'action1'\r\n};\r\n\r\nshared/* default */.A.input = {\r\n    up: false,\r\n    down: false,\r\n    left: false,\r\n    right: false,\r\n    shift: false,\r\n    action1: false,// grapple\r\n};\r\n\r\nlet chatOpen = false, zenMode = false;\r\nwindow.onkeydown = handleKey;\r\nwindow.onkeyup = handleKey;\r\n\r\n\r\nconst {encodeAtPosition: input_encodeAtPosition} = utils;\r\n\r\nconst chat = document.querySelector('.chat');\r\nconst chatDiv = document.querySelector('.chatDiv');\r\nconst visChatDiv = document.querySelector('.chat-div');\r\nconst lbDiv = document.querySelector('.leaderboard-div');\r\n\r\nfunction handleKey(e){\r\n    if(chatOpen === true){\r\n        if(e.type === 'keydown' && e.code === 'Enter'){\r\n            let msg = chat.value.trim();\r\n            if(msg === '/reset'){\r\n                shared/* default */.A.changeMap('/maps/hub');\r\n            }\r\n            else if(msg === '/help'){\r\n                shared/* default */.A.addChatMessage(`: Evades X is a futuristic dodging game where anything is possible!<br><br>Commands:<br>/reset - teleports you to the hub world<br>...and that's it lol, more commands coming soon`, 'system');\r\n            }\r\n            else if(shared/* default */.A.isProd === false && msg.slice(0,6) === '/tpmap'){\r\n                shared/* default */.A.changeMap(`/maps/` + msg.slice(7).toLowerCase());\r\n            }\r\n            else if(shared/* default */.A.isProd === false && msg.slice(0,6) === '/scale'){\r\n                const num = parseFloat(msg.slice(7));\r\n                shared/* default */.A.changeCameraScale(num);\r\n            }\r\n            else if(shared/* default */.A.isProd === false && msg.slice(0,4) === '/map'){\r\n                shared/* default */.A.initImportMap(msg.slice(5));\r\n            }\r\n            // else if(shared.zones !== undefined && msg.slice(0,7).toLowerCase() === '/tpzone'){\r\n            //     const num = parseInt(msg.slice(8));\r\n            //     for(let i = 0; i < shared.zones.length; i++){\r\n            //         if(shared.zones[i].zone === num){\r\n            //             shared.players[shared.selfId].pos.x = shared.zones[i].x;\r\n            //             shared.players[shared.selfId].pos.y = shared.zones[i].y;\r\n            //             break;\r\n            //         }\r\n            //     }\r\n            // }\r\n            else if(msg.slice(0,5) === '/mute' && (shared/* default */.A.username === 'trit' || shared/* default */.A.username === 'Serum0017')){\r\n                const user = msg.slice(6);\r\n                const buf = new Uint8Array(user.length + 1);\r\n                buf[0] = 5;\r\n                input_encodeAtPosition(user, buf, 1);\r\n                shared/* default */.A.send(buf);\r\n            }\r\n            else if(msg.slice(0,4) === '/ban' && (shared/* default */.A.username === 'trit' || shared/* default */.A.username === 'Serum0017')){\r\n                const user = msg.slice(5);\r\n                const buf = new Uint8Array(user.length + 1);\r\n                buf[0] = 6;\r\n                input_encodeAtPosition(user, buf, 1);\r\n                shared/* default */.A.send(buf);\r\n            }\r\n            \r\n            else if(msg.length !== 0){\r\n                msg = shared/* default */.A.username + ': ' + msg;\r\n                const buf = new Uint8Array(msg.length + 2);\r\n                buf[0] = 7;// type 0 - set username and join game\r\n                // ['normal', 'system', 'dev', 'guest']\r\n                if(shared/* default */.A.players[shared/* default */.A.selfId].dev === true) buf[1] = 2;\r\n                else if(shared/* default */.A.players[shared/* default */.A.selfId].guest === true) buf[1] = 3; \r\n                input_encodeAtPosition(msg, buf, 2);\r\n                shared/* default */.A.send(buf);\r\n            }\r\n            chat.value = '';\r\n            chat.blur();\r\n            chatDiv.classList.add('hidden');\r\n            chatOpen = false;\r\n        }\r\n        // TODO\r\n    } else {\r\n        if (e.repeat) return e.preventDefault();\r\n\r\n        if(e.type === 'keydown'){\r\n            if(e.code === 'KeyO' && shared/* default */.A.isProd === false && shared/* default */.A.players[shared/* default */.A.selfId].dev === true){\r\n                shared/* default */.A.players[shared/* default */.A.selfId].god = !shared/* default */.A.players[shared/* default */.A.selfId].god;\r\n                const buf = new Uint8Array(2);\r\n                buf[0] = 8;\r\n                buf[1] = shared/* default */.A.players[shared/* default */.A.selfId].god;\r\n                shared/* default */.A.send(buf);\r\n                return e.preventDefault();\r\n            } else if(e.code === 'KeyR' && shared/* default */.A.players[shared/* default */.A.selfId].dead === true){\r\n                shared/* default */.A.respawnPlayer();\r\n            } else if(e.code === 'Enter'){\r\n                chatOpen = true;\r\n                chatDiv.classList.remove('hidden');\r\n                chat.focus();\r\n            } else if (e.code === 'KeyZ' && shared/* default */.A.isEditor !== true) {\r\n                if (!zenMode) {\r\n                    chat.blur();\r\n                    if (!visChatDiv.classList.contains('hideChat')) {\r\n                        visChatDiv.classList.add('hideChat');\r\n                    }\r\n                    if (!lbDiv.classList.contains('hideLB')) {\r\n                        lbDiv.classList.add('hideLB');\r\n                    }\r\n                } else {\r\n                    if (visChatDiv.classList.contains('hideChat')) {\r\n                        visChatDiv.classList.remove('hideChat');\r\n                        visChatDiv.scrollTop = visChatDiv.scrollHeight;\r\n                    }\r\n                    if (lbDiv.classList.contains('hideLB')) {\r\n                        lbDiv.classList.remove('hideLB');\r\n                    }\r\n                }\r\n                zenMode = !zenMode;\r\n            } else if(e.code === 'KeyT' && shared/* default */.A.isEditor !== true) {\r\n                shared/* default */.A.toggleTimer();\r\n            } else if (e.code === 'KeyU' && shared/* default */.A.isProd === false){\r\n                shared/* default */.A.renderDebug = !shared/* default */.A.renderDebug;\r\n            }\r\n        }\r\n\r\n        if (Controls[e.code] != undefined) {\r\n            shared/* default */.A.input[Controls[e.code]] = e.type === 'keydown';\r\n            e.preventDefault();\r\n        }\r\n    }\r\n}\r\n\r\nlet importMapFn;\r\nshared/* default */.A.initImportMap = async (str) => {\r\n    if(importMapFn === undefined) importMapFn = (await __webpack_require__.e(/* import() */ 78).then(__webpack_require__.bind(__webpack_require__, 78))).default;\r\n    importMapFn(str);\r\n}\r\n\r\nshared/* default */.A.touchMode = false;\r\nshared/* default */.A.touchAngle = -1;\r\nwindow.ontouchstart = () => {\r\n    shared/* default */.A.touchMode = true;\r\n}\r\nwindow.ontouchmove = (e) => {\r\n    const t = e.changedTouches[0];\r\n    if(t === undefined) return;\r\n\r\n    if(t.pageX < window.innerWidth / 2){\r\n        shared/* default */.A.input.left = true;\r\n        shared/* default */.A.input.right = false;\r\n    } else {\r\n        shared/* default */.A.input.left = false;\r\n        shared/* default */.A.input.right = true;\r\n    }\r\n\r\n    if(t.pageY < window.innerHeight / 2){\r\n        shared/* default */.A.input.up = true;\r\n        shared/* default */.A.input.down = false;\r\n    } else {\r\n        shared/* default */.A.input.up = false;\r\n        shared/* default */.A.input.down = true;\r\n    }\r\n    shared/* default */.A.touchAngle = Math.atan2(t.pageY - window.innerHeight / 2, t.pageX - window.innerWidth/2);\r\n}\r\nwindow.ontouchend = () => {\r\n    shared/* default */.A.touchMode = false;\r\n}\n;// ./client/sound.js\n\r\n\r\nconst { until: sound_until } = utils;\r\n\r\nshared/* default */.A.hasLoadedNewMusic = false;\r\nlet lastLoadedLink;\r\nlet audioIframe;\r\nlet lastPlayTime = 0;\r\n\r\n// TODO: optimize? \"sub\" time takes about 1ms, so we could optimize by statically creating an element\r\nshared/* default */.A.stopMusic = async (toAwait=false) => {\r\n    if(toAwait === true){\r\n        let returnBig = false;\r\n        let callTime = Date.now();\r\n        await sound_until(() => {\r\n            if(audioIframe === undefined) return false;\r\n            // we only want to stop music if we played it before this fn is called\r\n            if(lastPlayTime > callTime){\r\n                returnBig = true;\r\n            }\r\n            return true;\r\n        });\r\n        if(returnBig === true) return; \r\n    } else if(audioIframe === undefined) {\r\n        return;\r\n    }\r\n\r\n    audioIframe.remove();\r\n    audioIframe = undefined;\r\n    lastLoadedLink = undefined;\r\n}\r\n\r\nshared/* default */.A.playMusic = async (link, startTime=0) => {\r\n    shared/* default */.A.hasLoadedNewMusic = true;\r\n\r\n    await sound_until(() => {return navigator.userActivation.hasBeenActive === true});\r\n    if(link === lastLoadedLink) return;\r\n\r\n    shared/* default */.A.stopMusic();\r\n    lastLoadedLink = link;\r\n\r\n    \r\n    audioIframe = document.createElement('iframe');\r\n    audioIframe.frameborder = \"0\";\r\n    audioIframe.setAttribute(\"frameBorder\", \"0\");\r\n    audioIframe.width = 0;\r\n    audioIframe.height = 0;\r\n    \r\n    const videoId = link.split('?v=')[1];\r\n    audioIframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&loop=1&playlist=${videoId}&enablejsapi=1${startTime === 0 ? '' : \"&start=\" + startTime}`;\r\n    \r\n    audioIframe.allow = \"autoplay\";\r\n    audioIframe.security = \"restricted\";\r\n\r\n    audioIframe.style.position = \"fixed\";\r\n    audioIframe.classList.add('yt');\r\n    audioIframe.id = videoId;\r\n\r\n    // this is about 1ms...\r\n    // console.time(\"sub\");\r\n    document.body.appendChild(audioIframe);\r\n    // console.timeEnd(\"sub\");\r\n\r\n    lastPlayTime = Date.now();\r\n}\r\n\r\nshared/* default */.A.playMusicIndefinitely = async (link) => {\r\n    lastLoadedLink = undefined;\r\n    await shared/* default */.A.playMusic(link);\r\n    audioIframe = undefined;\r\n}\r\n\r\nshared/* default */.A.reloadMusic = () => {\r\n    let linkToPlay = lastLoadedLink;\r\n    lastLoadedLink = undefined;\r\n    shared/* default */.A.playMusic(linkToPlay);\r\n}\n;// ./eXserver/maps/_metadata.js\n\r\nshared/* default */.A.mapDifficulties = Object.freeze({\r\n    winroom: 0,\r\n    hub: 0,\r\n    pom: 0,\r\n    popb: 0.25,\r\n    poca: 1.01,\r\n    pospd: 2.8,\r\n    pos: 3.01,\r\n    pols: 5.01,\r\n    povv: 2.3,\r\n    poqt: 5.33,\r\n    podc: 6.01,\r\n    posc: 0.55,\r\n    poph: 4.33,\r\n    powc: 1.85,\r\n    posh: 1.39,\r\n});\r\n\r\nshared/* default */.A.mapLeaderboardNames = Object.freeze({\r\n    winroom: 'Winroom',\r\n    hub: 'Hub',\r\n    pom: 'Planet of 🗺️',\r\n    popb: 'Planet of Peaceful Beginnings',\r\n    poca: 'Planet of Conveyor Abuse',\r\n    pospd: 'Planet of Speed (nyoom)',\r\n    pos: 'Planet of Safezones',\r\n    pols: 'Planet of Lost Sanity',\r\n    povv: 'Planet of The Vibing Vault',\r\n    poqt: 'Planet of Quick Thinking',\r\n    podc: 'Planet of Difficulty Chart',\r\n    posc: 'Planet of Simple Challenges',\r\n    poph: 'Planet of Prehistory',\r\n    posh: `Planet of ${Math.random() < 0.01 ? 'Suspicious' : 'Slight'} Hurdles`,\r\n    powc: `Planet of Wacky Craze`\r\n});\n;// ./eXclient/index.js\nshared/* default */.A.isExClient = true;\r\n\r\n\r\n// init rendering\r\n\r\n\r\n// handle client-server communication\r\n\r\n\r\n// game stuff\r\n\r\n\r\n// keyboard input\r\n\r\n\r\n// background music\r\n\r\n\r\n// mapName to difficulty dict\r\n\r\n\r\n// shared, like window but not accessible in console\r\n\r\n\r\n// joining game\r\nconst eXclient_gui = shared/* default */.A.gui = document.querySelector('.gui');\r\nshared/* default */.A.mapPath = '';\r\nshared/* default */.A.username = '';\r\nshared/* default */.A.authId = -1;\r\n\r\nshared/* default */.A.startGame = () => {\r\n    if(shared/* default */.A.isEditor === false) eXclient_gui.classList.remove('hidden');\r\n    lastTime = performance.now();\r\n    shared/* default */.A.respawnPlayer();\r\n    run();\r\n    console.log('game starting');\r\n}\r\n\r\n// gameloop\r\nlet lastTime=0, now=0;\r\nwindow.frames = 0; shared/* default */.A.accum = 0;\r\nshared/* default */.A.FRAME_TIME = 1000 / 60;\r\nfunction run(){\r\n    requestAnimationFrame(run);\r\n\r\n    now = performance.now();\r\n    shared/* default */.A.accum += now - lastTime;\r\n    lastTime = now;\r\n\r\n    // TODO: Get the map from another player\r\n    if(shared/* default */.A.accum > 2000) shared/* default */.A.accum = 0;\r\n\r\n    while(shared/* default */.A.accum >= 0){\r\n        shared/* default */.A.accum -= shared/* default */.A.FRAME_TIME;\r\n        components();\r\n    }\r\n\r\n    sendUpdatePack();\r\n    shared/* default */.A.render();\r\n}\r\n\r\nconst u12 = new Uint8Array(12);\r\nconst f12 = new Float32Array(u12.buffer);\r\n\r\nconst u8 = new Uint8Array(8);\r\nconst f8 = new Float32Array(u8.buffer);\r\n\r\nshared/* default */.A.u4 = new Uint8Array(4);\r\n\r\nlet eXclient_lastX=Infinity, eXclient_lastY=Infinity;\r\nlet lastRadius=Infinity, lastShipAngle = Infinity;\r\nlet lastDead = false;\r\nfunction sendUpdatePack(){\r\n    const player = shared/* default */.A.players[shared/* default */.A.selfId];\r\n    if(Math.abs(player.pos.x - eXclient_lastX) > .1 || Math.abs(player.pos.y - eXclient_lastY) > .1){\r\n        u12[0] = 4;// type 4 - player x and y\r\n        f12[1] = player.pos.x;\r\n        f12[2] = player.pos.y;\r\n        shared/* default */.A.send(u12);\r\n    }\r\n\r\n    if(player.grapple === true){\r\n        u12[0] = 11;\r\n        f12[1] = player.grappleX;\r\n        f12[2] = player.grappleY;\r\n        shared/* default */.A.send(u12);\r\n        u12[0] = 4;\r\n    }\r\n\r\n    if(player.ship === true && lastShipAngle !== player.shipAngle){\r\n        lastShipAngle = player.shipAngle;\r\n        u8[0] = 9;\r\n        f8[1] = player.shipAngle;\r\n        shared/* default */.A.send(u8);\r\n    }\r\n\r\n    if(player.deathTimer === true){\r\n        u8[0] = 13;\r\n        f8[1] = player.deathTime;\r\n        shared/* default */.A.send(u8);\r\n    }\r\n\r\n    if(player.dead !== lastDead){\r\n        lastDead = player.dead;\r\n        shared/* default */.A.u4[0] = 15;\r\n        shared/* default */.A.u4[1] = player.dead === true ? 1 : 0;\r\n        shared/* default */.A.send(shared/* default */.A.u4);\r\n    }\r\n\r\n    if(player.sat.r !== lastRadius){\r\n        lastRadius = player.sat.r;\r\n        u8[0] = 22;\r\n        f8[1] = player.sat.r;\r\n        shared/* default */.A.send(u8);\r\n    }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjA4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1dUJBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdmZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JsR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL2VYY2xpZW50L3N0eWxlLmNzcz83MjRjIiwid2VicGFjazovL29tbmlzZXJ2ZXIvLi9lWGNsaWVudC9yZW5kZXIuanM/NDM4OCIsIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vZVhjbGllbnQvbXNncGFja3IuanM/MzJmYSIsIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vY2xpZW50L3V0aWxzLmpzPzk4NDQiLCJ3ZWJwYWNrOi8vb21uaXNlcnZlci8uL2VYY2xpZW50L25ldHdvcmtpbmcuanM/OWI3MiIsIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vY2xpZW50L3Njcm9sbC5qcz83ZTFmIiwid2VicGFjazovL29tbmlzZXJ2ZXIvLi9jbGllbnQvY29tcG9uZW50cy5qcz8xNTQ3Iiwid2VicGFjazovL29tbmlzZXJ2ZXIvLi9lWGNsaWVudC9pbnB1dC5qcz80ZGI0Iiwid2VicGFjazovL29tbmlzZXJ2ZXIvLi9jbGllbnQvc291bmQuanM/OWIzZiIsIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vZVhzZXJ2ZXIvbWFwcy9fbWV0YWRhdGEuanM/YmRhMyIsIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vZVhjbGllbnQvaW5kZXguanM/MGE5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5vcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiaW1wb3J0IHNoYXJlZCBmcm9tICcuLi9zaGFyZWQvc2hhcmVkLmpzJztcclxuXHJcbmxldCBjYW52YXMgPSB3aW5kb3cuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xyXG5sZXQgY3R4ID0gd2luZG93LmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuY29uc3QgY2FtZXJhID0gc2hhcmVkLmNhbWVyYSA9IHtcclxuICAgIHg6IDAsIHk6IDAsIHNjYWxlOiAxLFxyXG4gICAgbnVtQ29udHJvbGxlZEJ5OiAwLFxyXG4gICAgYW5nbGU6IDAsXHJcbiAgICAvKjNkKi9cclxuICAgIHo6IDEsXHJcbiAgICBiYXNpczE6IFsxLCAwLCAwXSxcclxuICAgIGJhc2lzMjogWzAsIDEsIDBdLFxyXG4gICAgbm9ybWFsOiBbMCwgMCwgMV1cclxufVxyXG5cclxuc2hhcmVkLmRlZmF1bHRDb2xvcnMgPSB7XHJcbiAgICB0aWxlOiAnIzFmMjIyOScsLy8gdGhlIHN0cm9rZSBhbmQgb3V0c2lkZSBvZiBhcmVuYVxyXG4gICAgYmFja2dyb3VuZDogJyMzMjM2NDUnLC8vIHRoZSBmaWxsY29sb3JcclxuICAgIHZpZ25ldHRlOiB7XHJcbiAgICAgICAgaW5uZXI6IHtzaXplOjAuMSxyOjAsZzowLGI6MCxvcGFjaXR5OjB9LFxyXG4gICAgICAgIG91dGVyOiB7c2l6ZTowLjYscjowLGc6MCxiOjAsb3BhY2l0eToxfSxcclxuICAgICAgICBpbm5lckludGVycDoge3NpemU6MC4xLHI6MCxnOjAsYjowLG9wYWNpdHk6MH0sXHJcbiAgICAgICAgb3V0ZXJJbnRlcnA6IHtzaXplOjAuNixyOjAsZzowLGI6MCxvcGFjaXR5OjF9LFxyXG4gICAgICAgIGhvbGVGdW5jdGlvbnM6IFtdXHJcbiAgICB9XHJcbn1cclxuXHJcbnNoYXJlZC5jb2xvcnMgPSB7XHJcbiAgICB0aWxlOiBzaGFyZWQuZGVmYXVsdENvbG9ycy50aWxlLFxyXG4gICAgYmFja2dyb3VuZDogc2hhcmVkLmRlZmF1bHRDb2xvcnMuYmFja2dyb3VuZCxcclxuICAgIHZpZ25ldHRlOiB7XHJcbiAgICAgICAgaW5uZXI6IHtzaXplOjAuMSxyOjAsZzowLGI6MCxvcGFjaXR5OjB9LFxyXG4gICAgICAgIG91dGVyOiB7c2l6ZTowLjYscjowLGc6MCxiOjAsb3BhY2l0eToxfSxcclxuICAgICAgICBpbm5lckludGVycDoge3NpemU6MC4xLHI6MCxnOjAsYjowLG9wYWNpdHk6MH0sXHJcbiAgICAgICAgb3V0ZXJJbnRlcnA6IHtzaXplOjAuNixyOjAsZzowLGI6MCxvcGFjaXR5OjF9LFxyXG4gICAgICAgIGhvbGVGdW5jdGlvbnM6IFtdXHJcbiAgICB9XHJcbn1cclxuXHJcbnNoYXJlZC5zZWxmSWQgPSB1bmRlZmluZWQ7XHJcbnNoYXJlZC50aWxlU2l6ZSA9IDEwMDtcclxuc2hhcmVkLnJlbmRlckRlYnVnID0gZmFsc2U7XHJcbnNoYXJlZC5kaXN0b3J0aW9uc0FjdGl2ZSA9IGZhbHNlO1xyXG5zaGFyZWQuc2t1bGxJbWdMb2FkZWQgPSBmYWxzZTtcclxuc2hhcmVkLnNrdWxsSW1nID0gdW5kZWZpbmVkO1xyXG5zaGFyZWQucmVuZGVyVGltZXIgPSBmYWxzZTtcclxuY29uc3QgZnVsbHNjcmVlbiA9IHtcclxuICAgIHJhdGlvOiA5IC8gMTYsXHJcbiAgICB6b29tOiAxODAwLFxyXG59XHJcbi8vIGNvbnN0IHdpZHRoID0gMTYwMDtcclxuLy8gY29uc3QgaGVpZ2h0ID0gOTAwO1xyXG5cclxuLy8gc2hhcmVkLnRpbGVJbWFnZSA9IHVuZGVmaW5lZDtcclxuLy8gc2hhcmVkLnRpbGVJbWFnZUNvbG9ycyA9IHtcclxuLy8gICAgIHRpbGU6ICcnLCBiYWNrZ3JvdW5kOiAnJ1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBnZW5lcmF0ZVRpbGVJbWFnZSh7dGlsZSwgYmFja2dyb3VuZH0pIHtcclxuLy8gICAgIGNvbnN0IGNhbnYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuLy8gICAgIGNvbnN0IHcgPSBjYW52YXMudyArIGN0eC5saW5lV2lkdGggKyBzaGFyZWQudGlsZVNpemU7XHJcbi8vICAgICBjb25zdCBoID0gY2FudmFzLmggKyBjdHgubGluZVdpZHRoICsgc2hhcmVkLnRpbGVTaXplO1xyXG4gICAgXHJcbi8vICAgICBjb25zdCBjeCA9IGNhbnYuZ2V0Q29udGV4dCgnMmQnKTtcclxuLy8gICAgIGNhbnYud2lkdGggPSB3O1xyXG4vLyAgICAgY2Fudi5oZWlnaHQgPSBoO1xyXG4vLyAgICAgY3guaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcblxyXG4vLyAgICAgLy8gdGlsZSBiYWNrZ3JvdW5kXHJcbi8vICAgICBjeC5nbG9iYWxBbHBoYSA9IDAuNzU7XHJcbi8vICAgICBjeC5zdHJva2VTdHlsZSA9IHRpbGU7XHJcbi8vICAgICBjeC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kO1xyXG5cclxuLy8gICAgIGN4LmxpbmVXaWR0aCA9IDM7XHJcbi8vICAgICBmb3IgKGxldCB4ID0gLWNhbWVyYS54JXNoYXJlZC50aWxlU2l6ZTsgeCA8IGNhbnZhcy53ICsgY3R4LmxpbmVXaWR0aCArIHNoYXJlZC50aWxlU2l6ZTsgeCArPSBzaGFyZWQudGlsZVNpemUpIHtcclxuLy8gICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbi8vICAgICAgICAgY3R4Lm1vdmVUbyh4LCAwKTtcclxuLy8gICAgICAgICBjdHgubGluZVRvKHgsIGNhbnZhcy5oKTtcclxuLy8gICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbi8vICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGZvciAobGV0IHkgPSAtY2FtZXJhLnklc2hhcmVkLnRpbGVTaXplOyB5IDwgY2FudmFzLmggKyBjdHgubGluZVdpZHRoICsgc2hhcmVkLnRpbGVTaXplOyB5ICs9IHNoYXJlZC50aWxlU2l6ZSkge1xyXG4vLyAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuLy8gICAgICAgICBjdHgubW92ZVRvKDAsIHkpO1xyXG4vLyAgICAgICAgIGN0eC5saW5lVG8oY2FudmFzLncsIHkpO1xyXG4vLyAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuLy8gICAgICAgICBjdHguY2xvc2VQYXRoKCk7Ly9cclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBjeC5nbG9iYWxBbHBoYSA9IDE7XHJcbi8vICAgICByZXR1cm4gY2FudjtcclxuLy8gfVxyXG5cclxuLy8gbGV0IHRpbGVJbWc7XHJcbi8vIGZ1bmN0aW9uIGNyZWF0ZVRpbGVJbWcoc2NhbGUsIHRoaWNjKSB7XHJcbi8vICAgICBjb25zdCBzaGFyZWQudGlsZVNpemUgPSAxMDA7XHJcbi8vICAgICAvLyBjb25zdCBzaXplID1cclxuLy8gICAgIC8vICAgICBNYXRoLnJvdW5kKE1hdGgubWF4KGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCkgLyBzaGFyZWQudGlsZVNpemUpICpcclxuLy8gICAgIC8vICAgICAgICAgc2hhcmVkLnRpbGVTaXplICtcclxuLy8gICAgIC8vICAgICAyMDA7XHJcbi8vICAgICBjb25zdCBjYW52ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbi8vICAgICBpZihzY2FsZSA8IDAuMSl7XHJcbi8vICAgICAgICAgcmV0dXJuIGNhbnY7XHJcbi8vICAgICB9XHJcbiAgICBcclxuLy8gICAgIGNvbnN0IHcgPSBjYW52YXMud2lkdGgvc2NhbGUgKyBzaGFyZWQudGlsZVNpemU7XHJcbi8vICAgICBjb25zdCBoID0gY2FudmFzLmhlaWdodC9zY2FsZSArIHNoYXJlZC50aWxlU2l6ZTtcclxuICAgIFxyXG4vLyAgICAgY29uc3QgY3ggPSBjYW52LmdldENvbnRleHQoJzJkJyk7XHJcbi8vICAgICBjYW52LndpZHRoID0gdy8vc2l6ZSAvIHNjYWxlO1xyXG4vLyAgICAgY2Fudi5oZWlnaHQgPSBoLy9zaXplIC8gc2NhbGU7XHJcbi8vICAgICBjeC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcclxuXHJcbi8vICAgICAvLyB0aWxlIGJhY2tncm91bmRcclxuLy8gICAgIGN4Lmdsb2JhbEFscGhhID0gMC43NTtcclxuLy8gICAgIGN4LnN0cm9rZVN0eWxlID0gY29sb3JzLnRpbGUvL2NvbG9ycy5iYWNrZ3JvdW5kO1xyXG4vLyAgICAgY3gubGluZVdpZHRoID0gdGhpY2MgPyA0IDogMjtcclxuLy8gICAgIGZvciAobGV0IHkgPSAwOyB5IDw9IGg7IHkgKz0gc2hhcmVkLnRpbGVTaXplKSB7XHJcbi8vICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPD0gdzsgeCArPSBzaGFyZWQudGlsZVNpemUpIHtcclxuLy8gICAgICAgICAgICAgY3guc3Ryb2tlUmVjdCh4LCB5LCBzaGFyZWQudGlsZVNpemUsIHNoYXJlZC50aWxlU2l6ZSk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyAgICAgY3guZ2xvYmFsQWxwaGEgPSAxO1xyXG4vLyAgICAgcmV0dXJuIGNhbnY7XHJcbi8vIH1cclxuXHJcbmxldCBvcGFxSW5kZXgsIGxlbiwgbGFzdFgsIGxhc3RZLCBsYXN0UiwgbGFzdFBsYXllclJhZGl1cywgZGlhZ29uYWxTdGFydE9mZnNldCwgZGlhZ29uYWxEaXN0LCBvdmVyUmVuZGVyVGlsZXMgPSBmYWxzZSwgbGFzdEdBLCBqID0gZmFsc2UsIGxhc3ROTERYID0gMCwgbGFzdE5MRFkgPSAwLCBjdWxsaW5nTWluWD0wLCBjdWxsaW5nTWF4WD0wLCBjdWxsaW5nTWluWT0wLCBjdWxsaW5nTWF4WT0wLCBjYW52U3VtPTA7XHJcbnNoYXJlZC5yZW5kZXIgPSAob3M9c2hhcmVkLm9ic3RhY2xlcywgY29scz1zaGFyZWQuY29sb3JzLCBwbGF5ZXJzPXNoYXJlZC5wbGF5ZXJzKSA9PiB7XHJcbiAgICBvdmVyUmVuZGVyVGlsZXMgPSBmYWxzZTtcclxuICAgIGlmKHNoYXJlZC5zZWxmSWQgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgY29uc3QgbWUgPSBwbGF5ZXJzW3NoYXJlZC5zZWxmSWRdO1xyXG5cclxuICAgICAgICBpZihjYW1lcmEubnVtQ29udHJvbGxlZEJ5ID09PSAwKXtcclxuICAgICAgICAgICAgY2FtZXJhLnggPSBtZS5wb3MueDtcclxuICAgICAgICAgICAgY2FtZXJhLnkgPSBtZS5wb3MueTtcclxuICAgICAgICAgICAgY2FtZXJhLmFuZ2xlID0gMDtcclxuICAgICAgICAgICAgaWYobWUuc2hpcCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuYW5nbGUgPSBNYXRoLlBJLzIrbWUuc2hpcEFuZ2xlO1xyXG4gICAgICAgICAgICAgICAgb3ZlclJlbmRlclRpbGVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoY2FtZXJhLmFuZ2xlICE9PSAwKXtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjYW52YXMudy8yLCBjYW52YXMuaC8yKTtcclxuICAgICAgICAgICAgY3R4LnJvdGF0ZSgtY2FtZXJhLmFuZ2xlKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgtY2FudmFzLncvMiwgLWNhbnZhcy5oLzIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB0aWxlIGJhY2tncm91bmRcclxuICAgIC8vIGN0eC5zdHJva2VTdHlsZSA9IGNvbHMudGlsZTtcclxuICAgIC8vIGN0eC5maWxsU3R5bGUgPSBjb2xzLmJhY2tncm91bmQ7XHJcblxyXG4gICAgLy8gaWYodGlsZUltZyA9PT0gdW5kZWZpbmVkKXtcclxuICAgIC8vICAgICB0aWxlSW1nID0gY3JlYXRlVGlsZUltZygxKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBjb25zdCBpbWcgPSB0aWxlSW1nO1xyXG4gICAgLy9jdHgudHJhbnNsYXRlKHBvcy54ICwgcG9zLnkgKyAoZ3JpZE9mZnNldC55ICUgNTApKTtcclxuICAgIC8vIGN0eC5kcmF3SW1hZ2UoaW1nLCAoY2FudmFzLncvMi1jYW1lcmEueCklc2hhcmVkLnRpbGVTaXplLCAoY2FudmFzLmgvMi1jYW1lcmEueSklc2hhcmVkLnRpbGVTaXplKTtcclxuICAgIFxyXG5cclxuICAgIGlmKG92ZXJSZW5kZXJUaWxlcyA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbHMudGlsZTtcclxuXHJcbiAgICAgICAgY2FudlN1bSA9IChjYW52YXMudyArIGNhbnZhcy5oKS8yO1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgtY2FudlN1bSwtY2FudlN1bSw0KmNhbnZTdW0sIDQqY2FudlN1bSk7XHJcblxyXG4gICAgICAgIGN1bGxpbmdNaW5YID0gY2FtZXJhLngtY2FudlN1bTtcclxuICAgICAgICBjdWxsaW5nTWF4WCA9IGNhbWVyYS54K2NhbnZTdW07XHJcbiAgICAgICAgY3VsbGluZ01pblkgPSBjYW1lcmEueS1jYW52U3VtO1xyXG4gICAgICAgIGN1bGxpbmdNYXhZID0gY2FtZXJhLnkrY2FudlN1bTtcclxuXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbHMuYmFja2dyb3VuZDtcclxuICAgICAgICAvLyBhZGQgMSB0byBhbGwgZGltZW5zaW9ucyBzbyB0aGF0IHdlIGRvbid0IGdldCBnYXAgYXJ0aWZhY3RzIG9uIHRoZSBlZGdlIG9mIHRoZSBhcmVuYVxyXG4gICAgICAgIGN0eC5maWxsUmVjdCgtKGNhbWVyYS54LWNhbnZhcy53LzIpKzEsIC0oY2FtZXJhLnktY2FudmFzLmgvMikrMSwgc2hhcmVkLm1hcERpbWVuc2lvbnMueC0yLCBzaGFyZWQubWFwRGltZW5zaW9ucy55LTIpO1xyXG5cclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjc1O1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSA0Ljg7XHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29scy50aWxlO1xyXG5cclxuICAgICAgICAvLyBhY2NvdW50aW5nIGZvciByb3RhdGlvbiBhbmQgc3VjaFxyXG4gICAgICAgIGRpYWdvbmFsRGlzdCA9IE1hdGguc3FydChjYW52YXMudyAqKiAyICsgY2FudmFzLmggKiogMik7XHJcbiAgICAgICAgZGlhZ29uYWxTdGFydE9mZnNldCA9IChkaWFnb25hbERpc3QvMikgJSBzaGFyZWQudGlsZVNpemUgLSBzaGFyZWQudGlsZVNpemUgLSBkaWFnb25hbERpc3QgLyAyO1xyXG4gICAgICAgIGZvciAobGV0IHggPSAoY2FudmFzLncvMi1jYW1lcmEueCklc2hhcmVkLnRpbGVTaXplICsgZGlhZ29uYWxTdGFydE9mZnNldDsgeCA8IGRpYWdvbmFsRGlzdCArIGN0eC5saW5lV2lkdGggKyBzaGFyZWQudGlsZVNpemU7IHggKz0gc2hhcmVkLnRpbGVTaXplKSB7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4Lm1vdmVUbyh4LCBkaWFnb25hbFN0YXJ0T2Zmc2V0KTtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyh4LCBjYW52YXMuaCAtIGRpYWdvbmFsU3RhcnRPZmZzZXQpO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCB5ID0gKGNhbnZhcy5oLzItY2FtZXJhLnkpJXNoYXJlZC50aWxlU2l6ZSArIGRpYWdvbmFsU3RhcnRPZmZzZXQ7IHkgPCBkaWFnb25hbERpc3QgKyBjdHgubGluZVdpZHRoICsgc2hhcmVkLnRpbGVTaXplOyB5ICs9IHNoYXJlZC50aWxlU2l6ZSkge1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oZGlhZ29uYWxTdGFydE9mZnNldCwgeSk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oY2FudmFzLncgLSBkaWFnb25hbFN0YXJ0T2Zmc2V0LCB5KTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29scy50aWxlO1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgwLDAsY2FudmFzLncsIGNhbnZhcy5oKTtcclxuXHJcbiAgICAgICAgY3VsbGluZ01pblggPSBjYW1lcmEueC1jYW52YXMudy8yO1xyXG4gICAgICAgIGN1bGxpbmdNYXhYID0gY2FtZXJhLngrY2FudmFzLncvMjtcclxuICAgICAgICBjdWxsaW5nTWluWSA9IGNhbWVyYS55LWNhbnZhcy5oLzI7XHJcbiAgICAgICAgY3VsbGluZ01heFkgPSBjYW1lcmEueStjYW52YXMuaC8yO1xyXG5cclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29scy5iYWNrZ3JvdW5kO1xyXG4gICAgICAgIC8vIGFkZCAxIHRvIGFsbCBkaW1lbnNpb25zIHNvIHRoYXQgd2UgZG9uJ3QgZ2V0IGdhcCBhcnRpZmFjdHMgb24gdGhlIGVkZ2Ugb2YgdGhlIGFyZW5hXHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KC0oY2FtZXJhLngtY2FudmFzLncvMikrMSwgLShjYW1lcmEueS1jYW52YXMuaC8yKSsxLCBzaGFyZWQubWFwRGltZW5zaW9ucy54LTIsIHNoYXJlZC5tYXBEaW1lbnNpb25zLnktMik7XHJcblxyXG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzU7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDQuODtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xzLnRpbGU7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHggPSAoY2FudmFzLncvMi1jYW1lcmEueCklc2hhcmVkLnRpbGVTaXplOyB4IDwgY2FudmFzLncgKyBjdHgubGluZVdpZHRoICsgc2hhcmVkLnRpbGVTaXplOyB4ICs9IHNoYXJlZC50aWxlU2l6ZSkge1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCwgMCk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oeCwgY2FudmFzLmgpO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmb3IgKGxldCB5ID0gKGNhbnZhcy5oLzItY2FtZXJhLnkpJXNoYXJlZC50aWxlU2l6ZTsgeSA8IGNhbnZhcy5oICsgY3R4LmxpbmVXaWR0aCArIHNoYXJlZC50aWxlU2l6ZTsgeSArPSBzaGFyZWQudGlsZVNpemUpIHtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKDAsIHkpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKGNhbnZhcy53LCB5KTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7XHJcblxyXG4gICAgLy8gVE9ETzogdGVzdCBpZiBpdCdzIGZhc3RlciB0byBkcmF3IHRpbGVzIG9yIGltYWdlXHJcbiAgICAvLyBpZihzaGFyZWQudGlsZUltYWdlQ29sb3JzLnRpbGUgIT09IHNoYXJlZC5jb2xvcnMudGlsZSB8fCBzaGFyZWQudGlsZUltYWdlQ29sb3JzLmJhY2tncm91bmQgIT09IHNoYXJlZC5jb2xvcnMuYmFja2dyb3VuZCl7XHJcbiAgICAvLyAgICAgLy8gVE9ETzogb3B0aW1pemUgZXZlbiBmdXJ0aGVyIHdpdGgganVzdCBnZW5lcmF0aW5nIGxpbmVzIGFuZCB1c2luZyBjbGVhclJlY3QgYW5kIGhhdmluZyBhbm90aGVyIGNhbnZhcyBpbiB0aGUgYmFja2dyb3VuZCB3aXRoIHRoZSBzb2xpZCBiZyBjb2xvciBmaWxsXHJcbiAgICAvLyAgICAgc2hhcmVkLnRpbGVJbWFnZSA9IGdlbmVyYXRlVGlsZUltYWdlKHNoYXJlZC5jb2xvcnMpO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIGN0eC5kcmF3SW1hZ2Uoc2hhcmVkLnRpbGVJbWFnZSwgLWNhbWVyYS54ICUgc2hhcmVkLnRpbGVTaXplLCAtY2FtZXJhLnkgJSBzaGFyZWQudGlsZVNpemUpO1xyXG4gICAgY3R4LnRyYW5zbGF0ZSgtKGNhbWVyYS54LWNhbnZhcy53LzIpLCAtKGNhbWVyYS55LWNhbnZhcy5oLzIpKTtcclxuXHJcbiAgICAvLyByZW5kZXIgb2JzdGFjbGVzXHJcbiAgICByZW5kZXJPYnN0YWNsZXMob3MsIGNvbHMpO1xyXG5cclxuICAgIC8vIHJlbmRlciBwbGF5ZXJzXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgcGxheWVycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgcGxheWVyID0gcGxheWVyc1tpXTtcclxuICAgICAgICBpZihwbGF5ZXIgPT09IHVuZGVmaW5lZCkgY29udGludWU7XHJcbiAgICAgICAgaWYocGxheWVyLmNyICE9PSB1bmRlZmluZWQpIHtwbGF5ZXIuY3IocGxheWVyKTsgY29udGludWU7fVxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBwbGF5ZXIuZGVhZCA9PT0gdHJ1ZSA/ICdyZWQnIDogJ2JsYWNrJztcclxuXHJcbiAgICAgICAgbGFzdFIgPSBwbGF5ZXIuc2F0LnI7XHJcbiAgICAgICAgcGxheWVyLnNhdC5yID0gTWF0aC5hYnMocGxheWVyLnJlbmRlclJhZGl1cyk7XHJcblxyXG4gICAgICAgIGxhc3RYID0gcGxheWVyLnBvcy54O1xyXG4gICAgICAgIGxhc3RZID0gcGxheWVyLnBvcy55O1xyXG4gICAgICAgIGlmKGkgIT09IHNoYXJlZC5zZWxmSWQpe1xyXG4gICAgICAgICAgICBwbGF5ZXIucG9zLnggPSBwbGF5ZXIuaW50ZXJwWDtcclxuICAgICAgICAgICAgcGxheWVyLnBvcy55ID0gcGxheWVyLmludGVycFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBwbGF5ZXIucmVuZGVyU2hhcGUocGxheWVyKTtcclxuICAgICAgICBcclxuICAgICAgICBpZihwbGF5ZXIucmVuZGVyUmFkaXVzID49IDApIGN0eC5maWxsKCk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG5lZ2F0aXZlIHJhZGl1c1xyXG4gICAgICAgICAgICBjb25zdCBkaWFtZXRlciA9IDIgKiBNYXRoLlBJICogTWF0aC5hYnMocGxheWVyLmRlYWQgPT09IHRydWUgPyBwbGF5ZXIuc2F0LnIgOiBsYXN0UGxheWVyUmFkaXVzKTtcclxuICAgICAgICAgICAgY29uc3QgdGltZXNBcm91bmQgPSBNYXRoLm1heCgzLCBNYXRoLmZsb29yKGRpYW1ldGVyIC8gNDIpKTtcclxuICAgICAgICAgICAgbGFzdE5MRFggPSBsYXN0TkxEWCAqIDAuOTYgKyAyLzcqZGlhbWV0ZXIvdGltZXNBcm91bmQgKiAwLjA0O1xyXG4gICAgICAgICAgICBsYXN0TkxEWSA9IGxhc3ROTERZICogMC45NiArIDUvNypkaWFtZXRlci90aW1lc0Fyb3VuZCAqIDAuMDQ7XHJcbiAgICAgICAgICAgIGN0eC5zZXRMaW5lRGFzaChbbGFzdE5MRFgsIGxhc3ROTERZXSk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lRGFzaE9mZnNldCA9ICgtc2hhcmVkLmZyYW1lcyAvIDEuNTYpICUgZGlhbWV0ZXI7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGN0eC5maWxsU3R5bGU7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSA4O1xyXG4gICAgICAgICAgICBjdHgubGluZUNhcCA9ICdyb3VuZCc7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGxheWVyLmdvZCA9PT0gdHJ1ZSkge2N0eC5zdHJva2VTdHlsZSA9ICdwdXJwbGUnOyBjdHgubGluZVdpZHRoID0gMTA7IGN0eC5zdHJva2UoKTsgfVxyXG4gICAgICAgIGlmIChwbGF5ZXIuc2hpcCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzAwMzNlZCc7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxMDtcclxuICAgICAgICAgICAgY3R4LmxpbmVDYXAgPSAncm91bmQnO1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKHBsYXllci5wb3MueCxwbGF5ZXIucG9zLnkpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKHBsYXllci5wb3MueCArIE1hdGguY29zKHBsYXllci5zaGlwQW5nbGUpICogcGxheWVyLnNhdC5yLCBwbGF5ZXIucG9zLnkgKyBNYXRoLnNpbihwbGF5ZXIuc2hpcEFuZ2xlKSAqIHBsYXllci5zYXQucik7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGxheWVyLmdyYXBwbGUgPT09IHRydWUpe1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjOTY5Njk2JztcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC43NTtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDEyO1xyXG4gICAgICAgICAgICBjdHguYXJjKHBsYXllci5wb3MueCwgcGxheWVyLnBvcy55LCBNYXRoLmFicyhwbGF5ZXIucmVuZGVyUmFkaXVzKSAvIDIsIDAsIE1hdGguUEkgKiAyKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHBsYXllci5ncmFwcGxlWCA9PT0gLTEgJiYgcGxheWVyLmlkID09PSBzaGFyZWQuc2VsZklkICYmIHNoYXJlZC5pbnB1dC5hY3Rpb24xID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmFpbGVkIGdyYXBwbGUgLSBiaWcgY2lyY2xlXHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjI7XHJcbiAgICAgICAgICAgICAgICBjdHguYXJjKHBsYXllci5wb3MueCwgcGxheWVyLnBvcy55LCBwbGF5ZXIuZ3JhcHBsZVJhbmdlLCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihwbGF5ZXIuZ3JhcHBsZVggIT09IC0xKXtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bCBncmFwcGxlIC0gbGluZSB0byBncmFwIHB0XHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHBsYXllci5wb3MueCwgcGxheWVyLnBvcy55KTtcclxuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8ocGxheWVyLmdyYXBwbGVYLCBwbGF5ZXIuZ3JhcHBsZVkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGFuZCBjaXJjbGUgYXQgdGhlIHBvaW50XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMTA7XHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHguYXJjKHBsYXllci5ncmFwcGxlWCwgcGxheWVyLmdyYXBwbGVZLCAxMCwgMCwgTWF0aC5QSSAqIDIpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBsYXllci5kZWF0aFRpbWVyID09PSB0cnVlKXtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZWQnO1xyXG4gICAgICAgICAgICBjdHguZm9udCA9ICc2MHB4IEludGVyJztcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMjtcclxuICAgICAgICAgICAgY3R4LnNoYWRvd0NvbG9yID0gJ3JlZCc7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dCh+fihwbGF5ZXIuZGVhdGhUaW1lIC8gNjApLCBwbGF5ZXIucG9zLngsIHBsYXllci5wb3MueSk7XHJcbiAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3doaXRlJztcclxuICAgICAgICBjdHguZm9udCA9IGAkezE1ICogKChNYXRoLmFicyhwbGF5ZXIucmVuZGVyUmFkaXVzKSArIDAuNSkgLyAyNSl9cHggSW50ZXJgO1xyXG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgICAgY3R4LmZpbGxUZXh0KFxyXG4gICAgICAgICAgICBwbGF5ZXIubmFtZSxcclxuICAgICAgICAgICAgcGxheWVyLnBvcy54LFxyXG4gICAgICAgICAgICBwbGF5ZXIucG9zLnkgKyBwbGF5ZXIucmVuZGVyUmFkaXVzICogNC8zICsgM1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHBsYXllci5wb3MueCA9IGxhc3RYO1xyXG4gICAgICAgIHBsYXllci5wb3MueSA9IGxhc3RZO1xyXG4gICAgICAgIHBsYXllci5zYXQuciA9IGxhc3RSO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRlYnVnXHJcbiAgICBpZihzaGFyZWQucmVuZGVyRGVidWcgPT09IHRydWUpe1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmVkJztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmVkJztcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgb3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihvc1tpXS50b3BMZWZ0LnggPiBjdWxsaW5nTWF4WCB8fCBvc1tpXS50b3BMZWZ0LnggKyBvc1tpXS5kaW1lbnNpb25zLnggPCBjdWxsaW5nTWluWCB8fCBvc1tpXS50b3BMZWZ0LnkgPiBjdWxsaW5nTWF4WSB8fCBvc1tpXS50b3BMZWZ0LnkgKyBvc1tpXS5kaW1lbnNpb25zLnkgPCBjdWxsaW5nTWluWSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LmFyYyhvc1tpXS5wb3MueCwgb3NbaV0ucG9zLnksIDEwLCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3Qob3NbaV0udG9wTGVmdC54LCBvc1tpXS50b3BMZWZ0LnksIG9zW2ldLmRpbWVuc2lvbnMueCwgb3NbaV0uZGltZW5zaW9ucy55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgY29uc3QgcGxheWVyID0gcGxheWVyc1tpXTtcclxuICAgICAgICAgICAgaWYocGxheWVyID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjdHguZm9udCA9IGAkezEuMiAqIDE1ICogKChNYXRoLmFicyhwbGF5ZXIucmVuZGVyUmFkaXVzKSArIDAuNSkgLyAyNSl9cHggSW50ZXJgO1xyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQoXHJcbiAgICAgICAgICAgICAgICBgKCR7TWF0aC5yb3VuZChwbGF5ZXIucG9zLngvNTApKjUwfSwke01hdGgucm91bmQocGxheWVyLnBvcy55LzUwKSo1MH0pYCxcclxuICAgICAgICAgICAgICAgIHBsYXllci5wb3MueCxcclxuICAgICAgICAgICAgICAgIHBsYXllci5wb3MueSAtIHBsYXllci5yZW5kZXJSYWRpdXMgKiA0LzMgLSAzICogMS41XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGN0eC50cmFuc2xhdGUoY2FtZXJhLngtY2FudmFzLncvMiwgY2FtZXJhLnktY2FudmFzLmgvMik7XHJcblxyXG4gICAgaWYoY2FtZXJhLmFuZ2xlICE9PSAwKXtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKGNhbnZhcy53LzIsIGNhbnZhcy5oLzIpO1xyXG4gICAgICAgIGN0eC5yb3RhdGUoY2FtZXJhLmFuZ2xlKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKC1jYW52YXMudy8yLCAtY2FudmFzLmgvMik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdmlnbmV0dGVcclxuICAgIGNvbnN0IHYgPSBzaGFyZWQuY29sb3JzLnZpZ25ldHRlO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY29uc3QgZ3JkID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KFxyXG4gICAgICAgIGNhbnZhcy53IC8gMixcclxuICAgICAgICBjYW52YXMuaCAvIDIsXHJcbiAgICAgICAgKE1hdGgubWF4KGNhbnZhcy53LGNhbnZhcy5oKSAqIHYuaW5uZXJJbnRlcnAuc2l6ZSksXHJcbiAgICAgICAgY2FudmFzLncgLyAyLFxyXG4gICAgICAgIGNhbnZhcy5oIC8gMixcclxuICAgICAgICAoTWF0aC5tYXgoY2FudmFzLncsY2FudmFzLmgpICogdi5vdXRlckludGVycC5zaXplKVxyXG4gICAgKTtcclxuXHJcbiAgICBncmQuYWRkQ29sb3JTdG9wKFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgYHJnYmEoJHt2LmlubmVySW50ZXJwLnJ9LCR7di5pbm5lckludGVycC5nfSwke3YuaW5uZXJJbnRlcnAuYn0sJHt2LmlubmVySW50ZXJwLm9wYWNpdHl9KWBcclxuICAgICk7XHJcbiAgICBncmQuYWRkQ29sb3JTdG9wKFxyXG4gICAgICAgIDEsXHJcbiAgICAgICAgYHJnYmEoJHt2Lm91dGVySW50ZXJwLnJ9LCR7di5vdXRlckludGVycC5nfSwke3Yub3V0ZXJJbnRlcnAuYn0sJHt2Lm91dGVySW50ZXJwLm9wYWNpdHl9KWBcclxuICAgICk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gZ3JkO1xyXG4gICAgY3R4LnJlY3QoMCwwLGNhbnZhcy53LGNhbnZhcy5oKTtcclxuICAgIGlmKHYuaG9sZUZ1bmN0aW9ucy5sZW5ndGggIT09IDApe1xyXG4gICAgICAgIGlmKHNoYXJlZC5zZWxmSWQgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lID0gcGxheWVyc1tzaGFyZWQuc2VsZklkXTtcclxuICAgICAgICAgICAgaWYobWUuc2hpcCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGNhbnZhcy53LzIsIGNhbnZhcy5oLzIpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgtbWUuc2hpcEFuZ2xlLU1hdGguUEkvMik7XHJcbiAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKC1jYW52YXMudy8yLCAtY2FudmFzLmgvMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY3R4LnRyYW5zbGF0ZShjYW52YXMudy8yLWNhbWVyYS54LCBjYW52YXMuaC8yLWNhbWVyYS55KTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdi5ob2xlRnVuY3Rpb25zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgdi5ob2xlRnVuY3Rpb25zW2ldKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN0eC50cmFuc2xhdGUoY2FtZXJhLngtY2FudmFzLncvMiwgY2FtZXJhLnktY2FudmFzLmgvMik7XHJcbiAgICAgICAgaWYoc2hhcmVkLnNlbGZJZCAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY29uc3QgbWUgPSBwbGF5ZXJzW3NoYXJlZC5zZWxmSWRdO1xyXG4gICAgICAgICAgICBpZihtZS5zaGlwID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoY2FudmFzLncvMiwgY2FudmFzLmgvMik7XHJcbiAgICAgICAgICAgICAgICBjdHgucm90YXRlKG1lLnNoaXBBbmdsZStNYXRoLlBJLzIpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgtY2FudmFzLncvMiwgLWNhbnZhcy5oLzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3R4LmZpbGwoJ2V2ZW5vZGQnKTtcclxuICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICBzaGFyZWQuY29sb3JzLnZpZ25ldHRlLmlubmVyID0ge3NpemU6MC4xLHI6MCxnOjAsYjowLG9wYWNpdHk6MH07XHJcbiAgICBzaGFyZWQuY29sb3JzLnZpZ25ldHRlLm91dGVyID0ge3NpemU6MC42LHI6MCxnOjAsYjowLG9wYWNpdHk6MX07XHJcbiAgICBzaGFyZWQuY29sb3JzLnZpZ25ldHRlLmhvbGVGdW5jdGlvbnMubGVuZ3RoPTA7XHJcbiAgICAvLyBzaGFyZWQuY29sb3JzID0ge1xyXG4gICAgLy8gICAgIHRpbGU6IHNoYXJlZC5kZWZhdWx0Q29sb3JzLnRpbGUsXHJcbiAgICAvLyAgICAgYmFja2dyb3VuZDogc2hhcmVkLmRlZmF1bHRDb2xvcnMuYmFja2dyb3VuZCxcclxuICAgIC8vICAgICB2aWduZXR0ZToge1xyXG4gICAgLy8gICAgICAgICBpbm5lcjoge3NpemU6MC4xLHI6MCxnOjAsYjowLG9wYWNpdHk6MH0sXHJcbiAgICAvLyAgICAgICAgIG91dGVyOiB7c2l6ZTowLjYscjowLGc6MCxiOjAsb3BhY2l0eToxfSxcclxuICAgIC8vICAgICAgICAgaW5uZXJJbnRlcnA6IHtzaXplOjAuMSxyOjAsZzowLGI6MCxvcGFjaXR5OjB9LFxyXG4gICAgLy8gICAgICAgICBvdXRlckludGVycDoge3NpemU6MC42LHI6MCxnOjAsYjowLG9wYWNpdHk6MX1cclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgaWYoc2hhcmVkLmRpc2Nvbm5lY3RlZCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgbGV0IHR4dCA9ICdEaXNjb25uZWN0ZWQgRnJvbSBTZXJ2ZXIuJy5zcGxpdCgnJyk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHR4dC5sZW5ndGg7IGkrKykge2lmKE1hdGgucmFuZG9tKCkgPCAwLjAzKSB0eHRbaV0gPSAnIyc7fVxyXG4gICAgICAgIHR4dCA9IHR4dC5qb2luKCcnKTtcclxuICAgICAgICBjdHguZm9udCA9ICc4MXB4IEludGVyJztcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMGZmNDEnO1xyXG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSAncmlnaHQnO1xyXG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnYm90dG9tJztcclxuICAgICAgICBjdHguZmlsbFRleHQodHh0LCBjYW52YXMudyAtIDMwLCBjYW52YXMuaCAtIDUwKTtcclxuICAgICAgICBjdHguZm9udCA9ICcyOHB4IEludGVyJztcclxuICAgICAgICBjdHguZmlsbFRleHQoJ1lvdSBtYXkgc3RpbGwgcGxheSB0aGUgY3VycmVudCBtYXAgYnV0IGNhbm5vdCB3aW4gb3IgbGVhdmUuJywgY2FudmFzLncgLSAzMCwgY2FudmFzLmggLSAxOCk7XHJcbiAgICB9IGVsc2UgaWYoc2hhcmVkLnJlbmRlclRpbWVyID09PSB0cnVlKSByZW5kZXJUaW1lckZuKCk7XHJcblxyXG4gICAgaWYoc2hhcmVkLmRpc3RvcnRpb25zQWN0aXZlID09PSB0cnVlKSBzaGFyZWQucmVuZGVyR2woKTtcclxufVxyXG5cclxuc2hhcmVkLmRpc2FibGVDdWxsaW5nID0gKCkgPT4ge1xyXG4gICAgY3VsbGluZ01pblggPSBjdWxsaW5nTWluWSA9IC1JbmZpbml0eTtcclxuICAgIGN1bGxpbmdNYXhYID0gY3VsbGluZ01heFkgPSAgSW5maW5pdHk7XHJcbn1cclxuXHJcbmNvbnN0IHJlbmRlck9ic3RhY2xlcyA9IHNoYXJlZC5yZW5kZXJPYnN0YWNsZXMgPSAob3MsIGNvbHM9c2hhcmVkLmNvbG9ycykgPT4ge1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG9zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihvc1tpXS5jciAhPT0gdW5kZWZpbmVkKSB7IG9zW2ldLmNyKG9zW2ldKTsgY29udGludWU7IH1cclxuXHJcbiAgICAgICAgLy8gY3VsbGluZ1xyXG4gICAgICAgIGlmKG9zW2ldLnRvcExlZnQueCA+IGN1bGxpbmdNYXhYIHx8IG9zW2ldLnRvcExlZnQueCArIG9zW2ldLmRpbWVuc2lvbnMueCA8IGN1bGxpbmdNaW5YIHx8IG9zW2ldLnRvcExlZnQueSA+IGN1bGxpbmdNYXhZIHx8IG9zW2ldLnRvcExlZnQueSArIG9zW2ldLmRpbWVuc2lvbnMueSA8IGN1bGxpbmdNaW5ZKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgbGVuID0gb3NbaV0uZWZmZWN0Lmxlbmd0aDtcclxuICAgICAgICBpZihsZW4gPT09IDEpe1xyXG4gICAgICAgICAgICBqID0gMDtcclxuICAgICAgICAgICAgY3R4LnRvRmlsbCA9IHRydWU7XHJcbiAgICAgICAgICAgIGN0eC50b1N0cm9rZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gNDsgXHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgb3NbaV0ucmVuZGVyU2hhcGUob3NbaV0pO1xyXG4gICAgICAgICAgICBvc1tpXS5yZW5kZXJFZmZlY3Rbal0ob3NbaV0pO1xyXG4gICAgICAgICAgICBpZihvc1tpXS5pc1RleHQgPT09IHRydWUpIHJlbmRlclRleHRTcGVjaWFscyhvc1tpXSwgY29scyk7XHJcbiAgICAgICAgICAgIGlmKGN0eC50b0ZpbGwgPT09IHRydWUpIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgIGlmKGN0eC50b1N0cm9rZSA9PT0gdHJ1ZSkgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBpZihjdHguY2xlYW5VcEZ1bmN0aW9uICE9PSB1bmRlZmluZWQpIHsgY3R4LmNsZWFuVXBGdW5jdGlvbigpOyBjdHguY2xlYW5VcEZ1bmN0aW9uID0gdW5kZWZpbmVkOyB9XHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzbyB3ZSB3YW50IHRvIGZhZGUgYmV0d2VlbiB0aGUgZWZmZWN0IHJlbmRlcnMuIFdlIHJlbmRlciBhIHByZXZpb3VzIG9uZSB3aXRoIDEgb3BhY2l0eSBhbmQgdGhlbiByYWlzZSB0aGUgbmV4dCBvbmUgZnJvbSAwLTEgb3BhY2l0eSwgdW50aWwgdGhlIG5leHQgb25lIGJlY29tZXMgdGhlIHByZXZpb3VzIGFuZCB0aGUgY3ljbGUgcmVwZWF0c1xyXG4gICAgICAgICAgICBvc1tpXS5yZW5kZXJFZmZlY3RUaW1lciArPSAxLzEyODtcclxuICAgICAgICAgICAgaWYob3NbaV0ucmVuZGVyRWZmZWN0VGltZXIgPj0gbGVuKSBvc1tpXS5yZW5kZXJFZmZlY3RUaW1lciAtPSBsZW47XHJcblxyXG4gICAgICAgICAgICBvcGFxSW5kZXggPSBNYXRoLmZsb29yKG9zW2ldLnJlbmRlckVmZmVjdFRpbWVyKTtcclxuICAgICAgICAgICAgLypsZXQgZnVsbEluZGV4Ki9qID0gb3BhcUluZGV4IC0gMTtcclxuICAgICAgICAgICAgaWYoLypmdWxsSW5kZXgqL2ogPT09IC0xKSAvKmZ1bGxJbmRleCovaiA9IGxlbi0xO1xyXG4gICAgICAgICAgICAvLyBqID0gZnVsbEluZGV4O1xyXG5cclxuICAgICAgICAgICAgLy8gcmVuZGVyIGZ1bGwgaW5kZXhcclxuICAgICAgICAgICAgY3R4LnRvRmlsbCA9IHRydWU7XHJcbiAgICAgICAgICAgIGN0eC50b1N0cm9rZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBvc1tpXS5yZW5kZXJTaGFwZShvc1tpXSk7XHJcbiAgICAgICAgICAgIG9zW2ldLnJlbmRlckVmZmVjdFtqXShvc1tpXSk7XHJcbiAgICAgICAgICAgIGlmKG9zW2ldLmlzVGV4dCA9PT0gdHJ1ZSkgcmVuZGVyVGV4dFNwZWNpYWxzKG9zW2ldLCBjb2xzKTtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICAgICAgaWYoY3R4LnRvRmlsbCA9PT0gdHJ1ZSkgY3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgaWYoY3R4LnRvU3Ryb2tlID09PSB0cnVlKSBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGlmKGN0eC5jbGVhblVwRnVuY3Rpb24gIT09IHVuZGVmaW5lZCkgeyBjdHguY2xlYW5VcEZ1bmN0aW9uKCk7IGN0eC5jbGVhblVwRnVuY3Rpb24gPSB1bmRlZmluZWQ7IH1cclxuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVuZGVyIG9wYXEgaW5kZXhcclxuICAgICAgICAgICAgaiA9IG9wYXFJbmRleDtcclxuICAgICAgICAgICAgY3R4LnRvRmlsbCA9IHRydWU7XHJcbiAgICAgICAgICAgIGN0eC50b1N0cm9rZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBvc1tpXS5yZW5kZXJTaGFwZShvc1tpXSk7XHJcbiAgICAgICAgICAgIG9zW2ldLnJlbmRlckVmZmVjdFtqXShvc1tpXSk7XHJcbiAgICAgICAgICAgIGlmKG9zW2ldLmlzVGV4dCA9PT0gdHJ1ZSkgcmVuZGVyVGV4dFNwZWNpYWxzKG9zW2ldLCBjb2xzKTtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gb3NbaV0ucmVuZGVyRWZmZWN0VGltZXIgLSBvcGFxSW5kZXg7XHJcbiAgICAgICAgICAgIGlmKGN0eC50b0ZpbGwgPT09IHRydWUpIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgIGlmKGN0eC50b1N0cm9rZSA9PT0gdHJ1ZSkgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBpZihjdHguY2xlYW5VcEZ1bmN0aW9uICE9PSB1bmRlZmluZWQpIHsgY3R4LmNsZWFuVXBGdW5jdGlvbigpOyBjdHguY2xlYW5VcEZ1bmN0aW9uID0gdW5kZWZpbmVkOyB9XHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGludGVycG9sYXRlKHN0YXJ0LCBlbmQsIHQpe1xyXG4gICAgcmV0dXJuICgxLXQpICogc3RhcnQgKyB0ICogZW5kO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJUZXh0U3BlY2lhbHMobywgY29scyl7XHJcbiAgICBsYXN0R0EgPSBjdHguZ2xvYmFsQWxwaGE7XHJcbiAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICBjdHguZm9udCA9IGAke28uZm9udFNpemV9cHggSW50ZXJgO1xyXG4gICAgY3R4LnRyYW5zbGF0ZShvLnRvcExlZnQueCtvLmRpbWVuc2lvbnMueC8yLCBvLnRvcExlZnQueStvLmRpbWVuc2lvbnMueS8yKTtcclxuICAgIGlmKG8ucm90YXRpb24gIT09IHVuZGVmaW5lZCkgY3R4LnJvdGF0ZShvLnJvdGF0aW9uKTtcclxuICAgIGlmKGN0eC5nbG9iYWxBbHBoYSA8IDAuNSkgY3R4Lmdsb2JhbEFscGhhID0gMC41O1xyXG4gICAgaWYoY3R4LnRvRmlsbCA9PT0gdHJ1ZSkgY3R4LmZpbGxUZXh0KG8udGV4dCwgMCwgMCk7XHJcbiAgICBpZihjdHgudG9TdHJva2UgPT09IHRydWUpIGN0eC5zdHJva2VUZXh0KG8udGV4dCwgMCwgMCk7XHJcbiAgICBlbHNlIGlmKGN0eC50b0ZpbGwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29scy50aWxlO1xyXG4gICAgICAgIGN0eC5maWxsVGV4dChvLnRleHQsIDAsIDApO1xyXG4gICAgfVxyXG4gICAgaWYoby5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSBjdHgucm90YXRlKC1vLnJvdGF0aW9uKTtcclxuICAgIGN0eC50cmFuc2xhdGUoLW8udG9wTGVmdC54LW8uZGltZW5zaW9ucy54LzIsIC1vLnRvcExlZnQueS1vLmRpbWVuc2lvbnMueS8yKTtcclxuICAgIGN0eC5nbG9iYWxBbHBoYSA9IE1hdGgubWluKDAuNSwgbGFzdEdBKTtcclxufVxyXG5cclxuLy8gY2FudmFzIHJlc2l6aW5nXHJcbnNoYXJlZC5yZXNpemVGbnMgPSBbXTtcclxuY29uc3QgZ3VpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmd1aScpID8/IHtzdHlsZTp7fX07XHJcbmxldCBsYXN0U2NhbGU9MSx3LGg7XHJcbmlmKHNoYXJlZC5pc0VkaXRvciA9PT0gdW5kZWZpbmVkKSBzaGFyZWQuaXNFZGl0b3IgPSBmYWxzZTtcclxuc2hhcmVkLnJlc2l6ZSA9ICgpID0+IHtcclxuICAgIGlmKHNoYXJlZC5pc0VkaXRvciA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgY29uc3QgZGltZW5zaW9ucyA9IHNoYXJlZC5sZWZ0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHcgPSBkaW1lbnNpb25zLndpZHRoO1xyXG4gICAgICAgIGggPSBkaW1lbnNpb25zLmhlaWdodDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBsYXN0U2NhbGUgPSBzaGFyZWQuY2FtZXJhLnNjYWxlO1xyXG4gICAgc2hhcmVkLmNoYW5nZUNhbWVyYVNjYWxlKDEpO1xyXG4gICAgY29uc3QgZHBpID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICBndWkuc3R5bGUud2lkdGggPSBjYW52YXMuc3R5bGUud2lkdGggPSBNYXRoLmNlaWwodykgKyAncHgnO1xyXG4gICAgZ3VpLnN0eWxlLmhlaWdodCA9IGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBNYXRoLmNlaWwoaCkgKyAncHgnO1xyXG4gICAgZ3VpLndpZHRoID0gY2FudmFzLndpZHRoID0gTWF0aC5jZWlsKHcpICogZHBpO1xyXG4gICAgZ3VpLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgPSBNYXRoLmNlaWwoaCkgKiBkcGk7XHJcbiAgICBjYW52YXMuem9vbSA9IE1hdGgubWF4KDAuMSwgTWF0aC5yb3VuZCgoTWF0aC5tYXgoY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoICogZnVsbHNjcmVlbi5yYXRpbykgLyBmdWxsc2NyZWVuLnpvb20gKiBjYW1lcmEuc2NhbGUpICogMTAwKSAvIDEwMCk7XHJcbiAgICAvLyB3IGFuZCBoIGFyZSBjYWxjZWQgd2l0aCB6b29tXHJcbiAgICBjYW52YXMudyA9IGNhbnZhcy53aWR0aCAvIGNhbnZhcy56b29tO1xyXG4gICAgY2FudmFzLmggPSBjYW52YXMuaGVpZ2h0IC8gY2FudmFzLnpvb207XHJcbiAgICBjdHguc2NhbGUoY2FudmFzLnpvb20sIGNhbnZhcy56b29tKTtcclxuICAgIGN0eC5saW5lSm9pbiA9ICdyb3VuZCc7XHJcbiAgICBjdHgubGluZUNhcCA9ICdyb3VuZCc7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNoYXJlZC5yZXNpemVGbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIHNoYXJlZC5yZXNpemVGbnNbaV0oKTtcclxuICAgIH1cclxuICAgIHNoYXJlZC5jaGFuZ2VDYW1lcmFTY2FsZShsYXN0U2NhbGUpO1xyXG59XHJcblxyXG5zaGFyZWQuY2hhbmdlQ2FtZXJhU2NhbGUgPSAoc2NhbGUpID0+IHtcclxuICAgIGN0eC50cmFuc2xhdGUoLSgxLTEvc2hhcmVkLmNhbWVyYS5zY2FsZSkqY2FudmFzLncvMiwgLSgxLTEvc2hhcmVkLmNhbWVyYS5zY2FsZSkqY2FudmFzLmgvMik7XHJcblxyXG4gICAgY3R4LnRyYW5zbGF0ZShjYW52YXMudy8yLCBjYW52YXMuaC8yKTtcclxuICAgIGN0eC5zY2FsZSgxL3NoYXJlZC5jYW1lcmEuc2NhbGUsIDEvc2hhcmVkLmNhbWVyYS5zY2FsZSk7XHJcbiAgICBjdHgudHJhbnNsYXRlKC1jYW52YXMudy8yLCAtY2FudmFzLmgvMik7XHJcblxyXG4gICAgc2hhcmVkLmNhbWVyYS5zY2FsZSA9IHNjYWxlO1xyXG4gICAgY2FudmFzLncgPSBjYW52YXMud2lkdGggLyBjYW52YXMuem9vbSAvIHNoYXJlZC5jYW1lcmEuc2NhbGU7XHJcbiAgICBjYW52YXMuaCA9IGNhbnZhcy5oZWlnaHQgLyBjYW52YXMuem9vbSAvIHNoYXJlZC5jYW1lcmEuc2NhbGU7XHJcblxyXG4gICAgY3R4LnRyYW5zbGF0ZShjYW52YXMudy8yLCBjYW52YXMuaC8yKTtcclxuICAgIGN0eC5zY2FsZShzaGFyZWQuY2FtZXJhLnNjYWxlLCBzaGFyZWQuY2FtZXJhLnNjYWxlKTtcclxuICAgIGN0eC50cmFuc2xhdGUoLWNhbnZhcy53LzIsIC1jYW52YXMuaC8yKTtcclxuICAgIFxyXG4gICAgY3R4LnRyYW5zbGF0ZSgoMS0xL3NoYXJlZC5jYW1lcmEuc2NhbGUpKmNhbnZhcy53LzIsICgxLTEvc2hhcmVkLmNhbWVyYS5zY2FsZSkqY2FudmFzLmgvMik7XHJcbn1cclxuICBcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIHNoYXJlZC5yZXNpemUoKTtcclxufSk7XHJcbnNoYXJlZC5yZXNpemUoKTtcclxuXHJcbi8vIGlmIHRoZXJlJ3MgZXZlciBtb3JlIGV4dHJhcywgbWFrZSBhbiBhcnJheSBzeXN0ZW1cclxubGV0IG5vbkxpbmVhckZucztcclxuc2hhcmVkLmluaXREaXN0b3J0aW9uID0gYXN5bmMgKHZzLCBmcywgdW5pZm9ybU5hbWVzPVtdLCB1bmlmb3JtTGFtYmRhcz1bXSkgPT4ge1xyXG4gICAgaWYobm9uTGluZWFyRm5zID09PSB1bmRlZmluZWQpIG5vbkxpbmVhckZucyA9IChhd2FpdCBpbXBvcnQoJy4vZXh0cmFzL2Rpc3RvcnQuanMnKSkuZGVmYXVsdDtcclxuICAgIG5vbkxpbmVhckZucy5pbml0Tm9ubGluZWFyVHJhbnNmb3JtKHZzLCBmcywgdW5pZm9ybU5hbWVzLCB1bmlmb3JtTGFtYmRhcyk7XHJcbn1cclxuXHJcbnNoYXJlZC51bkluaXREaXN0b3J0aW9uID0gKCkgPT4ge1xyXG4gICAgLy8gY2FuJ3QgYmUgYWN0aXZlIGlmIG5vdCBsb2FkZWRcclxuICAgIGlmKG5vbkxpbmVhckZucyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBub25MaW5lYXJGbnMudW5Jbml0Tm9ubGluZWFyVHJhbnNmb3JtKCk7XHJcbn1cclxuXHJcbmxldCBub2lzZUZucztcclxuc2hhcmVkLmltcG9ydE5vaXNlID0gYXN5bmMoKSA9PiB7XHJcbiAgICBpZihub2lzZUZucyAhPT0gdW5kZWZpbmVkKSByZXR1cm4gbm9pc2VGbnM7XHJcbiAgICByZXR1cm4gbm9pc2VGbnMgPSAoYXdhaXQgaW1wb3J0KCcuL2V4dHJhcy9ub2lzZS5qcycpKS5kZWZhdWx0O1xyXG59XHJcblxyXG5sZXQgaW1wb3J0ZWRZVCA9IGZhbHNlO1xyXG5zaGFyZWQuaW1wb3J0WW91dHViZSA9IGFzeW5jKCkgPT4ge1xyXG4gICAgaWYoaW1wb3J0ZWRZVCA9PT0gdHJ1ZSkgcmV0dXJuO1xyXG4gICAgY29uc3QgcDEgPSBpbXBvcnQoJy4vZXh0cmFzL3lvdXR1YmUuanMnKTtcclxuICAgIGNvbnN0IHAyID0gbmV3IFByb21pc2UoKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICBzLnNyYyA9IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5vbllvdVR1YmVJZnJhbWVBUElSZWFkeSA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpbXBvcnRlZFlUID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3AxLCBwMl0pO1xyXG59XHJcblxyXG5sZXQgcmVuZGVyVGltZXJGbjtcclxuc2hhcmVkLnRvZ2dsZVRpbWVyID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYoc2hhcmVkLnJlbmRlclRpbWVyID09PSB0cnVlKSB7c2hhcmVkLnJlbmRlclRpbWVyID0gZmFsc2U7cmV0dXJuO31cclxuICAgIGlmKHJlbmRlclRpbWVyRm4gPT09IHVuZGVmaW5lZCkge3JlbmRlclRpbWVyRm4gPSAoYXdhaXQgaW1wb3J0KCcuL2V4dHJhcy90aW1lci5qcycpKS5kZWZhdWx0OyBzaGFyZWQucmVuZGVyVGltZXIgPSB0cnVlO31cclxuICAgIGVsc2Ugc2hhcmVkLnJlbmRlclRpbWVyID0gdHJ1ZTtcclxufVxyXG5cclxuc2hhcmVkLnVuVGFpbnRDYW52YXMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBjdHguZ2V0VHJhbnNmb3JtKCk7XHJcblxyXG4gICAgY29uc3QgbmV3Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUobmV3Q2FudmFzLCBjYW52YXMpO1xyXG5cclxuICAgIGNhbnZhcy5yZW1vdmUoKTtcclxuXHJcbiAgICBjYW52YXMgPSB3aW5kb3cuY2FudmFzID0gbmV3Q2FudmFzO1xyXG4gICAgY2FudmFzLmlkID0gXCJjYW52YXNcIjtcclxuICAgIGN0eCA9IHdpbmRvdy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIHNoYXJlZC5yZXNpemUoKTtcclxuXHJcbiAgICBjdHguc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XHJcbn1cclxuXHJcbi8vIG1vdXNlIGNvb3JkaW5hdGVzIHJhbmdpbmcgKDAsY2FudmFzLncpIHRvIHdvcmxkIHBvc2l0aW9uIChzYW1lIGNvb3JkaW5hdGVzIGFzIG9ic3RhY2xlIHJlbmRlcmluZylzRFxyXG4vLyBUT0RPOiB0ZXN0IGFuZ2xlICE9PSAwXHJcbnNoYXJlZC50cmFuc2xhdGVTY3JlZW5Ub1dvcmxkID0gKCkgPT4ge1xyXG4gICAgY3R4LnRyYW5zbGF0ZSgtKGNhbWVyYS54LWNhbnZhcy53LzIpLCAtKGNhbWVyYS55LWNhbnZhcy5oLzIpKTtcclxuICAgIC8vIGlmKGNhbWVyYS5hbmdsZSAhPT0gMCl7XHJcbiAgICAvLyAgICAgY3R4LnRyYW5zbGF0ZShjYW52YXMudy8yLCBjYW52YXMuaC8yKTtcclxuICAgIC8vICAgICBjdHgucm90YXRlKC1jYW1lcmEuYW5nbGUpO1xyXG4gICAgLy8gICAgIGN0eC50cmFuc2xhdGUoLWNhbnZhcy53LzIsIC1jYW52YXMuaC8yKTtcclxuICAgIC8vIH1cclxufVxyXG5cclxuc2hhcmVkLnRyYW5zbGF0ZVdvcmxkVG9TY3JlZW4gPSAoKSA9PiB7XHJcbiAgICAvLyBpZihjYW1lcmEuYW5nbGUgIT09IDApe1xyXG4gICAgLy8gICAgIGN0eC50cmFuc2xhdGUoY2FudmFzLncvMiwgY2FudmFzLmgvMik7XHJcbiAgICAvLyAgICAgY3R4LnJvdGF0ZShjYW1lcmEuYW5nbGUpO1xyXG4gICAgLy8gICAgIGN0eC50cmFuc2xhdGUoLWNhbnZhcy53LzIsIC1jYW52YXMuaC8yKTtcclxuICAgIC8vIH1cclxuICAgIGN0eC50cmFuc2xhdGUoKGNhbWVyYS54LWNhbnZhcy53LzIpLCAoY2FtZXJhLnktY2FudmFzLmgvMikpO1xyXG59XHJcblxyXG5zaGFyZWQuc2NyZWVuVG9Xb3JsZCA9ICh4LHkpID0+IHtcclxuICAgIC8vIGlmKGNhbWVyYS5hbmdsZSA9PT0gMCl7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgeCArIChjYW1lcmEueC1jYW52YXMudy8yKSxcclxuICAgICAgICAgICAgeSArIChjYW1lcmEueS1jYW52YXMuaC8yKVxyXG4gICAgICAgIF07XHJcbiAgICAvLyB9IGVsc2Uge1xyXG4gICAgLy8gICAgIHggKz0gLShjYW1lcmEueC1jYW52YXMudy8yKSArIGNhbnZhcy53LzI7XHJcbiAgICAvLyAgICAgeSArPSAtKGNhbWVyYS55LWNhbnZhcy5oLzIpICsgY2FudmFzLmgvMjtcclxuICAgIC8vICAgICBjb25zdCBtYWcgPSBNYXRoLnNxcnQoeCoqMiArIHkgKioyKTtcclxuICAgIC8vICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoeSx4KSArIGNhbWVyYS5hbmdsZTtcclxuICAgIC8vICAgICByZXR1cm4gW1xyXG4gICAgLy8gICAgICAgICBNYXRoLmNvcyhhbmdsZSkgKiBtYWcsXHJcbiAgICAvLyAgICAgICAgIE1hdGguc2luKGFuZ2xlKSAqIG1hZ1xyXG4gICAgLy8gICAgIF1cclxuICAgIC8vIH1cclxufVxyXG5cclxuc2hhcmVkLndvcmxkVG9TY3JlZW4gPSAoeCx5KSA9PiB7XHJcbiAgICAvLyBpZihjYW1lcmEuYW5nbGUgPT09IDApe1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHggLSAoY2FtZXJhLngtY2FudmFzLncvMiksXHJcbiAgICAgICAgICAgIHkgLSAoY2FtZXJhLnktY2FudmFzLmgvMilcclxuICAgICAgICBdXHJcbiAgICAvLyB9IGVsc2Uge1xyXG4gICAgLy8gICAgIHggLT0gY2FudmFzLncvMjtcclxuICAgIC8vICAgICB5IC09IGNhbnZhcy5oLzI7XHJcbiAgICAvLyAgICAgY29uc3QgbWFnID0gTWF0aC5zcXJ0KHgqKjIgKyB5KioyKTtcclxuICAgIC8vICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoeSx4KSAtIGNhbWVyYS5hbmdsZTtcclxuICAgIC8vICAgICByZXR1cm4gW1xyXG4gICAgLy8gICAgICAgICBNYXRoLmNvcyhhbmdsZSkgKiBtYWcgLSAoY2FtZXJhLngtY2FudmFzLncvMiksXHJcbiAgICAvLyAgICAgICAgIE1hdGguc2luKGFuZ2xlKSAqIG1hZyAtIChjYW1lcmEueS1jYW52YXMuaC8yKSxcclxuICAgIC8vICAgICBdXHJcbiAgICAvLyB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNoYXJlZC5yZW5kZXI7IiwiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/dChleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0sdCk6dCgoZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOmV8fHNlbGYpLm1zZ3BhY2tyPXt9KX0odGhpcyxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt0cnl7JD1uZXcgVGV4dERlY29kZXJ9Y2F0Y2godCl7fXZhciAkLHIsbixpLHMsZix1LGwsbyxhPTAsYz17fSx4PTAsZD0wLGg9W10sXz17dXNlUmVjb3JkczohMSxtYXBzQXNPYmplY3RzOiEwfTtjbGFzcyBwe31sZXQgZz1uZXcgcDtnLm5hbWU9XCJNZXNzYWdlUGFjayAweEMxXCI7dmFyIHk9ITEsYj0yO3RyeXtGdW5jdGlvbihcIlwiKX1jYXRjaCh3KXtiPTEvMH1jbGFzcyBte2NvbnN0cnVjdG9yKGUpe2UmJighMT09PWUudXNlUmVjb3JkcyYmdm9pZCAwPT09ZS5tYXBzQXNPYmplY3RzJiYoZS5tYXBzQXNPYmplY3RzPSEwKSwhZS5zZXF1ZW50aWFsfHwhMT09PWUudHJ1c3RlZHx8KGUudHJ1c3RlZD0hMCxlLnN0cnVjdHVyZXN8fCExPT1lLnVzZVJlY29yZHN8fChlLnN0cnVjdHVyZXM9W10sZS5tYXhTaGFyZWRTdHJ1Y3R1cmVzfHwoZS5tYXhTaGFyZWRTdHJ1Y3R1cmVzPTApKSksZS5zdHJ1Y3R1cmVzP2Uuc3RydWN0dXJlcy5zaGFyZWRMZW5ndGg9ZS5zdHJ1Y3R1cmVzLmxlbmd0aDplLmdldFN0cnVjdHVyZXMmJigoZS5zdHJ1Y3R1cmVzPVtdKS51bmluaXRpYWxpemVkPSEwLGUuc3RydWN0dXJlcy5zaGFyZWRMZW5ndGg9MCksZS5pbnQ2NEFzTnVtYmVyJiYoZS5pbnQ2NEFzVHlwZT1cIm51bWJlclwiKSksT2JqZWN0LmFzc2lnbih0aGlzLGUpfXVucGFjayhlLHQpe2lmKHIpcmV0dXJuIEcoKCk9PihIKCksdGhpcz90aGlzLnVucGFjayhlLHQpOm0ucHJvdG90eXBlLnVucGFjay5jYWxsKF8sZSx0KSkpO2UuYnVmZmVyfHxlLmNvbnN0cnVjdG9yIT09QXJyYXlCdWZmZXJ8fChlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBCdWZmZXI/QnVmZmVyLmZyb20oZSk6bmV3IFVpbnQ4QXJyYXkoZSkpLFwib2JqZWN0XCI9PXR5cGVvZiB0PyhuPXQuZW5kfHxlLmxlbmd0aCxhPXQuc3RhcnR8fDApOihhPTAsbj10Pi0xP3Q6ZS5sZW5ndGgpLGQ9MCxzPW51bGwsZj1udWxsLHI9ZTt0cnl7bD1lLmRhdGFWaWV3fHwoZS5kYXRhVmlldz1uZXcgRGF0YVZpZXcoZS5idWZmZXIsZS5ieXRlT2Zmc2V0LGUuYnl0ZUxlbmd0aCkpfWNhdGNoKCQpe2lmKHI9bnVsbCxlIGluc3RhbmNlb2YgVWludDhBcnJheSl0aHJvdyAkO3Rocm93IEVycm9yKFwiU291cmNlIG11c3QgYmUgYSBVaW50OEFycmF5IG9yIEJ1ZmZlciBidXQgd2FzIGEgXCIrKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlP2UuY29uc3RydWN0b3IubmFtZTp0eXBlb2YgZSkpfXJldHVybiB0aGlzIGluc3RhbmNlb2YgbT8oYz10aGlzLHRoaXMuc3RydWN0dXJlcz9pPXRoaXMuc3RydWN0dXJlczooIWl8fGkubGVuZ3RoPjApJiYoaT1bXSkpOihjPV8sKCFpfHxpLmxlbmd0aD4wKSYmKGk9W10pKSxTKHQpfXVucGFja011bHRpcGxlKGUsdCl7bGV0ICQscj0wO3RyeXt5PSEwO2xldCBuPWUubGVuZ3RoLGk9dGhpcz90aGlzLnVucGFjayhlLG4pOmVlLnVucGFjayhlLG4pO2lmKHQpe2lmKCExPT09dChpLHIsYSkpcmV0dXJuO2Zvcig7YTxuOylpZihyPWEsITE9PT10KFMoKSxyLGEpKXJldHVybn1lbHNle2ZvcigkPVtpXTthPG47KXI9YSwkLnB1c2goUygpKTtyZXR1cm4gJH19Y2F0Y2gocyl7dGhyb3cgcy5sYXN0UG9zaXRpb249cixzLnZhbHVlcz0kLHN9ZmluYWxseXt5PSExLEgoKX19X21lcmdlU3RydWN0dXJlcyhlLHQpe09iamVjdC5pc0Zyb3plbihlPWV8fFtdKSYmKGU9ZS5tYXAoZT0+ZS5zbGljZSgwKSkpO2ZvcihsZXQgJD0wLHI9ZS5sZW5ndGg7JDxyOyQrKyl7bGV0IG49ZVskXTtuJiYobi5pc1NoYXJlZD0hMCwkPj0zMiYmKG4uaGlnaEJ5dGU9JC0zMj4+NSkpfWZvcihsZXQgaSBpbiBlLnNoYXJlZExlbmd0aD1lLmxlbmd0aCx0fHxbXSlpZihpPj0wKXtsZXQgcz1lW2ldLGY9dFtpXTtmJiYocyYmKChlLnJlc3RvcmVTdHJ1Y3R1cmVzfHwoZS5yZXN0b3JlU3RydWN0dXJlcz1bXSkpW2ldPXMpLGVbaV09Zil9cmV0dXJuIHRoaXMuc3RydWN0dXJlcz1lfWRlY29kZShlLHQpe3JldHVybiB0aGlzLnVucGFjayhlLHQpfX1mdW5jdGlvbiBTKGUpe3RyeXtpZighYy50cnVzdGVkJiYheSl7bGV0IHQ9aS5zaGFyZWRMZW5ndGh8fDA7dDxpLmxlbmd0aCYmKGkubGVuZ3RoPXQpfWxldCAkO2lmKGMucmFuZG9tQWNjZXNzU3RydWN0dXJlJiZyW2FdPDY0JiZyW2FdPj0zMiYmbz8oJD1vKHIsYSxuLGMpLHI9bnVsbCwhKGUmJmUubGF6eSkmJiQmJigkPSQudG9KU09OKCkpLGE9bik6JD1rKCksZiYmKGE9Zi5wb3N0QnVuZGxlUG9zaXRpb24sZj1udWxsKSx5JiYoaS5yZXN0b3JlU3RydWN0dXJlcz1udWxsKSxhPT1uKWkmJmkucmVzdG9yZVN0cnVjdHVyZXMmJlUoKSxpPW51bGwscj1udWxsLHUmJih1PW51bGwpO2Vsc2UgaWYoYT5uKXRocm93IEVycm9yKFwiVW5leHBlY3RlZCBlbmQgb2YgTWVzc2FnZVBhY2sgZGF0YVwiKTtlbHNlIGlmKCF5KXtsZXQgczt0cnl7cz1KU09OLnN0cmluZ2lmeSgkLChlLHQpPT5cImJpZ2ludFwiPT10eXBlb2YgdD9gJHt0fW5gOnQpLnNsaWNlKDAsMTAwKX1jYXRjaChsKXtzPVwiKEpTT04gdmlldyBub3QgYXZhaWxhYmxlIFwiK2wrXCIpXCJ9dGhyb3cgRXJyb3IoXCJEYXRhIHJlYWQsIGJ1dCBlbmQgb2YgYnVmZmVyIG5vdCByZWFjaGVkIFwiK3MpfXJldHVybiAkfWNhdGNoKHgpe3Rocm93IGkmJmkucmVzdG9yZVN0cnVjdHVyZXMmJlUoKSxIKCksKHggaW5zdGFuY2VvZiBSYW5nZUVycm9yfHx4Lm1lc3NhZ2Uuc3RhcnRzV2l0aChcIlVuZXhwZWN0ZWQgZW5kIG9mIGJ1ZmZlclwiKXx8YT5uKSYmKHguaW5jb21wbGV0ZT0hMCkseH19ZnVuY3Rpb24gVSgpe2ZvcihsZXQgZSBpbiBpLnJlc3RvcmVTdHJ1Y3R1cmVzKWlbZV09aS5yZXN0b3JlU3RydWN0dXJlc1tlXTtpLnJlc3RvcmVTdHJ1Y3R1cmVzPW51bGx9ZnVuY3Rpb24gaygpe2xldCBlPXJbYSsrXTtpZihlPDE2MCl7aWYoZTwxMjgpe2lmKGU8NjQpcmV0dXJuIGU7e2xldCB0PWlbNjMmZV18fGMuZ2V0U3RydWN0dXJlcyYmTygpWzYzJmVdO3JldHVybiB0Pyh0LnJlYWR8fCh0LnJlYWQ9QSh0LDYzJmUpKSx0LnJlYWQoKSk6ZX19aWYoZTwxNDQpe2lmKGUtPTEyOCxjLm1hcHNBc09iamVjdHMpe2xldCAkPXt9O2ZvcihsZXQgdT0wO3U8ZTt1Kyspe2xldCBvPVcoKTtcIl9fcHJvdG9fX1wiPT09byYmKG89XCJfX3Byb3RvX1wiKSwkW29dPWsoKX1yZXR1cm4gJH17bGV0IF89bmV3IE1hcDtmb3IobGV0IHA9MDtwPGU7cCsrKV8uc2V0KGsoKSxrKCkpO3JldHVybiBffX17bGV0IHk9QXJyYXkoZS09MTQ0KTtmb3IobGV0IGI9MDtiPGU7YisrKXlbYl09aygpO3JldHVybiBjLmZyZWV6ZURhdGE/T2JqZWN0LmZyZWV6ZSh5KTp5fX1pZihlPDE5Mil7bGV0IHc9ZS0xNjA7aWYoZD49YSlyZXR1cm4gcy5zbGljZShhLXgsKGErPXcpLXgpO2lmKDA9PWQmJm48MTQwKXtsZXQgbT13PDE2P0Modyk6Uih3KTtpZihudWxsIT1tKXJldHVybiBtfXJldHVybiBUKHcpfXtsZXQgUztzd2l0Y2goZSl7Y2FzZSAxOTI6cmV0dXJuIG51bGw7Y2FzZSAxOTM6aWYoZil7aWYoKFM9aygpKT4wKXJldHVybiBmWzFdLnNsaWNlKGYucG9zaXRpb24xLGYucG9zaXRpb24xKz1TKTtyZXR1cm4gZlswXS5zbGljZShmLnBvc2l0aW9uMCxmLnBvc2l0aW9uMC09Uyl9cmV0dXJuIGc7Y2FzZSAxOTQ6cmV0dXJuITE7Y2FzZSAxOTU6cmV0dXJuITA7Y2FzZSAxOTY6aWYodm9pZCAwPT09KFM9clthKytdKSl0aHJvdyBFcnJvcihcIlVuZXhwZWN0ZWQgZW5kIG9mIGJ1ZmZlclwiKTtyZXR1cm4gTihTKTtjYXNlIDE5NzpyZXR1cm4gUz1sLmdldFVpbnQxNihhKSxhKz0yLE4oUyk7Y2FzZSAxOTg6cmV0dXJuIFM9bC5nZXRVaW50MzIoYSksYSs9NCxOKFMpO2Nhc2UgMTk5OnJldHVybiBEKHJbYSsrXSk7Y2FzZSAyMDA6cmV0dXJuIFM9bC5nZXRVaW50MTYoYSksYSs9MixEKFMpO2Nhc2UgMjAxOnJldHVybiBTPWwuZ2V0VWludDMyKGEpLGErPTQsRChTKTtjYXNlIDIwMjppZihTPWwuZ2V0RmxvYXQzMihhKSxjLnVzZUZsb2F0MzI+Mil7bGV0IFU9UVsoMTI3JnJbYV0pPDwxfHJbYSsxXT4+N107cmV0dXJuIGErPTQsKFUqUysoUz4wPy41Oi0uNSk+PjApL1V9cmV0dXJuIGErPTQsUztjYXNlIDIwMzpyZXR1cm4gUz1sLmdldEZsb2F0NjQoYSksYSs9OCxTO2Nhc2UgMjA0OnJldHVybiByW2ErK107Y2FzZSAyMDU6cmV0dXJuIFM9bC5nZXRVaW50MTYoYSksYSs9MixTO2Nhc2UgMjA2OnJldHVybiBTPWwuZ2V0VWludDMyKGEpLGErPTQsUztjYXNlIDIwNzpyZXR1cm5cIm51bWJlclwiPT09Yy5pbnQ2NEFzVHlwZT8oUz00Mjk0OTY3Mjk2KmwuZ2V0VWludDMyKGEpLFMrPWwuZ2V0VWludDMyKGErNCkpOlwic3RyaW5nXCI9PT1jLmludDY0QXNUeXBlP1M9bC5nZXRCaWdVaW50NjQoYSkudG9TdHJpbmcoKTpcImF1dG9cIj09PWMuaW50NjRBc1R5cGU/KFM9bC5nZXRCaWdVaW50NjQoYSkpPD1CaWdJbnQoMik8PEJpZ0ludCg1MikmJihTPU51bWJlcihTKSk6Uz1sLmdldEJpZ1VpbnQ2NChhKSxhKz04LFM7Y2FzZSAyMDg6cmV0dXJuIGwuZ2V0SW50OChhKyspO2Nhc2UgMjA5OnJldHVybiBTPWwuZ2V0SW50MTYoYSksYSs9MixTO2Nhc2UgMjEwOnJldHVybiBTPWwuZ2V0SW50MzIoYSksYSs9NCxTO2Nhc2UgMjExOnJldHVyblwibnVtYmVyXCI9PT1jLmludDY0QXNUeXBlPyhTPTQyOTQ5NjcyOTYqbC5nZXRJbnQzMihhKSxTKz1sLmdldFVpbnQzMihhKzQpKTpcInN0cmluZ1wiPT09Yy5pbnQ2NEFzVHlwZT9TPWwuZ2V0QmlnSW50NjQoYSkudG9TdHJpbmcoKTpcImF1dG9cIj09PWMuaW50NjRBc1R5cGU/KFM9bC5nZXRCaWdJbnQ2NChhKSk+PUJpZ0ludCgtMik8PEJpZ0ludCg1MikmJlM8PUJpZ0ludCgyKTw8QmlnSW50KDUyKSYmKFM9TnVtYmVyKFMpKTpTPWwuZ2V0QmlnSW50NjQoYSksYSs9OCxTO2Nhc2UgMjEyOmlmKDExND09KFM9clthKytdKSlyZXR1cm4gSig2MyZyW2ErK10pO3tsZXQgST1oW1NdO2lmKEkpe2lmKEkucmVhZClyZXR1cm4gYSsrLEkucmVhZChrKCkpO2lmKEkubm9CdWZmZXIpcmV0dXJuIGErKyxJKCk7cmV0dXJuIEkoci5zdWJhcnJheShhLCsrYSkpfXRocm93IEVycm9yKFwiVW5rbm93biBleHRlbnNpb24gXCIrUyl9Y2FzZSAyMTM6aWYoMTE0PT0oUz1yW2FdKSlyZXR1cm4gYSsrLEooNjMmclthKytdLHJbYSsrXSk7cmV0dXJuIEQoMik7Y2FzZSAyMTQ6cmV0dXJuIEQoNCk7Y2FzZSAyMTU6cmV0dXJuIEQoOCk7Y2FzZSAyMTY6cmV0dXJuIEQoMTYpO2Nhc2UgMjE3OmlmKFM9clthKytdLGQ+PWEpcmV0dXJuIHMuc2xpY2UoYS14LChhKz1TKS14KTtyZXR1cm4gQihTKTtjYXNlIDIxODppZihTPWwuZ2V0VWludDE2KGEpLGQ+PShhKz0yKSlyZXR1cm4gcy5zbGljZShhLXgsKGErPVMpLXgpO3JldHVybiBMKFMpO2Nhc2UgMjE5OmlmKFM9bC5nZXRVaW50MzIoYSksZD49KGErPTQpKXJldHVybiBzLnNsaWNlKGEteCwoYSs9UykteCk7cmV0dXJuIEYoUyk7Y2FzZSAyMjA6cmV0dXJuIFM9bC5nZXRVaW50MTYoYSksYSs9Mix6KFMpO2Nhc2UgMjIxOnJldHVybiBTPWwuZ2V0VWludDMyKGEpLGErPTQseihTKTtjYXNlIDIyMjpyZXR1cm4gUz1sLmdldFVpbnQxNihhKSxhKz0yLEUoUyk7Y2FzZSAyMjM6cmV0dXJuIFM9bC5nZXRVaW50MzIoYSksYSs9NCxFKFMpO2RlZmF1bHQ6aWYoZT49MjI0KXJldHVybiBlLTI1NjtpZih2b2lkIDA9PT1lKXtsZXQgdj1FcnJvcihcIlVuZXhwZWN0ZWQgZW5kIG9mIE1lc3NhZ2VQYWNrIGRhdGFcIik7dGhyb3cgdi5pbmNvbXBsZXRlPSEwLHZ9dGhyb3cgRXJyb3IoXCJVbmtub3duIE1lc3NhZ2VQYWNrIHRva2VuIFwiK2UpfX19bGV0IEk9L15bYS16QS1aXyRdW2EtekEtWlxcZF8kXSokLztmdW5jdGlvbiBBKGUsdCl7ZnVuY3Rpb24gJCgpe2lmKCQuY291bnQrKz5iKXtsZXQgcj1lLnJlYWQ9RnVuY3Rpb24oXCJyXCIsXCJyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gXCIrKGMuZnJlZXplRGF0YT9cIk9iamVjdC5mcmVlemVcIjpcIlwiKStcIih7XCIrZS5tYXAoZT0+XCJfX3Byb3RvX19cIj09PWU/XCJfX3Byb3RvXzpyKClcIjpJLnRlc3QoZSk/ZStcIjpyKClcIjpcIltcIitKU09OLnN0cmluZ2lmeShlKStcIl06cigpXCIpLmpvaW4oXCIsXCIpK1wifSl9XCIpKGspO3JldHVybiAwPT09ZS5oaWdoQnl0ZSYmKGUucmVhZD12KHQsZS5yZWFkKSkscigpfWxldCBuPXt9O2ZvcihsZXQgaT0wLHM9ZS5sZW5ndGg7aTxzO2krKyl7bGV0IGY9ZVtpXTtcIl9fcHJvdG9fX1wiPT09ZiYmKGY9XCJfX3Byb3RvX1wiKSxuW2ZdPWsoKX1yZXR1cm4gYy5mcmVlemVEYXRhP09iamVjdC5mcmVlemUobik6bn1yZXR1cm4oJC5jb3VudD0wLDA9PT1lLmhpZ2hCeXRlKT92KHQsJCk6JH1sZXQgdj0oZSx0KT0+ZnVuY3Rpb24oKXtsZXQgJD1yW2ErK107aWYoMD09PSQpcmV0dXJuIHQoKTtsZXQgbj1lPDMyPy0oZSsoJDw8NSkpOmUrKCQ8PDUpLHM9aVtuXXx8TygpW25dO2lmKCFzKXRocm93IEVycm9yKFwiUmVjb3JkIGlkIGlzIG5vdCBkZWZpbmVkIGZvciBcIituKTtyZXR1cm4gcy5yZWFkfHwocy5yZWFkPUEocyxlKSkscy5yZWFkKCl9O2Z1bmN0aW9uIE8oKXtsZXQgZT1HKCgpPT4ocj1udWxsLGMuZ2V0U3RydWN0dXJlcygpKSk7cmV0dXJuIGk9Yy5fbWVyZ2VTdHJ1Y3R1cmVzKGUsaSl9dmFyIFQ9UCxCPVAsTD1QLEY9UDtmdW5jdGlvbiBQKGUpe2xldCB0O2lmKGU8MTYmJih0PUMoZSkpKXJldHVybiB0O2lmKGU+NjQmJiQpcmV0dXJuICQuZGVjb2RlKHIuc3ViYXJyYXkoYSxhKz1lKSk7bGV0IG49YStlLGk9W107Zm9yKHQ9XCJcIjthPG47KXtsZXQgcz1yW2ErK107aWYoKDEyOCZzKT09MClpLnB1c2gocyk7ZWxzZSBpZigoMjI0JnMpPT0xOTIpe2xldCBmPTYzJnJbYSsrXTtpLnB1c2goKDMxJnMpPDw2fGYpfWVsc2UgaWYoKDI0MCZzKT09MjI0KXtsZXQgdT02MyZyW2ErK10sbD02MyZyW2ErK107aS5wdXNoKCgzMSZzKTw8MTJ8dTw8NnxsKX1lbHNlIGlmKCgyNDgmcyk9PTI0MCl7bGV0IG89NjMmclthKytdLGM9NjMmclthKytdLHg9NjMmclthKytdLGQ9KDcmcyk8PDE4fG88PDEyfGM8PDZ8eDtkPjY1NTM1JiYoZC09NjU1MzYsaS5wdXNoKGQ+Pj4xMCYxMDIzfDU1Mjk2KSxkPTU2MzIwfDEwMjMmZCksaS5wdXNoKGQpfWVsc2UgaS5wdXNoKHMpO2kubGVuZ3RoPj00MDk2JiYodCs9TS5hcHBseShTdHJpbmcsaSksaS5sZW5ndGg9MCl9cmV0dXJuIGkubGVuZ3RoPjAmJih0Kz1NLmFwcGx5KFN0cmluZyxpKSksdH1mdW5jdGlvbiB6KGUpe2xldCB0PUFycmF5KGUpO2ZvcihsZXQgJD0wOyQ8ZTskKyspdFskXT1rKCk7cmV0dXJuIGMuZnJlZXplRGF0YT9PYmplY3QuZnJlZXplKHQpOnR9ZnVuY3Rpb24gRShlKXtpZihjLm1hcHNBc09iamVjdHMpe2xldCB0PXt9O2ZvcihsZXQgJD0wOyQ8ZTskKyspe2xldCByPVcoKTtcIl9fcHJvdG9fX1wiPT09ciYmKHI9XCJfX3Byb3RvX1wiKSx0W3JdPWsoKX1yZXR1cm4gdH17bGV0IG49bmV3IE1hcDtmb3IobGV0IGk9MDtpPGU7aSsrKW4uc2V0KGsoKSxrKCkpO3JldHVybiBufX12YXIgTT1TdHJpbmcuZnJvbUNoYXJDb2RlO2Z1bmN0aW9uIFIoZSl7bGV0IHQ9YSwkPUFycmF5KGUpO2ZvcihsZXQgbj0wO248ZTtuKyspe2xldCBpPXJbYSsrXTtpZigoMTI4JmkpPjApe2E9dDtyZXR1cm59JFtuXT1pfXJldHVybiBNLmFwcGx5KFN0cmluZywkKX1mdW5jdGlvbiBDKGUpe2lmKGU8NCl7aWYoZTwyKXtpZigwPT09ZSlyZXR1cm5cIlwiO3tsZXQgdD1yW2ErK107aWYoKDEyOCZ0KT4xKXthLT0xO3JldHVybn1yZXR1cm4gTSh0KX19e2xldCAkPXJbYSsrXSxuPXJbYSsrXTtpZigoMTI4JiQpPjB8fCgxMjgmbik+MCl7YS09MjtyZXR1cm59aWYoZTwzKXJldHVybiBNKCQsbik7bGV0IGk9clthKytdO2lmKCgxMjgmaSk+MCl7YS09MztyZXR1cm59cmV0dXJuIE0oJCxuLGkpfX17bGV0IHM9clthKytdLGY9clthKytdLHU9clthKytdLGw9clthKytdO2lmKCgxMjgmcyk+MHx8KDEyOCZmKT4wfHwoMTI4JnUpPjB8fCgxMjgmbCk+MCl7YS09NDtyZXR1cm59aWYoZTw2KXtpZig0PT09ZSlyZXR1cm4gTShzLGYsdSxsKTt7bGV0IG89clthKytdO2lmKCgxMjgmbyk+MCl7YS09NTtyZXR1cm59cmV0dXJuIE0ocyxmLHUsbCxvKX19aWYoZTw4KXtsZXQgYz1yW2ErK10seD1yW2ErK107aWYoKDEyOCZjKT4wfHwoMTI4JngpPjApe2EtPTY7cmV0dXJufWlmKGU8NylyZXR1cm4gTShzLGYsdSxsLGMseCk7bGV0IGQ9clthKytdO2lmKCgxMjgmZCk+MCl7YS09NztyZXR1cm59cmV0dXJuIE0ocyxmLHUsbCxjLHgsZCl9e2xldCBoPXJbYSsrXSxfPXJbYSsrXSxwPXJbYSsrXSxnPXJbYSsrXTtpZigoMTI4JmgpPjB8fCgxMjgmXyk+MHx8KDEyOCZwKT4wfHwoMTI4JmcpPjApe2EtPTg7cmV0dXJufWlmKGU8MTApe2lmKDg9PT1lKXJldHVybiBNKHMsZix1LGwsaCxfLHAsZyk7e2xldCB5PXJbYSsrXTtpZigoMTI4JnkpPjApe2EtPTk7cmV0dXJufXJldHVybiBNKHMsZix1LGwsaCxfLHAsZyx5KX19aWYoZTwxMil7bGV0IGI9clthKytdLHc9clthKytdO2lmKCgxMjgmYik+MHx8KDEyOCZ3KT4wKXthLT0xMDtyZXR1cm59aWYoZTwxMSlyZXR1cm4gTShzLGYsdSxsLGgsXyxwLGcsYix3KTtsZXQgbT1yW2ErK107aWYoKDEyOCZtKT4wKXthLT0xMTtyZXR1cm59cmV0dXJuIE0ocyxmLHUsbCxoLF8scCxnLGIsdyxtKX17bGV0IFM9clthKytdLFU9clthKytdLGs9clthKytdLEk9clthKytdO2lmKCgxMjgmUyk+MHx8KDEyOCZVKT4wfHwoMTI4JmspPjB8fCgxMjgmSSk+MCl7YS09MTI7cmV0dXJufWlmKGU8MTQpe2lmKDEyPT09ZSlyZXR1cm4gTShzLGYsdSxsLGgsXyxwLGcsUyxVLGssSSk7e2xldCBBPXJbYSsrXTtpZigoMTI4JkEpPjApe2EtPTEzO3JldHVybn1yZXR1cm4gTShzLGYsdSxsLGgsXyxwLGcsUyxVLGssSSxBKX19e2xldCB2PXJbYSsrXSxPPXJbYSsrXTtpZigoMTI4JnYpPjB8fCgxMjgmTyk+MCl7YS09MTQ7cmV0dXJufWlmKGU8MTUpcmV0dXJuIE0ocyxmLHUsbCxoLF8scCxnLFMsVSxrLEksdixPKTtsZXQgVD1yW2ErK107aWYoKDEyOCZUKT4wKXthLT0xNTtyZXR1cm59cmV0dXJuIE0ocyxmLHUsbCxoLF8scCxnLFMsVSxrLEksdixPLFQpfX19fX1mdW5jdGlvbiBqKCl7bGV0IGU9clthKytdLHQ7aWYoZTwxOTIpdD1lLTE2MDtlbHNlIHN3aXRjaChlKXtjYXNlIDIxNzp0PXJbYSsrXTticmVhaztjYXNlIDIxODp0PWwuZ2V0VWludDE2KGEpLGErPTI7YnJlYWs7Y2FzZSAyMTk6dD1sLmdldFVpbnQzMihhKSxhKz00O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJFeHBlY3RlZCBzdHJpbmdcIil9cmV0dXJuIFAodCl9ZnVuY3Rpb24gTihlKXtyZXR1cm4gYy5jb3B5QnVmZmVycz9VaW50OEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHIsYSxhKz1lKTpyLnN1YmFycmF5KGEsYSs9ZSl9ZnVuY3Rpb24gRChlKXtsZXQgdD1yW2ErK107aWYoaFt0XSl7bGV0ICQ7cmV0dXJuIGhbdF0oci5zdWJhcnJheShhLCQ9YSs9ZSksZT0+e2E9ZTt0cnl7cmV0dXJuIGsoKX1maW5hbGx5e2E9JH19KX10aHJvdyBFcnJvcihcIlVua25vd24gZXh0ZW5zaW9uIHR5cGUgXCIrdCl9dmFyIFY9QXJyYXkoNDA5Nik7ZnVuY3Rpb24gVygpe2xldCBlPXJbYSsrXTtpZighKGU+PTE2MCl8fCEoZTwxOTIpKXJldHVybiBhLS0saygpLnRvU3RyaW5nKCk7aWYoZS09MTYwLGQ+PWEpcmV0dXJuIHMuc2xpY2UoYS14LChhKz1lKS14KTtpZighKDA9PWQmJm48MTgwKSlyZXR1cm4gVChlKTtsZXQgdD0oZTw8NV4oZT4xP2wuZ2V0VWludDE2KGEpOmU+MD9yW2FdOjApKSY0MDk1LCQ9Vlt0XSxpPWEsZj1hK2UtMyx1LG89MDtpZigkJiYkLmJ5dGVzPT1lKXtmb3IoO2k8Zjspe2lmKCh1PWwuZ2V0VWludDMyKGkpKSE9JFtvKytdKXtpPTE4NzkwNDgxOTI7YnJlYWt9aSs9NH1mb3IoZis9MztpPGY7KWlmKCh1PXJbaSsrXSkhPSRbbysrXSl7aT0xODc5MDQ4MTkyO2JyZWFrfWlmKGk9PT1mKXJldHVybiBhPWksJC5zdHJpbmc7Zi09MyxpPWF9Zm9yKCQ9W10sVlt0XT0kLCQuYnl0ZXM9ZTtpPGY7KXU9bC5nZXRVaW50MzIoaSksJC5wdXNoKHUpLGkrPTQ7Zm9yKGYrPTM7aTxmOyl1PXJbaSsrXSwkLnB1c2godSk7bGV0IGM9ZTwxNj9DKGUpOlIoZSk7cmV0dXJuIG51bGwhPWM/JC5zdHJpbmc9YzokLnN0cmluZz1UKGUpfWxldCBKPShlLHQpPT57bGV0ICQ9aygpLm1hcChlPT5lLnRvU3RyaW5nKCkpLHI9ZTt2b2lkIDAhPT10JiYoZT1lPDMyPy0oKHQ8PDUpK2UpOih0PDw1KStlLCQuaGlnaEJ5dGU9dCk7bGV0IG49aVtlXTtyZXR1cm4gbiYmKG4uaXNTaGFyZWR8fHkpJiYoKGkucmVzdG9yZVN0cnVjdHVyZXN8fChpLnJlc3RvcmVTdHJ1Y3R1cmVzPVtdKSlbZV09biksaVtlXT0kLCQucmVhZD1BKCQsciksJC5yZWFkKCl9O2hbMF09KCk9Pnt9LGhbMF0ubm9CdWZmZXI9ITA7bGV0IHE9e0Vycm9yLFR5cGVFcnJvcixSZWZlcmVuY2VFcnJvcn07aFsxMDFdPSgpPT57bGV0IGU9aygpO3JldHVybihxW2VbMF1dfHxFcnJvcikoZVsxXSl9LGhbMTA1XT1lPT57bGV0IHQ9bC5nZXRVaW50MzIoYS00KTt1fHwodT1uZXcgTWFwKTtsZXQgJD1yW2FdLG47bj0kPj0xNDQmJiQ8MTYwfHwyMjA9PSR8fDIyMT09JD9bXTp7fTtsZXQgaT17dGFyZ2V0Om59O3Uuc2V0KHQsaSk7bGV0IHM9aygpO3JldHVybiBpLnVzZWQ/T2JqZWN0LmFzc2lnbihuLHMpOihpLnRhcmdldD1zLHMpfSxoWzExMl09ZT0+e2xldCB0PWwuZ2V0VWludDMyKGEtNCksJD11LmdldCh0KTtyZXR1cm4gJC51c2VkPSEwLCQudGFyZ2V0fSxoWzExNV09KCk9Pm5ldyBTZXQoaygpKTtsZXQgSz1bXCJJbnQ4XCIsXCJVaW50OFwiLFwiVWludDhDbGFtcGVkXCIsXCJJbnQxNlwiLFwiVWludDE2XCIsXCJJbnQzMlwiLFwiVWludDMyXCIsXCJGbG9hdDMyXCIsXCJGbG9hdDY0XCIsXCJCaWdJbnQ2NFwiLFwiQmlnVWludDY0XCJdLm1hcChlPT5lK1wiQXJyYXlcIiksWT1cIm9iamVjdFwiPT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOndpbmRvdztoWzExNl09ZT0+e2xldCB0PWVbMF0sJD1LW3RdO2lmKCEkKXRocm93IEVycm9yKFwiQ291bGQgbm90IGZpbmQgdHlwZWQgYXJyYXkgZm9yIGNvZGUgXCIrdCk7cmV0dXJuIG5ldyBZWyRdKFVpbnQ4QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSwxKS5idWZmZXIpfSxoWzEyMF09KCk9PntsZXQgZT1rKCk7cmV0dXJuIFJlZ0V4cChlWzBdLGVbMV0pfTtsZXQgWj1bXTtmdW5jdGlvbiBHKGUpe2xldCB0PW4sJD1hLG89eCxoPWQsXz1zLHA9dSxnPWYsYj1uZXcgVWludDhBcnJheShyLnNsaWNlKDAsbikpLHc9aSxtPWkuc2xpY2UoMCxpLmxlbmd0aCksUz1jLFU9eSxrPWUoKTtyZXR1cm4gbj10LGE9JCx4PW8sZD1oLHM9Xyx1PXAsZj1nLHI9Yix5PVUsKGk9dykuc3BsaWNlKDAsaS5sZW5ndGgsLi4ubSksYz1TLGw9bmV3IERhdGFWaWV3KHIuYnVmZmVyLHIuYnl0ZU9mZnNldCxyLmJ5dGVMZW5ndGgpLGt9ZnVuY3Rpb24gSCgpe3I9bnVsbCx1PW51bGwsaT1udWxsfWhbOThdPWU9PntsZXQgdD0oZVswXTw8MjQpKyhlWzFdPDwxNikrKGVbMl08PDgpK2VbM10sJD1hO3JldHVybiBhKz10LWUubGVuZ3RoLGY9WiwoZj1baigpLGooKV0pLnBvc2l0aW9uMD0wLGYucG9zaXRpb24xPTAsZi5wb3N0QnVuZGxlUG9zaXRpb249YSxhPSQsaygpfSxoWzI1NV09ZT0+ND09ZS5sZW5ndGg/bmV3IERhdGUoKDE2Nzc3MjE2KmVbMF0rKGVbMV08PDE2KSsoZVsyXTw8OCkrZVszXSkqMWUzKTo4PT1lLmxlbmd0aD9uZXcgRGF0ZSgoKGVbMF08PDIyKSsoZVsxXTw8MTQpKyhlWzJdPDw2KSsoZVszXT4+MikpLzFlNisoKDMmZVszXSkqNDI5NDk2NzI5NisxNjc3NzIxNiplWzRdKyhlWzVdPDwxNikrKGVbNl08PDgpK2VbN10pKjFlMyk6MTI9PWUubGVuZ3RoP25ldyBEYXRlKCgoZVswXTw8MjQpKyhlWzFdPDwxNikrKGVbMl08PDgpK2VbM10pLzFlNisoKDEyOCZlWzRdPy0yODE0NzQ5NzY3MTA2NTY6MCkrMTA5OTUxMTYyNzc3NiplWzZdKzQyOTQ5NjcyOTYqZVs3XSsxNjc3NzIxNiplWzhdKyhlWzldPDwxNikrKGVbMTBdPDw4KStlWzExXSkqMWUzKTpuZXcgRGF0ZShcImludmFsaWRcIik7bGV0IFE9QXJyYXkoMTQ3KTtmb3IobGV0IFg9MDtYPDI1NjtYKyspUVtYXT0rKFwiMWVcIitNYXRoLmZsb29yKDQ1LjE1LS4zMDEwMypYKSk7dmFyIGVlPW5ldyBtKHt1c2VSZWNvcmRzOiExfSk7bGV0IGV0PWVlLnVucGFjayxlJD1lZS51bnBhY2tNdWx0aXBsZSxlcj1lZS51bnBhY2ssZW49e05FVkVSOjAsQUxXQVlTOjEsREVDSU1BTF9ST1VORDozLERFQ0lNQUxfRklUOjR9LGVpPW5ldyBGbG9hdDMyQXJyYXkoMSksZXM9bmV3IFVpbnQ4QXJyYXkoZWkuYnVmZmVyLDAsNCksZWY7dHJ5e2VmPW5ldyBUZXh0RW5jb2Rlcn1jYXRjaChldSl7fWxldCBlbCxlbyxlYT1cInVuZGVmaW5lZFwiIT10eXBlb2YgQnVmZmVyLGVjPWVhP2Z1bmN0aW9uKGUpe3JldHVybiBCdWZmZXIuYWxsb2NVbnNhZmVTbG93KGUpfTpVaW50OEFycmF5LGV4PWVhP0J1ZmZlcjpVaW50OEFycmF5LGVkPWVhPzQyOTQ5NjcyOTY6MjE0NDMzNzkyMCxlaCxlXyxlcCxlZz0wLGV5LGUwPW51bGwsZTIsZTE9L1tcXHUwMDgwLVxcdUZGRkZdLyxlNj1TeW1ib2woXCJyZWNvcmQtaWRcIik7Y2xhc3MgZTQgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMub2Zmc2V0PTA7bGV0IHQsJCxyLG4saT1leC5wcm90b3R5cGUudXRmOFdyaXRlP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGVoLnV0ZjhXcml0ZShlLHQsNDI5NDk2NzI5NSl9OiEhZWYmJiEhZWYuZW5jb2RlSW50byYmZnVuY3Rpb24oZSx0KXtyZXR1cm4gZWYuZW5jb2RlSW50byhlLGVoLnN1YmFycmF5KHQpKS53cml0dGVufSxzPXRoaXM7ZXx8KGU9e30pO2xldCBmPWUmJmUuc2VxdWVudGlhbCx1PWUuc3RydWN0dXJlc3x8ZS5zYXZlU3RydWN0dXJlcyxsPWUubWF4U2hhcmVkU3RydWN0dXJlcztpZihudWxsPT1sJiYobD11PzMyOjApLGw+ODE2MCl0aHJvdyBFcnJvcihcIk1heGltdW0gbWF4U2hhcmVkU3RydWN0dXJlIGlzIDgxNjBcIik7ZS5zdHJ1Y3R1cmVkQ2xvbmUmJnZvaWQgMD09ZS5tb3JlVHlwZXMmJih0aGlzLm1vcmVUeXBlcz0hMCk7bGV0IG89ZS5tYXhPd25TdHJ1Y3R1cmVzO251bGw9PW8mJihvPXU/MzI6NjQpLHRoaXMuc3RydWN0dXJlc3x8ITE9PWUudXNlUmVjb3Jkc3x8KHRoaXMuc3RydWN0dXJlcz1bXSk7bGV0IGE9bD4zMnx8bytsPjY0LGM9bCs2NCx4PWwrbys2NDtpZih4PjgyNTYpdGhyb3cgRXJyb3IoXCJNYXhpbXVtIG1heFNoYXJlZFN0cnVjdHVyZSArIG1heE93blN0cnVjdHVyZSBpcyA4MTkyXCIpO2xldCBkPVtdLGg9MCxfPTA7dGhpcy5wYWNrPXRoaXMuZW5jb2RlPWZ1bmN0aW9uKGUsaSl7aWYoZWh8fChlcD0oZWg9bmV3IGVjKDgxOTIpKS5kYXRhVmlld3x8KGVoLmRhdGFWaWV3PW5ldyBEYXRhVmlldyhlaC5idWZmZXIsMCw4MTkyKSksZWc9MCksKGV5PWVoLmxlbmd0aC0xMCktZWc8MjA0OD8oZXA9KGVoPW5ldyBlYyhlaC5sZW5ndGgpKS5kYXRhVmlld3x8KGVoLmRhdGFWaWV3PW5ldyBEYXRhVmlldyhlaC5idWZmZXIsMCxlaC5sZW5ndGgpKSxleT1laC5sZW5ndGgtMTAsZWc9MCk6ZWc9ZWcrNyYyMTQ3NDgzNjQwLHQ9ZWcsaSZlVCYmKGVnKz0yNTUmaSksbj1zLnN0cnVjdHVyZWRDbG9uZT9uZXcgTWFwOm51bGwscy5idW5kbGVTdHJpbmdzJiZcInN0cmluZ1wiIT10eXBlb2YgZT8oZTA9W10pLnNpemU9MS8wOmUwPW51bGwscj1zLnN0cnVjdHVyZXMpe3IudW5pbml0aWFsaXplZCYmKHI9cy5fbWVyZ2VTdHJ1Y3R1cmVzKHMuZ2V0U3RydWN0dXJlcygpKSk7bGV0IHU9ci5zaGFyZWRMZW5ndGh8fDA7aWYodT5sKXRocm93IEVycm9yKFwiU2hhcmVkIHN0cnVjdHVyZXMgaXMgbGFyZ2VyIHRoYW4gbWF4aW11bSBzaGFyZWQgc3RydWN0dXJlcywgdHJ5IGluY3JlYXNpbmcgbWF4U2hhcmVkU3RydWN0dXJlcyB0byBcIityLnNoYXJlZExlbmd0aCk7aWYoIXIudHJhbnNpdGlvbnMpe3IudHJhbnNpdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IobGV0IG89MDtvPHU7bysrKXtsZXQgYT1yW29dO2lmKCFhKWNvbnRpbnVlO2xldCBjLHg9ci50cmFuc2l0aW9ucztmb3IobGV0IGQ9MCxoPWEubGVuZ3RoO2Q8aDtkKyspe2xldCBfPWFbZF07KGM9eFtfXSl8fChjPXhbX109T2JqZWN0LmNyZWF0ZShudWxsKSkseD1jfXhbZTZdPW8rNjR9dGhpcy5sYXN0TmFtZWRTdHJ1Y3R1cmVzTGVuZ3RoPXV9Znx8KHIubmV4dElkPXUrNjQpfSQmJigkPSExKTt0cnl7cy5yYW5kb21BY2Nlc3NTdHJ1Y3R1cmUmJmUmJmUuY29uc3RydWN0b3ImJmUuY29uc3RydWN0b3I9PT1PYmplY3Q/QShlKTp5KGUpO2xldCBnPWUwO2lmKGUwJiZlUyh0LHksMCksbiYmbi5pZHNUb0luc2VydCl7bGV0IGI9bi5pZHNUb0luc2VydC5zb3J0KChlLHQpPT5lLm9mZnNldD50Lm9mZnNldD8xOi0xKSx3PWIubGVuZ3RoLG09LTE7Zm9yKDtnJiZ3PjA7KXtsZXQgUz1iWy0td10ub2Zmc2V0K3Q7UzxnLnN0cmluZ3NQb3NpdGlvbit0JiYtMT09PW0mJihtPTApLFM+Zy5wb3NpdGlvbit0P20+PTAmJihtKz02KToobT49MCYmKGVwLnNldFVpbnQzMihnLnBvc2l0aW9uK3QsZXAuZ2V0VWludDMyKGcucG9zaXRpb24rdCkrbSksbT0tMSksZz1nLnByZXZpb3VzLHcrKyl9bT49MCYmZyYmZXAuc2V0VWludDMyKGcucG9zaXRpb24rdCxlcC5nZXRVaW50MzIoZy5wb3NpdGlvbit0KSttKSwoZWcrPTYqYi5sZW5ndGgpPmV5JiZVKGVnKSxzLm9mZnNldD1lZztsZXQgaz1mdW5jdGlvbiBlKHQsJCl7bGV0IHIsbj02KiQubGVuZ3RoLGk9dC5sZW5ndGgtbjtmb3IoO3I9JC5wb3AoKTspe2xldCBzPXIub2Zmc2V0LGY9ci5pZDt0LmNvcHlXaXRoaW4ocytuLHMsaSk7bGV0IHU9cysobi09Nik7dFt1KytdPTIxNCx0W3UrK109MTA1LHRbdSsrXT1mPj4yNCx0W3UrK109Zj4+MTYmMjU1LHRbdSsrXT1mPj44JjI1NSx0W3UrK109MjU1JmYsaT1zfXJldHVybiB0fShlaC5zdWJhcnJheSh0LGVnKSxiKTtyZXR1cm4gbj1udWxsLGt9aWYocy5vZmZzZXQ9ZWcsaSZldilyZXR1cm4gZWguc3RhcnQ9dCxlaC5lbmQ9ZWcsZWg7cmV0dXJuIGVoLnN1YmFycmF5KHQsZWcpfWZpbmFsbHl7aWYociYmKHAoKSwkJiZzLnNhdmVTdHJ1Y3R1cmVzKSl7dmFyIEksdjtsZXQgTz1yLnNoYXJlZExlbmd0aHx8MCxUPWVoLnN1YmFycmF5KHQsZWcpLEI9KEk9cix2PXMsSS5pc0NvbXBhdGlibGU9ZT0+e2xldCB0PSFlfHwodi5sYXN0TmFtZWRTdHJ1Y3R1cmVzTGVuZ3RofHwwKT09PWUubGVuZ3RoO3JldHVybiB0fHx2Ll9tZXJnZVN0cnVjdHVyZXMoZSksdH0sSSk7aWYoITE9PT1zLnNhdmVTdHJ1Y3R1cmVzKEIsQi5pc0NvbXBhdGlibGUpKXJldHVybiBzLnBhY2soZSxpKTtyZXR1cm4gcy5sYXN0TmFtZWRTdHJ1Y3R1cmVzTGVuZ3RoPU8sVH1pJmVPJiYoZWc9dCl9fTtsZXQgcD0oKT0+e188MTAmJl8rKztsZXQgZT1yLnNoYXJlZExlbmd0aHx8MDtpZihyLmxlbmd0aD5lJiYhZiYmKHIubGVuZ3RoPWUpLGg+MWU0KXIudHJhbnNpdGlvbnM9bnVsbCxfPTAsaD0wLGQubGVuZ3RoPjAmJihkPVtdKTtlbHNlIGlmKGQubGVuZ3RoPjAmJiFmKXtmb3IobGV0IHQ9MCwkPWQubGVuZ3RoO3Q8JDt0KyspZFt0XVtlNl09MDtkPVtdfX0sZz1lPT57dmFyIHQ9ZS5sZW5ndGg7dDwxNj9laFtlZysrXT0xNDR8dDp0PDY1NTM2PyhlaFtlZysrXT0yMjAsZWhbZWcrK109dD4+OCxlaFtlZysrXT0yNTUmdCk6KGVoW2VnKytdPTIyMSxlcC5zZXRVaW50MzIoZWcsdCksZWcrPTQpO2ZvcihsZXQgJD0wOyQ8dDskKyspeShlWyRdKX0seT1lPT57ZWc+ZXkmJihlaD1VKGVnKSk7dmFyICQscj10eXBlb2YgZTtpZihcInN0cmluZ1wiPT09cil7bGV0IHM9ZS5sZW5ndGg7aWYoZTAmJnM+PTQmJnM8NDA5Nil7aWYoKGUwLnNpemUrPXMpPjIxNzYwKXtsZXQgZix1PShlMFswXT8zKmUwWzBdLmxlbmd0aCtlMFsxXS5sZW5ndGg6MCkrMTA7ZWcrdT5leSYmKGVoPVUoZWcrdSkpO2xldCBsO2UwLnBvc2l0aW9uPyhsPWUwLGVoW2VnXT0yMDAsZWcrPTMsZWhbZWcrK109OTgsZj1lZy10LGVnKz00LGVTKHQseSwwKSxlcC5zZXRVaW50MTYoZit0LTMsZWctdC1mKSk6KGVoW2VnKytdPTIxNCxlaFtlZysrXT05OCxmPWVnLXQsZWcrPTQpLChlMD1bXCJcIixcIlwiXSkucHJldmlvdXM9bCxlMC5zaXplPTAsZTAucG9zaXRpb249Zn1sZXQgbz1lMS50ZXN0KGUpO2UwW28/MDoxXSs9ZSxlaFtlZysrXT0xOTMseShvPy1zOnMpO3JldHVybn1sZXQgYTthPXM8MzI/MTpzPDI1Nj8yOnM8NjU1MzY/Mzo1O2xldCBjPTMqcztpZihlZytjPmV5JiYoZWg9VShlZytjKSksczw2NHx8IWkpe2xldCB4LGQsaCxfPWVnK2E7Zm9yKHg9MDt4PHM7eCsrKShkPWUuY2hhckNvZGVBdCh4KSk8MTI4P2VoW18rK109ZDpkPDIwNDg/KGVoW18rK109ZD4+NnwxOTIsZWhbXysrXT02MyZkfDEyOCk6KDY0NTEyJmQpPT01NTI5NiYmKDY0NTEyJihoPWUuY2hhckNvZGVBdCh4KzEpKSk9PTU2MzIwPyhkPTY1NTM2KygoMTAyMyZkKTw8MTApKygxMDIzJmgpLHgrKyxlaFtfKytdPWQ+PjE4fDI0MCxlaFtfKytdPWQ+PjEyJjYzfDEyOCxlaFtfKytdPWQ+PjYmNjN8MTI4LGVoW18rK109NjMmZHwxMjgpOihlaFtfKytdPWQ+PjEyfDIyNCxlaFtfKytdPWQ+PjYmNjN8MTI4LGVoW18rK109NjMmZHwxMjgpOyQ9Xy1lZy1hfWVsc2UgJD1pKGUsZWcrYSk7JDwzMj9laFtlZysrXT0xNjB8JDokPDI1Nj8oYTwyJiZlaC5jb3B5V2l0aGluKGVnKzIsZWcrMSxlZysxKyQpLGVoW2VnKytdPTIxNyxlaFtlZysrXT0kKTokPDY1NTM2PyhhPDMmJmVoLmNvcHlXaXRoaW4oZWcrMyxlZysyLGVnKzIrJCksZWhbZWcrK109MjE4LGVoW2VnKytdPSQ+PjgsZWhbZWcrK109MjU1JiQpOihhPDUmJmVoLmNvcHlXaXRoaW4oZWcrNSxlZyszLGVnKzMrJCksZWhbZWcrK109MjE5LGVwLnNldFVpbnQzMihlZywkKSxlZys9NCksZWcrPSR9ZWxzZSBpZihcIm51bWJlclwiPT09cil7aWYoZT4+PjA9PT1lKWU8MzJ8fGU8MTI4JiYhMT09PXRoaXMudXNlUmVjb3Jkc3x8ZTw2NCYmIXRoaXMucmFuZG9tQWNjZXNzU3RydWN0dXJlP2VoW2VnKytdPWU6ZTwyNTY/KGVoW2VnKytdPTIwNCxlaFtlZysrXT1lKTplPDY1NTM2PyhlaFtlZysrXT0yMDUsZWhbZWcrK109ZT4+OCxlaFtlZysrXT0yNTUmZSk6KGVoW2VnKytdPTIwNixlcC5zZXRVaW50MzIoZWcsZSksZWcrPTQpO2Vsc2UgaWYoZT4+MD09PWUpZT49LTMyP2VoW2VnKytdPTI1NitlOmU+PS0xMjg/KGVoW2VnKytdPTIwOCxlaFtlZysrXT1lKzI1Nik6ZT49LTMyNzY4PyhlaFtlZysrXT0yMDksZXAuc2V0SW50MTYoZWcsZSksZWcrPTIpOihlaFtlZysrXT0yMTAsZXAuc2V0SW50MzIoZWcsZSksZWcrPTQpO2Vsc2V7bGV0IHA7aWYoKHA9dGhpcy51c2VGbG9hdDMyKT4wJiZlPDQyOTQ5NjcyOTYmJmU+PS0yMTQ3NDgzNjQ4KXtlaFtlZysrXT0yMDIsZXAuc2V0RmxvYXQzMihlZyxlKTtsZXQgYjtpZihwPDR8fChiPWUqUVsoMTI3JmVoW2VnXSk8PDF8ZWhbZWcrMV0+PjddKT4+MD09PWIpe2VnKz00O3JldHVybn1lZy0tfWVoW2VnKytdPTIwMyxlcC5zZXRGbG9hdDY0KGVnLGUpLGVnKz04fX1lbHNlIGlmKFwib2JqZWN0XCI9PT1yfHxcImZ1bmN0aW9uXCI9PT1yKXtpZihlKXtpZihuKXtsZXQgdz1uLmdldChlKTtpZih3KXtpZighdy5pZCl7bGV0IG09bi5pZHNUb0luc2VydHx8KG4uaWRzVG9JbnNlcnQ9W10pO3cuaWQ9bS5wdXNoKHcpfWVoW2VnKytdPTIxNCxlaFtlZysrXT0xMTIsZXAuc2V0VWludDMyKGVnLHcuaWQpLGVnKz00O3JldHVybn1uLnNldChlLHtvZmZzZXQ6ZWctdH0pfWxldCBrPWUuY29uc3RydWN0b3I7aWYoaz09PU9iamVjdClTKGUsITApO2Vsc2UgaWYoaz09PUFycmF5KWcoZSk7ZWxzZSBpZihrPT09TWFwKXtpZih0aGlzLm1hcEFzRW1wdHlPYmplY3QpZWhbZWcrK109MTI4O2Vsc2UgZm9yKGxldFtJLEFdb2YoKCQ9ZS5zaXplKTwxNj9laFtlZysrXT0xMjh8JDokPDY1NTM2PyhlaFtlZysrXT0yMjIsZWhbZWcrK109JD4+OCxlaFtlZysrXT0yNTUmJCk6KGVoW2VnKytdPTIyMyxlcC5zZXRVaW50MzIoZWcsJCksZWcrPTQpLGUpKXkoSSkseShBKX1lbHNle2ZvcihsZXQgdj0wLE89ZWwubGVuZ3RoO3Y8Tzt2KyspaWYoZSBpbnN0YW5jZW9mIGVvW3ZdKXtsZXQgVD1lbFt2XTtpZihULndyaXRlKXtULnR5cGUmJihlaFtlZysrXT0yMTIsZWhbZWcrK109VC50eXBlLGVoW2VnKytdPTApO2xldCBCPVQud3JpdGUuY2FsbCh0aGlzLGUpO0I9PT1lP0FycmF5LmlzQXJyYXkoZSk/ZyhlKTpTKGUpOnkoQik7cmV0dXJufWxldCBMPWVoLEY9ZXAsUD1lZztlaD1udWxsO2xldCB6O3RyeXt6PVQucGFjay5jYWxsKHRoaXMsZSxlPT4oZWg9TCxMPW51bGwsKGVnKz1lKT5leSYmVShlZykse3RhcmdldDplaCx0YXJnZXRWaWV3OmVwLHBvc2l0aW9uOmVnLWV9KSx5KX1maW5hbGx5e0wmJihlaD1MLGVwPUYsZWc9UCxleT1laC5sZW5ndGgtMTApfXomJih6Lmxlbmd0aCtlZz5leSYmVSh6Lmxlbmd0aCtlZyksZWc9ZW0oeixlaCxlZyxULnR5cGUpKTtyZXR1cm59aWYoQXJyYXkuaXNBcnJheShlKSlnKGUpO2Vsc2V7aWYoZS50b0pTT04pe2xldCBFPWUudG9KU09OKCk7aWYoRSE9PWUpcmV0dXJuIHkoRSl9aWYoXCJmdW5jdGlvblwiPT09cilyZXR1cm4geSh0aGlzLndyaXRlRnVuY3Rpb24mJnRoaXMud3JpdGVGdW5jdGlvbihlKSk7UyhlLCFlLmhhc093blByb3BlcnR5KX19fWVsc2UgZWhbZWcrK109MTkyfWVsc2UgaWYoXCJib29sZWFuXCI9PT1yKWVoW2VnKytdPWU/MTk1OjE5NDtlbHNlIGlmKFwiYmlnaW50XCI9PT1yKXtpZihlPEJpZ0ludCgxKTw8QmlnSW50KDYzKSYmZT49LShCaWdJbnQoMSk8PEJpZ0ludCg2MykpKWVoW2VnKytdPTIxMSxlcC5zZXRCaWdJbnQ2NChlZyxlKTtlbHNlIGlmKGU8QmlnSW50KDEpPDxCaWdJbnQoNjQpJiZlPjApZWhbZWcrK109MjA3LGVwLnNldEJpZ1VpbnQ2NChlZyxlKTtlbHNlIGlmKHRoaXMubGFyZ2VCaWdJbnRUb0Zsb2F0KWVoW2VnKytdPTIwMyxlcC5zZXRGbG9hdDY0KGVnLE51bWJlcihlKSk7ZWxzZSB0aHJvdyBSYW5nZUVycm9yKGUrXCIgd2FzIHRvbyBsYXJnZSB0byBmaXQgaW4gTWVzc2FnZVBhY2sgNjQtYml0IGludGVnZXIgZm9ybWF0LCBzZXQgbGFyZ2VCaWdJbnRUb0Zsb2F0IHRvIGNvbnZlcnQgdG8gZmxvYXQtNjRcIik7ZWcrPTh9ZWxzZSBpZihcInVuZGVmaW5lZFwiPT09cil0aGlzLmVuY29kZVVuZGVmaW5lZEFzTmlsP2VoW2VnKytdPTE5MjooZWhbZWcrK109MjEyLGVoW2VnKytdPTAsZWhbZWcrK109MCk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gdHlwZTogXCIrcil9LGI9dGhpcy52YXJpYWJsZU1hcFNpemV8fHRoaXMuY29lcmNpYmxlS2V5QXNOdW1iZXI/ZT0+e2xldCB0PU9iamVjdC5rZXlzKGUpLCQ9dC5sZW5ndGg7JDwxNj9laFtlZysrXT0xMjh8JDokPDY1NTM2PyhlaFtlZysrXT0yMjIsZWhbZWcrK109JD4+OCxlaFtlZysrXT0yNTUmJCk6KGVoW2VnKytdPTIyMyxlcC5zZXRVaW50MzIoZWcsJCksZWcrPTQpO2xldCByO2lmKHRoaXMuY29lcmNpYmxlS2V5QXNOdW1iZXIpZm9yKGxldCBuPTA7bjwkO24rKyl7bGV0IGk9TnVtYmVyKHI9dFtuXSk7eShpc05hTihpKT9yOmkpLHkoZVtyXSl9ZWxzZSBmb3IobGV0IHM9MDtzPCQ7cysrKXkocj10W3NdKSx5KGVbcl0pfTooZSwkKT0+e2VoW2VnKytdPTIyMjtsZXQgcj1lZy10O2VnKz0yO2xldCBuPTA7Zm9yKGxldCBpIGluIGUpKCR8fGUuaGFzT3duUHJvcGVydHkoaSkpJiYoeShpKSx5KGVbaV0pLG4rKyk7ZWhbcisrK3RdPW4+PjgsZWhbcit0XT0yNTUmbn0sdz0hMT09PXRoaXMudXNlUmVjb3Jkcz9iOmUucHJvZ3Jlc3NpdmVSZWNvcmRzJiYhYT8oZSwkKT0+e2xldCBuLGk9ci50cmFuc2l0aW9uc3x8KHIudHJhbnNpdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKSkscz1lZysrLXQsZjtmb3IobGV0IHUgaW4gZSlpZigkfHxlLmhhc093blByb3BlcnR5KHUpKXtpZihuPWlbdV0paT1uO2Vsc2V7bGV0IGw9T2JqZWN0LmtleXMoZSksbz1pO2k9ci50cmFuc2l0aW9ucztsZXQgYT0wO2ZvcihsZXQgYz0wLHg9bC5sZW5ndGg7Yzx4O2MrKyl7bGV0IGQ9bFtjXTshKG49aVtkXSkmJihuPWlbZF09T2JqZWN0LmNyZWF0ZShudWxsKSxhKyspLGk9bn1zK3QrMT09ZWc/KGVnLS0sayhpLGwsYSkpOkkoaSxsLHMsYSksZj0hMCxpPW9bdV19eShlW3VdKX1pZighZil7bGV0IGg9aVtlNl07aD9laFtzK3RdPWg6SShpLE9iamVjdC5rZXlzKGUpLHMsMCl9fTooZSx0KT0+e2xldCAkLG49ci50cmFuc2l0aW9uc3x8KHIudHJhbnNpdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKSksaT0wO2ZvcihsZXQgcyBpbiBlKSh0fHxlLmhhc093blByb3BlcnR5KHMpKSYmKCEoJD1uW3NdKSYmKCQ9bltzXT1PYmplY3QuY3JlYXRlKG51bGwpLGkrKyksbj0kKTtsZXQgZj1uW2U2XTtmb3IobGV0IHUgaW4gZj9mPj05NiYmYT8oZWhbZWcrK109KDMxJihmLT05NikpKzk2LGVoW2VnKytdPWY+PjUpOmVoW2VnKytdPWY6ayhuLG4uX19rZXlzX198fE9iamVjdC5rZXlzKGUpLGkpLGUpKHR8fGUuaGFzT3duUHJvcGVydHkodSkpJiZ5KGVbdV0pfSxtPVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMudXNlUmVjb3JkcyYmdGhpcy51c2VSZWNvcmRzLFM9bT8oZSx0KT0+e20oZSk/dyhlLHQpOmIoZSx0KX06dyxVPWU9PntsZXQgJDtpZihlPjE2Nzc3MjE2KXtpZihlLXQ+ZWQpdGhyb3cgRXJyb3IoXCJQYWNrZWQgYnVmZmVyIHdvdWxkIGJlIGxhcmdlciB0aGFuIG1heGltdW0gYnVmZmVyIHNpemVcIik7JD1NYXRoLm1pbihlZCw0MDk2Kk1hdGgucm91bmQoTWF0aC5tYXgoKGUtdCkqKGU+NjcxMDg4NjQ/MS4yNToyKSw0MTk0MzA0KS80MDk2KSl9ZWxzZSAkPShNYXRoLm1heChlLXQ8PDIsZWgubGVuZ3RoLTEpPj4xMikrMTw8MTI7bGV0IHI9bmV3IGVjKCQpO3JldHVybiBlcD1yLmRhdGFWaWV3fHwoci5kYXRhVmlldz1uZXcgRGF0YVZpZXcoci5idWZmZXIsMCwkKSksZT1NYXRoLm1pbihlLGVoLmxlbmd0aCksZWguY29weT9laC5jb3B5KHIsMCx0LGUpOnIuc2V0KGVoLnNsaWNlKHQsZSkpLGVnLT10LHQ9MCxleT1yLmxlbmd0aC0xMCxlaD1yfSxrPShlLHQsbik9PntsZXQgaT1yLm5leHRJZDtpfHwoaT02NCksaTxjJiZ0aGlzLnNob3VsZFNoYXJlU3RydWN0dXJlJiYhdGhpcy5zaG91bGRTaGFyZVN0cnVjdHVyZSh0KT8oKGk9ci5uZXh0T3duSWQpPHh8fChpPWMpLHIubmV4dE93bklkPWkrMSk6KGk+PXgmJihpPWMpLHIubmV4dElkPWkrMSk7bGV0IHM9dC5oaWdoQnl0ZT1pPj05NiYmYT9pLTk2Pj41Oi0xO2VbZTZdPWksZS5fX2tleXNfXz10LHJbaS02NF09dCxpPGM/KHQuaXNTaGFyZWQ9ITAsci5zaGFyZWRMZW5ndGg9aS02MywkPSEwLHM+PTA/KGVoW2VnKytdPSgzMSZpKSs5NixlaFtlZysrXT1zKTplaFtlZysrXT1pKToocz49MD8oZWhbZWcrK109MjEzLGVoW2VnKytdPTExNCxlaFtlZysrXT0oMzEmaSkrOTYsZWhbZWcrK109cyk6KGVoW2VnKytdPTIxMixlaFtlZysrXT0xMTQsZWhbZWcrK109aSksbiYmKGgrPV8qbiksZC5sZW5ndGg+PW8mJihkLnNoaWZ0KClbZTZdPTApLGQucHVzaChlKSx5KHQpKX0sST0oZSwkLHIsbik9PntsZXQgaT1laCxzPWVnLGY9ZXksdT10O2VoPWVfLGVnPTAsdD0wLGVofHwoZV89ZWg9bmV3IGVjKDgxOTIpKSxleT1laC5sZW5ndGgtMTAsayhlLCQsbiksZV89ZWg7bGV0IGw9ZWc7aWYoZWg9aSxlZz1zLGV5PWYsdD11LGw+MSl7bGV0IG89ZWcrbC0xO28+ZXkmJlUobyk7bGV0IGE9cit0O2VoLmNvcHlXaXRoaW4oYStsLGErMSxlZyksZWguc2V0KGVfLnNsaWNlKDAsbCksYSksZWc9b31lbHNlIGVoW3IrdF09ZV9bMF19LEE9KGUsbik9PntsZXQgaT1lMihlLGVoLHQsZWcscixVLChlLHQscik9PntpZihyKXJldHVybiAkPSEwO2VnPXQ7bGV0IG49ZWg7cmV0dXJuKHkoZSkscCgpLG4hPT1laCk/e3Bvc2l0aW9uOmVnLHRhcmdldFZpZXc6ZXAsdGFyZ2V0OmVofTplZ30sdGhpcyk7aWYoMD09PWkpcmV0dXJuIFMoZSwhMCk7ZWc9aX19dXNlQnVmZmVyKGUpe2VoPWUsZXA9bmV3IERhdGFWaWV3KGVoLmJ1ZmZlcixlaC5ieXRlT2Zmc2V0LGVoLmJ5dGVMZW5ndGgpLGVnPTB9Y2xlYXJTaGFyZWREYXRhKCl7dGhpcy5zdHJ1Y3R1cmVzJiYodGhpcy5zdHJ1Y3R1cmVzPVtdKSx0aGlzLnR5cGVkU3RydWN0cyYmKHRoaXMudHlwZWRTdHJ1Y3RzPVtdKX19ZnVuY3Rpb24gZWIoZSx0LCQscil7bGV0IG49ZS5ieXRlTGVuZ3RoO2lmKG4rMTwyNTYpe3Zhcnt0YXJnZXQ6aSxwb3NpdGlvbjpzfT0kKDQrbik7aVtzKytdPTE5OSxpW3MrK109bisxfWVsc2UgaWYobisxPDY1NTM2KXt2YXJ7dGFyZ2V0OmkscG9zaXRpb246c309JCg1K24pO2lbcysrXT0yMDAsaVtzKytdPW4rMT4+OCxpW3MrK109bisxJjI1NX1lbHNle3Zhcnt0YXJnZXQ6aSxwb3NpdGlvbjpzLHRhcmdldFZpZXc6Zn09JCg3K24pO2lbcysrXT0yMDEsZi5zZXRVaW50MzIocyxuKzEpLHMrPTR9aVtzKytdPTExNixpW3MrK109dCxpLnNldChuZXcgVWludDhBcnJheShlLmJ1ZmZlcixlLmJ5dGVPZmZzZXQsZS5ieXRlTGVuZ3RoKSxzKX1mdW5jdGlvbiBldyhlLHQpe2xldCAkPWUuYnl0ZUxlbmd0aDtpZigkPDI1Nil7dmFyIHIsbix7dGFyZ2V0OnIscG9zaXRpb246bn09dCgkKzIpO3JbbisrXT0xOTYscltuKytdPSR9ZWxzZSBpZigkPDY1NTM2KXt2YXJ7dGFyZ2V0OnIscG9zaXRpb246bn09dCgkKzMpO3JbbisrXT0xOTcscltuKytdPSQ+PjgscltuKytdPTI1NSYkfWVsc2V7dmFye3RhcmdldDpyLHBvc2l0aW9uOm4sdGFyZ2V0VmlldzppfT10KCQrNSk7cltuKytdPTE5OCxpLnNldFVpbnQzMihuLCQpLG4rPTR9ci5zZXQoZSxuKX1mdW5jdGlvbiBlbShlLHQsJCxyKXtsZXQgbj1lLmxlbmd0aDtzd2l0Y2gobil7Y2FzZSAxOnRbJCsrXT0yMTI7YnJlYWs7Y2FzZSAyOnRbJCsrXT0yMTM7YnJlYWs7Y2FzZSA0OnRbJCsrXT0yMTQ7YnJlYWs7Y2FzZSA4OnRbJCsrXT0yMTU7YnJlYWs7Y2FzZSAxNjp0WyQrK109MjE2O2JyZWFrO2RlZmF1bHQ6bjwyNTY/KHRbJCsrXT0xOTksdFskKytdPW4pOm48NjU1MzY/KHRbJCsrXT0yMDAsdFskKytdPW4+PjgsdFskKytdPTI1NSZuKToodFskKytdPTIwMSx0WyQrK109bj4+MjQsdFskKytdPW4+PjE2JjI1NSx0WyQrK109bj4+OCYyNTUsdFskKytdPTI1NSZuKX1yZXR1cm4gdFskKytdPXIsdC5zZXQoZSwkKSwkKz1ufWZ1bmN0aW9uIGVTKGUsdCwkKXtpZihlMC5sZW5ndGg+MCl7ZXAuc2V0VWludDMyKGUwLnBvc2l0aW9uK2UsZWcrJC1lMC5wb3NpdGlvbi1lKSxlMC5zdHJpbmdzUG9zaXRpb249ZWctZTtsZXQgcj1lMDtlMD1udWxsLHQoclswXSksdChyWzFdKX19ZW89W0RhdGUsU2V0LEVycm9yLFJlZ0V4cCxBcnJheUJ1ZmZlcixPYmplY3QuZ2V0UHJvdG90eXBlT2YoVWludDhBcnJheS5wcm90b3R5cGUpLmNvbnN0cnVjdG9yLHBdLGVsPVt7cGFjayhlLHQsJCl7bGV0IHI9ZS5nZXRUaW1lKCkvMWUzO2lmKCh0aGlzLnVzZVRpbWVzdGFtcDMyfHwwPT09ZS5nZXRNaWxsaXNlY29uZHMoKSkmJnI+PTAmJnI8NDI5NDk2NzI5Nil7bGV0e3RhcmdldDpuLHRhcmdldFZpZXc6aSxwb3NpdGlvbjpzfT10KDYpO25bcysrXT0yMTQsbltzKytdPTI1NSxpLnNldFVpbnQzMihzLHIpfWVsc2UgaWYocj4wJiZyPDQyOTQ5NjcyOTYpe2xldHt0YXJnZXQ6Zix0YXJnZXRWaWV3OnUscG9zaXRpb246bH09dCgxMCk7ZltsKytdPTIxNSxmW2wrK109MjU1LHUuc2V0VWludDMyKGwsNGU2KmUuZ2V0TWlsbGlzZWNvbmRzKCkrKHIvMWUzLzQyOTQ5NjcyOTY+PjApKSx1LnNldFVpbnQzMihsKzQscil9ZWxzZSBpZihpc05hTihyKSl7aWYodGhpcy5vbkludmFsaWREYXRlKXJldHVybiB0KDApLCQodGhpcy5vbkludmFsaWREYXRlKCkpO2xldHt0YXJnZXQ6byx0YXJnZXRWaWV3OmEscG9zaXRpb246Y309dCgzKTtvW2MrK109MjEyLG9bYysrXT0yNTUsb1tjKytdPTI1NX1lbHNle2xldHt0YXJnZXQ6eCx0YXJnZXRWaWV3OmQscG9zaXRpb246aH09dCgxNSk7eFtoKytdPTE5OSx4W2grK109MTIseFtoKytdPTI1NSxkLnNldFVpbnQzMihoLDFlNiplLmdldE1pbGxpc2Vjb25kcygpKSxkLnNldEJpZ0ludDY0KGgrNCxCaWdJbnQoTWF0aC5mbG9vcihyKSkpfX19LHtwYWNrKGUsdCwkKXtpZih0aGlzLnNldEFzRW1wdHlPYmplY3QpcmV0dXJuIHQoMCksJCh7fSk7bGV0IHI9QXJyYXkuZnJvbShlKSx7dGFyZ2V0Om4scG9zaXRpb246aX09dCh0aGlzLm1vcmVUeXBlcz8zOjApO3RoaXMubW9yZVR5cGVzJiYobltpKytdPTIxMixuW2krK109MTE1LG5baSsrXT0wKSwkKHIpfX0se3BhY2soZSx0LCQpe2xldHt0YXJnZXQ6cixwb3NpdGlvbjpufT10KHRoaXMubW9yZVR5cGVzPzM6MCk7dGhpcy5tb3JlVHlwZXMmJihyW24rK109MjEyLHJbbisrXT0xMDEscltuKytdPTApLCQoW2UubmFtZSxlLm1lc3NhZ2VdKX19LHtwYWNrKGUsdCwkKXtsZXR7dGFyZ2V0OnIscG9zaXRpb246bn09dCh0aGlzLm1vcmVUeXBlcz8zOjApO3RoaXMubW9yZVR5cGVzJiYocltuKytdPTIxMixyW24rK109MTIwLHJbbisrXT0wKSwkKFtlLnNvdXJjZSxlLmZsYWdzXSl9fSx7cGFjayhlLHQpe3RoaXMubW9yZVR5cGVzP2ViKGUsMTYsdCk6ZXcoZWE/QnVmZmVyLmZyb20oZSk6bmV3IFVpbnQ4QXJyYXkoZSksdCl9fSx7cGFjayhlLHQpe2xldCAkPWUuY29uc3RydWN0b3I7JCE9PWV4JiZ0aGlzLm1vcmVUeXBlcz9lYihlLEsuaW5kZXhPZigkLm5hbWUpLHQpOmV3KGUsdCl9fSx7cGFjayhlLHQpe2xldHt0YXJnZXQ6JCxwb3NpdGlvbjpyfT10KDEpOyRbcl09MTkzfX1dO2xldCBlVT1uZXcgZTQoe3VzZVJlY29yZHM6ITF9KSxlaz1lVS5wYWNrLGVJPWVVLnBhY2sse05FVkVSOmU4LEFMV0FZUzplQSxERUNJTUFMX1JPVU5EOmU1LERFQ0lNQUxfRklUOmUzfT1lbixldj01MTIsZU89MTAyNCxlVD0yMDQ4O2FzeW5jIGZ1bmN0aW9uKmVCKGUsdCl7bGV0ICQ9bmV3IGU0KHQpO2ZvciBhd2FpdChsZXQgciBvZiBlKXlpZWxkICQucGFjayhyKX1sZXQgZUw9ZnVuY3Rpb24gZSh0LCQ9e30pe2lmKCF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCl0aHJvdyBFcnJvcihcImZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYW4gSXRlcmFibGUsIEFzeW5jIEl0ZXJhYmxlLCBJdGVyYXRvciwgQXN5bmMgSXRlcmF0b3IsIG9yIGEgcHJvbWlzZVwiKTtsZXQgcj1uZXcgbSgkKSxuLGk9ZT0+e2xldCB0O24mJihlPUJ1ZmZlci5jb25jYXQoW24sZV0pLG49dm9pZCAwKTt0cnl7dD1yLnVucGFja011bHRpcGxlKGUpfWNhdGNoKCQpe2lmKCQuaW5jb21wbGV0ZSluPWUuc2xpY2UoJC5sYXN0UG9zaXRpb24pLHQ9JC52YWx1ZXM7ZWxzZSB0aHJvdyAkfXJldHVybiB0fTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0W1N5bWJvbC5pdGVyYXRvcl0/ZnVuY3Rpb24qIGUoKXtmb3IobGV0ICQgb2YgdCl5aWVsZCppKCQpfSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHRbU3ltYm9sLmFzeW5jSXRlcmF0b3JdP2FzeW5jIGZ1bmN0aW9uKiBlKCl7Zm9yIGF3YWl0KGxldCAkIG9mIHQpeWllbGQqaSgkKX0oKTp2b2lkIDB9LGVGPWZ1bmN0aW9uIGUodCwkPXt9KXtpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdFtTeW1ib2wuaXRlcmF0b3JdKXJldHVybiBmdW5jdGlvbiogZSh0LCQpe2xldCByPW5ldyBlNCgkKTtmb3IobGV0IG4gb2YgdCl5aWVsZCByLnBhY2sobil9KHQsJCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC50aGVufHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W1N5bWJvbC5hc3luY0l0ZXJhdG9yXSlyZXR1cm4gZUIodCwkKTtlbHNlIHRocm93IEVycm9yKFwiZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBJdGVyYWJsZSwgQXN5bmMgSXRlcmFibGUsIEl0ZXJhdG9yLCBBc3luYyBJdGVyYXRvciwgb3IgYSBQcm9taXNlXCIpfXRocm93IEVycm9yKFwiZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBJdGVyYWJsZSwgQXN5bmMgSXRlcmFibGUsIG9yIGEgUHJvbWlzZSBmb3IgYW4gQXN5bmMgSXRlcmFibGVcIil9O2UuQUxXQVlTPWVBLGUuQzE9ZyxlLkRFQ0lNQUxfRklUPWUzLGUuREVDSU1BTF9ST1VORD1lNSxlLkRlY29kZXI9bSxlLkVuY29kZXI9ZTQsZS5GTE9BVDMyX09QVElPTlM9ZW4sZS5ORVZFUj1lOCxlLlBhY2tyPWU0LGUuUkVVU0VfQlVGRkVSX01PREU9ZXYsZS5VbnBhY2tyPW0sZS5hZGRFeHRlbnNpb249ZnVuY3Rpb24gZSh0KXt2YXIgJDtpZih0LkNsYXNzKXtpZighdC5wYWNrJiYhdC53cml0ZSl0aHJvdyBFcnJvcihcIkV4dGVuc2lvbiBoYXMgbm8gcGFjayBvciB3cml0ZSBmdW5jdGlvblwiKTtpZih0LnBhY2smJiF0LnR5cGUpdGhyb3cgRXJyb3IoXCJFeHRlbnNpb24gaGFzIG5vIHR5cGUgKG51bWVyaWMgY29kZSB0byBpZGVudGlmeSB0aGUgZXh0ZW5zaW9uKVwiKTtlby51bnNoaWZ0KHQuQ2xhc3MpLGVsLnVuc2hpZnQodCl9KCQ9dCkudW5wYWNrP2hbJC50eXBlXT0kLnVucGFjazpoWyQudHlwZV09JH0sZS5jbGVhclNvdXJjZT1ILGUuZGVjb2RlPWVyLGUuZGVjb2RlSXRlcj1lTCxlLmVuY29kZT1lSSxlLmVuY29kZUl0ZXI9ZUYsZS5pc05hdGl2ZUFjY2VsZXJhdGlvbkVuYWJsZWQ9ITEsZS5tYXBzQXNPYmplY3RzPSEwLGUucGFjaz1layxlLnJvdW5kRmxvYXQzMj1mdW5jdGlvbiBlKHQpe2VpWzBdPXQ7bGV0ICQ9UVsoMTI3JmVzWzNdKTw8MXxlc1syXT4+N107cmV0dXJuKCQqdCsodD4wPy41Oi0uNSk+PjApLyR9LGUudW5wYWNrPWV0LGUudW5wYWNrTXVsdGlwbGU9ZSQsZS51c2VSZWNvcmRzPSExfSk7IiwiaW1wb3J0IHNoYXJlZCBmcm9tICcuLi9zaGFyZWQvc2hhcmVkLmpzJztcclxuY29uc3QgdW50aWwgPSAoY29uZGl0aW9uLCBjaGVja0ludGVydmFsPTQwMCkgPT4ge1xyXG4gICAgaWYoISFjb25kaXRpb24oKSkgcmV0dXJuIHRydWU7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNvbmRpdGlvbigpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSwgY2hlY2tJbnRlcnZhbClcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IFNDUk9MTF9QQVJBTVMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIHNlbnNpdGl2aXR5OiAxMCAqIDEzMDAsXHJcbiAgICBtaW5BdmdTcGVlZDogMC41ICogMTMwMCxcclxuICAgIG1heFNjcm9sbFRpbWU6IDE1MCxcclxuICAgIGVkZ2VNYXJnaW46IDExNyAvLyBvdXQgb2YgOTAwXHJcbn0pO1xyXG5cclxuY29uc3QgZW52aXJvbm1lbnQgPSBzaGFyZWQuZW52aXJvbm1lbnQgPSB0eXBlb2YgbG9jYXRpb24gPT09ICd1bmRlZmluZWQnID8gJ3NlcnZlcicgOiAoKGxvY2F0aW9uLm9yaWdpbi5lbmRzV2l0aCgnODA4MCcpIHx8IGxvY2F0aW9uLmhyZWYuZW5kc1dpdGgoJ2VkaXRvcicpKSA/ICdlZGl0b3InIDogJ2NsaWVudCcpO1xyXG5jb25zdCBpc1Byb2QgPSBzaGFyZWQuaXNQcm9kID0gdHlwZW9mIGxvY2F0aW9uID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBsb2NhdGlvbi5vcmlnaW4uc3RhcnRzV2l0aCgnaHR0cDovL2xvY2FsaG9zdCcpID8gZmFsc2UgOiB0cnVlOyBcclxuXHJcbmlmKGlzUHJvZCA9PT0gZmFsc2Upe1xyXG4gICAgd2luZG93LnMgPSB7fTtcclxuICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBmb3IobGV0IGtleSBpbiBzaGFyZWQpeyB3aW5kb3cuc1trZXldID0gc2hhcmVkW2tleV07IH1cclxuICAgIH0sIDEwMDApXHJcbn1cclxuXHJcbmNvbnN0IG1lbW9pemVkQ29sb3JzID0ge307XHJcblxyXG5zaGFyZWQuYmxlbmRDb2xvciA9IGJsZW5kQ29sb3I7XHJcbmZ1bmN0aW9uIGJsZW5kQ29sb3IoY29sb3IxLCBjb2xvcjIsIHQpIHtcclxuXHRjb25zdCBtZW1vaXplZEluZGV4ID0gY29sb3IxICsgJ18nICsgY29sb3IyICsgJ18nICsgdDtcclxuXHRpZiAobWVtb2l6ZWRDb2xvcnNbbWVtb2l6ZWRJbmRleF0gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0cmV0dXJuIG1lbW9pemVkQ29sb3JzW21lbW9pemVkSW5kZXhdO1xyXG5cdH1cclxuXHRjb25zdCByZ2IxID0ge1xyXG5cdFx0cjogcGFyc2VJbnQoY29sb3IxLnNsaWNlKDEsIDMpLCAxNiksXHJcblx0XHRnOiBwYXJzZUludChjb2xvcjEuc2xpY2UoMywgNSksIDE2KSxcclxuXHRcdGI6IHBhcnNlSW50KGNvbG9yMS5zbGljZSg1LCA3KSwgMTYpXHJcblx0fVxyXG5cdGNvbnN0IHJnYjIgPSB7XHJcblx0XHRyOiBwYXJzZUludChjb2xvcjIuc2xpY2UoMSwgMyksIDE2KSxcclxuXHRcdGc6IHBhcnNlSW50KGNvbG9yMi5zbGljZSgzLCA1KSwgMTYpLFxyXG5cdFx0YjogcGFyc2VJbnQoY29sb3IyLnNsaWNlKDUsIDcpLCAxNilcclxuXHR9XHJcblxyXG5cdGNvbnN0IHJlc3VsdCA9IHJnYlRvSGV4KE1hdGguZmxvb3IocmdiMS5yICogKDEgLSB0KSArIHJnYjIuciAqIHQpLCBNYXRoLmZsb29yKHJnYjEuZyAqICgxIC0gdCkgKyByZ2IyLmcgKiB0KSwgTWF0aC5mbG9vcihyZ2IxLmIgKiAoMSAtIHQpICsgcmdiMi5iICogdCkpXHJcblx0bWVtb2l6ZWRDb2xvcnNbbWVtb2l6ZWRJbmRleF0gPSByZXN1bHQ7XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmdiVG9IZXgociwgZywgYikge1xyXG5cdHJldHVybiBcIiNcIiArIGNvbXBvbmVudFRvSGV4KHIpICsgY29tcG9uZW50VG9IZXgoZykgKyBjb21wb25lbnRUb0hleChiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcG9uZW50VG9IZXgoYykge1xyXG5cdHZhciBoZXggPSBjLnRvU3RyaW5nKDE2KTtcclxuXHRyZXR1cm4gaGV4Lmxlbmd0aCA9PSAxID8gXCIwXCIgKyBoZXggOiBoZXg7XHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIHNob3J0QW5nbGVEaXN0KGEwLGExKSB7XHJcbi8vIFx0Y29uc3QgbWF4ID0gTWF0aC5QSSoyO1xyXG4vLyBcdGNvbnN0IGRhID0gKGExIC0gYTApICUgbWF4O1xyXG4vLyBcdHJldHVybiAyKmRhICUgbWF4IC0gZGE7XHJcbi8vIH1cclxuXHJcbmNvbnN0IG1hcHNCZWF0ZW5TdHIgPSBlbnZpcm9ubWVudCA9PT0gJ3NlcnZlcicgPyBudWxsIDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21hcHNCZWF0ZW4nKTtcclxuc2hhcmVkLm1hcHNCZWF0ZW4gPSB7fTtcclxuaWYobWFwc0JlYXRlblN0ciAhPT0gbnVsbCl7XHJcbiAgICBjb25zdCBzcGxpdCA9IG1hcHNCZWF0ZW5TdHIuc3BsaXQoJ3wnKTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzcGxpdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgc2hhcmVkLm1hcHNCZWF0ZW5bc3BsaXRbaV1dID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuc2hhcmVkLmRlY29yYXRpb25JbWdzID0ge307XHJcbmlmKHR5cGVvZiBJbWFnZSAhPT0gJ3VuZGVmaW5lZCcpe1xyXG5cdHNoYXJlZC5hcnJvd0ltZyA9IG5ldyBJbWFnZSgpO1xyXG5cdHNoYXJlZC5zdGFySW1nID0gbmV3IEltYWdlKCk7XHJcblx0c2hhcmVkLnN0YXJJbWcuY3Jvc3NPcmlnaW4gPSBcIkFub255bW91c1wiO1xyXG5cdGlmKGVudmlyb25tZW50ID09PSAnZWRpdG9yJyl7XHJcblx0XHQvLyBlZGl0b3JcclxuXHRcdChhc3luYygpID0+IHtcclxuXHRcdFx0Y29uc3QgZXhwcyA9IGF3YWl0IGltcG9ydCgnLi9hc3NldHMuanMnKTtcclxuXHRcdFx0c2hhcmVkLmFycm93SW1nID0gZXhwcy5kZWZhdWx0LmFycm93SW1nO1xyXG5cdFx0XHRzaGFyZWQuc3RhckltZyA9IGV4cHMuZGVmYXVsdC5zdGFySW1nO1xyXG5cdFx0fSkoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gY2xpZW50XHJcblx0XHRzaGFyZWQuYXJyb3dJbWcuc3JjID0gJy4vZ2Z4L2Fycm93LnBuZyc7XHJcblx0XHRzaGFyZWQuc3RhckltZy5zcmMgPSAnaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy9jL2MzL0FfU25hcHNob3Rfb2ZfdGhlX0pld2VsX0JveF9jbHVzdGVyX3dpdGhfdGhlX0VTT19WTFQuanBnJztcclxuXHR9XHJcbn0gZWxzZSB7XHJcblx0Ly8gc2VydmVyXHJcblx0c2hhcmVkLmFycm93SW1nID0gc2hhcmVkLnN0YXJJbWcgPSB7fTtcclxufVxyXG5cclxud2luZG93LmNvbG91clJnYiA9IChyLGcsYikgPT4ge1xyXG5cdHIgPSBNYXRoLm1heChNYXRoLm1pbihOdW1iZXIociksIDEwMCksIDApICogMi41NTtcclxuXHRnID0gTWF0aC5tYXgoTWF0aC5taW4oTnVtYmVyKGcpLCAxMDApLCAwKSAqIDIuNTU7XHJcblx0YiA9IE1hdGgubWF4KE1hdGgubWluKE51bWJlcihiKSwgMTAwKSwgMCkgKiAyLjU1O1xyXG5cdHIgPSAoJzAnICsgKE1hdGgucm91bmQocikgfHwgMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XHJcblx0ZyA9ICgnMCcgKyAoTWF0aC5yb3VuZChnKSB8fCAwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcclxuXHRiID0gKCcwJyArIChNYXRoLnJvdW5kKGIpIHx8IDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xyXG5cdHJldHVybiAnIycgKyByICsgZyArIGI7XHJcbn1cclxuXHJcbmlmKGVudmlyb25tZW50ID09PSAnc2VydmVyJykgZ2xvYmFsLmNvbG91clJnYiA9IHdpbmRvdy5jb2xvdXJSZ2I7XHJcblxyXG53aW5kb3cubWQgPSAoYSkgPT4ge3JldHVybiAoYSAhPT0gYSB8fCBhID09PSB1bmRlZmluZWQgfHwgYSA9PT0gbnVsbCkgPyAwIDogYTt9OyAvLyBtYWtlIGRlZmluZWRcclxud2luZG93Lm1ha2VOdW1iZXIgPSAoYSkgPT4ge3JldHVybiBOdW1iZXIuaXNGaW5pdGUoYSkgPT09IHRydWUgPyBhIDogMDt9O1xyXG53aW5kb3cubWFrZU5vdE5hTiA9IChhKSA9PiB7cmV0dXJuIChhID09PSBhKSA/IGEgOiAwO307XHJcbndpbmRvdy5tYWtlTm90TnVsbCA9IChhKSA9PiB7cmV0dXJuIGEgPT09IG51bGwgPyAwIDogYX07XHJcbndpbmRvdy5tYWtlTm90VW5kZWZpbmVkID0gKGEpID0+IHtyZXR1cm4gYSA9PT0gdW5kZWZpbmVkID8gMCA6IGF9O1xyXG53aW5kb3cucmx0ID0gKGEpID0+IHtzaGFyZWQubG9vcFRyYXAgPSAxMDAwOyByZXR1cm4gYTt9Oy8vIHJlc2V0IGxvb3AgdHJhcFxyXG53aW5kb3cubWFrZVR5cGUgPSAoYSx0eXBlQXJyKSA9PiB7XHJcblx0aWYodHlwZUFyci5pbmNsdWRlcyhzaGFyZWQuZ2VuZXJhdGVDb25uZWN0aW9uVHlwZShhKSkgPT09IHRydWUpcmV0dXJuIGE7XHJcblx0cmV0dXJuIGRlZmF1bHRUeXBlTWFwW3R5cGVvZiBhXTtcclxufVxyXG5zaGFyZWQuZ2VuZXJhdGVDb25uZWN0aW9uVHlwZSA9ICh2YWwpID0+IHtcclxuXHRjb25zdCB0eXBlID0gdHlwZW9mIHZhbDtcclxuXHRpZih0eXBlID09PSAnbnVtYmVyJykgcmV0dXJuICdOdW1iZXInO1xyXG5cdGlmKHR5cGUgPT09ICdzdHJpbmcnKSB7XHJcblx0ICAvLyBpZih2YWxbMF0gPT09ICcjJykgcmV0dXJuICdDb2xvdXInO1xyXG5cdCAgcmV0dXJuIFsnU3RyaW5nJywgJ0NvbG91ciddO1xyXG5cdH1cclxuXHRpZih0eXBlID09PSAnYm9vbGVhbicpIHJldHVybiAnQm9vbGVhbic7XHJcblx0aWYoQXJyYXkuaXNBcnJheSh2YWwpID09PSB0cnVlKSByZXR1cm4gJ0FycmF5JztcclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5jb25zdCBkZWZhdWx0VHlwZU1hcCA9IHt1bmRlZmluZWQ6IDAsIHN0cmluZzogJycsIGJvb2xlYW46IHRydWUvKmdsYXNzIGlzIGhhbGYgZnVsbCovLCBudW1iZXI6IDAsIG9iamVjdDogW10vKmV4Y2x1c2l2ZWx5IHVzZWQgZm9yIGJsb2NrbHksIHdoZXJlIGFycmF5cyBhcmUgdGhlIG9ubHkgb2JqZWN0Ki99O1xyXG5cclxuY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xyXG5mdW5jdGlvbiBlbmNvZGVBdFBvc2l0aW9uKHN0cmluZywgdThhcnJheSwgcG9zaXRpb24pIHtcclxuXHRyZXR1cm4gZW5jb2Rlci5lbmNvZGVJbnRvKFxyXG5cdFx0c3RyaW5nLFxyXG5cdFx0cG9zaXRpb24gPyB1OGFycmF5LnN1YmFycmF5KHBvc2l0aW9uIHwgMCkgOiB1OGFycmF5LFxyXG5cdCk7XHJcbn1cclxuY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xyXG5mdW5jdGlvbiBkZWNvZGVUZXh0KHU4YXJyYXksIHN0YXJ0UG9zPTAsIGVuZFBvcz1JbmZpbml0eSl7XHJcblx0cmV0dXJuIGRlY29kZXIuZGVjb2RlKHU4YXJyYXkpLnNsaWNlKHN0YXJ0UG9zLCBlbmRQb3MpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2VuQmFubmVkV29yZHNSZWdleCguLi5hcmdzKSB7XHJcbiAgbGV0IHBhcnNlZCA9IFtdO1xyXG4gIGFyZ3MuZm9yRWFjaChlID0+IHtcclxuICAgIHBhcnNlZC5wdXNoKFwiKFxcXFxTKlwiICtcclxuICAgICAgZS5yZXBsYWNlKC9bYdCwXS9nbWksIFwiW2HQsDRdXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9bY9GBXS9nbWksIFwiW2PRgV1cIilcclxuICAgICAgLnJlcGxhY2UoL1tl0LXRkV0vZ21pLCBcIltl0LXRkTNdXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9bb9C+XS9nbWksIFwiW2/QvjBdXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9bcNGAXS9nbWksIFwiW3DRgF1cIilcclxuICAgICAgLnJlcGxhY2UoL1t00YJdL2dtaSwgXCJbdNGCXVwiKVxyXG4gICAgICAucmVwbGFjZSgvW3nRg10vZ21pLCBcIlt50YNdXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9baNC9XS9nbWksIFwiW2jQvV1cIilcclxuICAgICAgLnJlcGxhY2UoL1tr0LpdL2dtaSwgXCJba9C6XVwiKVxyXG4gICAgICAucmVwbGFjZSgvW3jRhV0vZ21pLCBcIlt40YVdXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9bYtCyXS9nbWksIFwiW2LQsl1cIilcclxuICAgICAgLnJlcGxhY2UoL1tu0L9dL2dtaSwgXCJbbtC/XVwiKVxyXG4gICAgICAucmVwbGFjZSgvW23QvF0vZ21pLCBcIltt0LxdXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9baTFdL2dtaSwgXCJbaTFdXCIpXHJcbiAgICAgIC5yZXBsYWNlKC9bIF9cXC1dL2dtaSwgXCJbIF9cXFxcLV1cIikgK1xyXG4gICAgICBcIlxcXFxTKilcIik7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIG5ldyBSZWdFeHAocGFyc2VkLmpvaW4oXCJ8XCIpLCBcImdtaVwiKTsgXHJcbn1cclxubGV0IGJhbm5lZFdvcmRzUmVnZXggPSBnZW5CYW5uZWRXb3Jkc1JlZ2V4KFwibmlnZ2VyXCIsIFwibmlnZ2FcIiwgXCJjaGlua1wiLCBcImNoaW5nIGNob25nXCIsIFwib25yZW5kZXJcIiwgXCJ0cmFzaCB2ZXJzaW9uXCIsIFwiZXZhZGVzLlwiLCBcInplcm90aXhcIiwgXCJ6ZXJvIHRpeFwiLCBcInplcm9cIiwgXCIwdGl4XCIsIFwiY3VudFwiLCBcImFzc2hvbGVcIiwgXCJwb3JuXCIsIFwiaGVudGFpXCIsIFwic2x1dFwiLCBcIndob3JlXCIsIFwiZmFnZ290XCIsIFwib24gcmVuZGVyXCIsIFwiZmFrZSBldmFkZXNcIiwgXCJyZWFsIGV2YWRlc1wiKVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyVGV4dCh0ZXh0KXtcclxuXHRyZXR1cm4gdGV4dC5yZXBsYWNlKGJhbm5lZFdvcmRzUmVnZXgsIFwiW2h0dHBzOi8vZXZhZGVzeC5pby9dXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdHJpbmdIVE1MU2FmZShzdHIpIHtcclxuXHRyZXR1cm4gc3RyLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcclxuXHRcdC5yZXBsYWNlKC8gL2csICcmbmJzcDsnKVxyXG5cdFx0LnJlcGxhY2UoLzwvZywgJyZsdDsnKVxyXG5cdFx0LnJlcGxhY2UoLz4vZywgJyZndDsnKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgeyB1bnRpbCwgU0NST0xMX1BBUkFNUywgYmxlbmRDb2xvciwgZW52aXJvbm1lbnQsIGVuY29kZUF0UG9zaXRpb24sIGRlY29kZVRleHQsIHN0cmluZ0hUTUxTYWZlLCBmaWx0ZXJUZXh0IH07IiwiaW1wb3J0IHNoYXJlZCBmcm9tICcuLi9zaGFyZWQvc2hhcmVkLmpzJztcclxuaW1wb3J0ICcuL21zZ3BhY2tyLmpzJztcclxuXHJcbi8vIHVzZWQgZm9yIGRlY29kaW5nIGNoYXQgbWVzc2FnZXNcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uL2NsaWVudC91dGlscy5qcyc7XHJcbmNvbnN0IHtkZWNvZGVUZXh0LCBmaWx0ZXJUZXh0LCBzdHJpbmdIVE1MU2FmZX0gPSBVdGlscztcclxuXHJcbmNvbnN0IEhPU1QgPSBsb2NhdGlvbi5vcmlnaW4ucmVwbGFjZSgvXmh0dHAvLCAnd3MnKTtcclxubGV0IHdzLCBuZXh0TXNnRmxhZywgZ2FtZVN0YXJ0ZWQgPSBmYWxzZSwgY2FuTG9hZD1mYWxzZTtcclxubGV0IHN5bmNNYXBGbj11bmRlZmluZWQsIGxhdGVTeW5jTWFwPWZhbHNlO1xyXG5zaGFyZWQubWFwRW50cnlUaW1lID0gMDtcclxuc2hhcmVkLmRpc2Nvbm5lY3RlZCA9IGZhbHNlO1xyXG5jb25zdCBtZXNzYWdlUXVldWUgPSBbXTtcclxuc2hhcmVkLnNlbmQgPSAoZGF0YSkgPT4ge1xyXG4gICAgbWVzc2FnZVF1ZXVlLnB1c2goZGF0YSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRXUygpIHtcclxuICAgIHdzID0gbmV3IFdlYlNvY2tldChIT1NUKTtcclxuICAgIHdzLmJpbmFyeVR5cGUgPSBcImFycmF5YnVmZmVyXCI7IC8vIHNlbmRzIG1lc3NhZ2VzIHdpdGggYmluYXJ5IGFuZCBzdHVmZiBvLW8geWVzIGkgYW0gdmVyeSBzbWFydFxyXG5cclxuICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgaWYobmV4dE1zZ0ZsYWcgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VNYXBbbmV4dE1zZ0ZsYWddKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgIG5leHRNc2dGbGFnID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBuZXcgVWludDhBcnJheShkYXRhLmRhdGEpO1xyXG4gICAgICAgIGlmKG1lc3NhZ2VNYXBbZGVjb2RlZFswXV0gPT09IHVuZGVmaW5lZCkgY29uc29sZS5sb2coZGVjb2RlZCk7XHJcbiAgICAgICAgbWVzc2FnZU1hcFtkZWNvZGVkWzBdXShkZWNvZGVkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdzLm9ub3BlbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdGVkIHRvIHRoZSBzZXJ2ZXIhJyk7XHJcbiAgICAgICAgc2hhcmVkLnNlbmQgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB3cy5zZW5kKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbWVzc2FnZVF1ZXVlLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgc2hhcmVkLnNlbmQobWVzc2FnZVF1ZXVlW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd3Mub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgICBpZihzaGFyZWQudXNlcm5hbWUgIT09IG51bGwpIHNoYXJlZC5kaXNjb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJzb2NrZXQgY2xvc2VkLicpOy8vIEF0dGVtcHRpbmcgdG8gcmVjb25uZWN0Li4uXHJcbiAgICAgICAgLy8gVE9ETzogcmVjb25uZWN0aW9uLlxyXG4gICAgICAgIHNoYXJlZC5zZW5kID0gKCkgPT4ge307XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmKHNoYXJlZC5pc0VkaXRvciA9PT0gZmFsc2UpIGluaXRXUygpO1xyXG5cclxuc2hhcmVkLmNoYW5nZU1hcCA9IGZ1bmN0aW9uIGNoYW5nZU1hcCh1cmw9YC9tYXBzL2h1YmAsIG1ldGhvZD0nR0VUJywgaGVhZGVycz1uZXcgSGVhZGVycygpLCBvblJlamVjdGVkPSh1cmwpPT57Y29uc29sZS5lcnJvcihgZmFpbGVkIHRvIGxvYWQgbWFwIHVybCAke3VybH1gKTt9KXtcclxuICAgIGxhdGVTeW5jTWFwID0gZmFsc2U7IHNoYXJlZC5tYXBFbnRyeVRpbWUgPSB3aW5kb3cuZnJhbWVzO1xyXG4gICAgaGVhZGVycy5hcHBlbmQoJ2lkJywgc2hhcmVkLmF1dGhJZCk7XHJcbiAgICBmZXRjaChsb2NhdGlvbi5vcmlnaW4gKyB1cmwsIHttZXRob2QsIGhlYWRlcnN9KS50aGVuKGFzeW5jIChkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbGV2ZWxEYXRhID0gYXdhaXQgZC50ZXh0KCk7XHJcbiAgICAgICAgaWYobGV2ZWxEYXRhID09PSAnbicpIHtvblJlamVjdGVkKHVybCk7IHJldHVybjt9XHJcbiAgICAgICAgY29uc3QgW3BsYXllcnMsIHNlbGZJZF0gPSBKU09OLnBhcnNlKGQuaGVhZGVycy5nZXQoXCJYLUluaXQtRGF0YVwiKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByZXZTY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZVNjcmlwdCcpO1xyXG4gICAgICAgIGlmKHByZXZTY3JpcHQgIT09IG51bGwpIHByZXZTY3JpcHQucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIHNoYXJlZC5yZXNldEdhbWUoKTtcclxuICAgICAgICBzaGFyZWQubWFwUGF0aCA9IHVybDtcclxuICAgICAgICBzaGFyZWQucGxheWVycy5sZW5ndGggPSBzaGFyZWQub2JzdGFjbGVzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGNhbkxvYWQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICBzLmlkID0gXCJnYW1lU2NyaXB0XCI7XHJcbiAgICAgICAgcy50ZXh0ID0gbGV2ZWxEYXRhO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwbGF5ZXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYocGxheWVyc1tpXSA9PT0gdW5kZWZpbmVkIHx8IHBsYXllcnNbaV0gPT09IG51bGwpIHtzaGFyZWQucGxheWVyc1tpXSA9IHVuZGVmaW5lZDsgY29udGludWU7fVxyXG4gICAgICAgICAgICBjb25zdCBwbGF5ZXJEYXRhID0gcGxheWVyc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgcCA9IGNyZWF0ZVBsYXllckZyb21EYXRhKHBsYXllckRhdGEpO1xyXG4gICAgICAgICAgICBzaGFyZWQucGxheWVyc1tpXSA9IHA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzaGFyZWQuc2VsZklkID0gc2VsZklkO1xyXG5cclxuICAgICAgICBzaGFyZWQud29uID0gZmFsc2U7XHJcbiAgICAgICAgaWYoIWdhbWVTdGFydGVkKSB7XHJcbiAgICAgICAgICAgIHNoYXJlZC5zdGFydEdhbWUoKTtcclxuICAgICAgICAgICAgZ2FtZVN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNoYXJlZC5yZXNwYXduUGxheWVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxud2luZG93LmxvYWRNYXAgPSAoSSkgPT4ge1xyXG4gICAgaWYoY2FuTG9hZCA9PT0gZmFsc2UpIHJldHVybjtcclxuICAgIGNhbkxvYWQgPSBmYWxzZTtcclxuICAgIEkoc2hhcmVkKTtcclxuXHJcbiAgICBpZihzeW5jTWFwRm4gIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgc3luY01hcEZuKCk7XHJcbiAgICAgICAgc3luY01hcEZuID0gdW5kZWZpbmVkO1xyXG4gICAgfSBlbHNlIGxhdGVTeW5jTWFwID0gdHJ1ZTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZFRvTGVhZGVyYm9hcmQocGxheWVyTmFtZSwgbWFwTmFtZSl7XHJcbiAgICBsZXQgbWFwRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGxlYWRlcmJvYXJkLW1hcC0ke21hcE5hbWV9YCk7XHJcbiAgICBpZihtYXBEaXYgPT09IG51bGwpe1xyXG4gICAgICAgIC8vIGNyZWF0ZSBtYXBEaXZcclxuICAgICAgICBtYXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtYXBEaXYuY2xhc3NMaXN0LmFkZChcImxiLWdyb3VwXCIpO1xyXG4gICAgICAgIG1hcERpdi5pZCA9IGBsZWFkZXJib2FyZC1tYXAtJHttYXBOYW1lfWA7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBzaGFyZWQubWFwRGlmZmljdWx0aWVzW21hcE5hbWVdID8/IDA7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheU1hcE5hbWUgPSBzdHJpbmdIVE1MU2FmZShzaGFyZWQubWFwTGVhZGVyYm9hcmROYW1lc1ttYXBOYW1lXSA/PyBtYXBOYW1lKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWFwTmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBtYXBEaXYuYXBwZW5kQ2hpbGQobWFwTmFtZURpdik7XHJcbiAgICAgICAgbWFwTmFtZURpdi5jbGFzc0xpc3QuYWRkKCdsYi1uYW1lJyk7XHJcbiAgICAgICAgbWFwTmFtZURpdi5zdHlsZS5jb2xvciA9IChtYXBOYW1lID09PSAnd2lucm9vbScpID8gJyMzNTI4ZTAnIDogc2hhcmVkLmRpZmZpY3VsdHlJbWFnZUNvbG9yc1tNYXRoLmZsb29yKGRpZmZpY3VsdHkpXTtcclxuICAgICAgICBtYXBOYW1lRGl2LmlubmVySFRNTCA9IGRpc3BsYXlNYXBOYW1lO1xyXG5cclxuICAgICAgICBsZWFkZXJib2FyZC5hcHBlbmRDaGlsZChtYXBEaXYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGFkZCB0aGUgcGxheWVyIHRvIHRoZSBtYXBEaXZcclxuICAgIGNvbnN0IHBsYXllckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcGxheWVyQ29udGFpbmVyLmlkID0gYHBsYXllci1jb250YWluZXItJHtwbGF5ZXJOYW1lfS0ke21hcE5hbWV9YDtcclxuICAgIHBsYXllckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdsYi1wbGF5ZXJzJyk7XHJcbiAgICBtYXBEaXYuYXBwZW5kQ2hpbGQocGxheWVyQ29udGFpbmVyKTtcclxuXHJcbiAgICBjb25zdCBwbGF5ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHBsYXllckNvbnRhaW5lci5hcHBlbmRDaGlsZChwbGF5ZXJEaXYpO1xyXG5cclxuICAgIGNvbnN0IHBsYXllck5hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICBwbGF5ZXJOYW1lRGl2LmNsYXNzTGlzdC5hZGQoJ3BsYXllci1uYW1lJyk7XHJcbiAgICBwbGF5ZXJOYW1lRGl2LmlubmVySFRNTCA9IHBsYXllck5hbWU7XHJcbiAgICBwbGF5ZXJEaXYuYXBwZW5kQ2hpbGQocGxheWVyTmFtZURpdik7XHJcbn1cclxuXHJcbnNoYXJlZC5hZGRDaGF0TWVzc2FnZSA9IChtZXNzYWdlLCB0eXBlKSA9PiB7XHJcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGlmICh0eXBlICE9PSAnc3lzdGVtJykgZGl2LmNsYXNzTGlzdC5hZGQoJ2NoYXQtbWVzc2FnZScpO1xyXG4gICAgZWxzZSBkaXYuY2xhc3NMaXN0LmFkZCgnc3lzdGVtLW1lc3NhZ2UnKTtcclxuXHJcbiAgICBjb25zdCBjaGF0UHJlZml4TWFwID0ge1xyXG4gICAgICAgIG5vcm1hbDogJycsXHJcbiAgICAgICAgc3lzdGVtOiAnPHNwYW4gY2xhc3M9XCJyYWluYm93XCI+W1NFUlZFUl08L3NwYW4+JyxcclxuICAgICAgICBkZXY6ICc8c3BhbiBjbGFzcz1cInJhaW5ib3dcIj5bREVWXTwvc3Bhbj4nLFxyXG4gICAgICAgIGd1ZXN0OiAnPHNwYW4gY2xhc3M9XCJndWVzdFwiPidcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgY2hhdFN1ZmZpeE1hcCA9IHtcclxuICAgICAgICBub3JtYWw6ICcnLFxyXG4gICAgICAgIHN5c3RlbTogJycsXHJcbiAgICAgICAgZGV2OiAnJyxcclxuICAgICAgICBndWVzdDogJzwvc3Bhbj4nXHJcbiAgICB9O1xyXG5cclxuICAgIGRpdi5pbm5lckhUTUwgPSBjaGF0UHJlZml4TWFwW3R5cGVdICsgbWVzc2FnZSArIGNoYXRTdWZmaXhNYXBbdHlwZV07XHJcbiAgICBjb25zdCBjaGF0TWVzc2FnZURpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWRpdicpO1xyXG4gICAgY2hhdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgIGNoYXRNZXNzYWdlRGl2LnNjcm9sbFRvcCA9IGNoYXRNZXNzYWdlRGl2LnNjcm9sbEhlaWdodDtcclxufVxyXG5cclxuLy8gZmlyc3QgYnl0ZSBlbmNvZGVzIHRoZSBtZXNzYWdlIHR5cGVcclxuY29uc3QgbGVhZGVyYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGVhZGVyYm9hcmQtZGl2Jyk7XHJcbmNvbnN0IG1lc3NhZ2VNYXAgPSBbXHJcbiAgICAvLyAwIC0gc2V0IGF1dGggaWQgKG5vdCBjbGllbnRpZClcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTMyID0gbmV3IFVpbnQzMkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBzaGFyZWQuYXV0aElkID0gdTMyWzFdO1xyXG5cclxuICAgICAgICAvLyBURU1QXHJcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBzaGFyZWQudXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcm5hbWUnKTtcclxuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwYXNzd29yZCcpO1xyXG4gICAgICAgIGlmKHVzZXJuYW1lID09PSBudWxsIHx8IHBhc3N3b3JkID09PSBudWxsKXtcclxuICAgICAgICAgICAgLy8gZ2V0IHR1dG9yaWFsXHJcbiAgICAgICAgICAgIHdpbmRvdy5vbmtleWRvd24oe2NvZGU6ICdLZXlaJywgcmVwZWF0OiBmYWxzZSwgdHlwZTogJ2tleWRvd24nfSk7XHJcbiAgICAgICAgICAgIHNoYXJlZC5jaGFuZ2VNYXAoJy90dXRvcmlhbCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGxvZyBpblxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3UnLCB1c2VybmFtZSk7XHJcbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKCdwJywgcGFzc3dvcmQpO1xyXG4gICAgICAgICAgICBzaGFyZWQuY2hhbmdlTWFwKCcvam9pbicsICdQT1NUJywgaGVhZGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIDEgLSByZWxvYWQgcGFnZSAoZm9yIGhvdCByZWZyZXNoKVxyXG4gICAgKCkgPT4ge1xyXG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgfSxcclxuICAgIC8vIDIgLSBjaGFuZ2UgdG8gY3JlYXRlIGFjY291bnQgcGFnZVxyXG4gICAgKGRhdGEpID0+IHtcclxuICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGxvY2F0aW9uLm9yaWdpbiArICcvY3JlYXRlJyk7XHJcbiAgICB9LFxyXG4gICAgLy8gMyAtIGZsYWcgbmV4dCBtZXNzYWdlIGFzIHR5cGVcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgbmV4dE1zZ0ZsYWcgPSBkYXRhWzFdO1xyXG4gICAgfSxcclxuICAgIC8vIDQgLSBwbGF5ZXIgeCBhbmQgeVxyXG4gICAgKGRhdGEpID0+IHtcclxuICAgICAgICBjb25zdCByYXcgPSBkYXRhLmJ1ZmZlcjtcclxuICAgICAgICBjb25zdCB1MTYgPSBuZXcgVWludDE2QXJyYXkocmF3KTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuXHJcbiAgICAgICAgaWYoaWQgPT09IHNoYXJlZC5zZWxmSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZjMyID0gbmV3IEZsb2F0MzJBcnJheShyYXcpO1xyXG4gICAgICAgIHNoYXJlZC5wbGF5ZXJzW2lkXS5wb3MueCA9IGYzMlsxXTtcclxuICAgICAgICBzaGFyZWQucGxheWVyc1tpZF0ucG9zLnkgPSBmMzJbMl07XHJcbiAgICB9LFxyXG4gICAgLy8gNSAtIG5ldyBwbGF5ZXJcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgbGV0IHAgPSBjcmVhdGVQbGF5ZXJGcm9tRGF0YShtc2dwYWNrci51bnBhY2soZGF0YSkpO1xyXG4gICAgICAgIHNoYXJlZC5wbGF5ZXJzW3AuaWRdID0gcDtcclxuICAgIH0sXHJcbiAgICAvLyA2IC0gcmVtb3ZlIHBsYXllclxyXG4gICAgKGRhdGEpID0+IHtcclxuICAgICAgICBsZXQgaWQgPSBuZXcgVWludDE2QXJyYXkoZGF0YS5idWZmZXIpWzFdO1xyXG4gICAgICAgIHNoYXJlZC5wbGF5ZXJzW2lkXSA9IHVuZGVmaW5lZDtcclxuICAgIH0sXHJcbiAgICAvLyA3IC0gY2hhdCBtZXNzYWdlXHJcbiAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHNoYXJlZC5hZGRDaGF0TWVzc2FnZShcclxuICAgICAgICAgICAgc3RyaW5nSFRNTFNhZmUoZmlsdGVyVGV4dChkZWNvZGVUZXh0KGRhdGEsIDIpKSksXHJcbiAgICAgICAgICAgIFsnbm9ybWFsJywgJ3N5c3RlbScsICdkZXYnLCAnZ3Vlc3QnXVtkYXRhWzFdXVxyXG4gICAgICAgIClcclxuICAgIH0sXHJcbiAgICAvLyA4IC0gdG9nZ2xlIGdvZG1vZGVcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuXHJcbiAgICAgICAgaWYoaWQgPT09IHNoYXJlZC5zZWxmSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgc2hhcmVkLnBsYXllcnNbaWRdLmdvZCA9IGRhdGFbMV0gPT09IDE7XHJcbiAgICB9LFxyXG4gICAgLy8gOSAtIHNldCBzaGlwIGFuZ2xlXHJcbiAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHUxNiA9IG5ldyBVaW50MTZBcnJheShkYXRhLmJ1ZmZlcik7XHJcbiAgICAgICAgY29uc3QgaWQgPSB1MTZbMV07XHJcbiAgICAgICAgaWYoaWQgPT09IHNoYXJlZC5zZWxmSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZjMyID0gbmV3IEZsb2F0MzJBcnJheShkYXRhLmJ1ZmZlcik7XHJcbiAgICAgICAgc2hhcmVkLnBsYXllcnNbaWRdLnNoaXAgPSB0cnVlO1xyXG4gICAgICAgIHNoYXJlZC5wbGF5ZXJzW2lkXS5zaGlwQW5nbGUgPSBmMzJbMV07XHJcbiAgICB9LFxyXG4gICAgLy8gMTAgLSBkaXNhYmxlIHNoaXBcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuICAgICAgICBpZihpZCA9PT0gc2hhcmVkLnNlbGZJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBzaGFyZWQucGxheWVyc1tpZF0uc2hpcCA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8vIDExIC0gc2V0IGdyYXBwbGVcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuICAgICAgICBpZihpZCA9PT0gc2hhcmVkLnNlbGZJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBmMzIgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBzaGFyZWQucGxheWVyc1tpZF0uZ3JhcHBsZSA9IHRydWU7XHJcbiAgICAgICAgc2hhcmVkLnBsYXllcnNbaWRdLmdyYXBwbGVYID0gZjMyWzFdO1xyXG4gICAgICAgIHNoYXJlZC5wbGF5ZXJzW2lkXS5ncmFwcGxlWSA9IGYzMlsyXTtcclxuICAgIH0sXHJcbiAgICAvLyAxMyAtIGRpc2FibGUgZ3JhcHBsZVxyXG4gICAgKGRhdGEpID0+IHtcclxuICAgICAgICBjb25zdCB1MTYgPSBuZXcgVWludDE2QXJyYXkoZGF0YS5idWZmZXIpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gdTE2WzFdO1xyXG4gICAgICAgIGlmKGlkID09PSBzaGFyZWQuc2VsZklkKSByZXR1cm47XHJcblxyXG4gICAgICAgIHNoYXJlZC5wbGF5ZXJzW2lkXS5ncmFwcGxlID0gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLy8gMTMgLSBzZXQgZGVhdGggdGltZXJcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuICAgICAgICBpZihpZCA9PT0gc2hhcmVkLnNlbGZJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBmMzIgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBzaGFyZWQucGxheWVyc1tpZF0uZGVhdGhUaW1lciA9IHRydWU7XHJcbiAgICAgICAgc2hhcmVkLnBsYXllcnNbaWRdLmRlYXRoVGltZSA9IGYzMlsxXTtcclxuICAgIH0sXHJcbiAgICAvLyAxNCAtIGRpc2FibGUgZGVhdGggdGltZXJcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuICAgICAgICBpZihpZCA9PT0gc2hhcmVkLnNlbGZJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBzaGFyZWQucGxheWVyc1tpZF0uZGVhdGhUaW1lciA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8vIDE1IC0gY2hhbmdlIGRlYWRcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuICAgICAgICBpZihpZCA9PT0gc2hhcmVkLnNlbGZJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBzaGFyZWQucGxheWVyc1tpZF0uZGVhZCA9IGRhdGFbMV0gPT09IDE7XHJcbiAgICB9LFxyXG4gICAgLy8gMTYgLSBhZGQgdG8gbGVhZGVyYm9hcmRcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gWzE2LCBsZW4sIG1hcE5hbWUsIHBsYXllck5hbWVdXHJcbiAgICAgICAgY29uc3QgbGVuID0gZGF0YVsxXTtcclxuICAgICAgICBjb25zdCBtYXBOYW1lID0gZGVjb2RlVGV4dChkYXRhLCAyLCBsZW4rMik7XHJcbiAgICAgICAgY29uc3QgcGxheWVyTmFtZSA9IHN0cmluZ0hUTUxTYWZlKGRlY29kZVRleHQoZGF0YSwgbGVuKzIpKTtcclxuICAgICAgICBhZGRUb0xlYWRlcmJvYXJkKHBsYXllck5hbWUsIG1hcE5hbWUpO1xyXG4gICAgfSxcclxuICAgIC8vIDE3IC0gcmVtb3ZlIGZyb20gbGVhZGVyYm9hcmRcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gWzE3LCBsZW4sIG1hcE5hbWUsIHBsYXllck5hbWVdXHJcbiAgICAgICAgY29uc3QgbGVuID0gZGF0YVsxXTtcclxuICAgICAgICBjb25zdCBtYXBOYW1lID0gZGVjb2RlVGV4dChkYXRhLCAyLCBsZW4rMik7XHJcbiAgICAgICAgY29uc3QgcGxheWVyTmFtZSA9IHN0cmluZ0hUTUxTYWZlKGRlY29kZVRleHQoZGF0YSwgbGVuKzIpKTtcclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBwbGF5ZXIgZnJvbSB0aGUgbWFwRGl2XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBsYXllci1jb250YWluZXItJHtwbGF5ZXJOYW1lfS0ke21hcE5hbWV9YCkucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIG1vcmUgcGxheWVycyB0aGVuIHJlbW92ZSB0aGUgbWFwRGl2XHJcbiAgICAgICAgbGV0IG1hcERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBsZWFkZXJib2FyZC1tYXAtJHttYXBOYW1lfWApO1xyXG4gICAgICAgIGlmKG1hcERpdi5jaGlsZHJlbi5sZW5ndGggPT09IDEvKm1hcCBuYW1lKi8pIG1hcERpdi5yZW1vdmUoKTtcclxuICAgIH0sXHJcbiAgICAvLyAxOCAtIHdpbiBtc2dcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gWzE4LCBsZW4sIG1hcE5hbWUsIG5hbWVdXHJcbiAgICAgICAgY29uc3QgbGVuID0gZGF0YVsxXTtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gZGF0YVsyXTtcclxuICAgICAgICBjb25zdCBtYXBOYW1lID0gZGVjb2RlVGV4dChkYXRhLCA4LCBsZW4rOCk7XHJcbiAgICAgICAgY29uc3QgcGxheWVyTmFtZSA9IHN0cmluZ0hUTUxTYWZlKGRlY29kZVRleHQoZGF0YSwgbGVuKzgsIGRhdGEuYnl0ZUxlbmd0aCAtIHBhZGRpbmcpKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eU51bWJlciA9IHNoYXJlZC5tYXBEaWZmaWN1bHRpZXNbbWFwTmFtZV0gPz8gMDtcclxuICAgICAgICBjb25zdCBkaXNwbGF5TWFwTmFtZSA9IHN0cmluZ0hUTUxTYWZlKHNoYXJlZC5tYXBMZWFkZXJib2FyZE5hbWVzW21hcE5hbWVdID8/IG1hcE5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHUzMiA9IG5ldyBVaW50MzJBcnJheShkYXRhLmJ1ZmZlcik7XHJcbiAgICAgICAgY29uc3QgdGltZVRvQmVhdCA9IHUzMlsxXSAvIDEwMDA7XHJcblxyXG4gICAgICAgIGxldCBtcyA9ICgofn4odGltZVRvQmVhdCoxMDApKSUxMDApLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IHNlY29uZHMgPSAofn4odGltZVRvQmVhdCU2MCkpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IG1pbnV0ZXMgPSAofn4oKHRpbWVUb0JlYXQgLyA2MCklNjApKS50b1N0cmluZygpO1xyXG4gICAgICAgIGlmKG1zLmxlbmd0aCA9PT0gMSkgbXMgPSAnMCcgKyBtcztcclxuICAgICAgICBpZihzZWNvbmRzLmxlbmd0aCA9PT0gMSkgc2Vjb25kcyA9ICcwJyArIHNlY29uZHM7XHJcblxyXG4gICAgICAgIGxldCBkaXNwbGF5TWFwVGltZSA9IGAke21pbnV0ZXN9OiR7c2Vjb25kc30uJHttc31gO1xyXG4gICAgICAgIGlmKHRpbWVUb0JlYXQgPiAzNjAwKSB7XHJcbiAgICAgICAgICAgIGlmKG1pbnV0ZXMubGVuZ3RoID09PSAxKSBtaW51dGVzID0gJzAnICsgbWludXRlcztcclxuICAgICAgICAgICAgY29uc3QgaG91cnMgPSAofn4odGltZVRvQmVhdCAvIDM2MDApKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBkaXNwbGF5TWFwVGltZSA9IGAke2hvdXJzfToke21pbnV0ZXN9OiR7c2Vjb25kc30uJHttc31gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ3N5c3RlbS1tZXNzYWdlJyk7XHJcbiAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoYGRpZmZpY3VsdHktJHtNYXRoLmZsb29yKGRpZmZpY3VsdHlOdW1iZXIpfWApO1xyXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJyYWluYm93XCI+W1PGjlJWxo5SXTwvc3Bhbj46ICR7cGxheWVyTmFtZX0gJHtbJ2hhcyBiZWF0ZW4nLCAnY29tcGxldGVkJywgJ3N1cm1vdW50ZWQnLCAnZmluaXNoZWQnXVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqNCldfSB0aGUgJHtkaXNwbGF5TWFwTmFtZX0gaW4gJHtkaXNwbGF5TWFwVGltZX0hYDtcclxuXHJcbiAgICAgICAgY29uc3QgY2hhdE1lc3NhZ2VEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1kaXYnKTtcclxuICAgICAgICBjaGF0TWVzc2FnZURpdi5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgIGNoYXRNZXNzYWdlRGl2LnNjcm9sbFRvcCA9IGNoYXRNZXNzYWdlRGl2LnNjcm9sbEhlaWdodDtcclxuICAgIH0sXHJcbiAgICAvLyAxOSAtIGluaXQgbGVhZGVyYm9hcmRcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgZGF0YVswXSA9IDIyMjtcclxuICAgICAgICBjb25zdCBsYiA9IG1zZ3BhY2tyLnVucGFjayhkYXRhKTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBtYXBOYW1lIGluIGxiKXtcclxuICAgICAgICAgICAgZm9yKGxldCBpZCBpbiBsYlttYXBOYW1lXSl7XHJcbiAgICAgICAgICAgICAgICBhZGRUb0xlYWRlcmJvYXJkKGxiW21hcE5hbWVdW2lkXSwgbWFwTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gMjAgLSBtYXAgcmVxdWVzdFxyXG4gICAgKGRhdGEpID0+IHtcclxuICAgICAgICBpZihzaGFyZWQub2JzdGFjbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIC8vIGdlbmVyYXRlIGZ1bmN0aW9uIG1hcHMgdGhhdCBtYXAgc2ltdWxhdGUgZnVuY3Rpb25zIHRvIHBhY2sgZnVuY3Rpb25zXHJcbiAgICAgICAgc2hhcmVkLmdlbmVyYXRlU3luY01hcHMoKTtcclxuXHJcbiAgICAgICAgbGV0IGluZD0wLCBwYWNrPVtdLCBmbiwgcGFja2VkPWZhbHNlLCBsYXN0SWQ9LTI7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoYXJlZC5vYnN0YWNsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBjb25zdCBvID0gc2hhcmVkLm9ic3RhY2xlc1tpXTtcclxuICAgICAgICAgICAgaWYoby5jdXN0b21TeW5jICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgcGFja1tpbmRdID0gby5jdXN0b21TeW5jKG8pO1xyXG4gICAgICAgICAgICAgICAgcGFja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhY2tbaW5kXSA9IHt9OyBwYWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBvLnNpbXVsYXRlLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICBmbiA9IHNoYXJlZC5zaW11bGF0ZVRvU3luYy5nZXQoby5zaW11bGF0ZVtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZm4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWNrZWQgfHw9IGZuKG8sIHBhY2tbaW5kXSkgIT09IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm4gPSBzaGFyZWQuaWRsZUVmZmVjdFRvU3luYy5nZXQoby5zaW11bGF0ZVtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZm4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWNrZWQgfHw9IGZuKG8sIHBhY2tbaW5kXSkgIT09IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VzdG9tIHNpbXVsYXRlIHcvbyBjdXN0b21TeW5jIC0gZG9udCBwYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgcGFja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKHBhY2tlZCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBpZihsYXN0SWQgIT09IGktMSkgcGFja1tpbmRdLmlkID0gaTtcclxuICAgICAgICAgICAgICAgIGxhc3RJZCA9IGk7XHJcbiAgICAgICAgICAgICAgICBpbmQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYocGFjay5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYocGFja2VkID09PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIHBhY2subGVuZ3RoLS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBidWYgPSBtc2dwYWNrci5wYWNrKHBhY2spO1xyXG5cclxuICAgICAgICAvLyBGaXJzdCBieXRlIGlzIDIyMCBhbHdheXMsIHNvIHJlcGxhY2UgaXQgd2l0aCAwIGFuZCByZWNvbnN0cnVjdCB3aGVuIGNsaWVudCByZWNpZXZlcy5cclxuICAgICAgICBidWZbMF0gPSAyMTtcclxuICAgICAgICBzaGFyZWQuc2VuZChidWYpO1xyXG4gICAgfSxcclxuICAgIC8vIDIxIC0gbWFwIHJlc3BvbnNlXHJcbiAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHN5bmNNYXBGbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgc2hhcmVkLmdlbmVyYXRlQXBwbHlTeW5jTWFwcygpO1xyXG5cclxuICAgICAgICAgICAgZGF0YVswXSA9IDIyMDtcclxuICAgICAgICAgICAgbGV0IHBhY2s7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBwYWNrID0gbXNncGFja3IudW5wYWNrKGRhdGEpO1xyXG4gICAgICAgICAgICB9IGNhdGNoKGUpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZhaWxlZCBzeW5jIG1hcCBwYXJzaW5nIScsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoQXJyYXkuaXNBcnJheShwYWNrKSA9PT0gZmFsc2UgfHwgcGFja1swXS5pZCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxldCBsYXN0SWQgPSBwYWNrWzBdLmlkLCBpZCwgZm47XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcGFjay5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZCA9IHBhY2tbaV0uaWQ7XHJcbiAgICAgICAgICAgICAgICBpZihpZCA9PT0gdW5kZWZpbmVkKSBpZCA9ICsrbGFzdElkO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBsYXN0SWQgPSBpZDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvID0gc2hhcmVkLm9ic3RhY2xlc1tpZF07XHJcbiAgICAgICAgICAgICAgICBpZihvID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKG8uYXBwbHlDdXN0b21TeW5jICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIG8uYXBwbHlDdXN0b21TeW5jKG8sIHBhY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBvLnNpbXVsYXRlLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICBmbiA9IHNoYXJlZC5zaW11bGF0ZVRvQXBwbHlTeW5jLmdldChvLnNpbXVsYXRlW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihmbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKG8sIHBhY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm4gPSBzaGFyZWQuaWRsZUVmZmVjdFRvQXBwbHlTeW5jLmdldChvLnNpbXVsYXRlW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihmbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKG8sIHBhY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYobGF0ZVN5bmNNYXAgPT09IHRydWUpe1xyXG4gICAgICAgICAgICBzeW5jTWFwRm4oKTtcclxuICAgICAgICAgICAgc3luY01hcEZuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBsYXRlU3luY01hcCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGlja3NUb1NpbXVsYXRlID0gKHdpbmRvdy5mcmFtZXMgLSBzaGFyZWQubWFwRW50cnlUaW1lKSAvIDI7XHJcbiAgICAgICAgaWYodGlja3NUb1NpbXVsYXRlID4gMjAwMCkgcmV0dXJuO1xyXG4gICAgICAgIHNoYXJlZC5hY2N1bSArPSBzaGFyZWQuRlJBTUVfVElNRSAqIHRpY2tzVG9TaW11bGF0ZTtcclxuICAgIH0sXHJcbiAgICAvLyAyMiAtIGNoYW5nZSByYWRpdXNcclxuICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGRhdGEuYnVmZmVyKTtcclxuICAgICAgICBjb25zdCBpZCA9IHUxNlsxXTtcclxuICAgICAgICBpZihpZCA9PT0gc2hhcmVkLnNlbGZJZCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGYzMiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YS5idWZmZXIpO1xyXG4gICAgICAgIHNoYXJlZC5wbGF5ZXJzW2lkXS5zYXQuciA9IGYzMlsxXTtcclxuICAgIH1cclxuXVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUGxheWVyRnJvbURhdGEoZGF0YSl7XHJcbiAgICBjb25zdCBwID0gc2hhcmVkLmNyZWF0ZVBsYXllcigpO1xyXG4gICAgLy8gaWYgdGhpcyBnZXRzIGJpZ2dlciB3ZSBtYXkgd2FudCB0b1xyXG4gICAgLy8gZm9yKGxldCBrZXkgaW4gZGF0YSlcclxuICAgIHAucG9zLnggPSBkYXRhLnBvcy54O1xyXG4gICAgcC5wb3MueSA9IGRhdGEucG9zLnk7XHJcbiAgICBwLnNhdC5yID0gZGF0YS5yO1xyXG4gICAgcC5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgcC5kZWFkID0gZGF0YS5kZWFkO1xyXG4gICAgcC5pZCA9IGRhdGEuaWQ7XHJcbiAgICBwLmdvZCA9IGRhdGEuZ29kO1xyXG4gICAgcC5zaGlwID0gZGF0YS5zaGlwO1xyXG4gICAgcC5zaGlwQW5nbGUgPSBkYXRhLnNoaXBBbmdsZTtcclxuICAgIHAuZ3JhcHBsZSA9IGRhdGEuZ3JhcHBsZTtcclxuICAgIHAuZ3JhcHBsZVggPSBkYXRhLmdyYXBwbGVYO1xyXG4gICAgcC5ncmFwcGxlWSA9IGRhdGEuZ3JhcHBsZVk7XHJcbiAgICBwLmRlYXRoVGltZXIgPSBkYXRhLmRlYXRoVGltZXI7XHJcbiAgICBwLmRlYXRoVGltZSA9IGRhdGEuZGVhdGhUaW1lO1xyXG5cclxuICAgIHJldHVybiBwO1xyXG59IiwiaW1wb3J0IHNoYXJlZCBmcm9tICcuLi9zaGFyZWQvc2hhcmVkLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xyXG5jb25zdCB7IHVudGlsLCBlbnZpcm9ubWVudCB9ID0gVXRpbHM7XHJcblxyXG5sZXQgbmV4dENvZGU7XHJcbmNvbnN0IG5leHRDb2RlTG9hZGVkID0gKCkgPT4geyByZXR1cm4gbmV4dENvZGUgIT09IHVuZGVmaW5lZDsgfTtcclxuY29uc3QgaXNTZXJ2ZXIgPSB0eXBlb2YgbG9jYXRpb24gPT09ICd1bmRlZmluZWQnO1xyXG5sZXQgcmVxVXJsID0gaXNTZXJ2ZXIgPT09IHRydWUgPyAnJyA6IGAke2xvY2F0aW9uLm9yaWdpbn0vZ2FtZWA7XHJcbmxldCBsb2FkaW5nQ3VycmVudCA9IGZhbHNlO1xyXG5sZXQgbmV4dEZpbGVOYW1lID0gJyc7XHJcbmxldCBsYXN0RmlsZU5hbWVTdGFjayA9IFtdO1xyXG5sZXQgZm9yd2FyZEZpbGVOYW1lU3RhY2sgPSBbXTtcclxuc2hhcmVkLmxldmVsRmlsZU5hbWUgPSAnJztcclxuXHJcbnNoYXJlZC5pc0V4Q2xpZW50ID0gdHJ1ZTsvLyBURU1QXHJcblxyXG4vLyBuZXZlciBnZXQgY29kZSBmcm9tIHNlcnZlciBpbiBlZGl0b3JcclxuaWYoZW52aXJvbm1lbnQgPT09ICdlZGl0b3InIHx8IGVudmlyb25tZW50ID09PSAnc2VydmVyJyB8fCBzaGFyZWQuaXNFeENsaWVudCA9PT0gdHJ1ZSl7XHJcbiAgICBnZXROZXh0Q29kZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCB1bnRpbCgoKSA9PiB7IHJldHVybiBmYWxzZTsgfSlcclxuICAgIH07XHJcbiAgICBzY3JvbGwgPSAoKSA9PiB7fTtcclxufSBlbHNlIGlmKGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3N0YW5kYWxvbmUnKSA9PT0gdHJ1ZSl7XHJcbiAgICBzaGFyZWQuc3RhbmRhbG9uZSA9IHRydWU7XHJcbiAgICBjb25zdCBzcGxpdCA9IGxvY2F0aW9uLmhyZWYuc3BsaXQoJy8nKTtcclxuICAgIHJlcVVybCArPSAnLycgKyBzcGxpdFtzcGxpdC5sZW5ndGggLSAxXTtcclxuICAgIHNjcm9sbCA9ICgpID0+IHt9O1xyXG59IGVsc2UgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3R1dG9yaWFsQ29tcGxldGVkJykgPT09IG51bGwpIHtcclxuICAgIGxldCBnZXROZXh0Q29kZUxvYWRlZCA9IGZhbHNlO1xyXG4gICAgZ2V0TmV4dENvZGUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgdW50aWwoKCkgPT4ge3JldHVybiBnZXROZXh0Q29kZUxvYWRlZCAhPT0gZmFsc2V9KTtcclxuICAgICAgICByZXR1cm4gZ2V0TmV4dENvZGUoKTtcclxuICAgIH07XHJcbiAgICBzaGFyZWQudHV0b3JpYWwgPSB0cnVlO1xyXG4gICAgKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBleHBzID0gYXdhaXQgaW1wb3J0KCcuL3R1dG9yaWFsLmpzJyk7XHJcbiAgICAgICAgZ2V0TmV4dENvZGUgPSBleHBzLmRlZmF1bHQ7XHJcbiAgICAgICAgZ2V0TmV4dENvZGVMb2FkZWQgPSB0cnVlO1xyXG4gICAgfSkoKTtcclxufVxyXG5cclxuLy8gZ2V0IGZpcnN0IGNvZGVcclxuZ2V0TmV4dENvZGUoKS50aGVuKGFzeW5jIChjb2RlKSA9PiB7XHJcbiAgICAvLyBsb2FkIGZpcnN0IHJlcXVlc3RcclxuICAgIG5leHRDb2RlID0gY29kZTtcclxuICAgIHJlcGxhY2VTY3JpcHQoKTtcclxuXHJcbiAgICBpZihzaGFyZWQuc3RhbmRhbG9uZSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgZ2V0TmV4dENvZGUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHVudGlsKCgpID0+IHsgcmV0dXJuIGZhbHNlOyB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxvYWQgbmV4dCBjb2RlIHdoZW4gaXQgYXJyaXZlc1xyXG4gICAgbmV4dENvZGUgPSBhd2FpdCBmaXJzdE5leHRDb2RlO1xyXG59KVxyXG5cclxuLy8gZ2V0IG5leHQgY29kZVxyXG5sZXQgZmlyc3ROZXh0Q29kZSA9IGdldE5leHRDb2RlKCk7XHJcblxyXG4vLyBvbiBzY3JvbGxcclxuYXN5bmMgZnVuY3Rpb24gc2Nyb2xsKHVwPWZhbHNlKXtcclxuICAgIC8vIGRvbid0IGFsbG93IHNjcm9sbGluZyBpZiB3ZSdyZSBsb2FkaW5nIHRoZSBjdXJyZW50IGNvZGVcclxuICAgIC8vIGl0J2xsIGxvb2sgdGhlIHNhbWUgdG8gdGhlIHVzZXIgYW55d2F5c1xyXG4gICAgaWYobG9hZGluZ0N1cnJlbnQgPT09IHRydWUpIHJldHVybjtcclxuICAgIGlmKHVwID09PSB0cnVlKXtcclxuICAgICAgICBpZihsYXN0RmlsZU5hbWVTdGFjay5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICB2YXIgbGFzdENvZGUgPSBuZXh0Q29kZTtcclxuICAgICAgICBmb3J3YXJkRmlsZU5hbWVTdGFjay5wdXNoKHNoYXJlZC5sZXZlbEZpbGVOYW1lKTtcclxuICAgICAgICBuZXh0Q29kZSA9IGF3YWl0IGdldExhc3RDb2RlKGxhc3RGaWxlTmFtZVN0YWNrLnBvcCgpKTtcclxuICAgIH0gZWxzZSBpZihzaGFyZWQubGV2ZWxGaWxlTmFtZSAhPT0gJycpe1xyXG4gICAgICAgIGxhc3RGaWxlTmFtZVN0YWNrLnB1c2goc2hhcmVkLmxldmVsRmlsZU5hbWUpO1xyXG4gICAgICAgIGlmKGxhc3RGaWxlTmFtZVN0YWNrLmxlbmd0aCA+IDQyKSBsYXN0RmlsZU5hbWVTdGFjay5zaGlmdCgpO1xyXG4gICAgICAgIGlmKGZvcndhcmRGaWxlTmFtZVN0YWNrLmxlbmd0aCAhPT0gMCkgbmV4dENvZGUgPSBhd2FpdCBnZXRMYXN0Q29kZShmb3J3YXJkRmlsZU5hbWVTdGFjay5wb3AoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hhcmVkLnNjcm9sbGluZ1VwID0gdXAgPT09IHRydWU7XHJcbiAgICBzaGFyZWQubGFzdE9ic3RhY2xlcyA9IFtdO1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG9ic3RhY2xlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgc2hhcmVkLmxhc3RPYnN0YWNsZXMucHVzaChvYnN0YWNsZXNbaV0pO1xyXG4gICAgfVxyXG4gICAgZm9yKGxldCBrZXkgaW4gc2hhcmVkLmNvbG9ycyl7XHJcbiAgICAgICAgc2hhcmVkLmxhc3RDb2xvcnNba2V5XSA9IHNoYXJlZC5jb2xvcnNba2V5XTtcclxuICAgICAgICBzaGFyZWQuY29sb3JzW2tleV0gPSBzaGFyZWQuZGVmYXVsdENvbG9yc1trZXldO1xyXG4gICAgfVxyXG4gICAgc2hhcmVkLmxhc3RQbGF5ZXJEYXRhID0gW3BsYXllci5wb3MueCwgcGxheWVyLnBvcy55XTtcclxuXHJcbiAgICAvLyBpZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIG5leHQgY29kZVxyXG4gICAgaWYobmV4dENvZGUgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgLy8gYXBwZW5kIG5ldyBzY3JpcHQgdG8gcnVuIHNlY29uZCBnYW1lXHJcbiAgICAgICAgcmVwbGFjZVNjcmlwdCgpO1xyXG5cclxuICAgICAgICAvLyBhbmltYXRpb24gdGltZXJcclxuICAgICAgICBzaGFyZWQuc2Nyb2xsQW5pbWF0aW9uID0gMDtcclxuXHJcbiAgICAgICAgLy8gZmV0Y2ggbmV3IG5leHQgY29kZVxyXG4gICAgICAgIGlmKHVwID09PSB0cnVlKSBuZXh0Q29kZSA9IGxhc3RDb2RlO1xyXG4gICAgICAgIGVsc2UgbmV4dENvZGUgPSBhd2FpdCBnZXROZXh0Q29kZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBsb2FkaW5nIGN1cnJlbnQsIG5leHRjb2RlXHJcbiAgICAgICAgbG9hZGluZ0N1cnJlbnQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBsb2FkIGJsYW5rIHNjcmVlbiBmb3Igbm93XHJcbiAgICAgICAgcmVtb3ZlU2NyaXB0KCk7XHJcblxyXG4gICAgICAgIC8vIGFuaW1hdGlvbiB0aW1lclxyXG4gICAgICAgIHNoYXJlZC5zY3JvbGxBbmltYXRpb24gPSAwO1xyXG5cclxuICAgICAgICAvLyBjb2RlIGlzIG9uIGl0cyB3YXksIHdhaXQgdW50aWwgaXQgZ2V0cyBoZXJlXHJcbiAgICAgICAgYXdhaXQgdW50aWwobmV4dENvZGVMb2FkZWQsIDE2LjY2KTtcclxuXHJcbiAgICAgICAgLy8gc2V0IGNvZGVcclxuICAgICAgICByZXBsYWNlU2NyaXB0KCk7XHJcblxyXG4gICAgICAgIC8vIHVubG9jayBtdXRleFxyXG4gICAgICAgIGxvYWRpbmdDdXJyZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIGZldGNoIG5ldyBuZXh0IGNvZGVcclxuICAgICAgICBuZXh0Q29kZSA9IGF3YWl0IGdldE5leHRDb2RlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnNoYXJlZC53b24gPSBmYWxzZTtcclxuYXN5bmMgZnVuY3Rpb24gZ2V0TmV4dENvZGUoKXtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVxVXJsKTtcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoICR7cmVxVXJsfWApO1xyXG4gICAgbmV4dEZpbGVOYW1lID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ0ZuJyk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRMYXN0Q29kZShmaWxlTmFtZSl7XHJcbiAgICBjb25zdCBmaWxlTmFtZVdpdGhvdXRUaGVKUyA9IGZpbGVOYW1lLnNsaWNlKDAsIGZpbGVOYW1lLmxlbmd0aC0zKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVxVXJsICsgJy8nICsgZmlsZU5hbWVXaXRob3V0VGhlSlMpO1xyXG4gICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggJHtyZXFVcmx9YCk7XHJcbiAgICBuZXh0RmlsZU5hbWUgPSBmaWxlTmFtZTtcclxuICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XHJcbn1cclxuXHJcbi8vIHJlcGxhY2VzIGNvZGUgcnVubmluZyB3aXRoIG5leHRDb2RlXHJcbmFzeW5jIGZ1bmN0aW9uIHJlcGxhY2VTY3JpcHQoKXtcclxuICAgIHJlbW92ZVNjcmlwdCgpO1xyXG5cclxuICAgIHNoYXJlZC5yZXNldEdhbWUoKTtcclxuICAgIHN0b3BNdXNpYygpO1xyXG5cclxuICAgIGNvbnN0IHNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIHNjcmlwdEVsZW1lbnQuaWQgPSBcImdhbWVTY3JpcHRcIjtcclxuICAgIHNjcmlwdEVsZW1lbnQudGV4dCA9IG5leHRDb2RlO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHRFbGVtZW50KTtcclxuXHJcbiAgICBuZXh0Q29kZSA9IHVuZGVmaW5lZDtcclxuICAgIHNoYXJlZC5sZXZlbEZpbGVOYW1lID0gbmV4dEZpbGVOYW1lO1xyXG59XHJcblxyXG5zaGFyZWQucmVtb3ZlU2NyaXB0ID0gZnVuY3Rpb24gcmVtb3ZlU2NyaXB0KCl7XHJcbiAgICBjb25zdCBsYXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lU2NyaXB0XCIpO1xyXG4gICAgaWYobGFzdCAhPT0gbnVsbCkgbGFzdC5yZW1vdmUoKTtcclxuICAgIHNoYXJlZC5yZXNldEdhbWUoKTtcclxuICAgIHN0b3BNdXNpYygpO1xyXG59XHJcblxyXG5zaGFyZWQucmVzZXRGbnMgPSBbXTtcclxuc2hhcmVkLnJlc2V0R2FtZSA9ICgpID0+IHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGFyZWQucmVzZXRGbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIHNoYXJlZC5yZXNldEZuc1tpXSgpO1xyXG4gICAgfVxyXG4gICAgc2hhcmVkLnJlc2V0Rm5zLmxlbmd0aCA9IHNoYXJlZC5vYnN0YWNsZXMubGVuZ3RoID0gc2hhcmVkLm1vdXNlVXBGdW5jdGlvbnMubGVuZ3RoID0gc2hhcmVkLm1vdXNlRG93bkZ1bmN0aW9ucy5sZW5ndGggPSBzaGFyZWQubW91c2VNb3ZlRnVuY3Rpb25zLmxlbmd0aCA9IHNoYXJlZC5yZXNpemVGbnMubGVuZ3RoID0gMDtcclxuICAgIGlmKHNoYXJlZC5lbnZpcm9ubWVudCAhPT0gJ2VkaXRvcicpIHtzaGFyZWQucmVzcGF3blBsYXllcigpOyBzaGFyZWQuY2hhbmdlQ2FtZXJhU2NhbGUoMSk7IC8qcGxheWVyLnJlbmRlclJhZGl1cyA9IHBsYXllci5zYXQucjsqLyB9XHJcbiAgICBlbHNlIHtzaGFyZWQuaW5maW5pdGVMb29wID0gZmFsc2U7IHNoYXJlZC5vbkVkaXRvclJlc2V0KCk7fVxyXG4gICAgZm9yKGxldCBrZXkgaW4gc2hhcmVkLmRlZmF1bHRDb2xvcnMpIHsgc2hhcmVkLmNvbG9yc1trZXldID0gc2hhcmVkLmRlZmF1bHRDb2xvcnNba2V5XTsgfVxyXG4gICAgaWYoc2hhcmVkLmNvbG9ycy52aWduZXR0ZSAhPT0gdW5kZWZpbmVkKSBzaGFyZWQuY29sb3JzLnZpZ25ldHRlID0gc3RydWN0dXJlZENsb25lKHNoYXJlZC5kZWZhdWx0Q29sb3JzLnZpZ25ldHRlKTtcclxuICAgIHNoYXJlZC5tb3VzZURvd25GdW5jdGlvbnMucHVzaCgoKSA9PiB7XHJcbiAgICAgICAgaWYocGxheWVyLmRlYWQgPT09IHRydWUpIHNoYXJlZC5yZXNwYXduUGxheWVyKCk7XHJcbiAgICB9KVxyXG4gICAgaWYoc2hhcmVkLmFkZFNpZGVNZW51RXZ0TGlzdGVuZXJzICE9PSB1bmRlZmluZWQpIHNoYXJlZC5hZGRTaWRlTWVudUV2dExpc3RlbmVycyhuZXh0RmlsZU5hbWUpO1xyXG4gICAgc2hhcmVkLnNwYXduUG9zaXRpb24ueCA9IDEwMDtcclxuICAgIHNoYXJlZC5zcGF3blBvc2l0aW9uLnkgPSAxMDA7XHJcbiAgICBzaGFyZWQubWFwRGltZW5zaW9ucy54ID0gMjAwMDtcclxuICAgIHNoYXJlZC5tYXBEaW1lbnNpb25zLnkgPSAyMDAwO1xyXG4gICAgc2hhcmVkLmNhbWVyYS5udW1Db250cm9sbGVkQnkgPSAwO1xyXG4gICAgY29uc3QgcGxheWVyID0gc2hhcmVkLnBsYXllcnNbc2hhcmVkLnNlbGZJZF07XHJcbiAgICBpZihwbGF5ZXIgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcGxheWVyLnNhdC5yID0gNDkuNTtcclxuICAgICAgICBwbGF5ZXIuc3BlZWQgPSBwbGF5ZXIuYmFzZVNwZWVkID0gNy4xNjc7XHJcbiAgICB9XHJcbiAgICBzaGFyZWQuaWRUb09icyA9IHt9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzY3JvbGw7IiwiaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xyXG5jb25zdCB7IGVudmlyb25tZW50LCBibGVuZENvbG9yLCBlbmNvZGVBdFBvc2l0aW9uIH0gPSBVdGlscztcclxuaW1wb3J0IHNjcm9sbCBmcm9tICcuL3Njcm9sbC5qcyc7XHJcbmxldCB0b1Njcm9sbCA9IGZhbHNlO1xyXG5pbXBvcnQgc2hhcmVkIGZyb20gJy4uL3NoYXJlZC9zaGFyZWQuanMnO1xyXG5cclxuc2hhcmVkLnJlc3Bhd25QbGF5ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBwbGF5ZXIgPSBzaGFyZWQucGxheWVyc1tzaGFyZWQuc2VsZklkXTtcclxuICAgIGlmKHBsYXllciA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBwbGF5ZXIucG9zLnggPSBzaGFyZWQuc3Bhd25Qb3NpdGlvbi54O1xyXG4gICAgcGxheWVyLnBvcy55ID0gc2hhcmVkLnNwYXduUG9zaXRpb24ueTtcclxuICAgIHBsYXllci5yZW5kZXJSYWRpdXMgPSAwO1xyXG4gICAgcGxheWVyLmRlYWQgPSBmYWxzZTtcclxuICAgIHBsYXllci5mb3JjZXMubGVuZ3RoID0gMDtcclxuICAgIGlmKHNoYXJlZC5kcmFnZ2luZyA9PT0gdHJ1ZSkge3dpbmRvdy5vbm1vdXNldXAoKTsgc2hhcmVkLmRyYWdnaW5nID0gdHJ1ZTt9XHJcbiAgICBlbHNlIHdpbmRvdy5vbm1vdXNldXAoKTtcclxufVxyXG5cclxuY29uc3QgU0FUID0gd2luZG93LlNBVDtcclxuU0FULkNpcmNsZS5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKGFuZ2xlKSB7XHJcbiAgICB0aGlzLnBvcy5yb3RhdGUoYW5nbGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGUoc2hhcGUsIHNpbXVsYXRlcywgZWZmZWN0cywgcGFyYW1zKXtcclxuICAgIGNvbnN0IGUgPSB7XHJcbiAgICAgICAgc2F0OiBzYXRNYXBbc2hhcGVdKHBhcmFtcyksXHJcbiAgICAgICAgc2ltdWxhdGU6IFtdLFxyXG4gICAgICAgIGVmZmVjdDogW10sXHJcbiAgICAgICAgcmVuZGVyU2hhcGU6IHJlbmRlclNoYXBlTWFwW3NoYXBlXSxcclxuICAgICAgICByZW5kZXJFZmZlY3Q6IGVmZmVjdHMubWFwKGUgPT4gcmVuZGVyRWZmZWN0TWFwW2VdKSxcclxuICAgIH07XHJcbiAgICBlLnJlbmRlckVmZmVjdFRpbWVyID0gMDtcclxuICAgIGUucG9zID0gZS5zYXQucG9zO1xyXG4gICAgaWYoc2hhcGUgPT09IDApIGUuc2F0LnIgPSBNYXRoLm1heChlLnNhdC5yLCAwLjAwMSk7XHJcbiAgICBlbHNlIGlmKHNoYXBlID09PSAzKSB7ZS5pc1RleHQgPSB0cnVlOyBlLnRleHQgPSBwYXJhbXMudGV4dDsgZS5mb250U2l6ZSA9IHBhcmFtcy5mb250U2l6ZTsgfVxyXG4gICAgZWxzZSBpZihzaGFwZSA9PT0gNCl7XHJcbiAgICAgICAgZS5zYXQuciA9IE1hdGgubWF4KGUuc2F0LnIsIDAuMDAxKTsgZS5pbm5lclJhZGl1cyA9IE1hdGgubWF4KHBhcmFtcy5pbm5lclJhZGl1cywgMCk7XHJcbiAgICAgICAgZS5zdGFydFNsaWNlID0gcGFyYW1zLnN0YXJ0U2xpY2U7IGUuc3RhcnRTbGljZUFuZ2xlID0gcGFyYW1zLnN0YXJ0U2xpY2VBbmdsZTtcclxuICAgICAgICBlLmVuZFNsaWNlID0gcGFyYW1zLmVuZFNsaWNlOyBlLmVuZFNsaWNlQW5nbGUgPSBwYXJhbXMuZW5kU2xpY2VBbmdsZTtcclxuICAgICAgICBlLnN0YXJ0U2xpY2VBbmdsZVJvdGF0ZVNwZWVkID0gcGFyYW1zLnN0YXJ0U2xpY2VBbmdsZVJvdGF0ZVNwZWVkO1xyXG4gICAgICAgIGUuZW5kU2xpY2VBbmdsZVJvdGF0ZVNwZWVkID0gcGFyYW1zLmVuZFNsaWNlQW5nbGVSb3RhdGVTcGVlZDtcclxuICAgICAgICBpZihwYXJhbXMuY2lyY2xlU2xpY2VSb3RhdGUgIT09IHVuZGVmaW5lZCkgZS5zaW11bGF0ZS5wdXNoKHBhcmFtcy5jaXJjbGVTbGljZVJvdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IGtleSBpbiBzaGFyZWQuc2F0Q29uc3RyYWludHNNYXBbc2hhcGVdKXtcclxuICAgICAgICAvLyBbbWluLCBtYXgsIG11c3RCZUludCwgY3VzdG9tVmFsaWRhdG9yKGUpXVxyXG4gICAgICAgIGNvbnN0IGMgPSBzaGFyZWQuc2F0Q29uc3RyYWludHNNYXBbc2hhcGVdW2tleV07XHJcbiAgICAgICAgaWYoY1syXSA9PT0gdHJ1ZSkgZVtrZXldID0gTWF0aC5yb3VuZChlW2tleV0pO1xyXG4gICAgICAgIGlmKGVba2V5XSA8IGNbMF0pIGVba2V5XSA9IGNbMF07XHJcbiAgICAgICAgZWxzZSBpZihlW2tleV0gPiBjWzFdKSBlW2tleV0gPSBjWzFdO1xyXG4gICAgfVxyXG4gICAgZS5kaW1lbnNpb25zID0gZ2VuZXJhdGVEaW1lbnNpb25zKGUpO1xyXG4gICAgZS50b3BMZWZ0ID0gZ2VuZXJhdGVUb3BMZWZ0Q29vcmRpbmF0ZXMoZSk7XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2ltdWxhdGVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBlLnNpbXVsYXRlLnB1c2goc2ltdWxhdGVNYXBbc2ltdWxhdGVzW2ldXSk7XHJcbiAgICAgICAgaW5pdFNpbXVsYXRlTWFwW3NpbXVsYXRlc1tpXV0oZSwgcGFyYW1zKTtcclxuICAgICAgICBmb3IobGV0IGtleSBpbiBzaGFyZWQuc2ltdWxhdGVDb25zdHJhaW50c01hcFtzaW11bGF0ZXNbaV1dKXtcclxuICAgICAgICAgICAgLy8gW21pbiwgbWF4LCBtdXN0QmVJbnQsIGN1c3RvbVZhbGlkYXRvcihlKV1cclxuICAgICAgICAgICAgY29uc3QgYyA9IHNoYXJlZC5zaW11bGF0ZUNvbnN0cmFpbnRzTWFwW3NpbXVsYXRlc1tpXV1ba2V5XTtcclxuICAgICAgICAgICAgaWYoY1syXSA9PT0gdHJ1ZSkgZVtrZXldID0gTWF0aC5yb3VuZChlW2tleV0pO1xyXG4gICAgICAgICAgICBpZihlW2tleV0gPCBjWzBdKSBlW2tleV0gPSBjWzBdO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGVba2V5XSA+IGNbMV0pIGVba2V5XSA9IGNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGVmZmVjdHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGUuZWZmZWN0LnB1c2goZWZmZWN0TWFwW2VmZmVjdHNbaV1dKTtcclxuICAgICAgICBpbml0RWZmZWN0TWFwW2VmZmVjdHNbaV1dKGUsIHBhcmFtcyk7XHJcbiAgICAgICAgaWYoaWRsZUVmZmVjdE1hcFtlZmZlY3RzW2ldXSAhPT0gdW5kZWZpbmVkKSBlLnNpbXVsYXRlLnB1c2goaWRsZUVmZmVjdE1hcFtlZmZlY3RzW2ldXSk7XHJcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gc2hhcmVkLmVmZmVjdENvbnN0cmFpbnRzTWFwW2VmZmVjdHNbaV1dKXtcclxuICAgICAgICAgICAgLy8gW21pbiwgbWF4LCBtdXN0QmVJbnQsIGN1c3RvbVZhbGlkYXRvcihlKV1cclxuICAgICAgICAgICAgY29uc3QgYyA9IHNoYXJlZC5lZmZlY3RDb25zdHJhaW50c01hcFtlZmZlY3RzW2ldXVtrZXldO1xyXG4gICAgICAgICAgICBpZihjWzJdID09PSB0cnVlKSBlW2tleV0gPSBNYXRoLnJvdW5kKGVba2V5XSk7XHJcbiAgICAgICAgICAgIGlmKGVba2V5XSA8IGNbMF0pIGVba2V5XSA9IGNbMF07XHJcbiAgICAgICAgICAgIGVsc2UgaWYoZVtrZXldID4gY1sxXSkgZVtrZXldID0gY1sxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZihwYXJhbXMuc2YgIT09IHVuZGVmaW5lZCkgZS5zaW11bGF0ZS5wdXNoKHBhcmFtcy5zZik7XHJcbiAgICBpZihwYXJhbXMuZWYgIT09IHVuZGVmaW5lZCkge2UuZWZmZWN0LnB1c2gocGFyYW1zLmVmKTsgZS5yZW5kZXJFZmZlY3QucHVzaChyZW5kZXJFZmZlY3RNYXBbM10pO31cclxuICAgIGlmKHBhcmFtcy5zZiAhPT0gdW5kZWZpbmVkIHx8IHBhcmFtcy5lZiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZS5zaW11bGF0ZS5wdXNoKCgpPT57ZS5kaW1lbnNpb25zPWdlbmVyYXRlRGltZW5zaW9ucyhlKTtlLnRvcExlZnQ9Z2VuZXJhdGVUb3BMZWZ0Q29vcmRpbmF0ZXMoZSk7fSk7XHJcbiAgICAgICAgaWYocGFyYW1zLmN1c3RvbVN5bmMgIT09IHVuZGVmaW5lZCAmJiBwYXJhbXMuYXBwbHlDdXN0b21TeW5jICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAge2UuY3VzdG9tU3luYyA9IHBhcmFtcy5jdXN0b21TeW5jOyBlLmFwcGx5Q3VzdG9tU3luYyA9IHBhcmFtcy5hcHBseUN1c3RvbVN5bmM7fVxyXG4gICAgfTtcclxuICAgIGlmKHBhcmFtcy5jciAhPT0gdW5kZWZpbmVkKSBlLmNyID0gcGFyYW1zLmNyO1xyXG4gICAgXHJcbiAgICBvYnN0YWNsZXMucHVzaChlKTtcclxuXHJcbiAgICAvLyBmaXhpbmcgcG9seWdvbiBwb2ludHMgaWYgdGhleSdyZSBkeW5hbWljYWxseSBnZW5lcmF0ZWRcclxuICAgIGlmKHBhcmFtcy5maXhQb2x5ICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKGVudmlyb25tZW50ID09PSAnZWRpdG9yJyl7XHJcbiAgICAgICAgICAgIGUuc2F0LnNldFBvaW50cyhzaGFyZWQuZml4UG9seWdvbihwYXJhbXMucG9pbnRzKS5tYXAocHQgPT4gbmV3IFNBVC5WZWN0b3IocHRbMF0sIHB0WzFdKSkpO1xyXG4gICAgICAgICAgICBlLmRpbWVuc2lvbnMgPSBnZW5lcmF0ZURpbWVuc2lvbnMoZSk7XHJcbiAgICAgICAgICAgIGUudG9wTGVmdCA9IGdlbmVyYXRlVG9wTGVmdENvb3JkaW5hdGVzKGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIChhc3luYygpPT57XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBpbXBvcnQoJy4uL3NoYXJlZC9maXhQb2x5Z29uLmpzJyk7XHJcbiAgICAgICAgICAgICAgICBlLnNhdC5zZXRQb2ludHMoc2hhcmVkLmZpeFBvbHlnb24ocGFyYW1zLnBvaW50cykubWFwKHB0ID0+IG5ldyBTQVQuVmVjdG9yKHB0WzBdLCBwdFsxXSkpKTtcclxuICAgICAgICAgICAgICAgIGUuZGltZW5zaW9ucyA9IGdlbmVyYXRlRGltZW5zaW9ucyhlKTtcclxuICAgICAgICAgICAgICAgIGUudG9wTGVmdCA9IGdlbmVyYXRlVG9wTGVmdENvb3JkaW5hdGVzKGUpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5zaGFyZWQuQyA9IGNyZWF0ZTtcclxuc2hhcmVkLmlkVG9PYnMgPSB7fTtcclxuc2hhcmVkLnRpY2tGbnMgPSBbXTtcclxuc2hhcmVkLlIgPSByZW1vdmU7XHJcbmZ1bmN0aW9uIHJlbW92ZShpLypuZGV4Ki8pe1xyXG4gICAgaWYoaSA9PT0gb2JzdGFjbGVzLmxlbmd0aC0xKXtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIG9ic3RhY2xlcy5wb3AoKTtcclxuICAgICAgICB9IHdoaWxlKG9ic3RhY2xlc1tvYnN0YWNsZXMubGVuZ3RoLTFdLnJlbW92ZWQgPT09IHRydWUpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbyA9IG9ic3RhY2xlc1tpXTtcclxuICAgIG8uc2ltdWxhdGUubGVuZ3RoID0gby5lZmZlY3QubGVuZ3RoID0gMDtcclxuICAgIGRlbGV0ZSBvLnNmOyBkZWxldGUgby5lZjsgZGVsZXRlIG8uY3I7XHJcbiAgICBvLnBvcy54ID0gLTFFOTtcclxuICAgIG8ucmVtb3ZlZCA9IHRydWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGludGVycG9sYXRlKHN0YXJ0LCBlbmQsIHQpe1xyXG4gICAgcmV0dXJuICgxLXQpICogc3RhcnQgKyB0ICogZW5kO1xyXG59XHJcblxyXG5sZXQgcmVzID0gbmV3IFNBVC5SZXNwb25zZSgpO1xyXG5sZXQgYW5nbGUsIGNvbGxpZGVkID0gZmFsc2U7XHJcbmZ1bmN0aW9uIHNpbXVsYXRlKCl7XHJcbiAgICAvLyBwbGF5ZXIgc2ltdWxhdGlvblxyXG4gICAgY29uc3QgcGxheWVyID0gc2hhcmVkLnBsYXllcnNbc2hhcmVkLnNlbGZJZF07XHJcblxyXG4gICAgaWYoc2hhcmVkLmlzRXhDbGllbnQgPT09IHRydWUgJiYgcGxheWVyLmRlYWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgaWYoc2hhcmVkLnRvdWNoTW9kZSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIHBsYXllci54YSA9IE1hdGguY29zKHNoYXJlZC50b3VjaEFuZ2xlKSAqIHBsYXllci5zcGVlZDtcclxuICAgICAgICAgICAgcGxheWVyLnlhID0gTWF0aC5zaW4oc2hhcmVkLnRvdWNoQW5nbGUpICogcGxheWVyLnNwZWVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBsYXllci54YSA9IChzaGFyZWQuaW5wdXQucmlnaHQgLSBzaGFyZWQuaW5wdXQubGVmdCkgKiBwbGF5ZXIuc3BlZWQ7XHJcbiAgICAgICAgICAgIHBsYXllci55YSA9IChzaGFyZWQuaW5wdXQuZG93biAtIHNoYXJlZC5pbnB1dC51cCkgKiBwbGF5ZXIuc3BlZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihzaGFyZWQuaW5wdXQuc2hpZnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgaWYocGxheWVyLmdvZCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIueGEgKj0gNTtcclxuICAgICAgICAgICAgICAgIHBsYXllci55YSAqPSA1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnhhICo9IDAuNTtcclxuICAgICAgICAgICAgICAgIHBsYXllci55YSAqPSAwLjU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHBsYXllci5zaGlwID09PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIHBsYXllci54diArPSBwbGF5ZXIueGEgKiBwbGF5ZXIuYXhpc1NwZWVkTXVsdFg7XHJcbiAgICAgICAgICAgIHBsYXllci55diArPSBwbGF5ZXIueWEgKiBwbGF5ZXIuYXhpc1NwZWVkTXVsdFk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGxheWVyLnNoaXBBbmdsZSArPSBwbGF5ZXIueGEgKiBwbGF5ZXIuc2hpcFR1cm5TcGVlZDtcclxuXHJcbiAgICAgICAgICAgIHBsYXllci54diAtPSBNYXRoLmNvcyhwbGF5ZXIuc2hpcEFuZ2xlKSAqIHBsYXllci55YSAqIHBsYXllci5heGlzU3BlZWRNdWx0WDtcclxuICAgICAgICAgICAgcGxheWVyLnl2IC09IE1hdGguc2luKHBsYXllci5zaGlwQW5nbGUpICogcGxheWVyLnlhICogcGxheWVyLmF4aXNTcGVlZE11bHRZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGxheWVyLnBvcy54ICs9IHBsYXllci54djtcclxuICAgICAgICBwbGF5ZXIucG9zLnkgKz0gcGxheWVyLnl2O1xyXG5cclxuICAgICAgICBwbGF5ZXIueHYgKj0gcGxheWVyLmZyaWN0aW9uO1xyXG4gICAgICAgIHBsYXllci55diAqPSBwbGF5ZXIuZnJpY3Rpb247XHJcbiAgICB9IGVsc2UgaWYoc2hhcmVkLmRyYWdnaW5nID09PSB0cnVlICYmIHBsYXllci5kZWFkID09PSBmYWxzZSl7XHJcbiAgICAgICAgaWYocGxheWVyLmF4aXNTcGVlZE11bHRYID09PSAwIHx8IHBsYXllci5heGlzU3BlZWRNdWx0WSA9PT0gMCkgYW5nbGUgPSBNYXRoLmF0YW4yKChzaGFyZWQubW91c2VZIC0gcGxheWVyLnBvcy55KSwgKHNoYXJlZC5tb3VzZVggLSBwbGF5ZXIucG9zLngpKTtcclxuICAgICAgICBlbHNlIGFuZ2xlID0gTWF0aC5hdGFuMigoc2hhcmVkLm1vdXNlWSAtIHBsYXllci5wb3MueSkgKiBwbGF5ZXIuYXhpc1NwZWVkTXVsdFgsIChzaGFyZWQubW91c2VYIC0gcGxheWVyLnBvcy54KSAqIHBsYXllci5heGlzU3BlZWRNdWx0WSk7XHJcbiAgICAgICAgcGxheWVyLnh2ID0gTWF0aC5jb3MoYW5nbGUpICogcGxheWVyLnNwZWVkICogcGxheWVyLmF4aXNTcGVlZE11bHRYO1xyXG4gICAgICAgIHBsYXllci55diA9IE1hdGguc2luKGFuZ2xlKSAqIHBsYXllci5zcGVlZCAqIHBsYXllci5heGlzU3BlZWRNdWx0WTtcclxuICAgICAgICBpZihNYXRoLmFicyhwbGF5ZXIueHYpID4gTWF0aC5hYnMocGxheWVyLnBvcy54IC0gc2hhcmVkLm1vdXNlWCkpIHBsYXllci54diA9IHNoYXJlZC5tb3VzZVggLSBwbGF5ZXIucG9zLng7XHJcbiAgICAgICAgaWYoTWF0aC5hYnMocGxheWVyLnl2KSA+IE1hdGguYWJzKHBsYXllci5wb3MueSAtIHNoYXJlZC5tb3VzZVkpKSBwbGF5ZXIueXYgPSBzaGFyZWQubW91c2VZIC0gcGxheWVyLnBvcy55O1xyXG4gICAgICAgIHBsYXllci5wb3MueCArPSBwbGF5ZXIueHY7XHJcbiAgICAgICAgcGxheWVyLnBvcy55ICs9IHBsYXllci55djsgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBsYXllci54diA9IHBsYXllci55diA9IDA7XHJcbiAgICB9XHJcbiAgICBwbGF5ZXIuYXhpc1NwZWVkTXVsdFggPSBwbGF5ZXIuYXhpc1NwZWVkTXVsdFkgPSAxO1xyXG5cclxuICAgIGlmKHBsYXllci5zdG9wRm9yY2VzID09PSB0cnVlKXtcclxuICAgICAgICBwbGF5ZXIuc3RvcEZvcmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIHBsYXllci5mb3JjZXMubGVuZ3RoID0gMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHBsYXllci5mb3JjZXMubGVuZ3RoOyBpKz0zKXtcclxuICAgICAgICAgICAgcGxheWVyLnBvcy54ICs9IHBsYXllci5mb3JjZXNbaV07XHJcbiAgICAgICAgICAgIHBsYXllci5wb3MueSArPSBwbGF5ZXIuZm9yY2VzW2krMV07XHJcblxyXG4gICAgICAgICAgICBwbGF5ZXIuZm9yY2VzW2ldICo9IHBsYXllci5mb3JjZXNbaSsyXTtcclxuICAgICAgICAgICAgcGxheWVyLmZvcmNlc1tpKzFdICo9IHBsYXllci5mb3JjZXNbaSsyXTtcclxuXHJcbiAgICAgICAgICAgIGlmKE1hdGguYWJzKHBsYXllci5mb3JjZXNbaV0pIDwgMC4wMSAmJiBNYXRoLmFicyhwbGF5ZXIuZm9yY2VzW2krMV0pIDwgMC4wMSl7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZm9yY2VzLnNwbGljZShpLDMpO1xyXG4gICAgICAgICAgICAgICAgaS09MztcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKHBsYXllci5kZWFkID09PSB0cnVlKXtcclxuICAgICAgICBwbGF5ZXIuZm9yY2VzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgcGxheWVyLnJlbmRlclJhZGl1cyA9IHBsYXllci5sYXN0QWxpdmVSYWRpdXM7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG9ic3RhY2xlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIC8vIG9ic3RhY2xlIHNpbXVsYXRpb25cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IG9ic3RhY2xlc1tpXS5zaW11bGF0ZS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBvYnN0YWNsZXNbaV0uc2ltdWxhdGVbal0ob2JzdGFjbGVzW2ldLCBwbGF5ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwbGF5ZXIubGFzdEFsaXZlUmFkaXVzID0gcGxheWVyLnNhdC5yO1xyXG4gICAgICAgIGlmKHBsYXllci5nb2QgIT09IHRydWUpe1xyXG4gICAgICAgICAgICBpZihwbGF5ZXIucG9zLnggLSBwbGF5ZXIuc2F0LnIgPCAwKSBwbGF5ZXIucG9zLnggPSBwbGF5ZXIuc2F0LnI7XHJcbiAgICAgICAgICAgIGVsc2UgaWYocGxheWVyLnBvcy54ICsgcGxheWVyLnNhdC5yID4gc2hhcmVkLm1hcERpbWVuc2lvbnMueCkgcGxheWVyLnBvcy54ID0gc2hhcmVkLm1hcERpbWVuc2lvbnMueCAtIHBsYXllci5zYXQucjtcclxuICAgICAgICAgICAgaWYocGxheWVyLnBvcy55IC0gcGxheWVyLnNhdC5yIDwgMCkgcGxheWVyLnBvcy55ID0gcGxheWVyLnNhdC5yO1xyXG4gICAgICAgICAgICBlbHNlIGlmKHBsYXllci5wb3MueSArIHBsYXllci5zYXQuciA+IHNoYXJlZC5tYXBEaW1lbnNpb25zLnkpIHBsYXllci5wb3MueSA9IHNoYXJlZC5tYXBEaW1lbnNpb25zLnkgLSBwbGF5ZXIuc2F0LnI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvYnN0YWNsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgLy8gY29sbGlzaW9uIChkb25lIGJlZm9yZSBzaW11bGF0aW9uIGJlY2F1c2UgdGhhdCBpcyB3aGF0IGxhc3QgcmVuZGVyZWQgZnJhbWUgc2VlcylcclxuICAgICAgICAgICAgICAgIGlmKG9ic3RhY2xlc1tpXS5zYXQuciAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihvYnN0YWNsZXNbaV0uc3RhcnRTbGljZSAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZWQgPSB0ZXN0Q2lyY2xlU2xpY2VDaXJjbGUob2JzdGFjbGVzW2ldLCBwbGF5ZXIsIHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZWQgPSBTQVQudGVzdENpcmNsZUNpcmNsZShvYnN0YWNsZXNbaV0uc2F0LCBwbGF5ZXIuc2F0LCByZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlkZWQgPSBTQVQudGVzdFBvbHlnb25DaXJjbGUob2JzdGFjbGVzW2ldLnNhdCwgcGxheWVyLnNhdCwgcmVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGNvbGxpZGVkID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgb2JzdGFjbGVzW2ldLmVmZmVjdC5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlc1tpXS5lZmZlY3Rbal0ocGxheWVyLCByZXMsIG9ic3RhY2xlc1tpXSwgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzLmNsZWFyKCk7Ly8gVE9ETzogdGVzdCBpZiB0aGlzIGlzIHJlYWxseSBuZWVkZWRcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIG9ic3RhY2xlIHNpbXVsYXRpb25cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBvYnN0YWNsZXNbaV0uc2ltdWxhdGUubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlc1tpXS5zaW11bGF0ZVtqXShvYnN0YWNsZXNbaV0sIHBsYXllcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBqdXN0IGRvIHNpbXVsYXRpb24gaWYgaW4gZ29kbW9kZVxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgb2JzdGFjbGVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBvYnN0YWNsZXNbaV0uc2ltdWxhdGUubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic3RhY2xlc1tpXS5zaW11bGF0ZVtqXShvYnN0YWNsZXNbaV0sIHBsYXllcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHBsYXllci5ncmFwcGxlID09PSB0cnVlKXtcclxuICAgICAgICAgICAgaWYoc2hhcmVkLmlucHV0LmFjdGlvbjEgPT09IHRydWUgJiYgcGxheWVyLmdyYXBwbGVYID09PSAtMSl7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzZXRSYWRpdXMgPSBwbGF5ZXIuc2F0LnI7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2F0LnIgPSBwbGF5ZXIuZ3JhcHBsZVJhbmdlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNsb3Nlc3RBbmdsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHJpb3JpdHlSZXNldFJhZGl1cyA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ3JhcFBvaW50UHJpb3JpdHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvYnN0YWNsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9ic3RhY2xlc1tpXS5pc0dyYXBwbGVQb2ludCA9PT0gdHJ1ZSAmJiBncmFwUG9pbnRQcmlvcml0eSA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eVJlc2V0UmFkaXVzID0gcGxheWVyLnNhdC5yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc2F0LnIgPSBwbGF5ZXIuZ3JhcHBsZVJhbmdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYob2JzdGFjbGVzW2ldLnNhdC5yICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYnN0YWNsZXNbaV0uc3RhcnRTbGljZSAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpZGVkID0gdGVzdENpcmNsZVNsaWNlQ2lyY2xlKG9ic3RhY2xlc1tpXSwgcGxheWVyLCByZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZWQgPSBTQVQudGVzdENpcmNsZUNpcmNsZShvYnN0YWNsZXNbaV0uc2F0LCBwbGF5ZXIuc2F0LCByZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZWQgPSBTQVQudGVzdFBvbHlnb25DaXJjbGUob2JzdGFjbGVzW2ldLnNhdCwgcGxheWVyLnNhdCwgcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYob2JzdGFjbGVzW2ldLmlzR3JhcHBsZVBvaW50ID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29sbGlkZWQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcFBvaW50UHJpb3JpdHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNhdC5yIC09IHJlcy5vdmVybGFwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdEFuZ2xlID0gTWF0aC5hdGFuMihyZXMub3ZlcmxhcE4ueSwgcmVzLm92ZXJsYXBOLngpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZ3JhcFBvaW50UHJpb3JpdHkgPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5zYXQuciA9IHByaW9yaXR5UmVzZXRSYWRpdXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoY29sbGlkZWQgPT09IHRydWUgJiYgZ3JhcFBvaW50UHJpb3JpdHkgPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNhdC5yIC09IHJlcy5vdmVybGFwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0QW5nbGUgPSBNYXRoLmF0YW4yKHJlcy5vdmVybGFwTi55LCByZXMub3ZlcmxhcE4ueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5jbGVhcigpOy8vIFRPRE86IHRlc3QgaWYgdGhpcyBpcyByZWFsbHkgbmVlZGVkXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYocGxheWVyLnNhdC5yIDwgcGxheWVyLmdyYXBwbGVSYW5nZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNhdC5yID0gTWF0aC5tYXgocGxheWVyLnNhdC5yLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ3JhcHBsZVggPSBwbGF5ZXIucG9zLnggLSBNYXRoLmNvcyhjbG9zZXN0QW5nbGUpICogcGxheWVyLnNhdC5yO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5ncmFwcGxlWSA9IHBsYXllci5wb3MueSAtIE1hdGguc2luKGNsb3Nlc3RBbmdsZSkgKiBwbGF5ZXIuc2F0LnI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2F0LnIgPSByZXNldFJhZGl1cztcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHBsYXllci5ncmFwcGxlWCAhPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgaWYoc2hhcmVkLmlucHV0LmFjdGlvbjEgPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ3JhcHBsZVggPSBwbGF5ZXIuZ3JhcHBsZVkgPSAtMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdyYXBwbGVMZW4gPSBNYXRoLnNxcnQoKHBsYXllci5wb3MueCAtIHBsYXllci5ncmFwcGxlWCkgKiogMiArIChwbGF5ZXIucG9zLnkgLSBwbGF5ZXIuZ3JhcHBsZVkpICoqIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBncmFwcGxlQW5nbGUgPSBNYXRoLmF0YW4yKHBsYXllci5ncmFwcGxlWSAtIHBsYXllci5wb3MueSwgcGxheWVyLmdyYXBwbGVYIC0gcGxheWVyLnBvcy54KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLmZvcmNlcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNvcyhncmFwcGxlQW5nbGUpICogZ3JhcHBsZUxlbiAqIHBsYXllci5ncmFwcGxlRm9yY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKGdyYXBwbGVBbmdsZSkgKiBncmFwcGxlTGVuICogcGxheWVyLmdyYXBwbGVGb3JjZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmdyYXBwbGVGcmljXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdiA9IHNoYXJlZC5jb2xvcnMudmlnbmV0dGU7XHJcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gdi5pbm5lckludGVycCl7XHJcbiAgICAgICAgICAgIHYuaW5uZXJJbnRlcnBba2V5XSA9IGludGVycG9sYXRlKHYuaW5uZXJJbnRlcnBba2V5XSwgdi5pbm5lcltrZXldLCAwLjAzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gdi5vdXRlckludGVycCl7XHJcbiAgICAgICAgICAgIHYub3V0ZXJJbnRlcnBba2V5XSA9IGludGVycG9sYXRlKHYub3V0ZXJJbnRlcnBba2V5XSwgdi5vdXRlcltrZXldLCAwLjAzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNoYXJlZC5wbGF5ZXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBjb25zdCBwID0gc2hhcmVkLnBsYXllcnNbaV07XHJcbiAgICAgICAgaWYocCA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcclxuICAgICAgICBpZigocC5pbnRlcnBYLXAucG9zLngpKioyKyhwLmludGVycFktcC5wb3MueSkqKjI+MzUyKioyKXtcclxuICAgICAgICAgICAgcC5pbnRlcnBYID0gcC5wb3MueDtcclxuICAgICAgICAgICAgcC5pbnRlcnBZID0gcC5wb3MueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcC5pbnRlcnBYID0gaW50ZXJwb2xhdGUocC5pbnRlcnBYLCBwLnBvcy54LCAwLjQpO1xyXG4gICAgICAgIHAuaW50ZXJwWSA9IGludGVycG9sYXRlKHAuaW50ZXJwWSwgcC5wb3MueSwgMC40KTtcclxuICAgICAgICBwLnJlbmRlclJhZGl1cyA9IGludGVycG9sYXRlKHAucmVuZGVyUmFkaXVzLCBwLnNhdC5yLCAxIC8gNS40KTtcclxuICAgIH1cclxuXHJcbiAgICBpZihwbGF5ZXIudG91Y2hpbmdOb3JtYWxJbmRleGVzLmxlbmd0aCAhPT0gMCB8fCBwbGF5ZXIubGFzdFRvdWNoaW5nTm9ybWFsSW5kZXhlcy5sZW5ndGggIT09IDApe1xyXG4gICAgICAgIHBsYXllci5sYXN0VG91Y2hpbmdOb3JtYWxJbmRleGVzID0gcGxheWVyLnRvdWNoaW5nTm9ybWFsSW5kZXhlcztcclxuICAgICAgICBwbGF5ZXIudG91Y2hpbmdOb3JtYWxJbmRleGVzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgaWYocGxheWVyLm9uU2FmZSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgcGxheWVyLm9uU2FmZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmKHBsYXllci50aW1lVHJhcE92ZXJyaWRlU2FmZSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIHBsYXllci50aW1lVHJhcE92ZXJyaWRlU2FmZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBsYXllci5kZWFkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKHBsYXllci5kZWF0aFRpbWVyID09PSB0cnVlKXtcclxuICAgICAgICBwbGF5ZXIuZGVhdGhUaW1lLS07XHJcbiAgICAgICAgaWYocGxheWVyLmRlYXRoVGltZSA8IDAgfHwgcGxheWVyLmRlYWQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICBwbGF5ZXIuZGVhdGhUaW1lID0gSW5maW5pdHk7XHJcbiAgICAgICAgICAgIHBsYXllci5kZWF0aFRpbWVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBsYXllci5kZWFkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHNoYXJlZC51NFswXSA9IDE0O1xyXG4gICAgICAgICAgICBzaGFyZWQuc2VuZChzaGFyZWQudTQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBib3VuZGluZyB0aGUgcGxheWVyIGJ5IHRoZSB3YWxsc1xyXG4gICAgcGxheWVyLnRvdWNoaW5nV2FsbCA9IGZhbHNlO1xyXG4gICAgaWYocGxheWVyLnNhdC5yID4gOTAwKSBwbGF5ZXIuc2F0LnIgPSA5MDA7XHJcblxyXG4gICAgaWYocGxheWVyLmdvZCAhPT0gdHJ1ZSl7XHJcbiAgICAgICAgaWYocGxheWVyLnBvcy54IC0gcGxheWVyLnNhdC5yIDwgMCl7XHJcbiAgICAgICAgICAgIHBsYXllci5wb3MueCA9IHBsYXllci5zYXQucjtcclxuICAgICAgICAgICAgcGxheWVyLnRvdWNoaW5nV2FsbCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmKHBsYXllci5wb3MueCArIHBsYXllci5zYXQuciA+IHNoYXJlZC5tYXBEaW1lbnNpb25zLngpe1xyXG4gICAgICAgICAgICBwbGF5ZXIucG9zLnggPSBzaGFyZWQubWFwRGltZW5zaW9ucy54IC0gcGxheWVyLnNhdC5yO1xyXG4gICAgICAgICAgICBwbGF5ZXIudG91Y2hpbmdXYWxsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGxheWVyLnBvcy55IC0gcGxheWVyLnNhdC5yIDwgMCl7XHJcbiAgICAgICAgICAgIHBsYXllci5wb3MueSA9IHBsYXllci5zYXQucjtcclxuICAgICAgICAgICAgcGxheWVyLnRvdWNoaW5nV2FsbCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmKHBsYXllci5wb3MueSArIHBsYXllci5zYXQuciA+IHNoYXJlZC5tYXBEaW1lbnNpb25zLnkpe1xyXG4gICAgICAgICAgICBwbGF5ZXIucG9zLnkgPSBzaGFyZWQubWFwRGltZW5zaW9ucy55IC0gcGxheWVyLnNhdC5yO1xyXG4gICAgICAgICAgICBwbGF5ZXIudG91Y2hpbmdXYWxsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBsYXllci5kZWFkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoc2hhcmVkLnRpY2tGbnMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoYXJlZC50aWNrRm5zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgc2hhcmVkLnRpY2tGbnNbaV0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2hhcmVkLnRpY2tGbnMubGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzY3JvbGxpbmcgaWYgc3BlY2lmaWVkIGJ5IGEgc2ltdWxhdGUgdHlwZVxyXG4gICAgaWYodG9TY3JvbGwgPT09IHRydWUpe1xyXG4gICAgICAgIHRvU2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgaWYoc2hhcmVkLmRyYWdnaW5nID09PSB0cnVlKSB3aW5kb3cub25tb3VzZXVwKCk7XHJcbiAgICAgICAgc2Nyb2xsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LmZyYW1lcysrO1xyXG59XHJcblxyXG5sZXQgcnVubmluZ092ZXJsYXBOID0gbmV3IFNBVC5WZWN0b3IoKSwgcnVubmluZ092ZXJsYXBWID0gbmV3IFNBVC5WZWN0b3IoKTtcclxuY29uc3QgdGVzdENpcmNsZVNsaWNlQ2lyY2xlID0gc2hhcmVkLnRlc3RDaXJjbGVTbGljZUNpcmNsZSA9IChjaXJjbGVTbGljZSwgY2lyY2xlLCByZXMpID0+IHtcclxuICAgIGxldCBjb2xsaXNpb25BbmdsZSwgY29sbGlzaW9uRGlzdFNxLCBndHMsIGx0ZSwgYW5nbGVPdmVyZmxvdywgY29sbGlkZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBkbyBjaXJjbGUgZmlyc3QsIHRoZW4gc2xpY2VzLiBJZiB3ZSBjb2xsaWRlIHdpdGggdGhlIGNpcmNsZSB0aGVuIHdlIGRvbid0IHdhbnQgdG8gY29sbGlkZSB3LyBzbGljZXNcclxuICAgIGNvbGxpc2lvbkFuZ2xlID0gTWF0aC5hdGFuMihjaXJjbGUucG9zLnkgLSBjaXJjbGVTbGljZS5wb3MueSwgY2lyY2xlLnBvcy54IC0gY2lyY2xlU2xpY2UucG9zLngpO1xyXG4gICAgaWYoY29sbGlzaW9uQW5nbGUgPCAwKSBjb2xsaXNpb25BbmdsZSArPSBNYXRoLlBJICogMjtcclxuXHJcbiAgICBndHMgPSBjaXJjbGVTbGljZS5zdGFydFNsaWNlQW5nbGUgPCBjb2xsaXNpb25BbmdsZTtcclxuICAgIGx0ZSA9IGNvbGxpc2lvbkFuZ2xlIDwgY2lyY2xlU2xpY2UuZW5kU2xpY2VBbmdsZTtcclxuICAgIFxyXG4gICAgYW5nbGVPdmVyZmxvdyA9IGNpcmNsZVNsaWNlLnN0YXJ0U2xpY2VBbmdsZSA+IGNpcmNsZVNsaWNlLmVuZFNsaWNlQW5nbGU7XHJcblxyXG4gICAgaWYoYW5nbGVPdmVyZmxvdyA9PT0gdHJ1ZSA/IChndHMgPT09IHRydWUgfHwgbHRlID09PSB0cnVlKSA6IChndHMgPT09IHRydWUgJiYgbHRlID09PSB0cnVlKSl7XHJcbiAgICAgICAgY29sbGlkZWQgPSBTQVQudGVzdENpcmNsZUNpcmNsZShjaXJjbGVTbGljZS5zYXQsIGNpcmNsZS5zYXQsIHJlcyk7XHJcblxyXG4gICAgICAgIGlmKGNvbGxpZGVkID09PSB0cnVlKXtcclxuICAgICAgICAgICAgY29sbGlzaW9uRGlzdFNxID0gKGNpcmNsZS5wb3MueSAtIGNpcmNsZVNsaWNlLnBvcy55KSAqKiAyICsgKGNpcmNsZS5wb3MueCAtIGNpcmNsZVNsaWNlLnBvcy54KSAqKiAyO1xyXG5cclxuICAgICAgICAgICAgaWYoY29sbGlzaW9uRGlzdFNxID4gKChjaXJjbGVTbGljZS5pbm5lclJhZGl1cyArIGNpcmNsZVNsaWNlLnNhdC5yICsgY2lyY2xlLnNhdC5yKSAvIDIpICoqIDIpe1xyXG4gICAgICAgICAgICAgICAgLy8gbm9ybWFsIGNpcmNsZSBjb2xsaXNpb25cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoY29sbGlzaW9uRGlzdFNxIDw9IChjaXJjbGVTbGljZS5pbm5lclJhZGl1cyAtIGNpcmNsZS5zYXQucikgKiogMil7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgdG9vIGZhciBpbnNpZGUsIG5vIGNvbGxpc2lvblxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5vdmVybGFwTi54ID0gcmVzLm92ZXJsYXBOLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5vdmVybGFwVi54ID0gcmVzLm92ZXJsYXBWLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgaW5zaWRlIHRoZSBjaXJjbGUgLSBib3VuZCB0aGUgb3BwIHdheVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5vdmVybGFwTiA9IHJlcy5vdmVybGFwTi5zY2FsZSgtMSwtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLm92ZXJsYXAgPSAoY2lyY2xlU2xpY2Uuc2F0LnIgLSBjaXJjbGVTbGljZS5pbm5lclJhZGl1cyArIGNpcmNsZS5zYXQuciAqIDIpIC0gcmVzLm92ZXJsYXA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLm92ZXJsYXBWID0gbmV3IFNBVC5WZWN0b3IocmVzLm92ZXJsYXBOLnggKiByZXMub3ZlcmxhcCwgcmVzLm92ZXJsYXBOLnkgKiByZXMub3ZlcmxhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYoTWF0aC5hYnMoKGNpcmNsZVNsaWNlLnN0YXJ0U2xpY2VBbmdsZSAtIGNpcmNsZVNsaWNlLmVuZFNsaWNlQW5nbGUpICUgKE1hdGguUEkgKiAyKSkgPCAwLjAwMSl7XHJcbiAgICAgICAgLy8gY2lyY2xlIHNsaWNlcyBhcmUgb24gdG9wIG9mIGVhY2ggb3RoZXIuIFdlIG1pc3NlZCBjb2xsaXNpb24gd2l0aCB0aGUgY2lyY2xlLCBzbyB3ZSdyZSBkb25lXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJ1bm5pbmdPdmVybGFwTi54ID0gcnVubmluZ092ZXJsYXBOLnkgPSAwO1xyXG4gICAgcnVubmluZ092ZXJsYXBWLnggPSBydW5uaW5nT3ZlcmxhcFYueSA9IDA7XHJcblxyXG4gICAgLy8gY29sbGlzaW9uIHdpdGggc3RhcnRTbGljZVxyXG4gICAgaWYoU0FULnRlc3RQb2x5Z29uQ2lyY2xlKGNpcmNsZVNsaWNlLnN0YXJ0U2xpY2UsIGNpcmNsZS5zYXQsIHJlcykgPT09IHRydWUpe1xyXG4gICAgICAgIGNvbGxpZGVkID0gdHJ1ZTtcclxuICAgICAgICBydW5uaW5nT3ZlcmxhcE4ueCArPSByZXMub3ZlcmxhcE4ueDtcclxuICAgICAgICBydW5uaW5nT3ZlcmxhcE4ueSArPSByZXMub3ZlcmxhcE4ueTtcclxuICAgICAgICBydW5uaW5nT3ZlcmxhcFYueCArPSByZXMub3ZlcmxhcFYueDtcclxuICAgICAgICBydW5uaW5nT3ZlcmxhcFYueSArPSByZXMub3ZlcmxhcFYueTtcclxuICAgICAgICByZXMuY2xlYXIoKTtcclxuICAgICAgICByZXMub3ZlcmxhcE4ueCA9IHJlcy5vdmVybGFwTi55ID0gMDtcclxuICAgICAgICByZXMub3ZlcmxhcFYueCA9IHJlcy5vdmVybGFwVi55ID0gMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gY29sbGlzaW9uIHdpdGggZW5kU2xpY2VcclxuICAgIGNvbGxpZGVkIHx8PSBTQVQudGVzdFBvbHlnb25DaXJjbGUoY2lyY2xlU2xpY2UuZW5kU2xpY2UsIGNpcmNsZS5zYXQsIHJlcyk7XHJcblxyXG4gICAgcmVzLm92ZXJsYXBOLnggKz0gcnVubmluZ092ZXJsYXBOLng7XHJcbiAgICByZXMub3ZlcmxhcE4ueSArPSBydW5uaW5nT3ZlcmxhcE4ueTtcclxuICAgIHJlcy5vdmVybGFwTiA9IHJlcy5vdmVybGFwTi5ub3JtYWxpemUoKTtcclxuICAgIHJlcy5vdmVybGFwVi54ICs9IHJ1bm5pbmdPdmVybGFwVi54O1xyXG4gICAgcmVzLm92ZXJsYXBWLnkgKz0gcnVubmluZ092ZXJsYXBWLnk7XHJcbiAgICByZXMub3ZlcmxhcCA9IHJlcy5vdmVybGFwVi54IC8gcmVzLm92ZXJsYXBOLng7XHJcblxyXG4gICAgcmV0dXJuIGNvbGxpZGVkO1xyXG59XHJcblxyXG4vLyAwIC0gY2lyY2xlLCAxIC0gcG9seWdvblxyXG5jb25zdCBjb2xsaXNpb25NYXRyaXggPSBbXHJcbiAgICBTQVQudGVzdENpcmNsZUNpcmNsZSwgU0FULnRlc3RDaXJjbGVQb2x5Z29uLFxyXG4gICAgU0FULnRlc3RQb2x5Z29uQ2lyY2xlLCBTQVQudGVzdFBvbHlnb25Qb2x5Z29uXHJcbl1cclxuc2hhcmVkLmNvbGxpZGUgPSAoYSxiKSA9PiB7XHJcbiAgICByZXMuaGFzQ29sbGlkZWQgPSBjb2xsaXNpb25NYXRyaXhbKGEuc2F0LnIgPT09IHVuZGVmaW5lZCkgKiAyICsgKGIuc2F0LnIgPT09IHVuZGVmaW5lZCldKGEuc2F0LCBiLnNhdCwgcmVzKTtcclxuICAgIHJldHVybiByZXM7Ly8gbWFrZSBzdXJlIHRvIGNsZWFyIGFmdGVyIHVzZSFcclxufVxyXG5zaGFyZWQuYm91bmRBQiA9IChhLGIpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IHNoYXJlZC5jb2xsaWRlKGEsYik7XHJcbiAgICBpZihyZXMuaGFzQ29sbGlkZWQgPT09IHRydWUpIHtcclxuICAgICAgICBhLnBvcy54IC09IHJlcy5vdmVybGFwVi54O1xyXG4gICAgICAgIGEucG9zLnkgLT0gcmVzLm92ZXJsYXBWLnk7XHJcbiAgICB9XHJcbiAgICByZXMuY2xlYXIoKTtcclxufVxyXG5zaGFyZWQuaXNBQkNvbGxpZGluZyA9IChhLGIpID0+IHtcclxuICAgIGlmKGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IHJlcyA9IHNoYXJlZC5jb2xsaWRlKGEsYik7XHJcbiAgICBjb25zdCBoYXNDb2xsaWRlZCA9IHJlcy5oYXNDb2xsaWRlZDtcclxuICAgIHJlcy5jbGVhcigpO1xyXG4gICAgcmV0dXJuIGhhc0NvbGxpZGVkO1xyXG59XHJcblxyXG5jb25zdCBzYXRNYXAgPSBbXHJcbiAgICAvKmNpcmNsZSovXHJcbiAgICAocCkgPT4ge1xyXG4gICAgICAgIC8vIHgseSxyXHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQVQuQ2lyY2xlKG5ldyBTQVQuVmVjdG9yKHAueCwgcC55KSwgcC5yKTtcclxuICAgIH0sXHJcbiAgICAvKnJlY3RhbmdsZSovXHJcbiAgICAocCkgPT4ge1xyXG4gICAgICAgIC8vIHgseSx3LGhcclxuICAgICAgICByZXR1cm4gbmV3IFNBVC5Cb3gobmV3IFNBVC5WZWN0b3IocC54LCBwLnkpLCBwLncsIHAuaCkudG9Qb2x5Z29uKCk7XHJcbiAgICB9LFxyXG4gICAgLypwb2x5Z29uKi9cclxuICAgIChwKSA9PiB7XHJcbiAgICAgICAgLy8gcG9pbnRzOiBbW3gseV0sIC4uLl1cclxuICAgICAgICBpZihwLnBvaW50cy5sZW5ndGggPCAyKSBwLnBvaW50cyA9IHNoYXJlZC5zYXREZWZhdWx0TWFwWzJdLnBvaW50cztcclxuICAgICAgICBwLnggPSAwOyBwLnkgPSAwO1xyXG4gICAgICAgIGNvbnN0IHMgPSBuZXcgU0FULlBvbHlnb24obmV3IFNBVC5WZWN0b3IoKSwgcC5wb2ludHMubWFwKHB0ID0+IG5ldyBTQVQuVmVjdG9yKHB0WzBdLCBwdFsxXSkpKTtcclxuICAgICAgICBzLnBvcy54ID0gcC54O1xyXG4gICAgICAgIHMucG9zLnkgPSBwLnk7XHJcbiAgICAgICAgcmV0dXJuIHM7XHJcbiAgICB9LFxyXG4gICAgLyp0ZXh0Ki9cclxuICAgIChwKSA9PiB7XHJcbiAgICAgICAgaWYoc2hhcmVkLmlzU2VydmVyID09PSB0cnVlKSByZXR1cm4gbmV3IFNBVC5Cb3gobmV3IFNBVC5WZWN0b3IocC54LCBwLnkpLCAxMDAsIDEwMCkudG9Qb2x5Z29uKCk7XHJcbiAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuICAgICAgICBjdHguZm9udCA9IGAke3AuZm9udFNpemV9cHggSW50ZXJgO1xyXG4gICAgICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBjdHgubWVhc3VyZVRleHQocC50ZXh0KTtcclxuICAgICAgICBjb25zdCB3ID0gZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveFJpZ2h0ICsgZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveExlZnQ7XHJcbiAgICAgICAgY29uc3QgaCA9IGRpbWVuc2lvbnMuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50ICsgZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudDtcclxuICAgICAgICBjb25zdCBzID0gbmV3IFNBVC5Cb3gobmV3IFNBVC5WZWN0b3IocC54IC0gdyAvIDIsIHAueSAtIGggLyAyKSwgdywgaCkudG9Qb2x5Z29uKCk7XHJcbiAgICAgICAgcmV0dXJuIHM7XHJcbiAgICB9LFxyXG4gICAgLypjaXJjbGVTbGljZSovXHJcbiAgICAocCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNhdCA9IG5ldyBTQVQuQ2lyY2xlKG5ldyBTQVQuVmVjdG9yKHAueCwgcC55KSwgcC5yKTtcclxuICAgICAgICBjb25zdCBvID0gcDtcclxuICAgICAgICBvLnN0YXJ0U2xpY2VBbmdsZSAlPSBNYXRoLlBJICogMjtcclxuICAgICAgICBvLmVuZFNsaWNlQW5nbGUgJT0gTWF0aC5QSSAqIDI7XHJcbiAgICAgICAgaWYoby5zdGFydFNsaWNlQW5nbGUgPCAwKSBvLnN0YXJ0U2xpY2VBbmdsZSArPSBNYXRoLlBJICogMjtcclxuICAgICAgICBpZihvLmVuZFNsaWNlQW5nbGUgPCAwKSBvLmVuZFNsaWNlQW5nbGUgKz0gTWF0aC5QSSAqIDI7XHJcbiAgICAgICAgby5zdGFydFNsaWNlID0gbmV3IFNBVC5Qb2x5Z29uKG5ldyBTQVQuVmVjdG9yKCksIFtcclxuICAgICAgICAgICAgbmV3IFNBVC5WZWN0b3IoTWF0aC5jb3Moby5zdGFydFNsaWNlQW5nbGUpICogby5yLCBNYXRoLnNpbihvLnN0YXJ0U2xpY2VBbmdsZSkgKiBvLnIpLFxyXG4gICAgICAgICAgICBuZXcgU0FULlZlY3RvcihNYXRoLmNvcyhvLnN0YXJ0U2xpY2VBbmdsZSkgKiBvLmlubmVyUmFkaXVzLCBNYXRoLnNpbihvLnN0YXJ0U2xpY2VBbmdsZSkgKiBvLmlubmVyUmFkaXVzKSxcclxuICAgICAgICBdKTtcclxuICAgICAgICBvLmVuZFNsaWNlID0gbmV3IFNBVC5Qb2x5Z29uKG5ldyBTQVQuVmVjdG9yKCksIFtcclxuICAgICAgICAgICAgbmV3IFNBVC5WZWN0b3IoTWF0aC5jb3Moby5lbmRTbGljZUFuZ2xlKSAqIG8uciwgTWF0aC5zaW4oby5lbmRTbGljZUFuZ2xlKSAqIG8uciksXHJcbiAgICAgICAgICAgIG5ldyBTQVQuVmVjdG9yKE1hdGguY29zKG8uZW5kU2xpY2VBbmdsZSkgKiBvLmlubmVyUmFkaXVzLCBNYXRoLnNpbihvLmVuZFNsaWNlQW5nbGUpICogby5pbm5lclJhZGl1cyksXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgby5zdGFydFNsaWNlLnBvcyA9IG8uZW5kU2xpY2UucG9zID0gc2F0LnBvcztcclxuICAgICAgICBpZihwLnN0YXJ0U2xpY2VBbmdsZVJvdGF0ZVNwZWVkICE9PSAwIHx8IHAuZW5kU2xpY2VBbmdsZVJvdGF0ZVNwZWVkICE9PSAwKXtcclxuICAgICAgICAgICAgcC5jaXJjbGVTbGljZVJvdGF0ZSA9IChvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvLnN0YXJ0U2xpY2VBbmdsZSArPSBvLnN0YXJ0U2xpY2VBbmdsZVJvdGF0ZVNwZWVkO1xyXG4gICAgICAgICAgICAgICAgby5lbmRTbGljZUFuZ2xlICs9IG8uZW5kU2xpY2VBbmdsZVJvdGF0ZVNwZWVkO1xyXG4gICAgICAgICAgICAgICAgby5zdGFydFNsaWNlQW5nbGUgJT0gTWF0aC5QSSAqIDI7XHJcbiAgICAgICAgICAgICAgICBvLmVuZFNsaWNlQW5nbGUgJT0gTWF0aC5QSSAqIDI7XHJcbiAgICAgICAgICAgICAgICBpZihvLnN0YXJ0U2xpY2VBbmdsZSA8IDApIG8uc3RhcnRTbGljZUFuZ2xlICs9IE1hdGguUEkgKiAyO1xyXG4gICAgICAgICAgICAgICAgaWYoby5lbmRTbGljZUFuZ2xlIDwgMCkgby5lbmRTbGljZUFuZ2xlICs9IE1hdGguUEkgKiAyO1xyXG4gICAgICAgICAgICAgICAgby5zdGFydFNsaWNlLnNldFBvaW50cyhbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNBVC5WZWN0b3IoTWF0aC5jb3Moby5zdGFydFNsaWNlQW5nbGUpICogby5zYXQuciwgTWF0aC5zaW4oby5zdGFydFNsaWNlQW5nbGUpICogby5zYXQuciksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNBVC5WZWN0b3IoTWF0aC5jb3Moby5zdGFydFNsaWNlQW5nbGUpICogby5pbm5lclJhZGl1cywgTWF0aC5zaW4oby5zdGFydFNsaWNlQW5nbGUpICogby5pbm5lclJhZGl1cyksXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIG8uZW5kU2xpY2Uuc2V0UG9pbnRzKFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgU0FULlZlY3RvcihNYXRoLmNvcyhvLmVuZFNsaWNlQW5nbGUpICogby5zYXQuciwgTWF0aC5zaW4oby5lbmRTbGljZUFuZ2xlKSAqIG8uc2F0LnIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTQVQuVmVjdG9yKE1hdGguY29zKG8uZW5kU2xpY2VBbmdsZSkgKiBvLmlubmVyUmFkaXVzLCBNYXRoLnNpbihvLmVuZFNsaWNlQW5nbGUpICogby5pbm5lclJhZGl1cyksXHJcbiAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgby5zdGFydFNsaWNlLnBvcyA9IG8uZW5kU2xpY2UucG9zID0gby5zYXQucG9zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzYXQ7XHJcbiAgICB9XHJcbl07XHJcblxyXG4vLyBmb250IGxvYWRpbmcgZml4XHJcbmZ1bmN0aW9uIGZpeEZvbnRzKCkge1xyXG4gICAgY29uc3Qgb3MgPSBzaGFyZWQub2JzdGFjbGVzO1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG9zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihvc1tpXS5pc1RleHQgIT09IHRydWUpIGNvbnRpbnVlO1xyXG4gICAgICAgIGNvbnN0IG9sZERpbWVuc2lvbnMgPSBvc1tpXS5kaW1lbnNpb25zO1xyXG4gICAgICAgIG9zW2ldLmRpbWVuc2lvbnMgPSBnZW5lcmF0ZURpbWVuc2lvbnMob3NbaV0pO1xyXG4gICAgICAgIG9zW2ldLnBvcy54ICs9IChvbGREaW1lbnNpb25zLnggLSBvc1tpXS5kaW1lbnNpb25zLngpIC8gMjtcclxuICAgICAgICBvc1tpXS5wb3MueSArPSAob2xkRGltZW5zaW9ucy55IC0gb3NbaV0uZGltZW5zaW9ucy55KSAvIDI7XHJcbiAgICAgICAgb3NbaV0udG9wTGVmdCA9IGdlbmVyYXRlVG9wTGVmdENvb3JkaW5hdGVzKG9zW2ldKTtcclxuICAgIH1cclxufVxyXG5zZXRUaW1lb3V0KGZpeEZvbnRzLCAxMDAwKTtcclxuc2V0VGltZW91dChmaXhGb250cywgMzAwMCk7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZURpbWVuc2lvbnMobyl7XHJcbiAgICBjb25zdCBzYXQgPSBvLnNhdDtcclxuICAgIGlmKHNhdC5yICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHNhdC5yICogMixcclxuICAgICAgICAgICAgeTogc2F0LnIgKiAyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBpZihvLmlzVGV4dCA9PT0gdHJ1ZSl7XHJcbiAgICAvLyAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgLy8gICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuICAgIC8vICAgICBjdHguZm9udCA9IGAke28uZm9udFNpemV9cHggSW50ZXJgO1xyXG4gICAgLy8gICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBjdHgubWVhc3VyZVRleHQoby50ZXh0KTtcclxuICAgIC8vICAgICBvLndPZmZzZXQgPSAoZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveFJpZ2h0IC0gZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveExlZnQpIC8gMjtcclxuICAgIC8vICAgICBvLmhPZmZzZXQgPSAoZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQgLSBkaW1lbnNpb25zLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50KSAvIDI7IC8vICowLjc1P1xyXG4gICAgLy8gICAgIC8vIGlmKG8ucm90YXRpb24gPT09IHVuZGVmaW5lZCl7XHJcbiAgICAvLyAgICAgICAgIC8vIHJldHVybiB7XHJcbiAgICAvLyAgICAgICAgIC8vICAgICB4OiBkaW1lbnNpb25zLmFjdHVhbEJvdW5kaW5nQm94UmlnaHQgKyBkaW1lbnNpb25zLmFjdHVhbEJvdW5kaW5nQm94TGVmdCxcclxuICAgIC8vICAgICAgICAgLy8gICAgIHk6IGRpbWVuc2lvbnMuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50ICsgZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCxcclxuICAgIC8vICAgICAgICAgLy8gfVxyXG4gICAgLy8gICAgIC8vIH1cclxuICAgIC8vICAgICAvLyBjb25zdCB4ID0gZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveFJpZ2h0ICsgZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveExlZnQ7XHJcbiAgICAvLyAgICAgLy8gY29uc3QgeSA9IGRpbWVuc2lvbnMuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50ICsgZGltZW5zaW9ucy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudDtcclxuXHJcbiAgICAvLyAgICAgLy8gY29uc3QgYyA9IE1hdGguY29zKG8ucm90YXRpb24pOyBjb25zdCBzID0gTWF0aC5zaW4oby5yb3RhdGlvbik7XHJcbiAgICAvLyAgICAgLy8gcmV0dXJuIHtcclxuICAgIC8vICAgICAvLyAgICAgeDogeCAqIGMgKyB5ICogcyxcclxuICAgIC8vICAgICAvLyAgICAgeTogeCAqIHMgKyB5ICogY1xyXG4gICAgLy8gICAgIC8vIH1cclxuICAgIC8vIH1cclxuICAgIFxyXG4gICAgbGV0IHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdDtcclxuICAgIGJvdHRvbSA9IHJpZ2h0ID0gLUluZmluaXR5O1xyXG4gICAgdG9wID0gbGVmdCA9IEluZmluaXR5O1xyXG4gICAgZm9yKGxldCBwIG9mIHNhdC5wb2ludHMpe1xyXG4gICAgICAgIGlmKHAueCA8IGxlZnQpIGxlZnQgPSBwLng7XHJcbiAgICAgICAgaWYocC54ID4gcmlnaHQpIHJpZ2h0ID0gcC54O1xyXG4gICAgICAgIGlmKHAueSA+IGJvdHRvbSkgYm90dG9tID0gcC55O1xyXG4gICAgICAgIGlmKHAueSA8IHRvcCkgdG9wID0gcC55O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogcmlnaHQgLSBsZWZ0LFxyXG4gICAgICAgIHk6IGJvdHRvbSAtIHRvcFxyXG4gICAgfVxyXG59XHJcbnNoYXJlZC5nZW5lcmF0ZURpbWVuc2lvbnMgPSBnZW5lcmF0ZURpbWVuc2lvbnM7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVRvcExlZnRDb29yZGluYXRlcyhvKXtcclxuICAgIGxldCB0b3BMZWZ0WCA9IG8ucG9zLngsIHRvcExlZnRZID0gby5wb3MueTtcclxuICAgIGlmKG8uc2F0LnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRvcExlZnRYIC09IG8uc2F0LnI7XHJcbiAgICAgICAgdG9wTGVmdFkgLT0gby5zYXQucjsgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBtaW5YID0gSW5maW5pdHk7XHJcbiAgICAgICAgbGV0IG1pblkgPSBJbmZpbml0eTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgby5zYXQucG9pbnRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYoby5zYXQucG9pbnRzW2ldLnggPCBtaW5YKSBtaW5YID0gby5zYXQucG9pbnRzW2ldLng7XHJcbiAgICAgICAgICAgIGlmKG8uc2F0LnBvaW50c1tpXS55IDwgbWluWSkgbWluWSA9IG8uc2F0LnBvaW50c1tpXS55O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b3BMZWZ0WCArPSBtaW5YO1xyXG4gICAgICAgIHRvcExlZnRZICs9IG1pblk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge3g6IHRvcExlZnRYLCB5OiB0b3BMZWZ0WX07XHJcbn1cclxuc2hhcmVkLmdlbmVyYXRlVG9wTGVmdENvb3JkaW5hdGVzID0gZ2VuZXJhdGVUb3BMZWZ0Q29vcmRpbmF0ZXM7XHJcblxyXG5zaGFyZWQuc2F0TWFwSTJOID0gW1xyXG4gICAgJ2NpcmNsZScsXHJcbiAgICAncmVjdGFuZ2xlJyxcclxuICAgICdwb2x5Z29uJyxcclxuICAgICd0ZXh0JyxcclxuICAgICdjaXJjbGVTbGljZSdcclxuXTtcclxuXHJcbnNoYXJlZC5zYXRDb25zdHJhaW50c01hcCA9IFtcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIHtmb250U2l6ZTogWzFdfSxcclxuICAgIHVuZGVmaW5lZCxcclxuXTtcclxuXHJcbnNoYXJlZC5zYXREZWZhdWx0TWFwID0gW1xyXG4gICAgLy8gY2lyY2xlXHJcbiAgICB7XHJcbiAgICAgICAgeDogMzAwLFxyXG4gICAgICAgIHk6IDEwMCxcclxuICAgICAgICByOiAxMDBcclxuICAgIH0sXHJcbiAgICAvLyByZWN0YW5nbGVcclxuICAgIHtcclxuICAgICAgICB4OiAwLFxyXG4gICAgICAgIHk6IDAsXHJcbiAgICAgICAgdzogMjAwLFxyXG4gICAgICAgIGg6IDIwMFxyXG4gICAgfSxcclxuICAgIC8vIHBvbHlnb25cclxuICAgIHtcclxuICAgICAgICBwb2ludHM6IFtbMCw0MDBdLFs1MCwyMDBdLFsxNTAsMjAwXSxbMjAwLDQwMF1dLFxyXG4gICAgfSxcclxuICAgIC8vIHRleHRcclxuICAgIHtcclxuICAgICAgICB4OiAzMDAsXHJcbiAgICAgICAgeTogMjUwLFxyXG4gICAgICAgIHRleHQ6ICdUZXh0JyxcclxuICAgICAgICBmb250U2l6ZTogODAsXHJcbiAgICB9LFxyXG4gICAgLy8gY2lyY2xlU2xpY2VcclxuICAgIHtcclxuICAgICAgICB4OiAzMDAsXHJcbiAgICAgICAgeTogMzAwLFxyXG4gICAgICAgIHI6IDEwMCxcclxuICAgICAgICBpbm5lclJhZGl1czogNTAsXHJcbiAgICAgICAgc3RhcnRTbGljZUFuZ2xlOiAwLFxyXG4gICAgICAgIGVuZFNsaWNlQW5nbGU6IE1hdGguUEksXHJcbiAgICAgICAgc3RhcnRTbGljZUFuZ2xlUm90YXRlU3BlZWQ6IDAsXHJcbiAgICAgICAgZW5kU2xpY2VBbmdsZVJvdGF0ZVNwZWVkOiAwXHJcbiAgICB9XHJcbl1cclxuXHJcbmNvbnN0IFRBVSA9IE1hdGguUEkgKiAyO1xyXG5jb25zdCByZW5kZXJTaGFwZU1hcCA9IFtcclxuICAgIC8qY2lyY2xlKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgY3R4LmFyYyhvLnBvcy54LCBvLnBvcy55LCBvLnNhdC5yLCAwLCBUQVUpO1xyXG4gICAgfSxcclxuICAgIC8qcmVjdGFuZ2xlKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgLy8gby5zYXQuY2FsY1BvaW50c1swXSBpcyBhdCAwLDAgc28gd2UgY2FuIGRyb3AgdGhhdCBmcm9tIHRoZSBmaXJzdCB0d28gYXJnc1xyXG4gICAgICAgIGlmKG8ucm90YXRpb24gIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJlbmRlclNoYXBlTWFwWzJdKG8pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN0eC5yZWN0KG8udG9wTGVmdC54LCBvLnRvcExlZnQueSwgby5kaW1lbnNpb25zLngsIG8uZGltZW5zaW9ucy55KTtcclxuICAgIH0sXHJcbiAgICAvKnBvbHlnb24qL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgby5zYXQucG9pbnRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyhvLnBvcy54ICsgby5zYXQucG9pbnRzW2ldLngsIG8ucG9zLnkgKyBvLnNhdC5wb2ludHNbaV0ueSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN0eC5saW5lVG8oby5wb3MueCArIG8uc2F0LnBvaW50c1swXS54LCBvLnBvcy55ICsgby5zYXQucG9pbnRzWzBdLnkpO1xyXG4gICAgfSxcclxuICAgIC8qdGV4dCovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIC8vIGRyYXcgcmVjdGFuZ2xlIGZvciBjbGlwcGluZyBwdXJwb3Nlc1xyXG4gICAgICAgIHJlbmRlclNoYXBlTWFwWzFdKG8pO1xyXG4gICAgfSxcclxuICAgIC8qY2lyY2xlU2xpY2UqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHgubW92ZVRvKG8ucG9zLnggKyBNYXRoLmNvcyhvLnN0YXJ0U2xpY2VBbmdsZSkgKiBvLmlubmVyUmFkaXVzLCBvLnBvcy55ICsgTWF0aC5zaW4oby5zdGFydFNsaWNlQW5nbGUpICogby5pbm5lclJhZGl1cyk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhvLnBvcy54ICsgTWF0aC5jb3Moby5zdGFydFNsaWNlQW5nbGUpICogby5zYXQuciwgby5wb3MueSArIE1hdGguc2luKG8uc3RhcnRTbGljZUFuZ2xlKSAqIG8uc2F0LnIpO1xyXG4gICAgICAgIGN0eC5hcmMoby5wb3MueCwgby5wb3MueSwgby5zYXQuciwgby5zdGFydFNsaWNlQW5nbGUsIG8uZW5kU2xpY2VBbmdsZSk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhvLnBvcy54ICsgTWF0aC5jb3Moby5lbmRTbGljZUFuZ2xlKSAqIG8uaW5uZXJSYWRpdXMsIG8ucG9zLnkgKyBNYXRoLnNpbihvLmVuZFNsaWNlQW5nbGUpICogby5pbm5lclJhZGl1cyk7XHJcbiAgICAgICAgaWYoby5pbm5lclJhZGl1cyAhPT0gMCljdHguYXJjKG8ucG9zLngsIG8ucG9zLnksIG8uaW5uZXJSYWRpdXMsIG8uZW5kU2xpY2VBbmdsZSwgby5zdGFydFNsaWNlQW5nbGUsIHRydWUpO1xyXG4gICAgfVxyXG5dXHJcblxyXG5jb25zdCBpbml0U2ltdWxhdGVNYXAgPSBbXHJcbiAgICAvKnBhdGhNb3ZlKi9cclxuICAgIChvLCBpbml0KSA9PiB7XHJcblx0XHRvLnBhdGggPSBpbml0LnBhdGg7Ly8gbGlrZSBbW3gseSxzcGVlZF0sIC4uLl1cclxuXHJcbiAgICAgICAgLy8gZmlsdGVyaW5nIG91dCBjb25zZWN1dGl2ZSBkdXBsaWNhdGVzXHJcbiAgICAgICAgZm9yKGxldCBpID0gby5wYXRoLmxlbmd0aC0xOyBpID49IDE7IGktLSl7XHJcbiAgICAgICAgICAgIGlmKG8ucGF0aFtpXVswXSA9PT0gby5wYXRoW2ktMV1bMF0gJiYgby5wYXRoW2ldWzFdID09PSBvLnBhdGhbaS0xXVsxXSkgby5wYXRoLnNwbGljZShpLDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoby5wYXRoLmxlbmd0aCA8IDIpIG8ucGF0aCA9IHNoYXJlZC5zaW11bGF0ZURlZmF1bHRNYXBbMF0ucGF0aDtcclxuXHJcbiAgICAgICAgby5jdXJyZW50UG9pbnQgPSBNYXRoLmZsb29yKGluaXQuY3VycmVudFBvaW50KSAlIG8ucGF0aC5sZW5ndGg7XHJcblxyXG4gICAgICAgIG8ucG9pbnRPbiA9IG8ucGF0aFtvLmN1cnJlbnRQb2ludF07XHJcbiAgICAgICAgby5zcGVlZCA9IG8ucG9pbnRPblsyXTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbmV4dFBvaW50SW5kZXggPSBvLmN1cnJlbnRQb2ludCArIDE7XHJcbiAgICAgICAgaWYgKG5leHRQb2ludEluZGV4ID09PSBvLnBhdGgubGVuZ3RoKSBuZXh0UG9pbnRJbmRleCA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgby5wb2ludFRvID0gby5wYXRoW25leHRQb2ludEluZGV4XTtcclxuICAgICAgICBhbmdsZSA9IE1hdGguYXRhbjIoby5wb2ludFRvWzFdIC0gby5wb2ludE9uWzFdLCBvLnBvaW50VG9bMF0gLSBvLnBvaW50T25bMF0pO1xyXG4gICAgICAgIG8ueHYgPSBNYXRoLmNvcyhhbmdsZSkgKiBvLnNwZWVkO1xyXG4gICAgICAgIG8ueXYgPSBNYXRoLnNpbihhbmdsZSkgKiBvLnNwZWVkO1xyXG5cclxuICAgICAgICBvLnRpbWVSZW1haW4gPSBNYXRoLnNxcnQoKG8ucG9pbnRPblswXSAtIG8ucG9pbnRUb1swXSkqKjIgKyAoby5wb2ludE9uWzFdIC0gby5wb2ludFRvWzFdKSoqMikgLyBvLnNwZWVkO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZyYWN0aW9uYWxQb2ludE9mZnNldCA9IGluaXQuY3VycmVudFBvaW50IC0gTWF0aC5mbG9vcihpbml0LmN1cnJlbnRQb2ludCk7XHJcbiAgICAgICAgaWYoZnJhY3Rpb25hbFBvaW50T2Zmc2V0ICE9PSAwKXtcclxuICAgICAgICAgICAgY29uc3QgbmV3VGltZVJlbWFpbiA9IG8udGltZVJlbWFpbiAqICgxIC0gZnJhY3Rpb25hbFBvaW50T2Zmc2V0KTtcclxuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBvLnRpbWVSZW1haW4gLSBuZXdUaW1lUmVtYWluO1xyXG4gICAgICAgICAgICBvLnBvcy54ICs9IGRlbHRhICogby54djtcclxuICAgICAgICAgICAgby5wb3MueSArPSBkZWx0YSAqIG8ueXY7XHJcbiAgICAgICAgICAgIG8udGltZVJlbWFpbiA9IG5ld1RpbWVSZW1haW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvLnBvcy54ICs9IG8ucG9pbnRPblswXSAtIG8ucGF0aFswXVswXTtcclxuICAgICAgICBvLnBvcy55ICs9IG8ucG9pbnRPblsxXSAtIG8ucGF0aFswXVsxXTtcclxuICAgIH0sXHJcbiAgICAvLyAvKnJvdGF0ZSovXHJcbiAgICAobywgaW5pdCkgPT4ge1xyXG4gICAgICAgIG8ucGl2b3RYID0gaW5pdC5waXZvdFg7XHJcbiAgICAgICAgby5waXZvdFkgPSBpbml0LnBpdm90WTtcclxuICAgICAgICBvLnJvdGF0aW9uID0gMDtcclxuICAgICAgICBpZihpbml0LmluaXRpYWxSb3RhdGlvbiAhPT0gMCAmJiBpbml0LmluaXRpYWxSb3RhdGlvbiAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgby5yb3RhdGVTcGVlZCA9IGluaXQuaW5pdGlhbFJvdGF0aW9uO1xyXG4gICAgICAgICAgICBzaW11bGF0ZU1hcFsxXShvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgby5yb3RhdGVTcGVlZCA9IGluaXQucm90YXRlU3BlZWQ7XHJcbiAgICB9LFxyXG4gICAgLy8gLypncm93Ki9cclxuICAgIChvLCBpbml0KSA9PiB7XHJcbiAgICAgICAgby5ncm93U3BlZWQgPSBpbml0Lmdyb3dTcGVlZDtcclxuICAgICAgICBvLnNocmlua1NwZWVkID0gaW5pdC5zaHJpbmtTcGVlZDtcclxuICAgICAgICBvLm1heEdyb3d0aCA9IGluaXQubWF4R3Jvd3RoO1xyXG4gICAgICAgIG8ubWluR3Jvd3RoID0gaW5pdC5taW5Hcm93dGg7XHJcbiAgICAgICAgby5ncm93aW5nID0gaW5pdC50b1N0YXJ0R3Jvd2luZztcclxuICAgICAgICBvLmdyb3d0aCA9IG8ubGFzdEdyb3d0aCA9IGluaXQuc3RhcnRHcm93dGg7XHJcbiAgICAgICAgby5ncm93UGl2b3RYID0gaW5pdC5ncm93UGl2b3RYO1xyXG4gICAgICAgIG8uZ3Jvd1Bpdm90WSA9IGluaXQuZ3Jvd1Bpdm90WTtcclxuICAgIH0sXHJcbiAgICAvLyAvKmN1c3RvbSovXHJcbiAgICAoKSA9PiB7fSxcclxuICAgIC8vIC8qaWQqL1xyXG4gICAgKG8sIGluaXQpID0+IHtcclxuICAgICAgICBsZXQgaWQgPSBpbml0LmlkLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICAgIGlmKHNoYXJlZC5pZFRvT2JzW2lkXSAhPT0gdW5kZWZpbmVkICYmIGVudmlyb25tZW50ID09PSAnZWRpdG9yJykgYWxlcnQoYFdhcm5pbmchIER1cGxpY2F0ZSBpZCBcIiR7aWR9XCIgZm91bmQhIER1cGxpY2F0ZSBpZHMgb3ZlcnJpZGUgZWFjaCBvdGhlci5gKTtcclxuICAgICAgICBzaGFyZWQuaWRUb09ic1tpZF0gPSBvO1xyXG4gICAgfSxcclxuICAgIC8vIC8qcm90YXRlSG9taW5nKi9cclxuICAgIChvLCBpbml0KSA9PiB7XHJcbiAgICAgICAgby50b1Jlc3QgPSBpbml0LnRvUmVzdDtcclxuICAgICAgICBvLnJlc3RBbmdsZXMgPSBpbml0LnJlc3RBbmdsZXM7XHJcbiAgICAgICAgby5ob21pbmdSb3RhdGVTcGVlZCA9IGluaXQuaG9taW5nUm90YXRlU3BlZWQ7XHJcbiAgICAgICAgby5yb3RhdGlvbiA9IDA7XHJcbiAgICAgICAgby5kZXRlY3Rpb25SYWRpdXNTcXVhcmVkID0gaW5pdC5kZXRlY3Rpb25SYWRpdXMgKiogMjtcclxuICAgICAgICBvLnNwb2tlQW5nbGVzID0gaW5pdC5zcG9rZUFuZ2xlczsvLyBhcnJheSBvZiBhbmdsZXMgb2Ygc3Bva2VzXHJcbiAgICAgICAgby5waXZvdFggPSBpbml0LnBpdm90WDtcclxuICAgICAgICBvLnBpdm90WSA9IGluaXQucGl2b3RZO1xyXG4gICAgfVxyXG5dXHJcblxyXG5jb25zdCBzaW11bGF0ZU1hcCA9IFtcclxuICAgIC8qcGF0aE1vdmUqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBvLnBvcy54ICs9IG8ueHY7XHJcbiAgICAgICAgby5wb3MueSArPSBvLnl2O1xyXG5cclxuICAgICAgICBvLnRpbWVSZW1haW4tLTtcclxuICAgICAgICBpZiAoby50aW1lUmVtYWluIDw9IDApIHtcclxuICAgICAgICAgICAgby5jdXJyZW50UG9pbnQrKztcclxuICAgICAgICAgICAgaWYgKG8uY3VycmVudFBvaW50ID09PSBvLnBhdGgubGVuZ3RoKSBvLmN1cnJlbnRQb2ludCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvLnBvaW50T24gPSBvLnBhdGhbby5jdXJyZW50UG9pbnRdO1xyXG4gICAgICAgICAgICBvLnNwZWVkID0gby5wb2ludE9uWzJdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIHNuYXBwaW5nIGJhY2sgdG8gdGhlIHBvaW50IHRoYXQgd2Ugc2hvdWxkIGJlIG9uXHJcbiAgICAgICAgICAgIG8ucG9zLnggKz0gby54diAqIG8udGltZVJlbWFpbjtcclxuICAgICAgICAgICAgby5wb3MueSArPSBvLnl2ICogby50aW1lUmVtYWluO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCBuZXh0UG9pbnRJbmRleCA9IG8uY3VycmVudFBvaW50ICsgMTtcclxuICAgICAgICAgICAgaWYgKG5leHRQb2ludEluZGV4ID09PSBvLnBhdGgubGVuZ3RoKSBuZXh0UG9pbnRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvLnBvaW50VG8gPSBvLnBhdGhbbmV4dFBvaW50SW5kZXhdO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGFuZ2xlID0gTWF0aC5hdGFuMihvLnBvaW50VG9bMV0gLSBvLnBvaW50T25bMV0sIG8ucG9pbnRUb1swXSAtIG8ucG9pbnRPblswXSk7XHJcbiAgICAgICAgICAgIG8ueHYgPSBNYXRoLmNvcyhhbmdsZSkgKiBvLnNwZWVkO1xyXG4gICAgICAgICAgICBvLnl2ID0gTWF0aC5zaW4oYW5nbGUpICogby5zcGVlZDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBkaXN0ID0gTWF0aC5zcXJ0KChvLnBvaW50T25bMF0tby54dipvLnRpbWVSZW1haW4gLSBvLnBvaW50VG9bMF0pKioyICsgKG8ucG9pbnRPblsxXS1vLnl2Km8udGltZVJlbWFpbiAtIG8ucG9pbnRUb1sxXSkqKjIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoKG8ueHYgKiogMiArIG8ueXYgKiogMikgKiAoby50aW1lUmVtYWluICoqIDIpID4gZGlzdCl7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBvdmVyc2hvdCB0aGUgbmV4dCBwb2ludCwganVzdCBzdGF5IG9uIHRoZSBpbml0YWwgcG9pbnQgKG5vIHN5bmMpXHJcbiAgICAgICAgICAgICAgICBkaXN0ID0gTWF0aC5zcXJ0KChvLnBvaW50T25bMF0gLSBvLnBvaW50VG9bMF0pKioyICsgKG8ucG9pbnRPblsxXSAtIG8ucG9pbnRUb1sxXSkqKjIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdCB0byBuZXh0IHB0IChzeW5jKVxyXG4gICAgICAgICAgICAgICAgby5wb3MueCAtPSBvLnh2ICogby50aW1lUmVtYWluO1xyXG4gICAgICAgICAgICAgICAgby5wb3MueSAtPSBvLnl2ICogby50aW1lUmVtYWluO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB0aW1lID0gZGlzdGFuY2UgLyBzcGVlZFxyXG4gICAgICAgICAgICBvLnRpbWVSZW1haW4gPSBkaXN0IC8gby5zcGVlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG8udG9wTGVmdCA9IHNoYXJlZC5nZW5lcmF0ZVRvcExlZnRDb29yZGluYXRlcyhvKTtcclxuICAgIH0sXHJcbiAgICAvKnJvdGF0ZSovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGlmKG8uc2F0LnIgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIG8ucG9zLnggLT0gby5waXZvdFg7XHJcbiAgICAgICAgICAgIG8ucG9zLnkgLT0gby5waXZvdFk7XHJcbiAgICAgICAgICAgIG8uc2F0LnJvdGF0ZShvLnJvdGF0ZVNwZWVkKTtcclxuICAgICAgICAgICAgby5wb3MueCArPSBvLnBpdm90WDtcclxuICAgICAgICAgICAgby5wb3MueSArPSBvLnBpdm90WTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvLnNhdC50cmFuc2xhdGUoby5wb3MueC1vLnBpdm90WCwgby5wb3MueS1vLnBpdm90WSk7XHJcbiAgICAgICAgICAgIG8uc2F0LnJvdGF0ZShvLnJvdGF0ZVNwZWVkKTtcclxuICAgICAgICAgICAgby5zYXQudHJhbnNsYXRlKG8ucGl2b3RYLW8ucG9zLngsIG8ucGl2b3RZLW8ucG9zLnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBvLnJvdGF0aW9uICs9IG8ucm90YXRlU3BlZWQ7XHJcbiAgICAgICAgby5kaW1lbnNpb25zID0gZ2VuZXJhdGVEaW1lbnNpb25zKG8pO1xyXG4gICAgICAgIG8udG9wTGVmdCA9IHNoYXJlZC5nZW5lcmF0ZVRvcExlZnRDb29yZGluYXRlcyhvKTtcclxuICAgIH0sXHJcbiAgICAvKmdyb3cqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBpZihvLmdyb3dpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgby5ncm93dGggKz0gby5ncm93U3BlZWQ7XHJcbiAgICAgICAgICAgIGlmKG8uZ3Jvd3RoID49IG8ubWF4R3Jvd3RoKXtcclxuICAgICAgICAgICAgICAgIG8uZ3Jvd2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgby5ncm93dGggPSBvLm1heEdyb3d0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgby5ncm93dGggLT0gby5zaHJpbmtTcGVlZDtcclxuICAgICAgICAgICAgaWYoby5ncm93dGggPD0gby5taW5Hcm93dGgpe1xyXG4gICAgICAgICAgICAgICAgby5ncm93aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG8uZ3Jvd3RoID0gby5taW5Hcm93dGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGdyb3d0aFJhdGlvID0gby5ncm93dGggLyBvLmxhc3RHcm93dGg7XHJcblxyXG4gICAgICAgIGlmKG8uc2F0LnIgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIC8vIGNpcmNsZVxyXG4gICAgICAgICAgICBvLnBvcy54IC09IG8uZ3Jvd1Bpdm90WDtcclxuICAgICAgICAgICAgby5wb3MueSAtPSBvLmdyb3dQaXZvdFk7XHJcbiAgICAgICAgICAgIG8ucG9zLnggKj0gZ3Jvd3RoUmF0aW87XHJcbiAgICAgICAgICAgIG8ucG9zLnkgKj0gZ3Jvd3RoUmF0aW87XHJcbiAgICAgICAgICAgIG8ucG9zLnggKz0gby5ncm93UGl2b3RYO1xyXG4gICAgICAgICAgICBvLnBvcy55ICs9IG8uZ3Jvd1Bpdm90WTtcclxuXHJcbiAgICAgICAgICAgIG8uc2F0LnIgKj0gZ3Jvd3RoUmF0aW87XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcG9seVxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgby5zYXQucG9pbnRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIG8uc2F0LnBvaW50c1tpXS54ICs9IG8ucG9zLnggLSBvLmdyb3dQaXZvdFg7XHJcbiAgICAgICAgICAgICAgICBvLnNhdC5wb2ludHNbaV0ueSArPSBvLnBvcy55IC0gby5ncm93UGl2b3RZO1xyXG4gICAgICAgICAgICAgICAgby5zYXQucG9pbnRzW2ldLnggKj0gZ3Jvd3RoUmF0aW87XHJcbiAgICAgICAgICAgICAgICBvLnNhdC5wb2ludHNbaV0ueSAqPSBncm93dGhSYXRpbztcclxuICAgICAgICAgICAgICAgIG8uc2F0LnBvaW50c1tpXS54IC09IG8ucG9zLnggLSBvLmdyb3dQaXZvdFg7XHJcbiAgICAgICAgICAgICAgICBvLnNhdC5wb2ludHNbaV0ueSAtPSBvLnBvcy55IC0gby5ncm93UGl2b3RZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG8uc2F0LnNldFBvaW50cyhvLnNhdC5wb2ludHMpO1xyXG5cclxuICAgICAgICAgICAgaWYoby5pc1RleHQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgby5mb250U2l6ZSAqPSBncm93dGhSYXRpbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgby50b3BMZWZ0ID0gZ2VuZXJhdGVUb3BMZWZ0Q29vcmRpbmF0ZXMobyk7XHJcbiAgICAgICAgby5kaW1lbnNpb25zID0gZ2VuZXJhdGVEaW1lbnNpb25zKG8pO1xyXG4gICAgICAgIG8ubGFzdEdyb3d0aCA9IG8uZ3Jvd3RoO1xyXG4gICAgfSxcclxuICAgIC8qY3VzdG9tKi9cclxuICAgICgpID0+IHt9LFxyXG4gICAgLyppZCovXHJcbiAgICAoKSA9PiB7fSxcclxuICAgIC8qcm90YXRlSG9taW5nKi9cclxuICAgIChvLCBwKSA9PiB7XHJcbiAgICAgICAgbGV0IG1pZGRsZVggPSBvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54LzI7XHJcbiAgICAgICAgbGV0IG1pZGRsZVkgPSBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55LzI7IFxyXG5cclxuICAgICAgICBpZihwLmRlYWQgPT09IHRydWUgfHwgKHAucG9zLnggLSBtaWRkbGVYKSoqMiArIChwLnBvcy55IC0gbWlkZGxlWSkgKiogMiA+IG8uZGV0ZWN0aW9uUmFkaXVzU3F1YXJlZCkge1xyXG4gICAgICAgICAgICBpZihvLnRvUmVzdCA9PT0gZmFsc2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxldCBtaW5TcG9rZUFuZ3VsYXJEaXN0ID0gSW5maW5pdHk7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgby5yZXN0QW5nbGVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGxldCBhbmdsZURpc3QgPSBzaG9ydEFuZ2xlRGlzdChvLnJvdGF0aW9uLCBvLnJlc3RBbmdsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYoTWF0aC5hYnMoYW5nbGVEaXN0KSA8IE1hdGguYWJzKG1pblNwb2tlQW5ndWxhckRpc3QpKXtcclxuICAgICAgICAgICAgICAgICAgICBtaW5TcG9rZUFuZ3VsYXJEaXN0ID0gYW5nbGVEaXN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihtaW5TcG9rZUFuZ3VsYXJEaXN0ID09PSBJbmZpbml0eSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYoTWF0aC5hYnMobWluU3Bva2VBbmd1bGFyRGlzdCkgPCBvLmhvbWluZ1JvdGF0ZVNwZWVkKSBvLnJvdGF0ZVNwZWVkID0gbWluU3Bva2VBbmd1bGFyRGlzdDtcclxuICAgICAgICAgICAgZWxzZSBvLnJvdGF0ZVNwZWVkID0gTWF0aC5zaWduKG1pblNwb2tlQW5ndWxhckRpc3QpICogby5ob21pbmdSb3RhdGVTcGVlZDtcclxuICAgICAgICAgICAgc2ltdWxhdGVNYXBbMV0obyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFuZ2xlID0gTWF0aC5hdGFuMihwLnBvcy55IC0gbWlkZGxlWSwgcC5wb3MueCAtIG1pZGRsZVgpO1xyXG5cclxuICAgICAgICBsZXQgbWluU3Bva2VBbmd1bGFyRGlzdCA9IEluZmluaXR5O1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgby5zcG9rZUFuZ2xlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZURpc3QgPSBzaG9ydEFuZ2xlRGlzdChvLnNwb2tlQW5nbGVzW2ldICsgby5yb3RhdGlvbiwgYW5nbGUpO1xyXG4gICAgICAgICAgICBpZihNYXRoLmFicyhhbmdsZURpc3QpIDwgTWF0aC5hYnMobWluU3Bva2VBbmd1bGFyRGlzdCkpe1xyXG4gICAgICAgICAgICAgICAgbWluU3Bva2VBbmd1bGFyRGlzdCA9IGFuZ2xlRGlzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYobWluU3Bva2VBbmd1bGFyRGlzdCA9PT0gSW5maW5pdHkpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYoTWF0aC5hYnMobWluU3Bva2VBbmd1bGFyRGlzdCkgPCBvLmhvbWluZ1JvdGF0ZVNwZWVkKSBvLnJvdGF0ZVNwZWVkID0gbWluU3Bva2VBbmd1bGFyRGlzdDtcclxuICAgICAgICBlbHNlIG8ucm90YXRlU3BlZWQgPSBNYXRoLnNpZ24obWluU3Bva2VBbmd1bGFyRGlzdCkgKiBvLmhvbWluZ1JvdGF0ZVNwZWVkO1xyXG5cclxuICAgICAgICBzaW11bGF0ZU1hcFsxXShvKTtcclxuICAgIH1cclxuXVxyXG5cclxuZnVuY3Rpb24gc2hvcnRBbmdsZURpc3QoYTAsYTEpIHtcclxuICAgIGxldCBkYSA9IChhMSAtIGEwKSAlIFRBVTtcclxuICAgIHJldHVybiAyKmRhICUgVEFVIC0gZGE7XHJcbn1cclxuXHJcbnNoYXJlZC5zaW11bGF0ZU1hcEkyTiA9IFtcclxuICAgICdwYXRoTW92ZScsXHJcbiAgICAncm90YXRlJyxcclxuICAgICdncm93JyxcclxuICAgICdjdXN0b20nLFxyXG4gICAgJ2lkJyxcclxuICAgICdyb3RhdGVIb21pbmcnLFxyXG5dXHJcblxyXG5zaGFyZWQuc2ltdWxhdGVEZWZhdWx0TWFwID0gW1xyXG4gICAgLy8gcGF0aE1vdmVcclxuICAgIHtcclxuICAgICAgICBjdXJyZW50UG9pbnQ6IDAsXHJcbiAgICAgICAgcGF0aDogW1swLDAsMl0sWzUwLDAsMV0sWy01MCwwLDJdXSxcclxuICAgIH0sXHJcbiAgICAvLyByb3RhdGVcclxuICAgIHtcclxuICAgICAgICBpbml0aWFsUm90YXRpb246IDAsXHJcbiAgICAgICAgcm90YXRlU3BlZWQ6IDAuMDEsXHJcbiAgICAgICAgcGl2b3RYOiAzMDAsXHJcbiAgICAgICAgcGl2b3RZOiAxMDBcclxuICAgIH0sXHJcbiAgICAvLyBncm93XHJcbiAgICB7XHJcbiAgICAgICAgZ3Jvd1NwZWVkOiAwLjAwNixcclxuICAgICAgICBzaHJpbmtTcGVlZDogMC4wMDYsXHJcbiAgICAgICAgbWF4R3Jvd3RoOiAxLjI1LFxyXG4gICAgICAgIG1pbkdyb3d0aDogMSxcclxuICAgICAgICBzdGFydEdyb3d0aDogMSxcclxuICAgICAgICB0b1N0YXJ0R3Jvd2luZzogdHJ1ZSxcclxuICAgICAgICBncm93UGl2b3RYOiAxMDAsXHJcbiAgICAgICAgZ3Jvd1Bpdm90WTogMzAwXHJcbiAgICB9LFxyXG4gICAgLy8gY3VzdG9tXHJcbiAgICB7fSxcclxuICAgIC8vIGlkXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6ICd1bmlxdWVJZCdcclxuICAgIH0sXHJcbiAgICAvLyByb3RhdGVIb21pbmdcclxuICAgIHtcclxuICAgICAgICB0b1Jlc3Q6IHRydWUsXHJcbiAgICAgICAgcmVzdEFuZ2xlczogWzAsIE1hdGguUEldLFxyXG4gICAgICAgIGhvbWluZ1JvdGF0ZVNwZWVkOiAwLjAxLFxyXG4gICAgICAgIGRldGVjdGlvblJhZGl1czogMjAwLFxyXG4gICAgICAgIHNwb2tlQW5nbGVzOiBbMCwgTWF0aC5QSV0sXHJcbiAgICAgICAgcGl2b3RYOiAzMDAsXHJcbiAgICAgICAgcGl2b3RZOiAzMDBcclxuICAgIH1cclxuXVxyXG5cclxuc2hhcmVkLnNpbXVsYXRlQ29uc3RyYWludHNNYXAgPSBbXHJcbiAgICB7Y3VycmVudFBvaW50OiBbMF19LFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAge2dyb3dTcGVlZDogWzBdLCBzaHJpbmtTcGVlZDogWzBdLCBtaW5Hcm93dGg6IFswLjAwMV0sIG1heEdyb3d0aDogWzAuMDAxXX0sXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICB1bmRlZmluZWQsXHJcbl07XHJcblxyXG5jb25zdCBzaW11bGF0ZVN5bmNLZXlzID0gW1xyXG4gICAgLypwYXRoTW92ZSovXHJcbiAgICAobywgc3luYykgPT4ge1xyXG4gICAgICAgIHN5bmMueCA9IG8ucG9zLng7XHJcbiAgICAgICAgc3luYy55ID0gby5wb3MueTtcclxuICAgICAgICBjb25zdCBtYXhUaW1lUmVtYWluID0gTWF0aC5zcXJ0KChvLnBvaW50T25bMF0gLSBvLnBvaW50VG9bMF0pKioyICsgKG8ucG9pbnRPblsxXSAtIG8ucG9pbnRUb1sxXSkqKjIpIC8gby5zcGVlZDtcclxuICAgICAgICBzeW5jLmN1cnJlbnRQb2ludCA9IG8uY3VycmVudFBvaW50ICsgKDEgLSBvLnRpbWVSZW1haW4gLyBtYXhUaW1lUmVtYWluKTtcclxuICAgIH0sXHJcbiAgICAvLyAvKnJvdGF0ZSovXHJcbiAgICAobywgc3luYykgPT4ge1xyXG4gICAgICAgIGlmKG8ucm90YXRlU3BlZWQgPT09IDApIHJldHVybiBmYWxzZTtcclxuICAgICAgICBzeW5jLmluaXRpYWxSb3RhdGlvbiA9IG8ucm90YXRpb247XHJcbiAgICB9LFxyXG4gICAgLy8gLypncm93Ki9cclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vIC8qY3VzdG9tKi9cclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vIC8qaWQqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gLypyb3RhdGVIb21pbmcqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG5dXHJcblxyXG5jb25zdCBhcHBseVNpbXVsYXRlU3luY0tleXMgPSBbXHJcbiAgICAvKnBhdGhNb3ZlKi9cclxuICAgIChvLCBpbml0KSA9PiB7XHJcbiAgICAgICAgaWYoTnVtYmVyLmlzRmluaXRlKGluaXQueCArIGluaXQueSArIGluaXQuY3VycmVudFBvaW50KSA9PT0gZmFsc2UpIHJldHVybjtcclxuICAgICAgICBpbml0LnBhdGggPSBvLnBhdGg7XHJcbiAgICAgICAgaW5pdFNpbXVsYXRlTWFwWzBdKG8sIGluaXQpO1xyXG4gICAgICAgIG8ucG9zLnggPSBpbml0Lng7XHJcbiAgICAgICAgby5wb3MueSA9IGluaXQueTtcclxuICAgIH0sXHJcbiAgICAvLyAvKnJvdGF0ZSovXHJcbiAgICAobywgaW5pdCkgPT4ge1xyXG4gICAgICAgIGlmKE51bWJlci5pc0Zpbml0ZShpbml0LmluaXRpYWxSb3RhdGlvbikgPT09IGZhbHNlKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgciA9IGluaXQuaW5pdGlhbFJvdGF0aW9uO1xyXG4gICAgICAgIGluaXQuaW5pdGlhbFJvdGF0aW9uIC09IG8ucm90YXRpb247XHJcbiAgICAgICAgaW5pdC5waXZvdFggPSBvLnBpdm90WDtcclxuICAgICAgICBpbml0LnBpdm90WSA9IG8ucGl2b3RZO1xyXG4gICAgICAgIGluaXQucm90YXRlU3BlZWQgPSBvLnJvdGF0ZVNwZWVkO1xyXG4gICAgICAgIGluaXRTaW11bGF0ZU1hcFsxXShvLCBpbml0KTtcclxuICAgICAgICBvLnJvdGF0aW9uID0gcjtcclxuICAgIH0sXHJcbiAgICAvLyAvKmdyb3cqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gLypjdXN0b20qL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gLyppZCovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAvKnJvdGF0ZUhvbWluZyovXHJcbiAgICB1bmRlZmluZWQsXHJcbl1cclxuXHJcbmNvbnN0IGluaXRFZmZlY3RNYXAgPSBbXHJcbiAgICAvKmJvdW5kKi9cclxuICAgICgpID0+IHt9LFxyXG4gICAgLypraWxsKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmJvdW5kUGxheWVyID0gcGFyYW1zLmJvdW5kUGxheWVyID8/IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8qYm91bmNlKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICAvLyBib3VuY2luZXNzLCBkZWNheVxyXG4gICAgICAgIG8uYm91bmNpbmVzcyA9IHBhcmFtcy5ib3VuY2luZXNzO1xyXG4gICAgICAgIG8uZGVjYXkgPSBwYXJhbXMuZGVjYXk7XHJcbiAgICB9LFxyXG4gICAgLypjdXN0b20qL1xyXG4gICAgKCkgPT4ge30sXHJcbiAgICAvKmN1c3RvbUltYWdlKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmltZyA9IHR5cGVvZiBJbWFnZSA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIG8uaW1nLnNyYyA9IHBhcmFtcy51cmw7XHJcbiAgICAgICAgby5pbWdMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICBvLmltZy5vbmxvYWQgPSAoKSA9PiB7by5pbWdMb2FkZWQgPSB0cnVlO31cclxuICAgIH0sXHJcbiAgICAvKnN0b3BGb3JjZXMqL1xyXG4gICAgKCkgPT4ge30sXHJcbiAgICAvKndpbnBhZCovXHJcbiAgICAobywgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgby5pc1dpbnBhZCA9IHRydWU7XHJcbiAgICB9LFxyXG4gICAgLypjb2luKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmNvbGxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIG8uY29pbkFtb3VudCA9IHBhcmFtcy5jb2luQW1vdW50O1xyXG4gICAgICAgIG8uY29sb3IgPSBwYXJhbXMuY29sb3I7XHJcbiAgICB9LFxyXG4gICAgLypjb2luZG9vciovXHJcbiAgICAobywgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgby5pc0NvaW5kb29yID0gdHJ1ZTtcclxuICAgICAgICBvLm1heENvaW5zID0gby5jb2lucyA9IHBhcmFtcy5jb2luZG9vckNvaW5BbW91bnQ7XHJcbiAgICAgICAgby5jb2luRG9vckNvbG9yID0gcGFyYW1zLmNvaW5Eb29yQ29sb3I7XHJcbiAgICB9LFxyXG4gICAgLypjaGVja3BvaW50Ki9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmNoZWNrcG9pbnRDb2xsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICBvLmNoZWNrcG9pbnRPZmZzZXRYID0gcGFyYW1zLmNoZWNrcG9pbnRPZmZzZXRYO1xyXG4gICAgICAgIG8uY2hlY2twb2ludE9mZnNldFkgPSBwYXJhbXMuY2hlY2twb2ludE9mZnNldFk7XHJcbiAgICB9LFxyXG4gICAgLypicmVha2FibGUqL1xyXG4gICAgKG8sIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIG8ubWF4U3RyZW5ndGggPSBwYXJhbXMubWF4U3RyZW5ndGg7Ly82MFxyXG4gICAgICAgIG8uc3RyZW5ndGggPSBvLm1heFN0cmVuZ3RoO1xyXG4gICAgICAgIG8ucmVnZW5UaW1lID0gcGFyYW1zLnJlZ2VuVGltZTtcclxuICAgICAgICBvLmxhc3RCcm9rZVRpbWUgPSAtMUU5OTtcclxuICAgICAgICBvLmhlYWxTcGVlZCA9IHBhcmFtcy5oZWFsU3BlZWQ7XHJcbiAgICB9LFxyXG4gICAgLypzYWZlKi9cclxuICAgICgpID0+IHt9LFxyXG4gICAgLyp0cCovXHJcbiAgICAobywgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgby50cHggPSBwYXJhbXMudHB4O1xyXG4gICAgICAgIG8udHB5ID0gcGFyYW1zLnRweTtcclxuICAgIH0sXHJcbiAgICAvKmNvbnZleW9yKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmNvbnZleW9yRm9yY2UgPSBwYXJhbXMuY29udmV5b3JGb3JjZTtcclxuICAgICAgICBvLmNvbnZleW9yQW5nbGUgPSBwYXJhbXMuY29udmV5b3JBbmdsZSAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgby5jb252ZXlvckFuZ2xlUm90YXRlU3BlZWQgPSBwYXJhbXMuY29udmV5b3JBbmdsZVJvdGF0ZVNwZWVkICogTWF0aC5QSS8xODA7XHJcbiAgICAgICAgby5jb252ZXlvckZyaWN0aW9uID0gcGFyYW1zLmNvbnZleW9yRnJpY3Rpb247XHJcbiAgICB9LFxyXG4gICAgLypwbGF0Zm9ybWVyKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLnBsYXRmb3JtZXJGb3JjZSA9IHBhcmFtcy5wbGF0Zm9ybWVyRm9yY2U7XHJcbiAgICAgICAgby5wbGF0Zm9ybWVyQW5nbGUgPSBwYXJhbXMucGxhdGZvcm1lckFuZ2xlICogTWF0aC5QSS8xODA7XHJcbiAgICAgICAgby5wbGF0Zm9ybWVyQW5nbGVSb3RhdGVTcGVlZCA9IHBhcmFtcy5wbGF0Zm9ybWVyQW5nbGVSb3RhdGVTcGVlZCAqIE1hdGguUEkvMTgwO1xyXG4gICAgICAgIG8ucGxhdGZvcm1lckZyaWN0aW9uID0gcGFyYW1zLnBsYXRmb3JtZXJGcmljdGlvbjtcclxuXHJcbiAgICAgICAgLy8gby5tYXhKdW1wcyA9IHBhcmFtcy5tYXhKdW1wcy8vIFRPRE86IElNUExFTUVOVCBKVU1QUy4gYWxzbyBUT0RPOiBhZGQgYSBwcmVzZXJ2ZSBqdW1wIHBhcmFtZXRlciB0aGF0IG1ha2VzIGp1bXBzIGNvbnNlcnZlIGV2ZW4gaWYgeW91IGFyZSBub3QgYm91bmRlZCB0aGF0IGZyYW1lLiBJZiBkaXNhYmxlZCwgcGxhdGZvcm1lciBvbmx5IGxldHMgeW91IGp1bXAgd2hlbiB5b3UncmUgb24gYSBwbGF0IFRIQVQgRlJBTUVcclxuICAgICAgICBvLm1heEp1bXBDb29sZG93biA9IHBhcmFtcy5tYXhKdW1wQ29vbGRvd247Ly8gaW4gdGlja3NcclxuICAgICAgICBvLmp1bXBDb29sZG93biA9IDA7XHJcbiAgICAgICAgby5qdW1wRm9yY2UgPSBwYXJhbXMuanVtcEZvcmNlO1xyXG4gICAgICAgIG8uanVtcEZyaWN0aW9uID0gcGFyYW1zLmp1bXBEZWNheTtcclxuXHJcbiAgICAgICAgby5jYW5KdW1wTWlkYWlyID0gcGFyYW1zLmNhbkp1bXBNaWRhaXI7XHJcbiAgICAgICAgby5taWRhaXJTdG9yZWRKdW1wID0gZmFsc2U7XHJcbiAgICAgICAgby5qdXN0SnVtcGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIG8uanVtcEZvcmNlT2JqID0ge3BsYXllckZvcmNlSWQ6IHVuZGVmaW5lZH07XHJcblxyXG4gICAgICAgIG8udG91Y2hpbmdQbGF0Zm9ybWVyID0gZmFsc2U7XHJcbiAgICAgICAgby5jYW5KdW1wID0gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLypyZXN0cmljdEF4aXMqL1xyXG4gICAgKG8sIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIG8uYXhpc1NwZWVkTXVsdFggPSBwYXJhbXMuYXhpc1NwZWVkTXVsdFg7XHJcbiAgICAgICAgby5heGlzU3BlZWRNdWx0WSA9IHBhcmFtcy5heGlzU3BlZWRNdWx0WTtcclxuICAgIH0sXHJcbiAgICAvKnNuYXBHcmlkKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLnRvU25hcFggPSBwYXJhbXMudG9TbmFwWDtcclxuICAgICAgICBvLnRvU25hcFkgPSBwYXJhbXMudG9TbmFwWTtcclxuICAgICAgICBvLnNuYXBEaXN0YW5jZVggPSBwYXJhbXMuc25hcERpc3RhbmNlWDtcclxuICAgICAgICBvLnNuYXBEaXN0YW5jZVkgPSBwYXJhbXMuc25hcERpc3RhbmNlWTtcclxuICAgICAgICBvLnNuYXBDb29sZG93biA9IG8ubWF4U25hcENvb2xkb3duID0gcGFyYW1zLnNuYXBDb29sZG93bjtcclxuICAgICAgICBvLnNuYXBBbmdsZSA9IHBhcmFtcy5zbmFwQW5nbGUgKiBNYXRoLlBJIC8gMTgwO1xyXG4gICAgICAgIG8uc25hcENvbGxpZGVkID0gZmFsc2U7XHJcbiAgICAgICAgby5zbmFwQW5nbGVSb3RhdGVTcGVlZCA9IHBhcmFtcy5zbmFwQW5nbGVSb3RhdGVTcGVlZCAqIE1hdGguUEkvMTgwO1xyXG5cclxuICAgICAgICBvLmludGVycG9sYXRlUGxheWVyRGF0YSA9IHt0aW1lOiAwLCBuZXh0WDogLTEsIG5leHRZOiAtMX07XHJcbiAgICAgICAgLy8gby5zbmFwRGlzdGFuY2VYID0gTWF0aC5tYXgoMzUsIG8uc25hcERpc3RhbmNlWCk7XHJcbiAgICAgICAgLy8gby5zbmFwRGlzdGFuY2VZID0gTWF0aC5tYXgoMzUsIG8uc25hcERpc3RhbmNlWSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgby5zbmFwTWFnbml0dWRlID0gTWF0aC5zcXJ0KG8uc25hcERpc3RhbmNlWCAqKiAyICsgby5zbmFwRGlzdGFuY2VZICoqIDIpOyAvLyhvLnNuYXBEaXN0YW5jZVggKyBvLnNuYXBEaXN0YW5jZVkpLzJcclxuICAgIH0sXHJcbiAgICAvKnRpbWVUcmFwKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLnRpbWVUcmFwVGltZSA9IG8udGltZVRyYXBNYXhUaW1lID0gcGFyYW1zLnRpbWVUcmFwTWF4VGltZTtcclxuICAgICAgICBvLnRpbWVUcmFwUmVjb3ZlcnlTcGVlZCA9IHBhcmFtcy50aW1lVHJhcFJlY292ZXJ5U3BlZWQ7XHJcbiAgICAgICAgby50aW1lVHJhcFRvS2lsbCA9IHBhcmFtcy50aW1lVHJhcFRvS2lsbDtcclxuICAgICAgICBvLnRpbWVUcmFwVG9TaG93VGVudGggPSBwYXJhbXMudGltZVRyYXBUb1Nob3dUZW50aDtcclxuICAgICAgICBvLnRpbWVUcmFwSW50ZXJzZWN0aW5nID0gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLypjaGFuZ2VTaXplKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLnNpemVNdWx0ID0gcGFyYW1zLnNpemVNdWx0O1xyXG4gICAgICAgIG8uc2l6ZUNoYW5nZVBlcm1hbmVudCA9IHBhcmFtcy5zaXplQ2hhbmdlUGVybWFuZW50O1xyXG4gICAgICAgIG8ubGFzdENoYW5nZVNpemVDb2xsaWRpbmcgPSBvLmNoYW5nZVNpemVDb2xsaWRpbmcgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZVNwZWVkKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLnNwZWVkTXVsdCA9IHBhcmFtcy5zcGVlZE11bHQ7XHJcbiAgICAgICAgby5zcGVlZENoYW5nZVBlcm1hbmVudCA9IHBhcmFtcy5zcGVlZENoYW5nZVBlcm1hbmVudDtcclxuICAgIH0sXHJcbiAgICAvKnNvbGlkQ29sb3IqL1xyXG4gICAgKG8sIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIG8uaGV4ID0gcGFyYW1zLmhleDtcclxuICAgICAgICBvLmFscGhhID0gcGFyYW1zLmFscGhhO1xyXG4gICAgfSxcclxuICAgIC8qaW52aXNpYmxlKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmNyID0gKCk9Pnt9O1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlTWFwKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLm1hcE5hbWUgPSBwYXJhbXMubWFwTmFtZTtcclxuICAgICAgICBvLmRpZmZpY3VsdHkgPSBzaGFyZWQubWFwRGlmZmljdWx0aWVzW3BhcmFtcy5tYXBOYW1lXSA/PyAwO1xyXG4gICAgICAgIG8udG9DdXN0b21QbGFuZXQgPSBwYXJhbXMudG9DdXN0b21QbGFuZXQ7XHJcbiAgICB9LFxyXG4gICAgLyp0b3JuYWRvKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLnRvcm5hZG9TdHJlbmd0aCA9IHBhcmFtcy50b3JuYWRvU3RyZW5ndGg7XHJcbiAgICB9LFxyXG4gICAgLypjaGFuZ2VWaWduZXR0ZSovXHJcbiAgICAobywgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgby5pbm5lclIgPSBwYXJhbXMuaW5uZXJSO1xyXG4gICAgICAgIG8uaW5uZXJHID0gcGFyYW1zLmlubmVyRztcclxuICAgICAgICBvLmlubmVyQiA9IHBhcmFtcy5pbm5lckI7XHJcbiAgICAgICAgby5pbm5lclNpemUgPSBwYXJhbXMuaW5uZXJTaXplO1xyXG4gICAgICAgIG8uaW5uZXJPcGFjaXR5ID0gcGFyYW1zLmlubmVyT3BhY2l0eTtcclxuXHJcbiAgICAgICAgby5vdXRlclIgPSBwYXJhbXMub3V0ZXJSO1xyXG4gICAgICAgIG8ub3V0ZXJHID0gcGFyYW1zLm91dGVyRztcclxuICAgICAgICBvLm91dGVyQiA9IHBhcmFtcy5vdXRlckI7XHJcbiAgICAgICAgby5vdXRlclNpemUgPSBwYXJhbXMub3V0ZXJTaXplO1xyXG4gICAgICAgIG8ub3V0ZXJPcGFjaXR5ID0gcGFyYW1zLm91dGVyT3BhY2l0eTtcclxuICAgIH0sXHJcbiAgICAvKnB1c2hhYmxlKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmxhc3RQdXNoQW5nbGUgPSBvLnB1c2hBbmdsZSA9IHBhcmFtcy5wdXNoQW5nbGUgKiBNYXRoLlBJIC8gMTgwO1xyXG4gICAgICAgIG8ubWF4UHVzaERpc3RhbmNlID0gcGFyYW1zLm1heFB1c2hEaXN0YW5jZTtcclxuICAgICAgICBvLmlkbGVQdXNoQmFja1NwZWVkID0gcGFyYW1zLmlkbGVQdXNoQmFja1NwZWVkO1xyXG4gICAgICAgIG8ucHVzaENvbnZlcnNpb25SYXRpbyA9IHBhcmFtcy5wdXNoQ29udmVyc2lvblJhdGlvO1xyXG4gICAgICAgIG8ucG9zaXRpdmVEaXJlY3Rpb25Pbmx5ID0gcGFyYW1zLnBvc2l0aXZlRGlyZWN0aW9uT25seTtcclxuICAgICAgICBvLnB1c2hBbmdsZVZlY1ggPSBNYXRoLmNvcyhvLnB1c2hBbmdsZSk7XHJcbiAgICAgICAgby5wdXNoQW5nbGVWZWNZID0gTWF0aC5zaW4oby5wdXNoQW5nbGUpO1xyXG4gICAgICAgIG8ucHVzaFBlcmNlbnQgPSAwO1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlTXVzaWMqL1xyXG4gICAgKG8sIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIC8vIGVpdGhlciBhIHlvdXR1YmUgdXJsIChodHRwczovL3lvdXR1YmUuY29tL3dhdGNoLy4uLikgb3IgYSBsb2NhbCBmaWxlcGF0aFxyXG4gICAgICAgIC8vIHRoYXQgdGhlIGNsaWVudCBjYW4gYWNjZXNzIHZpYSBhIGZldGNoIHJlcSwgZS5nLiBzb3VuZHMvLi4uIC5tcDNcclxuICAgICAgICBvLm11c2ljUGF0aCA9IHBhcmFtcy5tdXNpY1BhdGg7XHJcbiAgICAgICAgby5tdXNpY1N0YXJ0VGltZSA9IHBhcmFtcy5tdXNpY1N0YXJ0VGltZTtcclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZVNoaXAqL1xyXG4gICAgKG8sIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIG8uY2hhbmdlU2hpcFN0YXRlVG8gPSBwYXJhbXMuY2hhbmdlU2hpcFN0YXRlVG87XHJcbiAgICAgICAgby5pbml0aWFsU2hpcEFuZ2xlID0gcGFyYW1zLmluaXRpYWxTaGlwQW5nbGU7XHJcbiAgICAgICAgby5zaGlwVHVyblNwZWVkID0gcGFyYW1zLnNoaXBUdXJuU3BlZWQ7XHJcbiAgICB9LFxyXG4gICAgLypjaGFuZ2VHcmFwcGxlKi9cclxuICAgIChvLCBwYXJhbXMpID0+IHtcclxuICAgICAgICBvLmNoYW5nZUdyYXBwbGVTdGF0ZVRvID0gcGFyYW1zLmNoYW5nZUdyYXBwbGVTdGF0ZVRvO1xyXG4gICAgICAgIG8uZ3JhcHBsZVJhbmdlID0gcGFyYW1zLmdyYXBwbGVSYW5nZTtcclxuICAgICAgICBvLmdyYXBwbGVGb3JjZSA9IHBhcmFtcy5ncmFwcGxlRm9yY2U7XHJcbiAgICAgICAgby5ncmFwcGxlRnJpYyA9IHBhcmFtcy5ncmFwcGxlRnJpYztcclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZURlYXRoVGltZXIqL1xyXG4gICAgKG8sIHBhcmFtcykgPT4ge1xyXG4gICAgICAgIG8uY2hhbmdlRGVhdGhUaW1lclN0YXRlVG8gPSBwYXJhbXMuY2hhbmdlRGVhdGhUaW1lclN0YXRlVG87XHJcbiAgICAgICAgby5kcmFpbkFtb3VudFdoaWxlU3RhbmRpbmdPbiA9IHBhcmFtcy5kcmFpbkFtb3VudFdoaWxlU3RhbmRpbmdPbjtcclxuICAgICAgICBvLmRlYXRoVGltZSA9IHBhcmFtcy5kZWF0aFRpbWU7XHJcblxyXG4gICAgICAgIC8vIGZvciB2aWduZXR0ZVxyXG4gICAgICAgIGZvcihsZXQga2V5IGluIHNoYXJlZC5lZmZlY3REZWZhdWx0TWFwWzI0XSl7XHJcbiAgICAgICAgICAgIG9ba2V5XSA9IHNoYXJlZC5lZmZlY3REZWZhdWx0TWFwWzI0XVtrZXldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgby5pbm5lclIgPSBvLm91dGVyUiA9IDI1NTtcclxuICAgIH1cclxuXVxyXG5cclxubGV0IGZyZWVWYXJpYWJsZSA9IC0xO1xyXG5jb25zdCBlZmZlY3RNYXAgPSBbXHJcbiAgICAvKmJvdW5kKi9cclxuICAgIChwLCByZXMsIG8sIGlkKSA9PiB7XHJcbiAgICAgICAgcC5wb3MueCArPSByZXMub3ZlcmxhcFYueDtcclxuICAgICAgICBwLnBvcy55ICs9IHJlcy5vdmVybGFwVi55O1xyXG4gICAgICAgIHAudG91Y2hpbmdOb3JtYWxJbmRleGVzLnB1c2goaWQpO1xyXG4gICAgfSxcclxuICAgIC8qa2lsbCovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgaWYocmVzLm92ZXJsYXAgPiAxKSB7XHJcbiAgICAgICAgICAgIHAuZGVhZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmKG8uYm91bmRQbGF5ZXIgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgcC5wb3MueCArPSByZXMub3ZlcmxhcFYueDtcclxuICAgICAgICAgICAgICAgIHAucG9zLnkgKz0gcmVzLm92ZXJsYXBWLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLypib3VuY2UqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge1xyXG4gICAgICAgIHAucG9zLnggKz0gcmVzLm92ZXJsYXBWLng7XHJcbiAgICAgICAgcC5wb3MueSArPSByZXMub3ZlcmxhcFYueTtcclxuXHJcbiAgICAgICAgYW5nbGUgPSBNYXRoLmF0YW4yKHJlcy5vdmVybGFwVi55LCByZXMub3ZlcmxhcFYueCk7XHJcblxyXG4gICAgICAgIHAuZm9yY2VzLnB1c2goXHJcbiAgICAgICAgICAgIE1hdGguY29zKGFuZ2xlKSAqIG8uYm91bmNpbmVzcyxcclxuICAgICAgICAgICAgTWF0aC5zaW4oYW5nbGUpICogby5ib3VuY2luZXNzLFxyXG4gICAgICAgICAgICBvLmRlY2F5XHJcbiAgICAgICAgKVxyXG4gICAgfSxcclxuICAgIC8qY3VzdG9tKi9cclxuICAgICgpID0+IHt9LFxyXG4gICAgLypjdXN0b21JbWFnZSovXHJcbiAgICAoKSA9PiB7fSxcclxuICAgIC8qc3RvcEZvcmNlcyovXHJcbiAgICAocCkgPT4ge1xyXG4gICAgICAgIHAuc3RvcEZvcmNlcyA9IHRydWU7XHJcbiAgICB9LFxyXG4gICAgLyp3aW5wYWQqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge1xyXG4gICAgICAgIGlmKGVudmlyb25tZW50ID09PSAnZWRpdG9yJyB8fCBzaGFyZWQuc3RhbmRhbG9uZSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIC8vIHJlc3Bhd25cclxuICAgICAgICAgICAgc2hhcmVkLnJlc3Bhd25QbGF5ZXIoKTtcclxuICAgICAgICAgICAgaWYoc2hhcmVkLmluQ2xlYXJDaGVja01vZGUgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgc2hhcmVkLmV4aXRDbGVhckNoZWNrTW9kZSgpO1xyXG4gICAgICAgICAgICAgICAgdXBsb2FkQ29kZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmKHNoYXJlZC53b24gIT09IHRydWUpe1xyXG4gICAgICAgICAgICBzaGFyZWQud29uID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYoc2hhcmVkLmlzRXhDbGllbnQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgaWYoc2hhcmVkLm1hcFBhdGggPT09ICcvbWFwcy93aW5yb29tJykgc2hhcmVkLmNoYW5nZU1hcCgnL21hcHMvaHViJyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGFyZWQuY2hhbmdlTWFwKCcvbWFwcy93aW5yb29tJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcmVkLm1hcHNCZWF0ZW5bc2hhcmVkLm1hcFBhdGhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbWFwc0JlYXRlbicsIE9iamVjdC5rZXlzKHNoYXJlZC5tYXBzQmVhdGVuKS5qb2luKCd8JykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2Nyb2xsXHJcbiAgICAgICAgICAgICAgICB0b1Njcm9sbCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoc2hhcmVkLnR1dG9yaWFsID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICBzaGFyZWQuYmVhdEN1cnJlbnRUdXRvcmlhbE1hcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qY29pbiovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgaWYoby5jb2xsZWN0ZWQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG8uY29sbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgb2JzdGFjbGVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYob2JzdGFjbGVzW2ldLmlzQ29pbmRvb3IgPT09IHRydWUgJiYgb2JzdGFjbGVzW2ldLmNvaW5Eb29yQ29sb3IgPT09IG8uY29sb3Ipe1xyXG4gICAgICAgICAgICAgICAgb2JzdGFjbGVzW2ldLmNvaW5zIC09IG8uY29pbkFtb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKmNvaW5kb29yKi9cclxuICAgIChwLCByZXMsIG8pID0+IHtcclxuICAgICAgICBpZihvLmNvaW5zID4gMCl7XHJcbiAgICAgICAgICAgIHAucG9zLnggKz0gcmVzLm92ZXJsYXBWLng7XHJcbiAgICAgICAgICAgIHAucG9zLnkgKz0gcmVzLm92ZXJsYXBWLnk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qY2hlY2twb2ludCovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgaWYoby5jaGVja3BvaW50Q29sbGVjdGVkID09PSB0cnVlKSByZXR1cm47XHJcbiAgICAgICAgby5jaGVja3BvaW50Q29sbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICBzaGFyZWQuc3Bhd25Qb3NpdGlvbi54ID0gby50b3BMZWZ0LnggKyBvLmRpbWVuc2lvbnMueCAvIDI7XHJcbiAgICAgICAgc2hhcmVkLnNwYXduUG9zaXRpb24ueSA9IG8udG9wTGVmdC55ICsgby5kaW1lbnNpb25zLnkgLyAyO1xyXG4gICAgfSxcclxuICAgIC8qYnJlYWthYmxlKi9cclxuICAgIChwLCByZXMsIG8sIGlkKSA9PiB7XHJcbiAgICAgICAgaWYoby5zdHJlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBwLnBvcy54ICs9IHJlcy5vdmVybGFwVi54O1xyXG4gICAgICAgICAgICBwLnBvcy55ICs9IHJlcy5vdmVybGFwVi55O1xyXG4gICAgICAgICAgICBvLnN0cmVuZ3RoLS07XHJcbiAgICAgICAgICAgIGlmKG8uc3RyZW5ndGggPCAwKSBvLnN0cmVuZ3RoID0gMDtcclxuICAgICAgICAgICAgcC50b3VjaGluZ05vcm1hbEluZGV4ZXMucHVzaChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBicmVha2FibGUgb2JzIHNob3VsZG4ndCByZWdlbmVyYXRlIG9uIHRvcCBvZiB5b3VcclxuICAgICAgICBvLmxhc3RCcm9rZVRpbWUgPSB3aW5kb3cuZnJhbWVzO1xyXG4gICAgfSxcclxuICAgIC8qc2FmZSovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgcC5vblNhZmUgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIC8qdHAqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge1xyXG4gICAgICAgIC8vIHdob29zaCBzb3VuZCBlZmZlY3Q/XHJcbiAgICAgICAgcC5wb3MueCA9IG8udHB4O1xyXG4gICAgICAgIHAucG9zLnkgPSBvLnRweTtcclxuICAgICAgICBwLnJlbmRlclJhZGl1cyA9IE1hdGgubWluKHAucmVuZGVyUmFkaXVzLCBwLnNhdC5yIC8gMik7XHJcbiAgICB9LFxyXG4gICAgLypjb252ZXlvciovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgcC5mb3JjZXMucHVzaChNYXRoLmNvcyhvLmNvbnZleW9yQW5nbGUpICogby5jb252ZXlvckZvcmNlLCBNYXRoLnNpbihvLmNvbnZleW9yQW5nbGUpICogby5jb252ZXlvckZvcmNlLCBvLmNvbnZleW9yRnJpY3Rpb24pO1xyXG4gICAgfSxcclxuICAgIC8qcGxhdGZvcm1lciovXHJcbiAgICAocCwgcmVzLCBvLCBpZCkgPT4ge1xyXG4gICAgICAgIG8udG91Y2hpbmdQbGF0Zm9ybWVyID0gdHJ1ZTtcclxuICAgICAgICBvLmp1bXBDb29sZG93bi0tO1xyXG5cclxuICAgICAgICAvLyBhZGQgY29udmV5b3IgZm9yY2VcclxuICAgICAgICBwLmZvcmNlcy5wdXNoKE1hdGguY29zKG8ucGxhdGZvcm1lckFuZ2xlKSAqIG8ucGxhdGZvcm1lckZvcmNlLCBNYXRoLnNpbihvLnBsYXRmb3JtZXJBbmdsZSkgKiBvLnBsYXRmb3JtZXJGb3JjZSwgby5wbGF0Zm9ybWVyRnJpY3Rpb24pO1xyXG5cclxuICAgICAgICAvLyBpZGVhOiBmaW5kIHRoZSBhbW91bnQgb2YgeC95IHRoZSBwbGF5ZXIgbW92ZXMgaW4gdGhlIHBsYXRmb3JtZXIgYW5kIG1vdmUgdGhlIG9wcG9zaXRlIHRvIGVmZmVjdGl2ZWx5IGxvY2sgdGhlIHBsYXllcidzIG1vdGlvbiBwZXJwZW5kaWN1bGFyIHRvIHRoZSBwbGF0Zm9ybWVyJ3MgZGlyZWN0aW9uXHJcbiAgICAgICAgY29uc3QgcGxheWVyVmVsQW5nbGUgPSBNYXRoLmF0YW4yKHAueXYsIHAueHYpO1xyXG5cclxuICAgICAgICBjb25zdCBhbmdsZUJldHdlZW4gPSBvLnBsYXRmb3JtZXJBbmdsZSAtIHBsYXllclZlbEFuZ2xlO1xyXG5cclxuICAgICAgICBjb25zdCBkaXN0TW92ZWRPblBsYXRBbmdsZSA9IE1hdGguY29zKGFuZ2xlQmV0d2VlbikgKiBNYXRoLnNxcnQocC55diAqKiAyICsgcC54diAqKiAyKSAvIHAuZnJpY3Rpb247XHJcblxyXG4gICAgICAgIHAucG9zLnggLT0gTWF0aC5jb3Moby5wbGF0Zm9ybWVyQW5nbGUpICogZGlzdE1vdmVkT25QbGF0QW5nbGU7XHJcbiAgICAgICAgcC5wb3MueSAtPSBNYXRoLnNpbihvLnBsYXRmb3JtZXJBbmdsZSkgKiBkaXN0TW92ZWRPblBsYXRBbmdsZTtcclxuXHJcbiAgICAgICAgY29uc3QgdG91Y2hpbmdOb3JtYWxUaGlzRnJhbWUgPSBwLnRvdWNoaW5nTm9ybWFsSW5kZXhlcy5sZW5ndGggIT09IDAgfHwgKHAubGFzdFRvdWNoaW5nTm9ybWFsSW5kZXhlc1twLmxhc3RUb3VjaGluZ05vcm1hbEluZGV4ZXMubGVuZ3RoLTFdID49IGlkICYmIG8uanVzdEp1bXBlZCA9PT0gZmFsc2UpIHx8IHAudG91Y2hpbmdXYWxsID09PSB0cnVlO1xyXG4gICAgICAgIG8uanVzdEp1bXBlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBjaGVja2luZyBpZiB3ZSB3ZXJlIGVpdGhlciBpbnRlcnNlY3Rpbmcgd2l0aCBhIG5vcm1hbCBsYXN0IGZyYW1lIHRoYXQncyBpbmRleGVkIGFmdGVyIHRoZSBvYnMgb3Igd2UgYXJlIGludGVyc2VjdGluZyB3aXRoIGEgbm9ybWFsIHJuXHJcbiAgICAgICAgaWYoby5qdW1wQ29vbGRvd24gPD0gMCAmJiAodG91Y2hpbmdOb3JtYWxUaGlzRnJhbWUgPT09IHRydWUgfHwgKG8uY2FuSnVtcE1pZGFpciA9PT0gdHJ1ZSAmJiBvLm1pZGFpclN0b3JlZEp1bXAgPT09IHRydWUpKSl7XHJcbiAgICAgICAgICAgIG8ubWlkYWlyU3RvcmVkSnVtcCA9IG8ubWlkYWlyU3RvcmVkSnVtcCB8fCB0b3VjaGluZ05vcm1hbFRoaXNGcmFtZTtcclxuICAgICAgICAgICAgby5jYW5KdW1wID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYoTWF0aC5hYnMoc2hvcnRBbmdsZURpc3Qoby5wbGF0Zm9ybWVyQW5nbGUgKyBNYXRoLlBJLCBwbGF5ZXJWZWxBbmdsZSkpIDwgTWF0aC5QSSAqIDAuNDggJiYgLU1hdGguc3FydChwLnh2KioyK3AueXYqKjIpKk1hdGguY29zKGFuZ2xlQmV0d2Vlbik+LjEpe1xyXG4gICAgICAgICAgICAgICAgcC5mb3JjZXMucHVzaCgtTWF0aC5jb3Moby5wbGF0Zm9ybWVyQW5nbGUpICogby5qdW1wRm9yY2UsIC1NYXRoLnNpbihvLnBsYXRmb3JtZXJBbmdsZSkgKiBvLmp1bXBGb3JjZSwgby5qdW1wRnJpY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgby5qdW1wQ29vbGRvd24gPSBvLm1heEp1bXBDb29sZG93bjtcclxuICAgICAgICAgICAgICAgIG8ubWlkYWlyU3RvcmVkSnVtcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgby5qdXN0SnVtcGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG8uY2FuSnVtcCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKnJlc3RyaWN0QXhpcyovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgcC5heGlzU3BlZWRNdWx0WCAqPSBvLmF4aXNTcGVlZE11bHRYO1xyXG4gICAgICAgIHAuYXhpc1NwZWVkTXVsdFkgKj0gby5heGlzU3BlZWRNdWx0WTtcclxuICAgIH0sXHJcbiAgICAvKnNuYXBHcmlkKi9cclxuICAgIChwLCByZXMsIG8pID0+IHtcclxuICAgICAgICAvLyBmb3IgdGhvc2Ugd2hvIGhhdmVuJ3Qgc2VlbiBpdCwgdGhpcyBpcyBraW5kIG9mIG15IG1hZ251bSBvcHVzIG9mIHNpbXVsYXRpb24gZnVuY3Rpb25zLlxyXG4gICAgICAgIC8vIERldmVsb3BlZCBhIGZldyB5ZWFycyBiYWNrIGxhdGVyIHByZXNlbnRlZCBhdCBhIGNvbmZlcmVuY2UuIEFzayBtZSAoc2VydW0pIGFib3V0IGl0IVxyXG4gICAgICAgIC8vIHRoZSBiYXNpYyBpZGVhIG9mIGhvdyBpdCB3b3JrcyBpcyB3ZSBoYXZlIHRvIHNuYXAgdG8gYSByb3RhdGVkIHNuYXAgZ3JpZCBpbiBzcGFjZSwgc28gd2VcclxuICAgICAgICAvLyB0cmFuc2xhdGUgdGhlIHBsYXllciB0byB0aGUgc25hcEdyaWQgdW50aWwgaXRzIGxpa2UgdGhlIHNuYXAgZ3JpZCBpcyB1bnJvdGF0ZWQuIFRoZW4gd2Ugc25hcFxyXG4gICAgICAgIC8vIGJ5IG1vZHVsb2luZyB0aGUgeCB0byB0aGUgZ3JpZCBhbmQgdGhlbiByb3RhdGUgYmFjayB0byBnZXQgdGhlIGZpbmFsIHBvc2l0aW9uLlxyXG4gICAgICAgIG8uc25hcENvb2xkb3duLS07XHJcbiAgICAgICAgby5zbmFwQ29sbGlkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBpZihvLnNuYXBDb29sZG93biA8PSAwICYmICgoby50b1NuYXBYID09PSB0cnVlICYmIE1hdGguYWJzKHAueHYpID4gMC4wMSkgfHwgKG8udG9TbmFwWSA9PT0gdHJ1ZSAmJiBNYXRoLmFicyhwLnl2KSA+IDAuMDEpKSl7XHJcbiAgICAgICAgICAgIG8uc25hcENvb2xkb3duID0gby5tYXhTbmFwQ29vbGRvd247XHJcbiAgICAgICAgICAgIGxldCBwbGF5ZXJTbmFwQW5nbGUgPSBNYXRoLmF0YW4yKG8udG9TbmFwWSA9PT0gdHJ1ZSA/IHAueXYgOiAwLCBvLnRvU25hcFggPT09IHRydWUgPyBwLnh2IDogMCk7XHJcbiAgICAgICAgICAgIG8uaW50ZXJwb2xhdGVQbGF5ZXJEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdGltZTogTWF0aC5taW4oby5tYXhTbmFwQ29vbGRvd24tMSwgNSksXHJcbiAgICAgICAgICAgICAgICBuZXh0WDogcC5wb3MueCArIE1hdGguY29zKHBsYXllclNuYXBBbmdsZSkgKiBvLnNuYXBNYWduaXR1ZGUgKiAwLjk1LFxyXG4gICAgICAgICAgICAgICAgbmV4dFk6IHAucG9zLnkgKyBNYXRoLnNpbihwbGF5ZXJTbmFwQW5nbGUpICogby5zbmFwTWFnbml0dWRlICogMC45NVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoby5pbnRlcnBvbGF0ZVBsYXllckRhdGEudGltZSA+IDEpe1xyXG4gICAgICAgICAgICBvLmludGVycG9sYXRlUGxheWVyRGF0YS50aW1lLS07XHJcbiAgICAgICAgICAgIHAucG9zLnggPSBwLnBvcy54ICogMC44ICsgMC4yICogby5pbnRlcnBvbGF0ZVBsYXllckRhdGEubmV4dFg7XHJcbiAgICAgICAgICAgIHAucG9zLnkgPSBwLnBvcy55ICogMC44ICsgMC4yICogby5pbnRlcnBvbGF0ZVBsYXllckRhdGEubmV4dFk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG1pZGRsZVggPSBvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54IC8gMjtcclxuICAgICAgICAgICAgbGV0IG1pZGRsZVkgPSBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55IC8gMjtcclxuICAgICAgICAgICAgLy8gaW4gb3JkZXIgdG8gc25hcCBjb3JyZWN0bHksIHJvdGF0ZSBib3RoIHRoZSBwIGFuZCB0aGUgbyB0aGUgbmVnYXRpdmUgc25hcEFuZ2xlIHJlbGF0aXZlIHRvIHRoZSBvJ3MgY2VudGVyXHJcbiAgICAgICAgICAgIC8vIHRoaXMgbWVhbnMgdGhhdCB0aGUgcGxheWVyIHdpbGwgYmUgcmVsYXRpdmVseSBjb3JyZWN0IHRvIHRoZSBvYnMgYW5kIHRoZSBvYnMgd2lsbCBiZSBheGlzLWFsaWduZWRcclxuICAgICAgICAgICAgbGV0IHBydCA9IHtcclxuICAgICAgICAgICAgICAgIGFuZ2xlOiBNYXRoLmF0YW4yKHAucG9zLnkgLSBtaWRkbGVZLCBwLnBvcy54IC0gbWlkZGxlWCkgLSBvLnNuYXBBbmdsZSxcclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiBNYXRoLnNxcnQoKHAucG9zLnkgLSBtaWRkbGVZKSoqMiArIChwLnBvcy54IC0gbWlkZGxlWCkqKjIpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBydC54ID0gTWF0aC5jb3MocHJ0LmFuZ2xlKSAqIHBydC5kaXN0YW5jZTtcclxuICAgICAgICAgICAgcHJ0LnkgPSBNYXRoLnNpbihwcnQuYW5nbGUpICogcHJ0LmRpc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgLy8gYXBwbHlpbmcgdGhlIHRyYW5zZm9ybSBqdXN0IGxpa2UgdGhlIG5vcm90YXRlIHNuYXAgdGhhdCBpIGNvZGVkIGVhcmxpZXJcclxuICAgICAgICAgICAgLy8gaW4gb3RoZXIgd29yZHMsIHNuYXAgdGhlIHJlbGF0aXZlIHAgdG8gdGhlIHJlbGF0aXZlIGdyaWRcclxuICAgICAgICAgICAgaWYoby50b1NuYXBYID09PSB0cnVlKSBwcnQueCA9IHBydC54ICogMC40ICsgMC42ICogKE1hdGgucm91bmQocHJ0LnggLyBvLnNuYXBEaXN0YW5jZVgpICogby5zbmFwRGlzdGFuY2VYKTtcclxuICAgICAgICAgICAgaWYoby50b1NuYXBZID09PSB0cnVlKSBwcnQueSA9IHBydC55ICogMC40ICsgMC42ICogKE1hdGgucm91bmQocHJ0LnkgLyBvLnNuYXBEaXN0YW5jZVkpICogby5zbmFwRGlzdGFuY2VZKTtcclxuXHJcbiAgICAgICAgICAgIHBydC5hbmdsZSA9IE1hdGguYXRhbjIocHJ0LnksIHBydC54KSArIG8uc25hcEFuZ2xlO1xyXG4gICAgICAgICAgICBwcnQuZGlzdGFuY2UgPSBNYXRoLnNxcnQocHJ0LnkqKjIgKyBwcnQueCoqMik7XHJcblxyXG4gICAgICAgICAgICAvLyByb3RhdGluZyBiYWNrXHJcbiAgICAgICAgICAgIC8vIHRyYW5zbGF0aW5nIHRoZSByZWxhdGl2ZSBjb29yZGluYXRlcyBiYWNrIHRvIGFic29sdXRlIG9uZXNcclxuICAgICAgICAgICAgcC5wb3MueCA9IE1hdGguY29zKHBydC5hbmdsZSkgKiBwcnQuZGlzdGFuY2UgKyBtaWRkbGVYO1xyXG4gICAgICAgICAgICBwLnBvcy55ID0gTWF0aC5zaW4ocHJ0LmFuZ2xlKSAqIHBydC5kaXN0YW5jZSArIG1pZGRsZVk7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVja2luZyBpZiB0aGUgb3JpZ2luYWwgcG9pbnQgd2FzIG91dHNpZGUgb2YgdGhlIHNuYXBncmlkIGFzIGEgcmVzdWx0IG9mIHJvdGF0aW9uLiBJZiBzbywgYXBwbHkgdHJhbnNsYXRpb25zIHRvIG1ha2UgaXQgcmlnaHRcclxuICAgICAgICAgICAgLy8gaWYocC5wb3MueCA8IG8udG9wTGVmdC54IC0gcC5zcGVlZCB8fCBwLnBvcy54ID4gby50b3BMZWZ0LnggKyBvLmRpbWVuc2lvbnMueCArIHAuc3BlZWQpe1xyXG4gICAgICAgICAgICAvLyAgICAgcC5wb3MueCArPSBNYXRoLnNpZ24ocC54dikgKiBvLnNuYXBEaXN0YW5jZVgqMC42O1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZihwLnBvcy55IDwgby50b3BMZWZ0LnkgLSBwLnNwZWVkIHx8IHAucG9zLnkgPiBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55ICsgcC5zcGVlZCl7XHJcbiAgICAgICAgICAgIC8vICAgICBwLnBvcy55ICs9IE1hdGguc2lnbihwLnl2KSAqIG8uc25hcERpc3RhbmNlWSowLjY7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyp0aW1lVHJhcCovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgby50aW1lVHJhcEludGVyc2VjdGluZyA9IHRydWU7XHJcbiAgICAgICAgby50aW1lVHJhcFRpbWUtLTtcclxuICAgICAgICBpZihvLnRpbWVUcmFwVGltZSA8IDApe1xyXG4gICAgICAgICAgICBpZihvLnRpbWVUcmFwVG9LaWxsID09PSB0cnVlKSBwLmRlYWQgPSBwLnRpbWVUcmFwT3ZlcnJpZGVTYWZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgby50aW1lVHJhcFRpbWUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZVNpemUqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge1xyXG4gICAgICAgIGlmKG8uc2l6ZU11bHQgPCAxICYmIG8ubGFzdENoYW5nZVNpemVDb2xsaWRpbmcgPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgLy8gaWYgdGhlIHBsYXllciB3b3VsZCBub3QgYmUgY29sbGlkaW5nIHdpdGggdGhlIG9ic3RhY2xlIHdpdGggdGhlIHNtYWxsZXIgcmFkaXVzLFxyXG4gICAgICAgICAgICAvLyBkb24ndCBzY2FsZSB0aGUgcGxheWVyIHRvIGF2b2lkIGZyYW1lIDEgeWVzIGZyYW1lIDIgbm8gaml0dGVyIGVmZmVjdHNcclxuXHJcbiAgICAgICAgICAgIC8vIGJhc2ljYWxseSwgd2UgZG8gdGhpcyBieSBlZmZlY3RpdmVseSBkZWNyZWFzaW5nIHRoZSBvYnN0YWNsZSdzIGJvcmRlciByYWRpdXMgKHNvIHBvbHkgd291bGQganVzdCBiZSBzbWFsbGVyIHBvbHkpXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBwbGF5ZXIgaGFzIG5vdCBhbHJlYWR5IGNvbGxpZGVkLiBJZiB0aGUgcGxheWVyIGlzIGNvbGxpZGluZywgd2UgYWxyZWFkeSBkZWNyZWFzZWQgdGhlIHJhZGl1cyBzbyB0aGVyZSdzIG5vIG5lZWQgdG8gZGVjcmVhc2UgdGhlIGJvcmRlclxyXG4gICAgICAgICAgICByZXMuY2xlYXIoKTtcclxuICAgICAgICAgICAgcC5zYXQuciAqPSBvLnNpemVNdWx0O1xyXG4gICAgICAgICAgICBpZihvLnNhdC5yICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZWQgPSBTQVQudGVzdENpcmNsZUNpcmNsZShvLnNhdCwgcC5zYXQsIHJlcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsaWRlZCA9IFNBVC50ZXN0UG9seWdvbkNpcmNsZShvLnNhdCwgcC5zYXQsIHJlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcC5zYXQuciAvPSBvLnNpemVNdWx0O1xyXG4gICAgICAgICAgICBpZihjb2xsaWRlZCA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG8uc2l6ZUNoYW5nZVBlcm1hbmVudCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGlmKG8ucGVybWFuZW50U2l6ZUNoYW5nZURvbmUgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBvLnBlcm1hbmVudFNpemVDaGFuZ2VEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHAuc2F0LnIgKj0gby5zaXplTXVsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBvLmNoYW5nZVNpemVDb2xsaWRpbmcgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlU3BlZWQqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge1xyXG4gICAgICAgIGlmKG8uc3BlZWRDaGFuZ2VQZXJtYW5lbnQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICBpZihvLnBlcm1hbmVudFNwZWVkQ2hhbmdlRG9uZSA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIG8ucGVybWFuZW50U3BlZWRDaGFuZ2VEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHAuc3BlZWQgKj0gby5zcGVlZE11bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwLmF4aXNTcGVlZE11bHRYICo9IG8uc3BlZWRNdWx0O1xyXG4gICAgICAgICAgICBwLmF4aXNTcGVlZE11bHRZICo9IG8uc3BlZWRNdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKnNvbGlkQ29sb3IqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge30sXHJcbiAgICAvKmludmlzaWJsZSovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7fSxcclxuICAgIC8qY2hhbmdlTWFwKi9cclxuICAgIChwLCByZXMsIG8pID0+IHtcclxuICAgICAgICBpZihzaGFyZWQud29uID09PSB0cnVlKSByZXR1cm47XHJcbiAgICAgICAgc2hhcmVkLndvbiA9IHRydWU7XHJcbiAgICAgICAgaWYoc2hhcmVkLmlzRXhDbGllbnQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICBpZihvLnRvQ3VzdG9tUGxhbmV0ID09PSB0cnVlICYmIG8uY2hhbmdlTWFwQnJva2VuID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzLmFwcGVuZCgnbWFwbmFtZScsIG8ubWFwTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBzaGFyZWQuY2hhbmdlTWFwKCcvY3VzdG9tUGxhbmV0JywgJ0dFVCcsIGhlYWRlcnMsICgpPT57c2hhcmVkLndvbiA9IGZhbHNlO28uY2hhbmdlTWFwQnJva2VuPXRydWU7fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBzaGFyZWQuY2hhbmdlTWFwKCcvbWFwcy8nICsgby5tYXBOYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBzZW5kIHVzZXIgdG8gdGhlIHNwZWNpZmllZCBvbW5pXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qdG9ybmFkbyovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgcC5wb3MueCArPSBNYXRoLmNvcyhNYXRoLnJhbmRvbSgpICogMzYwKSAqIG8udG9ybmFkb1N0cmVuZ3RoO1xyXG4gICAgICAgIHAucG9zLnkgKz0gTWF0aC5zaW4oTWF0aC5yYW5kb20oKSAqIDM2MCkgKiBvLnRvcm5hZG9TdHJlbmd0aDtcclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZVZpZ25ldHRlKi9cclxuICAgIChwLCByZXMsIG8pID0+IHtcclxuICAgICAgICBjb25zdCB2ID0gc2hhcmVkLmNvbG9ycy52aWduZXR0ZTtcclxuICAgICAgICB2LmlubmVyLnIgPSBvLmlubmVyUjtcclxuICAgICAgICB2LmlubmVyLmcgPSBvLmlubmVyRztcclxuICAgICAgICB2LmlubmVyLmIgPSBvLmlubmVyQjtcclxuICAgICAgICB2LmlubmVyLnNpemUgPSBvLmlubmVyU2l6ZTtcclxuICAgICAgICB2LmlubmVyLm9wYWNpdHkgPSBvLmlubmVyT3BhY2l0eTtcclxuXHJcbiAgICAgICAgdi5vdXRlci5yID0gby5vdXRlclI7XHJcbiAgICAgICAgdi5vdXRlci5nID0gby5vdXRlckc7XHJcbiAgICAgICAgdi5vdXRlci5iID0gby5vdXRlckI7XHJcbiAgICAgICAgdi5vdXRlci5zaXplID0gby5vdXRlclNpemU7XHJcbiAgICAgICAgdi5vdXRlci5vcGFjaXR5ID0gby5vdXRlck9wYWNpdHk7XHJcbiAgICB9LFxyXG4gICAgLypwdXNoYWJsZSovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgaWYoby5wdXNoQW5nbGUgIT09IG8ubGFzdFB1c2hBbmdsZSl7XHJcbiAgICAgICAgICAgIG8ubGFzdFB1c2hBbmdsZSA9IG8ucHVzaEFuZ2xlO1xyXG4gICAgICAgICAgICBvLnB1c2hBbmdsZVZlY1ggPSBNYXRoLmNvcyhvLnB1c2hBbmdsZSk7XHJcbiAgICAgICAgICAgIG8ucHVzaEFuZ2xlVmVjWSA9IE1hdGguc2luKG8ucHVzaEFuZ2xlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRvdCBwcm9kdWN0IG9mIHRoZSB0d28gdmVjdG9ycyA9IGFtb3VudCB0aGV5IGFyZSBwb2ludGluZyB0b2dldGhlclxyXG4gICAgICAgIC8vIGZyZWVWYXJpYWJsZSA9IHB1c2hEZWx0YVxyXG4gICAgICAgIGZyZWVWYXJpYWJsZSA9IC0oby5wdXNoQW5nbGVWZWNYICogcmVzLm92ZXJsYXBWLnggKyBvLnB1c2hBbmdsZVZlY1kgKiByZXMub3ZlcmxhcFYueSkgKiBvLnB1c2hDb252ZXJzaW9uUmF0aW87XHJcblxyXG4gICAgICAgIGlmKG8ucG9zaXRpdmVEaXJlY3Rpb25Pbmx5ID09PSBmYWxzZSB8fCBmcmVlVmFyaWFibGUgPiAwKXtcclxuICAgICAgICAgICAgby5wdXNoUGVyY2VudCArPSBmcmVlVmFyaWFibGUgLyBvLm1heFB1c2hEaXN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgIGlmKG8ucHVzaFBlcmNlbnQgPiAxKXtcclxuICAgICAgICAgICAgICAgIGZyZWVWYXJpYWJsZSAtPSAoby5wdXNoUGVyY2VudC0xKSAqIG8ubWF4UHVzaERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgby5wdXNoUGVyY2VudCA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihvLnB1c2hQZXJjZW50IDwgMCl7XHJcbiAgICAgICAgICAgICAgICBmcmVlVmFyaWFibGUgLT0gby5wdXNoUGVyY2VudCAqIG8ubWF4UHVzaERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgby5wdXNoUGVyY2VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG8ucG9zLnggKz0gby5wdXNoQW5nbGVWZWNYICogZnJlZVZhcmlhYmxlO1xyXG4gICAgICAgICAgICBvLnBvcy55ICs9IG8ucHVzaEFuZ2xlVmVjWSAqIGZyZWVWYXJpYWJsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRlc3QgY29sbGlzaW9uIGFnYWluIHRvIGJvdW5kIHRoZSBwbGF5ZXJcclxuICAgICAgICByZXMuY2xlYXIoKTtcclxuICAgICAgICBpZihvLnNhdC5yICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb2xsaWRlZCA9IFNBVC50ZXN0Q2lyY2xlQ2lyY2xlKG8uc2F0LCBwLnNhdCwgcmVzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb2xsaWRlZCA9IFNBVC50ZXN0UG9seWdvbkNpcmNsZShvLnNhdCwgcC5zYXQsIHJlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihjb2xsaWRlZCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIHAucG9zLnggKz0gcmVzLm92ZXJsYXBWLng7XHJcbiAgICAgICAgICAgIHAucG9zLnkgKz0gcmVzLm92ZXJsYXBWLnk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlTXVzaWMqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge1xyXG4gICAgICAgIHNoYXJlZC5wbGF5TXVzaWMoby5tdXNpY1BhdGgsIG8ubXVzaWNTdGFydFRpbWUpO1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlU2hpcCovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgaWYocC5zaGlwID09PSBvLmNoYW5nZVNoaXBTdGF0ZVRvKSByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGlmKHNoYXJlZC5pc0V4Q2xpZW50ID09PSB0cnVlICYmIG8uY2hhbmdlU2hpcFN0YXRlVG8gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIC8vIHNlbmQgZGlzYWJsZSBzaGlwXHJcbiAgICAgICAgICAgIHNoYXJlZC51NFswXSA9IDEwO1xyXG4gICAgICAgICAgICBzaGFyZWQuc2VuZChzaGFyZWQudTQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwLnNoaXAgPT09IGZhbHNlICYmIG8uY2hhbmdlU2hpcFN0YXRlVG8gPT09IHRydWUpIHtwLnNoaXBBbmdsZSA9IG8uaW5pdGlhbFNoaXBBbmdsZTsgcC5zaGlwVHVyblNwZWVkID0gby5zaGlwVHVyblNwZWVkOyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcC5zaGlwID0gby5jaGFuZ2VTaGlwU3RhdGVUbztcclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZUdyYXBwbGUqL1xyXG4gICAgKHAsIHJlcywgbykgPT4ge1xyXG4gICAgICAgIGlmKHAuZ3JhcHBsZSA9PT0gdHJ1ZSAmJiBvLmNoYW5nZUdyYXBwbGVTdGF0ZVRvID09PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIGlmKHNoYXJlZC5pc0V4Q2xpZW50ID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgIC8vIHNlbmQgZGlzYWJsZSBncmFwcGxlXHJcbiAgICAgICAgICAgICAgICBzaGFyZWQudTRbMF0gPSAxMjtcclxuICAgICAgICAgICAgICAgIHNoYXJlZC5zZW5kKHNoYXJlZC51NCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcC5ncmFwcGxlWCA9IHAuZ3JhcHBsZVkgPSAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHAuZ3JhcHBsZSA9IG8uY2hhbmdlR3JhcHBsZVN0YXRlVG87XHJcbiAgICAgICAgcC5ncmFwcGxlUmFuZ2UgPSBvLmdyYXBwbGVSYW5nZTtcclxuICAgICAgICBwLmdyYXBwbGVGb3JjZSA9IG8uZ3JhcHBsZUZvcmNlO1xyXG4gICAgICAgIHAuZ3JhcHBsZUZyaWMgPSBvLmdyYXBwbGVGcmljO1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlRGVhdGhUaW1lciovXHJcbiAgICAocCwgcmVzLCBvKSA9PiB7XHJcbiAgICAgICAgaWYoc2hhcmVkLmlzRXhDbGllbnQgPT09IHRydWUgJiYgcC5kZWF0aFRpbWVyID09PSB0cnVlICYmIG8uY2hhbmdlRGVhdGhUaW1lclN0YXRlVG8gPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgLy8gc2VuZCBkaXNhYmxlIGRlYXRoIHRpbWVyXHJcbiAgICAgICAgICAgIHNoYXJlZC51NFswXSA9IDE0O1xyXG4gICAgICAgICAgICBzaGFyZWQuc2VuZChzaGFyZWQudTQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoby5jaGFuZ2VEZWF0aFRpbWVyU3RhdGVUbyA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGlmKHAuZGVhdGhUaW1lciA9PT0gZmFsc2UpIHAuZGVhdGhUaW1lID0gby5kZWF0aFRpbWU7XHJcbiAgICAgICAgICAgIGVsc2UgcC5kZWF0aFRpbWUgPSBNYXRoLm1pbihwLmRlYXRoVGltZSwgby5kZWF0aFRpbWUpO1xyXG4gICAgICAgICAgICBwLmRlYXRoVGltZSAtPSBvLmRyYWluQW1vdW50V2hpbGVTdGFuZGluZ09uO1xyXG5cclxuICAgICAgICAgICAgLy8gY2hhbmdlVmlnbmV0dGVcclxuICAgICAgICAgICAgZWZmZWN0TWFwWzI0XShwLCByZXMsIG8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwLmRlYXRoVGltZXIgPSBvLmNoYW5nZURlYXRoVGltZXJTdGF0ZVRvO1xyXG4gICAgfVxyXG5dXHJcblxyXG5jb25zdCBpZGxlRWZmZWN0TWFwID0gW1xyXG4gICAgLy8gJ2JvdW5kJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdraWxsJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdib3VuY2UnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2N1c3RvbSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjdXN0b21JbWFnZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdzdG9wRm9yY2VzJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICd3aW5wYWQnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2NvaW4nLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2NvaW5kb29yJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGVja3BvaW50JyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdicmVha2FibGUnLFxyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBpZiAoby5zdHJlbmd0aCA8IG8ubWF4U3RyZW5ndGggJiYgd2luZG93LmZyYW1lcy1vLmxhc3RCcm9rZVRpbWUgPiBvLnJlZ2VuVGltZSkge1xyXG4gICAgICAgICAgICBvLnN0cmVuZ3RoICs9IG8uaGVhbFNwZWVkO1xyXG4gICAgICAgICAgICBpZihvLnN0cmVuZ3RoID49IG8ubWF4U3RyZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgby5sYXN0QnJva2VUaW1lID0gd2luZG93LmZyYW1lcztcclxuICAgICAgICAgICAgICAgIG8uc3RyZW5ndGggPSBvLm1heFN0cmVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vICdzYWZlJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICd0cCcsXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAnY29udmV5b3InLFxyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBvLmNvbnZleW9yQW5nbGUgKz0gby5jb252ZXlvckFuZ2xlUm90YXRlU3BlZWQ7XHJcbiAgICB9LFxyXG4gICAgLy8gJ3BsYXRmb3JtZXInLFxyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBvLnBsYXRmb3JtZXJBbmdsZSArPSBvLnBsYXRmb3JtZXJBbmdsZVJvdGF0ZVNwZWVkO1xyXG4gICAgfSxcclxuICAgIC8vICdyZXN0cmljdEF4aXMnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ3NuYXBHcmlkJyxcclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgby5zbmFwQW5nbGUgKz0gby5zbmFwQW5nbGVSb3RhdGVTcGVlZDtcclxuICAgICAgICBpZihvLnNuYXBDb2xsaWRlZCA9PT0gZmFsc2UpIG8uaW50ZXJwb2xhdGVQbGF5ZXJEYXRhLnRpbWUgPSAtMTtcclxuICAgICAgICBvLnNuYXBDb2xsaWRlZCA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8vICd0aW1lVHJhcCdcclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgaWYoby50aW1lVHJhcEludGVyc2VjdGluZyAhPT0gdHJ1ZSkgby50aW1lVHJhcFRpbWUgKz0gby50aW1lVHJhcFJlY292ZXJ5U3BlZWQ7XHJcbiAgICAgICAgaWYoby50aW1lVHJhcFRpbWUgPiBvLnRpbWVUcmFwTWF4VGltZSkgby50aW1lVHJhcFRpbWUgPSBvLnRpbWVUcmFwTWF4VGltZTtcclxuICAgICAgICBvLnRpbWVUcmFwSW50ZXJzZWN0aW5nID0gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLy8gJ2NoYW5nZVNpemUnXHJcbiAgICAobywgcCkgPT4ge1xyXG4gICAgICAgIGlmKG8uc2l6ZUNoYW5nZVBlcm1hbmVudCA9PT0gdHJ1ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZihvLmxhc3RDaGFuZ2VTaXplQ29sbGlkaW5nID09PSB0cnVlICYmIG8uY2hhbmdlU2l6ZUNvbGxpZGluZyA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAvLyBleGl0XHJcbiAgICAgICAgICAgIHAuc2F0LnIgLz0gby5zaXplTXVsdDtcclxuICAgICAgICB9IGVsc2UgaWYoby5sYXN0Q2hhbmdlU2l6ZUNvbGxpZGluZyA9PT0gZmFsc2UgJiYgby5jaGFuZ2VTaXplQ29sbGlkaW5nID09PSB0cnVlKXtcclxuICAgICAgICAgICAgLy8gZW50ZXJcclxuICAgICAgICAgICAgcC5zYXQuciAqPSBvLnNpemVNdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgby5sYXN0Q2hhbmdlU2l6ZUNvbGxpZGluZyA9IG8uY2hhbmdlU2l6ZUNvbGxpZGluZztcclxuICAgICAgICBvLmNoYW5nZVNpemVDb2xsaWRpbmcgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvLyAnY2hhbmdlU3BlZWQnXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAnc29saWRDb2xvcidcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdpbnZpc2libGUnXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAnY2hhbmdlTWFwJ1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ3Rvcm5hZG8nXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAnY2hhbmdlVmlnbmV0dGUnXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAncHVzaGFibGUnXHJcbiAgICAobywgcCkgPT4ge1xyXG4gICAgICAgIC8vIGZyZWVWYXJpYWJsZSA9IHB1c2hEZWx0YVxyXG4gICAgICAgIGZyZWVWYXJpYWJsZSA9IC1vLmlkbGVQdXNoQmFja1NwZWVkO1xyXG4gICAgICAgIG8ucHVzaFBlcmNlbnQgKz0gZnJlZVZhcmlhYmxlIC8gby5tYXhQdXNoRGlzdGFuY2U7XHJcblxyXG4gICAgICAgIGlmKG8ucHVzaFBlcmNlbnQgPiAxKXtcclxuICAgICAgICAgICAgZnJlZVZhcmlhYmxlIC09IChvLnB1c2hQZXJjZW50LTEpICogby5tYXhQdXNoRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIG8ucHVzaFBlcmNlbnQgPSAxO1xyXG4gICAgICAgIH0gZWxzZSBpZihvLnB1c2hQZXJjZW50IDwgMCl7XHJcbiAgICAgICAgICAgIGZyZWVWYXJpYWJsZSAtPSBvLnB1c2hQZXJjZW50ICogby5tYXhQdXNoRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIG8ucHVzaFBlcmNlbnQgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgby5wb3MueCArPSBmcmVlVmFyaWFibGUgKiBNYXRoLmNvcyhvLnB1c2hBbmdsZSk7XHJcbiAgICAgICAgby5wb3MueSArPSBmcmVlVmFyaWFibGUgKiBNYXRoLnNpbihvLnB1c2hBbmdsZSk7XHJcbiAgICB9LFxyXG4gICAgLy8gY2hhbmdlTXVzaWNcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vIGNoYW5nZVNoaXBcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vIGNoYW5nZUdyYXBwbGVcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vIGNoYW5nZURlYXRoVGltZXJcclxuICAgIHVuZGVmaW5lZCxcclxuXVxyXG5cclxuc2hhcmVkLmVmZmVjdENvbnN0cmFpbnRzTWFwID0gW1xyXG4gICAgLypib3VuZCovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKmtpbGwqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLypib3VuY2UqL1xyXG4gICAge2RlY2F5OiBbdW5kZWZpbmVkLCAxXX0sXHJcbiAgICAvKmN1c3RvbSovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKmN1c3RvbUltYWdlKi9cclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8qc3RvcEZvcmNlcyovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKndpbnBhZCovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKmNvaW4qL1xyXG4gICAge2NvaW5BbW91bnQ6IFsxXX0sXHJcbiAgICAvKmNvaW5kb29yKi9cclxuICAgIHtjb2luczogWzFdLCBtYXhDb2luczogWzFdfSxcclxuICAgIC8qY2hlY2twb2ludCovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKmJyZWFrYWJsZSovXHJcbiAgICB7bWF4U3RyZW5ndGg6IFsxXSwgcmVnZW5UaW1lOiBbMF0sIGhlYWxTcGVlZDogWzBdfSxcclxuICAgIC8qc2FmZSovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKnRwKi9cclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8qY29udmV5b3IqL1xyXG4gICAge2NvbnZleW9yRnJpY3Rpb246IFt1bmRlZmluZWQsIDFdfSxcclxuICAgIC8qcGxhdGZvcm1lciovXHJcbiAgICB7cGxhdGZvcm1lckZyaWN0aW9uOiBbdW5kZWZpbmVkLCAxXSwganVtcEZyaWN0aW9uOiBbdW5kZWZpbmVkLCAxXX0sXHJcbiAgICAvKnJlc3RyaWN0QXhpcyovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKnNuYXBHcmlkKi9cclxuICAgIHtzbmFwRGlzdGFuY2VYOiBbMC4xXSwgc25hcERpc3RhbmNlWTogWzAuMV0sIHNuYXBDb29sZG93bjogWzBdfSxcclxuICAgIC8qdGltZVRyYXAqL1xyXG4gICAge3RpbWVUcmFwVGltZTogWzBdLCB0aW1lVHJhcE1heFRpbWU6IFswXX0sXHJcbiAgICAvKmNoYW5nZVNpemUqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLypjaGFuZ2VTcGVlZCovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKnNvbGlkQ29sb3IqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLyppbnZpc2libGUqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLypjaGFuZ2VNYXAqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLyp0b3JuYWRvKi9cclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8qY2hhbmdlVmlnbmV0dGUqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLypwdXNoYWJsZSovXHJcbiAgICB7bWF4UHVzaERpc3RhbmNlOiBbMF19LFxyXG4gICAgLypjaGFuZ2VNdXNpYyovXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvKmNoYW5nZVNoaXAqL1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLypjaGFuZ2VHcmFwcGxlKi9cclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8qY2hhbmdlRGVhdGhUaW1lciovXHJcbiAgICB1bmRlZmluZWQsXHJcbl1cclxuXHJcbnNoYXJlZC5lZmZlY3RNYXBJMk4gPSBbXHJcbiAgICAnYm91bmQnLFxyXG4gICAgJ2tpbGwnLFxyXG4gICAgJ2JvdW5jZScsXHJcbiAgICAnY3VzdG9tJyxcclxuICAgICdjdXN0b21JbWFnZScsXHJcbiAgICAnc3RvcEZvcmNlcycsXHJcbiAgICAnd2lucGFkJyxcclxuICAgICdjb2luJyxcclxuICAgICdjb2luZG9vcicsXHJcbiAgICAnY2hlY2twb2ludCcsXHJcbiAgICAnYnJlYWthYmxlJyxcclxuICAgICdzYWZlJyxcclxuICAgICd0cCcsXHJcbiAgICAnY29udmV5b3InLFxyXG4gICAgJ3BsYXRmb3JtZXInLFxyXG4gICAgJ3Jlc3RyaWN0QXhpcycsXHJcbiAgICAnc25hcEdyaWQnLFxyXG4gICAgJ3RpbWVUcmFwJyxcclxuICAgICdjaGFuZ2VTaXplJyxcclxuICAgICdjaGFuZ2VTcGVlZCcsXHJcbiAgICAnc29saWRDb2xvcicsXHJcbiAgICAnaW52aXNpYmxlJyxcclxuICAgICdjaGFuZ2VNYXAnLFxyXG4gICAgJ3Rvcm5hZG8nLFxyXG4gICAgJ2NoYW5nZVZpZ25ldHRlJyxcclxuICAgICdwdXNoYWJsZScsXHJcbiAgICAnY2hhbmdlTXVzaWMnLFxyXG4gICAgJ2NoYW5nZVNoaXAnLFxyXG4gICAgJ2NoYW5nZUdyYXBwbGUnLFxyXG4gICAgJ2NoYW5nZURlYXRoVGltZXInLFxyXG5dXHJcblxyXG5zaGFyZWQuZWZmZWN0RGVmYXVsdE1hcCA9IFtcclxuICAgIC8vIGJvdW5kXHJcbiAgICB7fSxcclxuICAgIC8vIGtpbGxcclxuICAgIHtcclxuICAgICAgICBib3VuZFBsYXllcjogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgLy8gYm91bmNlXHJcbiAgICB7XHJcbiAgICAgICAgYm91bmNpbmVzczogMSxcclxuICAgICAgICBkZWNheTogMC45OFxyXG4gICAgfSxcclxuICAgIC8vIGN1c3RvbVxyXG4gICAge30sXHJcbiAgICAvLyBjdXN0b21JbWFnZVxyXG4gICAge1xyXG4gICAgICAgIHVybDogJ2h0dHA6Ly90aW55dXJsLmNvbS9kd2F5bmUtdC1yaidcclxuICAgIH0sXHJcbiAgICAvLyBzdG9wRm9yY2VzXHJcbiAgICB7fSxcclxuICAgIC8vIHdpbnBhZFxyXG4gICAge30sXHJcbiAgICAvLyBjb2luXHJcbiAgICB7XHJcbiAgICAgICAgY29pbkFtb3VudDogMSxcclxuICAgICAgICBjb2xvcjogJyNkNmQ2MTEnXHJcbiAgICB9LFxyXG4gICAgLy8gY29pbmRvb3JcclxuICAgIHtcclxuICAgICAgICBjb2luZG9vckNvaW5BbW91bnQ6IDMsXHJcbiAgICAgICAgY29pbkRvb3JDb2xvcjogJyNkNmQ2MTEnXHJcbiAgICB9LFxyXG4gICAgLy8gY2hlY2twb2ludFxyXG4gICAge1xyXG4gICAgICAgIGNoZWNrcG9pbnRPZmZzZXRYOiAwLFxyXG4gICAgICAgIGNoZWNrcG9pbnRPZmZzZXRZOiAwXHJcbiAgICB9LFxyXG4gICAgLy8gYnJlYWthYmxlXHJcbiAgICB7XHJcbiAgICAgICAgbWF4U3RyZW5ndGg6IDYwLFxyXG4gICAgICAgIHJlZ2VuVGltZTogMTAwLFxyXG4gICAgICAgIGhlYWxTcGVlZDogMVxyXG4gICAgfSxcclxuICAgIC8vIHNhZmVcclxuICAgIHt9LFxyXG4gICAgLy8gdHBcclxuICAgIHtcclxuICAgICAgICB0cHg6IDEwMCxcclxuICAgICAgICB0cHk6IDEwMFxyXG4gICAgfSxcclxuICAgIC8vIGNvbnZleW9yXHJcbiAgICB7XHJcbiAgICAgICAgY29udmV5b3JGb3JjZTogMC4zLFxyXG4gICAgICAgIGNvbnZleW9yQW5nbGU6IDkwLFxyXG4gICAgICAgIGNvbnZleW9yQW5nbGVSb3RhdGVTcGVlZDogMCxcclxuICAgICAgICBjb252ZXlvckZyaWN0aW9uOiAwLjhcclxuICAgIH0sXHJcbiAgICAvLyBwbGF0Zm9ybWVyXHJcbiAgICB7XHJcbiAgICAgICAgcGxhdGZvcm1lckZvcmNlOiAxLFxyXG4gICAgICAgIHBsYXRmb3JtZXJBbmdsZTogOTAsXHJcbiAgICAgICAgcGxhdGZvcm1lckFuZ2xlUm90YXRlU3BlZWQ6IDAsXHJcbiAgICAgICAgcGxhdGZvcm1lckZyaWN0aW9uOiAwLjg3NSxcclxuICAgICAgICBtYXhKdW1wQ29vbGRvd246IDMwLFxyXG4gICAgICAgIGp1bXBGb3JjZTogMjAsXHJcbiAgICAgICAganVtcERlY2F5OiAwLjk1LFxyXG4gICAgICAgIC8vIG1heEp1bXBzOiAxXHJcbiAgICB9LFxyXG4gICAgLy8gcmVzdHJpY3RBeGlzXHJcbiAgICB7XHJcbiAgICAgICAgYXhpc1NwZWVkTXVsdFg6IDAsXHJcbiAgICAgICAgYXhpc1NwZWVkTXVsdFk6IDFcclxuICAgIH0sXHJcbiAgICAvLyBzbmFwR3JpZFxyXG4gICAge1xyXG4gICAgICAgIHRvU25hcFg6IHRydWUsXHJcbiAgICAgICAgdG9TbmFwWTogdHJ1ZSxcclxuICAgICAgICBzbmFwRGlzdGFuY2VYOiAxMDAsXHJcbiAgICAgICAgc25hcERpc3RhbmNlWTogMTAwLFxyXG4gICAgICAgIHNuYXBDb29sZG93bjogNDAsXHJcbiAgICAgICAgc25hcEFuZ2xlOiAwLFxyXG4gICAgICAgIHNuYXBBbmdsZVJvdGF0ZVNwZWVkOiAwXHJcbiAgICB9LFxyXG4gICAgLy8gdGltZVRyYXBcclxuICAgIHtcclxuICAgICAgICB0aW1lVHJhcE1heFRpbWU6IDMwMCxcclxuICAgICAgICB0aW1lVHJhcFJlY292ZXJ5U3BlZWQ6IDEuNSxcclxuICAgICAgICB0aW1lVHJhcFRvS2lsbDogdHJ1ZSxcclxuICAgICAgICB0aW1lVHJhcFRvU2hvd1RlbnRoOiBmYWxzZVxyXG4gICAgfSxcclxuICAgIC8vIGNoYW5nZVNpemVcclxuICAgIHtcclxuICAgICAgICBzaXplTXVsdDogMS41LFxyXG4gICAgICAgIHNpemVDaGFuZ2VQZXJtYW5lbnQ6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgLy8gY2hhbmdlU3BlZWRcclxuICAgIHtcclxuICAgICAgICBzcGVlZE11bHQ6IDIuNSxcclxuICAgICAgICBzcGVlZENoYW5nZVBlcm1hbmVudDogZmFsc2VcclxuICAgIH0sXHJcbiAgICAvLyBzb2xpZENvbG9yXHJcbiAgICB7XHJcbiAgICAgICAgaGV4OiAnI0ZGRkZGRicsXHJcbiAgICAgICAgYWxwaGE6IDFcclxuICAgIH0sXHJcbiAgICAvLyBpbnZpc2libGVcclxuICAgIHt9LFxyXG4gICAgLy8gY2hhbmdlTWFwXHJcbiAgICB7bWFwTmFtZTogJ2h1YicsIHRvQ3VzdG9tUGxhbmV0OiB0cnVlfSxcclxuICAgIC8vIHRvcm5hZG9cclxuICAgIHt0b3JuYWRvU3RyZW5ndGg6IDF9LFxyXG4gICAgLy8gY2hhbmdlVmlnbmV0dGVcclxuICAgIHtcclxuICAgICAgICBpbm5lclI6IDAsIGlubmVyRzogMCwgaW5uZXJCOiAwLCBpbm5lclNpemU6IDAuMSwgaW5uZXJPcGFjaXR5OiAwLFxyXG4gICAgICAgIG91dGVyUjogMCwgb3V0ZXJHOiAwLCBvdXRlckI6IDAsIG91dGVyU2l6ZTogMC41LCBvdXRlck9wYWNpdHk6IDFcclxuICAgIH0sXHJcbiAgICAvLyBwdXNoYWJsZVxyXG4gICAge1xyXG4gICAgICAgIHB1c2hBbmdsZTogMTgwLFxyXG4gICAgICAgIG1heFB1c2hEaXN0YW5jZTogMTAwLFxyXG4gICAgICAgIGlkbGVQdXNoQmFja1NwZWVkOiAwLjI1LFxyXG4gICAgICAgIHBvc2l0aXZlRGlyZWN0aW9uT25seTogZmFsc2UsXHJcbiAgICAgICAgcHVzaENvbnZlcnNpb25SYXRpbzogMC44XHJcbiAgICB9LFxyXG4gICAgLy8gY2hhbmdlTXVzaWNcclxuICAgIHttdXNpY1BhdGg6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PU9pZFhLUlZWVjcwJywgbXVzaWNTdGFydFRpbWU6IDB9LFxyXG4gICAgLy8gY2hhbmdlU2hpcFxyXG4gICAge2NoYW5nZVNoaXBTdGF0ZVRvOiB0cnVlLCBpbml0aWFsU2hpcEFuZ2xlOiAwLCBzaGlwVHVyblNwZWVkOiBNYXRoLlBJIC8gMTAwfSxcclxuICAgIC8vIGNoYW5nZUdyYXBwbGVcclxuICAgIHtjaGFuZ2VHcmFwcGxlU3RhdGVUbzogdHJ1ZSwgZ3JhcHBsZVJhbmdlOiA0ODgsIGdyYXBwbGVGb3JjZTogMC4wMSwgZ3JhcHBsZUZyaWM6IDAuNH0sXHJcbiAgICAvLyBjaGFuZ2VEZWF0aFRpbWVyXHJcbiAgICB7Y2hhbmdlRGVhdGhUaW1lclN0YXRlVG86IHRydWUsIGRyYWluQW1vdW50V2hpbGVTdGFuZGluZ09uOiAwLCBkZWF0aFRpbWU6IDEwfSxcclxuXVxyXG5cclxuY29uc3QgaWRsZUVmZmVjdFN5bmNLZXlzID0gW1xyXG4gICAgLy8gJ2JvdW5kJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdraWxsJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdib3VuY2UnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2N1c3RvbSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjdXN0b21JbWFnZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdzdG9wRm9yY2VzJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICd3aW5wYWQnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2NvaW4nLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2NvaW5kb29yJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGVja3BvaW50JyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdicmVha2FibGUnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ3NhZmUnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ3RwJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjb252ZXlvcicsXHJcbiAgICAobywgc3luYykgPT4ge1xyXG4gICAgICAgIGlmKG8uY29udmV5b3JBbmdsZVJvdGF0ZVNwZWVkID09PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgc3luYy5jb252ZXlvckFuZ2xlID0gby5jb252ZXlvckFuZ2xlO1xyXG4gICAgfSxcclxuICAgIC8vICdwbGF0Zm9ybWVyJyxcclxuICAgIChvLCBzeW5jKSA9PiB7XHJcbiAgICAgICAgaWYoby5wbGF0Zm9ybWVyQW5nbGVSb3RhdGVTcGVlZCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHN5bmMucGxhdGZvcm1lckFuZ2xlID0gby5wbGF0Zm9ybWVyQW5nbGU7XHJcbiAgICB9LFxyXG4gICAgLy8gJ3Jlc3RyaWN0QXhpcycsXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAnc25hcEdyaWQnLFxyXG4gICAgKG8sIHN5bmMpID0+IHtcclxuICAgICAgICBpZihvLnNuYXBBbmdsZVJvdGF0ZVNwZWVkID09PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgc3luYy5zbmFwQW5nbGUgPSBvLnNuYXBBbmdsZTtcclxuICAgIH0sXHJcbiAgICAvLyAndGltZVRyYXAnXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAnY2hhbmdlU2l6ZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGFuZ2VTcGVlZCdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdzb2xpZENvbG9yJ1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2ludmlzaWJsZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGFuZ2VNYXAnXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAndG9ybmFkbydcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGFuZ2VWaWduZXR0ZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdwdXNoYWJsZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vIGNoYW5nZU11c2ljXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyBjaGFuZ2VTaGlwXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyBjaGFuZ2VHcmFwcGxlXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyBjaGFuZ2VEZWF0aFRpbWVyXHJcbiAgICB1bmRlZmluZWQsXHJcbl1cclxuXHJcbmNvbnN0IGFwcGx5SWRsZUVmZmVjdFN5bmNLZXlzID0gW1xyXG4gICAgLy8gJ2JvdW5kJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdraWxsJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdib3VuY2UnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2N1c3RvbSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjdXN0b21JbWFnZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdzdG9wRm9yY2VzJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICd3aW5wYWQnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2NvaW4nLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2NvaW5kb29yJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGVja3BvaW50JyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdicmVha2FibGUnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ3NhZmUnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ3RwJyxcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjb252ZXlvcicsXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGlmKE51bWJlci5pc0Zpbml0ZShvLmNvbnZleW9yQW5nbGUpID09PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgICAgIG8uY29udmV5b3JBbmdsZSA9IGNvbnZleW9yQW5nbGU7XHJcbiAgICB9LFxyXG4gICAgLy8gJ3BsYXRmb3JtZXInLFxyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBpZihOdW1iZXIuaXNGaW5pdGUoby5wbGF0Zm9ybWVyQW5nbGUpID09PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgICAgIG8ucGxhdGZvcm1lckFuZ2xlID0gcGxhdGZvcm1lckFuZ2xlO1xyXG4gICAgfSxcclxuICAgIC8vICdyZXN0cmljdEF4aXMnLFxyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ3NuYXBHcmlkJyxcclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgaWYoTnVtYmVyLmlzRmluaXRlKG8uc25hcEFuZ2xlKSA9PT0gZmFsc2UpIHJldHVybjtcclxuICAgICAgICBvLnNuYXBBbmdsZSA9IHNuYXBBbmdsZTtcclxuICAgIH0sXHJcbiAgICAvLyAndGltZVRyYXAnXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAnY2hhbmdlU2l6ZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGFuZ2VTcGVlZCdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdzb2xpZENvbG9yJ1xyXG4gICAgdW5kZWZpbmVkLFxyXG4gICAgLy8gJ2ludmlzaWJsZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGFuZ2VNYXAnXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyAndG9ybmFkbydcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdjaGFuZ2VWaWduZXR0ZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vICdwdXNoYWJsZSdcclxuICAgIHVuZGVmaW5lZCxcclxuICAgIC8vIGNoYW5nZU11c2ljXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyBjaGFuZ2VTaGlwXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyBjaGFuZ2VHcmFwcGxlXHJcbiAgICB1bmRlZmluZWQsXHJcbiAgICAvLyBjaGFuZ2VEZWF0aFRpbWVyXHJcbiAgICB1bmRlZmluZWQsXHJcbl1cclxuXHJcbnNoYXJlZC5nZW5lcmF0ZVN5bmNNYXBzID0gKCkgPT4ge1xyXG4gICAgaWYoc2hhcmVkLnNpbXVsYXRlVG9TeW5jICE9PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIHNoYXJlZC5zaW11bGF0ZVRvU3luYyA9IG5ldyBNYXAoKTsgc2hhcmVkLmlkbGVFZmZlY3RUb1N5bmMgPSBuZXcgTWFwKCk7XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2ltdWxhdGVNYXAubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHNpbXVsYXRlU3luY0tleXNbaV0gIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHNoYXJlZC5zaW11bGF0ZVRvU3luYy5zZXQoc2ltdWxhdGVNYXBbaV0sIHNpbXVsYXRlU3luY0tleXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgaWRsZUVmZmVjdE1hcC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoaWRsZUVmZmVjdFN5bmNLZXlzW2ldICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBzaGFyZWQuaWRsZUVmZmVjdFRvU3luYy5zZXQoaWRsZUVmZmVjdE1hcFtpXSwgaWRsZUVmZmVjdFN5bmNLZXlzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbnNoYXJlZC5nZW5lcmF0ZUFwcGx5U3luY01hcHMgPSAoKSA9PiB7XHJcbiAgICBpZihzaGFyZWQuc2ltdWxhdGVUb0FwcGx5U3luYyAhPT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICBzaGFyZWQuc2ltdWxhdGVUb0FwcGx5U3luYyA9IG5ldyBNYXAoKTsgc2hhcmVkLmlkbGVFZmZlY3RUb0FwcGx5U3luYyA9IG5ldyBNYXAoKTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaW11bGF0ZU1hcC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoYXBwbHlTaW11bGF0ZVN5bmNLZXlzW2ldICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBzaGFyZWQuc2ltdWxhdGVUb0FwcGx5U3luYy5zZXQoc2ltdWxhdGVNYXBbaV0sIGFwcGx5U2ltdWxhdGVTeW5jS2V5c1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBpZGxlRWZmZWN0TWFwLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihhcHBseUlkbGVFZmZlY3RTeW5jS2V5c1tpXSAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgc2hhcmVkLmlkbGVFZmZlY3RUb0FwcGx5U3luYy5zZXQoaWRsZUVmZmVjdE1hcFtpXSwgYXBwbHlJZGxlRWZmZWN0U3luY0tleXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgcmVuZGVyRWZmZWN0TWFwID0gW1xyXG4gICAgLypib3VuZCovXHJcbiAgICAobykgPT4geyBcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gc2hhcmVkLmNvbG9ycy50aWxlO1xyXG4gICAgfSxcclxuICAgIC8qa2lsbCovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBvLmJvdW5kUGxheWVyID09PSB0cnVlID8gJyNjNzAwMDAnIDogJyM5ZTAwMDAnO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdibGFjayc7XHJcbiAgICAgICAgY3R4LnRvU3Ryb2tlID0gdHJ1ZTtcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gNDtcclxuICAgIH0sXHJcbiAgICAvKmJvdW5jZSovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmx1ZSc7XHJcbiAgICB9LFxyXG4gICAgLypjdXN0b20qL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHgudG9GaWxsID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGN0eC5jbGVhblVwRnVuY3Rpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgIGN0eC5jbGlwKCk7XHJcblxyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHNoYXJlZC5zdGFySW1nLCBvLnRvcExlZnQueCwgby50b3BMZWZ0LnksIG8uZGltZW5zaW9ucy54LCBvLmRpbWVuc2lvbnMueSk7XHJcblxyXG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKmN1c3RvbUltYWdlKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgY3R4LnRvRmlsbCA9IGZhbHNlO1xyXG4gICAgICAgIGlmKG8uaW1nTG9hZGVkID09PSBmYWxzZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBjdHguY2xpcCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShvLmltZywgby50b3BMZWZ0LngsIG8udG9wTGVmdC55LCBvLmRpbWVuc2lvbnMueCwgby5kaW1lbnNpb25zLnkpO1xyXG5cclxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLypzdG9wRm9yY2VzKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdvcmFuZ2UnO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdibGFjayc7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDY7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC4xO1xyXG4gICAgICAgIGN0eC50b1N0cm9rZSA9IHRydWU7XHJcbiAgICB9LFxyXG4gICAgLyp3aW5wYWQqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gYGhzbCgke3dpbmRvdy5mcmFtZXMqMTAwMC82MC8xMn0sNTAlLDUwJSlgO1xyXG4gICAgICAgIGN0eC5zaGFkb3dDb2xvciA9IGN0eC5maWxsU3R5bGU7XHJcbiAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAxNTtcclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qY29pbiovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBvLmNvbG9yO1xyXG4gICAgICAgIGlmKG8uY29sbGVjdGVkID09PSB0cnVlKXtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC4yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuODtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoby5jb2luQW1vdW50ICE9PSAxKXtcclxuICAgICAgICAgICAgY3R4LmNsZWFuVXBGdW5jdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBtaWRkbGVYID0gby50b3BMZWZ0LnggKyBvLmRpbWVuc2lvbnMueC8yO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pZGRsZVkgPSBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55LzI7IFxyXG5cclxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzaGFyZWQuY29sb3JzLnRpbGU7Ly8nIzMxMzEzMSc7XHJcbiAgICAgICAgICAgICAgICBjdHguZm9udCA9IGAke01hdGgubWluKDYwLCBvLmRpbWVuc2lvbnMueC80LCBvLmRpbWVuc2lvbnMueS80KX1weCBJbnRlcmA7XHJcbiAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgby5jb2luQW1vdW50KSxcclxuICAgICAgICAgICAgICAgICAgICBtaWRkbGVYLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pZGRsZVlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLypjb2luZG9vciovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzaGFyZWQuY29sb3JzLnRpbGU7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gby5jb2lucyA8PSAwID8gMC41IDogMTtcclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gby5jb2luRG9vckNvbG9yO1xyXG5cclxuICAgICAgICAgICAgbGV0IG1pZGRsZVggPSBvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54LzI7XHJcbiAgICAgICAgICAgIGxldCBtaWRkbGVZID0gby50b3BMZWZ0LnkgKyBvLmRpbWVuc2lvbnMueS8yOyBcclxuXHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LnJvdW5kUmVjdChtaWRkbGVYLW8uZGltZW5zaW9ucy54LzQsIG1pZGRsZVktby5kaW1lbnNpb25zLnkvNCwgby5kaW1lbnNpb25zLngvMiwgby5kaW1lbnNpb25zLnkvMiwgTWF0aC5taW4oby5kaW1lbnNpb25zLngsby5kaW1lbnNpb25zLnkpLzIwKTtcclxuICAgICAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzaGFyZWQuY29sb3JzLnRpbGU7Ly8nIzMxMzEzMScvLycjNDg0YTAwJztcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSBgJHtNYXRoLm1pbig2MCwgby5kaW1lbnNpb25zLngvNCwgby5kaW1lbnNpb25zLnkvNCl9cHggSW50ZXJgO1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KFxyXG4gICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgby5jb2lucyksXHJcbiAgICAgICAgICAgICAgICBtaWRkbGVYLFxyXG4gICAgICAgICAgICAgICAgbWlkZGxlWVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKmNoZWNrcG9pbnQqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBpZiAoby5jaGVja3BvaW50Q29sbGVjdGVkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzBmYmEwOSc7XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMTU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDU5NjJiJztcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC44O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICBjdHguZ2xvYmFsQWxwaGEgLz0gNTtcclxuICAgICAgICAvLyAgICAgY29uc3QgZ3JkID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KG8ucG9zLngsIG8ucG9zLnksIDAsIG8ucG9zLngsIG8ucG9zLnksIChvLmRpbWVuc2lvbnMueCArIG8uZGltZW5zaW9ucy55KS8zKTtcclxuXHJcbiAgICAgICAgLy8gICAgIGdyZC5hZGRDb2xvclN0b3AoMCwgXCJyZ2JhKDI1NSwyNTUsMjU1LDEpXCIpO1xyXG4gICAgICAgIC8vICAgICBncmQuYWRkQ29sb3JTdG9wKDEsIFwicmdiYSgyNTUsMjU1LDI1NSwwKVwiKTtcclxuXHJcbiAgICAgICAgLy8gICAgIGN0eC5maWxsU3R5bGUgPSBncmQ7XHJcbiAgICAgICAgLy8gICAgIHJlbmRlckVmZmVjdE1hcFs3XShvKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9LFxyXG4gICAgLypicmVha2FibGUqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gc2hhcmVkLmNvbG9ycy50aWxlOy8vIHRvIG1ha2UgaXQgaW50byBoZXhcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gYmxlbmRDb2xvcignIzAwMDAwMCcsIGN0eC5maWxsU3R5bGUsIDAuNSk7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gby5zdHJlbmd0aCAvIG8ubWF4U3RyZW5ndGg7XHJcbiAgICB9LFxyXG4gICAgLypzYWZlKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgLy8gIzhjOGM4YyBoZXgsIC4yNSBnbG9iYWxBbHBoYVxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgxNDAsMTQwLDE0MCwuMjUpJztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSA0O1xyXG4gICAgICAgIGN0eC50b1N0cm9rZSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIGN0eC5maWxsU3R5bGUgPSBzaGFyZWQuc2FmZUNvbG9yIHx8IFwiIzhjOGM4Y1wiLFxyXG4gICAgICAgIC8vIGN0eC5nbG9iYWxBbHBoYSA9IC4yNSxcclxuICAgICAgICAvLyBjdHguYmVnaW5QYXRoKCksXHJcbiAgICAgICAgLy8gY3R4LmFyYyhwb3MueCwgcG9zLnksIG9ic3RhY2xlLnIsIDAsIDIgKiBNYXRoLlBJKSxcclxuICAgICAgICAvLyBjdHguZmlsbCgpLFxyXG4gICAgICAgIC8vIGN0eC5zdHJva2VTdHlsZSA9IFwiYmxhY2tcIixcclxuICAgICAgICAvLyBjdHgubGluZVdpZHRoID0gbGluZVdpZHRoLFxyXG4gICAgICAgIC8vIGN0eC5nbG9iYWxBbHBoYSA9IDEsXHJcbiAgICAgICAgLy8gY3R4LnN0cm9rZSgpO1xyXG4gICAgfSxcclxuICAgIC8qdHAqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzOGFiMzAnO1xyXG4gICAgfSxcclxuICAgIC8qY29udmV5b3IqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gc2hhcmVkLmNvbG9ycy50aWxlO1xyXG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMTtcclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBjdHguY2xpcCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICAgICAgZm9yKGxldCB4ID0gby50b3BMZWZ0LnggKyA1MDsgeCA8PSBvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54ICsgNTA7IHggKz0gMTAwKXtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgeSA9IG8udG9wTGVmdC55ICsgNTA7IHkgPD0gby50b3BMZWZ0LnkgKyBvLmRpbWVuc2lvbnMueSArIDUwOyB5ICs9IDEwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh4LHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoby5jb252ZXlvckFuZ2xlK01hdGguUEkvMik7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShzaGFyZWQuYXJyb3dJbWcsIC01MCwgLTUwLCAxMDAsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgtby5jb252ZXlvckFuZ2xlLU1hdGguUEkvMik7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgteCwteSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIC8vIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgLy8gY3R4LmZpbGxTdHlsZSA9ICdyZWQnO1xyXG4gICAgICAgICAgICAvLyBjdHguYXJjKG8udG9wTGVmdC54LCBvLnRvcExlZnQueSwgMzAsIDAsIE1hdGguUEkgKiAyKTtcclxuICAgICAgICAgICAgLy8gY3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgLy8gY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKnBsYXRmb3JtZXIqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gc2hhcmVkLmNvbG9ycy50aWxlO1xyXG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMTtcclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBjdHguY2xpcCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WCA9ICh3aW5kb3cuZnJhbWVzKjEwMDAvNjAgKiBvLnBsYXRmb3JtZXJGb3JjZSAqIE1hdGguY29zKG8ucGxhdGZvcm1lckFuZ2xlKSAvIDEwKSAlIDEwMCAtIDEwMDtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9ICh3aW5kb3cuZnJhbWVzKjEwMDAvNjAgKiBvLnBsYXRmb3JtZXJGb3JjZSAqIE1hdGguc2luKG8ucGxhdGZvcm1lckFuZ2xlKSAvIDEwKSAlIDEwMCAtIDEwMDtcclxuXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7XHJcbiAgICAgICAgICAgIGZvcihsZXQgeCA9IG8udG9wTGVmdC54ICsgb2Zmc2V0WCArIDUwOyB4IDw9IG8udG9wTGVmdC54ICsgby5kaW1lbnNpb25zLnggKyA1MDsgeCArPSAxMDApe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCB5ID0gby50b3BMZWZ0LnkgKyBvZmZzZXRZICsgNTA7IHkgPD0gby50b3BMZWZ0LnkgKyBvLmRpbWVuc2lvbnMueSArIDUwOyB5ICs9IDEwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh4LHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoby5wbGF0Zm9ybWVyQW5nbGUrTWF0aC5QSS8yKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHNoYXJlZC5hcnJvd0ltZywgLTUwLCAtNTAsIDEwMCwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKC1vLnBsYXRmb3JtZXJBbmdsZS1NYXRoLlBJLzIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLXgsLXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVuZGVyaW5nIPCfkY0gaWYgcGxheWVyIGNhbiBqdW1wXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGV2ZXIgaXMgdG8gYmUgbW9yZSBlbW9qaXMgbGlrZSB0aGlzLCB0aGVuIG1ha2UgYW4gYXJyYXkgb2YgZW1vamlzIHRoYXQgaSBjYW4gcHVzaCB0byB0aGF0IHJlbmRlciBvbiB0b3Agb2YgZWFjaCBvdGhlciBldmVyeSBmcmFtZSAody8gcHJpb3JpdHk/IHNvcnRlZD8pXHJcbiAgICAgICAgICAgIGlmKG8uY2FuSnVtcCA9PT0gdHJ1ZSAmJiBvLnRvdWNoaW5nUGxhdGZvcm1lciA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBzaGFyZWQucGxheWVyc1tzaGFyZWQuc2VsZklkXTtcclxuICAgICAgICAgICAgICAgIGlmKHBsYXllciAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gYDU2cHggSW50ZXJgO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCfwn5GNJywgcGxheWVyLnBvcy54LCBwbGF5ZXIucG9zLnkgLSBwbGF5ZXIuc2F0LnIgLSA1MCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgby50b3VjaGluZ1BsYXRmb3JtZXIgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLypyZXN0cmljdEF4aXMqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBpZihvLmF4aXNTcGVlZE11bHRYIDwgMCAmJiBvLmF4aXNTcGVlZE11bHRZIDwgMCl7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZihvLmF4aXNTcGVlZE11bHRYIDwgMCB8fCBvLmF4aXNTcGVlZE11bHRZIDwgMCl7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZmY2OTY5JztcclxuICAgICAgICB9IGVsc2UgaWYoby5heGlzU3BlZWRNdWx0WSA+IDEgfHwgby5heGlzU3BlZWRNdWx0WSA+IDEpe1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2M1YzUwMCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDQ7XHJcbiAgICAgICAgY3R4LnRvRmlsbCA9IGZhbHNlO1xyXG4gICAgICAgIGN0eC50b1N0cm9rZSA9IHRydWU7XHJcbiAgICAgICAgY3R4LmNsZWFuVXBGdW5jdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XHJcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcblxyXG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKG8udG9wTGVmdC54ICsgby5kaW1lbnNpb25zLnggLyAyLCBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55IC8gMik7XHJcblxyXG4gICAgICAgICAgICBjdHguY2xpcCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gby5heGlzU3BlZWRNdWx0WCA+IDEgPyAwLjggOiAoTWF0aC5tYXgoMC4zLG8uYXhpc1NwZWVkTXVsdFggPCAwID8gLW8uYXhpc1NwZWVkTXVsdFggOiAxLW8uYXhpc1NwZWVkTXVsdFgpKTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gby5heGlzU3BlZWRNdWx0WCA8IDAgPyAncmVkJyA6IChvLmF4aXNTcGVlZE11bHRYID4gMSA/ICcjYzVjNTAwJyA6ICd3aGl0ZScpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBmb3IobGV0IHggPSAtby5kaW1lbnNpb25zLngvMjsgeCA8PSBvLmRpbWVuc2lvbnMueC8yOyB4ICs9IDEwMCl7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHgsLW8uZGltZW5zaW9ucy55LzIpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4LG8uZGltZW5zaW9ucy55LzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gby5heGlzU3BlZWRNdWx0WSA+IDEgPyAwLjggOiAoTWF0aC5tYXgoMC4zLG8uYXhpc1NwZWVkTXVsdFkgPCAwID8gLW8uYXhpc1NwZWVkTXVsdFkgOiAxLW8uYXhpc1NwZWVkTXVsdFkpKTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gby5heGlzU3BlZWRNdWx0WSA8IDAgPyAncmVkJyA6IChvLmF4aXNTcGVlZE11bHRZID4gMSA/ICcjYzVjNTAwJyA6ICd3aGl0ZScpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBmb3IobGV0IHkgPSAtby5kaW1lbnNpb25zLnkvMjsgeSA8PSBvLmRpbWVuc2lvbnMueS8yOyB5ICs9IDEwMCl7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKC1vLmRpbWVuc2lvbnMueC8yLHkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhvLmRpbWVuc2lvbnMueC8yLHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLypzbmFwR3JpZCovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMDA4YSc7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC4xO1xyXG4gICAgICAgIGN0eC50b0NsaXAgPSB0cnVlO1xyXG5cclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBjdHguY2xpcCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gYmxlbmRDb2xvcignIzBmMDAwMCcsICcjMDAwMDAwJywgTWF0aC5tYXgoMCxvLnNuYXBDb29sZG93bikgLyBvLm1heFNuYXBDb29sZG93bik7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSA0O1xyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjE3O1xyXG5cclxuICAgICAgICAgICAgbGV0IG1pZGRsZVggPSBvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54LzI7XHJcbiAgICAgICAgICAgIGxldCBtaWRkbGVZID0gby50b3BMZWZ0LnkgKyBvLmRpbWVuc2lvbnMueS8yOyBcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShtaWRkbGVYLCBtaWRkbGVZKTtcclxuXHJcbiAgICAgICAgICAgIG8uc25hcFJvdGF0ZU1vdmVtZW50RXhwYW5zaW9uID0ge1xyXG4gICAgICAgICAgICAgICAgYmFzZTogKE1hdGgubWF4KG8uZGltZW5zaW9ucy54LG8uZGltZW5zaW9ucy55KSoqMi9NYXRoLnNxcnQoby5kaW1lbnNpb25zLngqKjIrby5kaW1lbnNpb25zLnkqKjIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG8uc25hcFJvdGF0ZU1vdmVtZW50RXhwYW5zaW9uLnggPSBNYXRoLmNlaWwoby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24uYmFzZS9vLnNuYXBEaXN0YW5jZVgrMSkqby5zbmFwRGlzdGFuY2VYO1xyXG4gICAgICAgICAgICBvLnNuYXBSb3RhdGVNb3ZlbWVudEV4cGFuc2lvbi55ID0gTWF0aC5jZWlsKG8uc25hcFJvdGF0ZU1vdmVtZW50RXhwYW5zaW9uLmJhc2Uvby5zbmFwRGlzdGFuY2VZKzEpKm8uc25hcERpc3RhbmNlWTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5yb3RhdGUoby5zbmFwQW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlbmRlclBhdGggPSBuZXcgUGF0aDJEKCk7XHJcbiAgICAgICAgICAgIGlmKG8udG9TbmFwWCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IHggPSAtby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24ueDsgeCA8PSBvLnNuYXBSb3RhdGVNb3ZlbWVudEV4cGFuc2lvbi54OyB4ICs9IG8uc25hcERpc3RhbmNlWCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyUGF0aC5yZWN0KC0xMCArIHgsIC1vLnNuYXBSb3RhdGVNb3ZlbWVudEV4cGFuc2lvbi54IC0gMTAsIDIwLCAyICogby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24ueCArIDIwKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHgubW92ZVRvKHgsLW8uc25hcFJvdGF0ZU1vdmVtZW50RXhwYW5zaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdHgubGluZVRvKHgsby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihvLnRvU25hcFkgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCB5ID0gLW8uc25hcFJvdGF0ZU1vdmVtZW50RXhwYW5zaW9uLnk7IHkgPD0gby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24ueTsgeSArPSBvLnNuYXBEaXN0YW5jZVkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclBhdGgucmVjdCgtby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24ueSAtIDEwLCAtMTAgKyB5LCAyICogby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24ueSArIDIwLCAyMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4Lm1vdmVUbygtby5zbmFwUm90YXRlTW92ZW1lbnRFeHBhbnNpb24seSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmxpbmVUbyhvLnNuYXBSb3RhdGVNb3ZlbWVudEV4cGFuc2lvbix5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHguc3Ryb2tlKHJlbmRlclBhdGgpO1xyXG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBkcmF3aW5nIHNuYXBNYWduaXR1ZGUgaW5kaWNhdG9yXHJcbiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IHNoYXJlZC5wbGF5ZXJzW3NoYXJlZC5zZWxmSWRdO1xyXG4gICAgICAgICAgICBpZihwbGF5ZXIucG9zLnggKyBvLnNuYXBNYWduaXR1ZGUgPCBtaWRkbGVYIC0gby5kaW1lbnNpb25zLngvMiB8fCBwbGF5ZXIucG9zLnggLSBvLnNuYXBNYWduaXR1ZGUgPiBtaWRkbGVYICsgby5kaW1lbnNpb25zLngvMiB8fCBwbGF5ZXIucG9zLnkgKyBvLnNuYXBNYWduaXR1ZGUgPCBtaWRkbGVZIC0gby5kaW1lbnNpb25zLnkvMiB8fCBwbGF5ZXIucG9zLnkgLSBvLnNuYXBNYWduaXR1ZGUgPiBtaWRkbGVZICsgby5kaW1lbnNpb25zLnkvMil7XHJcbiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdncmV5JztcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjtcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmNsaXAocmVuZGVyUGF0aCk7XHJcblxyXG4gICAgICAgICAgICBjdHgucm90YXRlKC1vLnNuYXBBbmdsZSk7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLW1pZGRsZVgsLW1pZGRsZVkpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmFyYyhwbGF5ZXIucG9zLngsIHBsYXllci5wb3MueSwgby5zbmFwTWFnbml0dWRlLCAwLCBNYXRoLlBJKjIpO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qdGltZVRyYXAqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBsZXQgbWlkZGxlWCA9IG8udG9wTGVmdC54ICsgby5kaW1lbnNpb25zLngvMjtcclxuICAgICAgICBsZXQgbWlkZGxlWSA9IG8udG9wTGVmdC55ICsgby5kaW1lbnNpb25zLnkvMjsgXHJcblxyXG4gICAgICAgIGxldCBncmQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQobWlkZGxlWCwgbWlkZGxlWSwgMCwgbWlkZGxlWCwgbWlkZGxlWSwgTWF0aC5taW4oMTAwLCAoby5kaW1lbnNpb25zLnggKyBvLmRpbWVuc2lvbnMueSkvMykpO1xyXG5cclxuICAgICAgICBpZihvLnRpbWVUcmFwVG9LaWxsID09PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMCwgXCJyZ2JhKDE5OSwxOTksMTk5LDApXCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKDEsIFwicmdiYSgxOTksMTk5LDE5OSwxKVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKDAsIFwicmdiYSgxOTksMCwwLDApXCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKDEsIFwicmdiYSgxOTksMCwwLDEpXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyZDtcclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBNYXRoLm1heCgwLjEyLCAwLjUgLSBvLnRpbWVUcmFwVGltZSAvIG8udGltZVRyYXBNYXhUaW1lIC8gMik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3R4LmNsZWFuVXBGdW5jdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gTWF0aC5tYXgoMC4zLCBvLnRpbWVUcmFwVGltZSAvIG8udGltZVRyYXBNYXhUaW1lIC8gMyk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgICAgICAgICBjdHguZm9udCA9IGAke01hdGgubWluKG8uZGltZW5zaW9ucy54LCBvLmRpbWVuc2lvbnMueSkvMn1weCBJbnRlcmA7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xyXG5cclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KG8udGltZVRyYXBUb1Nob3dUZW50aCA9PT0gdHJ1ZSA/IE1hdGgucm91bmQoby50aW1lVHJhcFRpbWUvNjAgKiAxMCkgLyAxMCA6IE1hdGgucm91bmQoby50aW1lVHJhcFRpbWUvNjApLCBtaWRkbGVYLCBtaWRkbGVZKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLypjaGFuZ2VTaXplKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgaWYoby5zaXplQ2hhbmdlUGVybWFuZW50ID09PSB0cnVlKXtcclxuICAgICAgICAgICAgY3R4LnRvU3Ryb2tlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDEwO1xyXG4gICAgICAgICAgICBjdHgubGluZURhc2hPZmZzZXQgPSAtd2luZG93LmZyYW1lcyoxMDAwLzYwIC8gMTU7XHJcbiAgICAgICAgICAgIGlmIChvLnNpemVNdWx0ID4gMSl7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzBlMzBhZCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzFjMTg1Mic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFszMCwgNDBdKTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5jbGVhblVwRnVuY3Rpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjdHguc2V0TGluZURhc2goW10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKG8ucGVybWFuZW50U2l6ZUNoYW5nZURvbmUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY3R4LnRvRmlsbCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChvLnNpemVNdWx0ID4gMSl7XHJcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwZTMwYWQnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMWMxODUyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjI4O1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlU3BlZWQqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBpZihvLnNwZWVkQ2hhbmdlUGVybWFuZW50ID09PSB0cnVlKXtcclxuICAgICAgICAgICAgY3R4LnRvU3Ryb2tlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDEwO1xyXG4gICAgICAgICAgICBjdHgubGluZURhc2hPZmZzZXQgPSAtd2luZG93LmZyYW1lcyoxMDAwLzYwIC8gMTU7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZWJhNTAwJztcclxuICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFszMCwgNDBdKTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5jbGVhblVwRnVuY3Rpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjdHguc2V0TGluZURhc2goW10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvLnBlcm1hbmVudFNwZWVkQ2hhbmdlRG9uZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjdHgudG9GaWxsID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZWJhNTAwJztcclxuICAgICAgICAgICAgY3R4LnRvU3Ryb2tlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGN0eC5maWxsU3R5bGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjU7XHJcblxyXG4gICAgICAgIC8vIHBlcm1hbmVudHMgc2hvdWxkIGRpc3NhcGVhciB1cG9uIHVzZSBpIHRoaW5rXHJcbiAgICB9LFxyXG4gICAgLypzb2xpZENvbG9yKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG8uaGV4O1xyXG4gICAgICAgIGlmKG8uaXNUZXh0ID09PSB0cnVlKWN0eC5nbG9iYWxBbHBoYSA9IDA7XHJcbiAgICAgICAgZWxzZSBjdHguZ2xvYmFsQWxwaGEgPSBvLmFscGhhO1xyXG4gICAgfSxcclxuICAgIC8qaW52aXNpYmxlKi9cclxuICAgIChvKSA9PiB7fSxcclxuICAgIC8qY2hhbmdlTWFwKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgLy8gY3R4LmZpbGxTdHlsZSA9IGBoc2woJHt3aW5kb3cuZnJhbWVzKjEwMDAvNjAvMTJ9LDUwJSw1MCUpYDtcclxuICAgICAgICAvLyBjdHguc2hhZG93Q29sb3IgPSBjdHguZmlsbFN0eWxlO1xyXG4gICAgICAgIC8vIGN0eC5zaGFkb3dCbHVyID0gMTU7XHJcbiAgICAgICAgLy8gY3R4LmNsZWFuVXBGdW5jdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAvLyAgICAgY3R4LnNoYWRvd0JsdXIgPSAwO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYoby50b0N1c3RvbVBsYW5ldCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzY0NjQ2NCc7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdChvLnRvcExlZnQueCwgby50b3BMZWZ0LnksIG8uZGltZW5zaW9ucy54LCBvLmRpbWVuc2lvbnMueSk7XHJcblxyXG4gICAgICAgICAgICBjdHguZm9udCA9IGAxMDAwICR7TWF0aC5taW4oby5kaW1lbnNpb25zLngsIG8uZGltZW5zaW9ucy55KS8yfXB4IEludGVyYDtcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzQ2NDY0Nic7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoby50b3BMZWZ0LnggKyBvLmRpbWVuc2lvbnMueC8yLCBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55LzIpO1xyXG5cclxuICAgICAgICAgICAgaWYoby5yYW5kb21TaW5lT2Zmc2V0ID09PSB1bmRlZmluZWQpIG8ucmFuZG9tU2luZU9mZnNldCA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjtcclxuICAgICAgICAgICAgY29uc3QgciA9IE1hdGguc2luKHdpbmRvdy5mcmFtZXMgLyAzNiArIG8ucmFuZG9tU2luZU9mZnNldCkgKiAwLjMyO1xyXG4gICAgICAgICAgICBjdHgucm90YXRlKHIpO1xyXG4gICAgICAgICAgICBjdHguZmlsbFRleHQoJz8nLCAwLCAwKTtcclxuICAgICAgICAgICAgY3R4LnJvdGF0ZSgtcik7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLShvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54LzIpLCAtKG8udG9wTGVmdC55ICsgby5kaW1lbnNpb25zLnkvMikpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgIGN0eC5mb250ID0gYCR7by5kaW1lbnNpb25zLnggLyAzLjV9cHggSW50ZXJgO1xyXG5cclxuICAgICAgICAgICAgLy8gc2FtZSBmaWxsVGV4dFxyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IE1hdGgubWluKDEsKChzaGFyZWQucGxheWVyc1tzaGFyZWQuc2VsZklkXS5wb3MueSArIGNhbnZhcy5oLzIpIC0gKG8udG9wTGVmdC55KSkgLyAoby5kaW1lbnNpb25zLnkpKTtcclxuXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSAqPSAwLjg7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChcclxuICAgICAgICAgICAgICAgIG8ubWFwTmFtZSxcclxuICAgICAgICAgICAgICAgIG8udG9wTGVmdC54ICsgby5kaW1lbnNpb25zLnggLyAyLFxyXG4gICAgICAgICAgICAgICAgby50b3BMZWZ0LnkgLSBvLmRpbWVuc2lvbnMueSAvIDRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuXHJcbiAgICAgICAgICAgIGN0eC50b0ZpbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHQgPSAoMStNYXRoLnNpbih3aW5kb3cuZnJhbWVzLzM2KSkvMiAqIChvLmRpZmZpY3VsdHkgJSAxKTtcclxuXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJsZW5kQ29sb3IoZGlmZmljdWx0eUltYWdlQ29sb3JzW01hdGguZmxvb3Ioby5kaWZmaWN1bHR5KV0sZGlmZmljdWx0eUltYWdlQ29sb3JzW01hdGgubWluKDgsTWF0aC5jZWlsKG8uZGlmZmljdWx0eSkpXSx0KTtcclxuXHJcbiAgICAgICAgY3R4LmNsZWFuVXBGdW5jdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYoby5kaW1lbnNpb25zLnggPiBvLmRpbWVuc2lvbnMueSl7XHJcbiAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKG8uZGltZW5zaW9ucy54IC0gby5kaW1lbnNpb25zLnkgKyBvLnRvcExlZnQueCwgby50b3BMZWZ0LnkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShvLnRvcExlZnQueCwgby5kaW1lbnNpb25zLnkgLSBvLmRpbWVuc2lvbnMueCArIG8udG9wTGVmdC55KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY3R4LmxpbmVDYXAgPSAncm91bmQnO1xyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSB0O1xyXG4gICAgICAgICAgICBkaWZmaWN1bHR5SW1hZ2VNYXBbTWF0aC5taW4oOCxNYXRoLmNlaWwoby5kaWZmaWN1bHR5KSldKE1hdGgubWluKG8uZGltZW5zaW9ucy54LCBvLmRpbWVuc2lvbnMueSkpO1xyXG5cclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMSAtIHQ7XHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHlJbWFnZU1hcFtNYXRoLmZsb29yKG8uZGlmZmljdWx0eSldKE1hdGgubWluKG8uZGltZW5zaW9ucy54LCBvLmRpbWVuc2lvbnMueSkpO1xyXG4gICAgICAgICAgICBjdHgubGluZUNhcCA9ICdzcXVhcmUnO1xyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxO1xyXG5cclxuICAgICAgICAgICAgaWYoby5kaW1lbnNpb25zLnggPiBvLmRpbWVuc2lvbnMueSl7XHJcbiAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKC0oby5kaW1lbnNpb25zLnggLSBvLmRpbWVuc2lvbnMueSArIG8udG9wTGVmdC54KSwgLW8udG9wTGVmdC55KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLW8udG9wTGVmdC54LCAtKG8uZGltZW5zaW9ucy55IC0gby5kaW1lbnNpb25zLnggKyBvLnRvcExlZnQueSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjdHguZm9udCA9IGAke28uZGltZW5zaW9ucy54IC8gMy41fXB4IEludGVyYDtcclxuXHJcbiAgICAgICAgICAgIGlmKHNoYXJlZC5tYXBzQmVhdGVuWycvbWFwcy8nICsgby5tYXBOYW1lXSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlQ29sb3IgPSBibGVuZENvbG9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlJbWFnZUNvbG9yc1tNYXRoLmZsb29yKG8uZGlmZmljdWx0eSldLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlJbWFnZUNvbG9yc1tNYXRoLmNlaWwoby5kaWZmaWN1bHR5KV0sXHJcbiAgICAgICAgICAgICAgICAgICAgdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzaGFyZWQuYmxlbmRDb2xvcihiYXNlQ29sb3IsICcjMDAwMDAwJywgMC4xMik7Ly8nIzVmYmU1MCdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IE1hdGgubWluKDEsKChzaGFyZWQucGxheWVyc1tzaGFyZWQuc2VsZklkXS5wb3MueSArIGNhbnZhcy5oLzIpIC0gKG8udG9wTGVmdC55KSkgLyAoby5kaW1lbnNpb25zLnkpKTtcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KFxyXG4gICAgICAgICAgICAgICAgby5tYXBOYW1lLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgnTycsJ28nKSxcclxuICAgICAgICAgICAgICAgIG8udG9wTGVmdC54ICsgby5kaW1lbnNpb25zLnggLyAyLFxyXG4gICAgICAgICAgICAgICAgby50b3BMZWZ0LnkgLSBvLmRpbWVuc2lvbnMueSAvIDRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuXHJcbiAgICAgICAgICAgIC8vIC8vIGxpbmUgbWFya2luZyAtIHNjcmFwcGVkXHJcbiAgICAgICAgICAgIC8vIGN0eC5maWxsU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgICAgICAgICAvLyBjdHguZmlsbFJlY3QoXHJcbiAgICAgICAgICAgIC8vICAgICB0b3BYLFxyXG4gICAgICAgICAgICAvLyAgICAgdG9wWSArICgxIC0gby5kaWZmaWN1bHR5JTEpICogKG8uZGltZW5zaW9ucy55KjAuOTUpLFxyXG4gICAgICAgICAgICAvLyAgICAgby5kaW1lbnNpb25zLnggLyA1LFxyXG4gICAgICAgICAgICAvLyAgICAgby5kaW1lbnNpb25zLnkgKiAuMDVcclxuICAgICAgICAgICAgLy8gKVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKnRvcm5hZG8qL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNjMGJiYzknO1xyXG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjU7XHJcbiAgICB9LFxyXG4gICAgLypjaGFuZ2VWaWduZXR0ZSovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGN0eC50b0ZpbGwgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICAvKnB1c2hhYmxlKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHNoYXJlZC5jb2xvcnMudGlsZTtcclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBjdHguY2xpcCgpO1xyXG5cclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjU7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgby50b3BMZWZ0ID0gZ2VuZXJhdGVUb3BMZWZ0Q29vcmRpbmF0ZXMobyk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oby50b3BMZWZ0LngsIG8udG9wTGVmdC55KTtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyhvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54LCBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55KTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8oby50b3BMZWZ0LnggKyBvLmRpbWVuc2lvbnMueCwgby50b3BMZWZ0LnkpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKG8udG9wTGVmdC54LCBvLnRvcExlZnQueSArIG8uZGltZW5zaW9ucy55KTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxO1xyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMztcclxuXHJcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB3aGl0ZSBsaW5lcyB3aGVyZSB0aGUgYW5nbGVzIGFyZT8gb25lRGlyZWN0aW9uYWwgcGFyYW1ldGVyP1xyXG4gICAgICAgICAgICAvLyBhbHNvIFRPRE86IFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZU11c2ljKi9cclxuICAgIChvKSA9PiB7XHJcbiAgICAgICAgY3R4LnRvRmlsbCA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlU2hpcCovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBvLmNoYW5nZVNoaXBTdGF0ZVRvID09PSB0cnVlID8gJ3JnYmEoMCwwLDI1NSwwLjMpJyA6ICdyZ2JhKDI1NSwyNTUsMCwwLjMpJztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBvLmNoYW5nZVNoaXBTdGF0ZVRvID09PSB0cnVlID8gJ2JsdWUnIDogJ3llbGxvdyc7XHJcbiAgICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gLXdpbmRvdy5mcmFtZXMqMTAwMC82MCAqIDE1MCAvIDEwMDA7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDQ7XHJcbiAgICAgICAgY3R4LnNldExpbmVEYXNoKFszMCwgMzBdKTtcclxuICAgICAgICBjdHgudG9TdHJva2UgPSB0cnVlO1xyXG5cclxuICAgICAgICBjdHguY2xlYW5VcEZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdHguc2V0TGluZURhc2goW10pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKmNoYW5nZUdyYXBwbGUqL1xyXG4gICAgKG8pID0+IHtcclxuICAgICAgICBsZXQgbWlkZGxlWCA9IG8udG9wTGVmdC54ICsgby5kaW1lbnNpb25zLngvMjtcclxuICAgICAgICBsZXQgbWlkZGxlWSA9IG8udG9wTGVmdC55ICsgby5kaW1lbnNpb25zLnkvMjsgXHJcblxyXG4gICAgICAgIGxldCBncmQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQobWlkZGxlWCwgbWlkZGxlWSwgMCwgbWlkZGxlWCwgbWlkZGxlWSwgTWF0aC5zcXJ0KG8uZGltZW5zaW9ucy54KioyICsgby5kaW1lbnNpb25zLnkqKjIpLzIpO1xyXG5cclxuICAgICAgICBsZXQgdDtcclxuICAgICAgICBpZihvLmNoYW5nZUdyYXBwbGVTdGF0ZVRvID09PSB0cnVlKXtcclxuICAgICAgICAgICAgdCA9ICh3aW5kb3cuZnJhbWVzKjEwMDAvNjAgLyAxNjAwKSAlIDAuMzM7XHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMSwgXCJyZ2JhKDEyNywxMjcsMjU1LDApXCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKCgwLjY3K3QpLCBcInJnYmEoMTI3LDEyNywyNTUsMSlcIik7XHJcblxyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKCgwLjY2K3QpLCBcInJnYmEoMTI3LDEyNywyNTUsMClcIik7XHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoKDAuMzQrdCksIFwicmdiYSgxMjcsMTI3LDI1NSwxKVwiKTtcclxuXHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoKDAuMzMrdCksIFwicmdiYSgxMjcsMTI3LDI1NSwwKVwiKTtcclxuICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcCgoMC4wMTAxK3QpLCBcInJnYmEoMTI3LDEyNywyNTUsMSlcIik7XHJcblxyXG4gICAgICAgICAgICBpZigwLjAxK3QgPiAwKWdyZC5hZGRDb2xvclN0b3AoMC4wMSt0LCBcInJnYmEoMTI3LDEyNywyNTUsMClcIik7XHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMCwgXCJyZ2JhKDEyNywxMjcsMjU1LDEpXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHQgPSAwLjMzIC0gKHdpbmRvdy5mcmFtZXMqMTAwMC82MCAvIDE2MDApICUgMC4zMztcclxuICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcCgxLCBcInJnYmEoMjU1LDI1NSwxMjcsMClcIik7XHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoKDAuNjcrdCksIFwicmdiYSgyNTUsMjU1LDEyNywxKVwiKTtcclxuXHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoKDAuNjYrdCksIFwicmdiYSgyNTUsMjU1LDEyNywwKVwiKTtcclxuICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcCgoMC4zNCt0KSwgXCJyZ2JhKDI1NSwyNTUsMTI3LDEpXCIpO1xyXG5cclxuICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcCgoMC4zMyt0KSwgXCJyZ2JhKDI1NSwyNTUsMTI3LDApXCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKCgwLjAxMDErdCksIFwicmdiYSgyNTUsMjU1LDEyNywxKVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmKDAuMDErdCA+IDApZ3JkLmFkZENvbG9yU3RvcCgwLjAxK3QsIFwicmdiYSgyNTUsMjU1LDEyNywwKVwiKTtcclxuICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcCgwLCBcInJnYmEoMjU1LDI1NSwxMjcsMSlcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JkO1xyXG4gICAgICAgIC8vIGN0eC5nbG9iYWxBbHBoYSA9IE1hdGguYWJzKE1hdGguc2luKHdpbmRvdy5mcmFtZXMqMTAwMC82MCAvIDc2MCkpO1xyXG4gICAgfSxcclxuICAgIC8qY2hhbmdlRGVhdGhUaW1lciovXHJcbiAgICAobykgPT4ge1xyXG4gICAgICAgIGlmKHNoYXJlZC5za3VsbEltZyA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgc2hhcmVkLnNrdWxsSW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgIHNoYXJlZC5za3VsbEltZy5zcmMgPSAnaHR0cHM6Ly9zdmdzaWxoLmNvbS9zdmcvMTI5NDM1Ny5zdmcnO1xyXG4gICAgICAgICAgICBzaGFyZWQuc2t1bGxJbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2hhcmVkLnNrdWxsSW1nTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gby5jaGFuZ2VEZWF0aFRpbWVyU3RhdGVUbyA9PT0gdHJ1ZSA/ICdyZWQnIDogJ3doaXRlJztcclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjQ7XHJcblxyXG4gICAgICAgIGlmKHNoYXJlZC5za3VsbEltZ0xvYWRlZCA9PT0gZmFsc2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgY3R4LmNsZWFuVXBGdW5jdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICAgICAgbGV0IG1pZGRsZVggPSBvLnRvcExlZnQueCArIG8uZGltZW5zaW9ucy54LzI7XHJcbiAgICAgICAgICAgIGxldCBtaWRkbGVZID0gby50b3BMZWZ0LnkgKyBvLmRpbWVuc2lvbnMueS8yOyBcclxuXHJcbiAgICAgICAgICAgIGxldCBtaW5EaW1lbnNpb24gPSBNYXRoLm1pbihvLmRpbWVuc2lvbnMueCwgby5kaW1lbnNpb25zLnkpO1xyXG5cclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShzaGFyZWQuc2t1bGxJbWcsIG1pZGRsZVggLSBtaW5EaW1lbnNpb24vMiwgbWlkZGxlWSAtIG1pbkRpbWVuc2lvbi8yLCBtaW5EaW1lbnNpb24sIG1pbkRpbWVuc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXVxyXG5cclxuY29uc3QgZGlmZmljdWx0eUltYWdlQ29sb3JzID0gc2hhcmVkLmRpZmZpY3VsdHlJbWFnZUNvbG9ycyA9IFtcclxuICAgIC8qMCAtIFBlYWNlZnVsKi9cclxuICAgIFwiIzZjZDk1YlwiLFxyXG4gICAgLyoxIC0gTW9kZXJhdGUqL1xyXG4gICAgXCIjNThjY2IzXCIsXHJcbiAgICAvKjIgLSBEaWZmaWN1bHQqL1xyXG4gICAgXCIjMGE3N2JmXCIsXHJcbiAgICAvKjMgLSBIYXJkY29yZSovXHJcbiAgICBcIiMzNTI4ZTBcIixcclxuICAgIC8qNCAtIEV4aGF1c3RpbmcqL1xyXG4gICAgXCIjYTE0MmM5XCIsXHJcbiAgICAvKjUgLSBSZWxlbnRsZXNzKi9cclxuICAgIFwiI2UzMmQ4YlwiLFxyXG4gICAgLyo2IC0gQWdvbml6aW5nKi9cclxuICAgIFwiI2ZjNTQzNFwiLFxyXG4gICAgLyo3IC0gVGVycm9yaXppbmcqL1xyXG4gICAgXCIjZmMzYTNhXCIsXHJcbiAgICAvKjggLSBDYXRhY2x5c21pYyovXHJcbiAgICBcIiNjOTVkNWRcIlxyXG5dXHJcblxyXG5jb25zdCBkaWZmaWN1bHR5SW1hZ2VNYXAgPSBzaGFyZWQuZGlmZmljdWx0eUltYWdlTWFwID0gW1xyXG4gICAgLyowIC0gUGVhY2VmdWwqL1xyXG4gICAgKHNpemUpID0+IHtcclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgKj0gMC4zO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gc2l6ZSAqIDMgLyA0MDtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5hcmMoc2l6ZS8yLCBzaXplLzIsIHNpemUgLyA0LCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgIH0sXHJcbiAgICAvKjEgLSBNb2RlcmF0ZSovXHJcbiAgICAoc2l6ZSkgPT4ge1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiIzI4OGE3NVwiO1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzaXplICogMyAvIDQwO1xyXG5cclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LmFyYyhzaXplICogNS8xMiwgc2l6ZSAqIDUvMTIsIHNpemUgLyA0LCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5hcmMoc2l6ZSAqIDcvMTIsIHNpemUgKiA3LzEyLCBzaXplIC8gNCwgMCwgTWF0aC5QSSAqIDIpO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9LFxyXG4gICAgLyoyIC0gRGlmZmljdWx0Ki9cclxuICAgIChzaXplKSA9PiB7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhICo9IDAuMztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHNpemUgKiAzIC8gNDA7XHJcbiAgICAgICAgY3R4LnN0cm9rZVJlY3Qoc2l6ZSAvIDQsIHNpemUgLyA0LCBzaXplIC8gMiwgc2l6ZSAvIDIpO1xyXG4gICAgfSxcclxuICAgIC8qMyAtIEhhcmRjb3JlKi9cclxuICAgIChzaXplKSA9PiB7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhICo9IDAuMztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHNpemUgKiAzIC8gNDA7XHJcbiAgICAgICAgY3R4LnN0cm9rZVJlY3Qoc2l6ZSAvIDYsIHNpemUgLyA2LCBzaXplICogNSAvIDEyLCBzaXplICogNSAvIDEyKTtcclxuICAgICAgICBjdHguc3Ryb2tlUmVjdChzaXplICogNSAvIDEyLCBzaXplICogNSAvIDEyLCBzaXplICogNSAvIDEyLCBzaXplICogNSAvIDEyKTtcclxuICAgIH0sXHJcbiAgICAvKjQgLSBFeGhhdXN0aW5nKi9cclxuICAgIChzaXplKSA9PiB7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhICo9IDAuMztcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHNpemUgKiAzIC8gNDA7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA1IC8gMjQsIHNpemUgKiAxMiAvIDI0KTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxMiAvIDI0LCBzaXplICogMTkgLyAyNCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogMTkgLyAyNCwgc2l6ZSAqIDEyIC8gMjQpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDEyIC8gMjQsIHNpemUgKiA1IC8gMjQpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDUgLyAyNCwgc2l6ZSAqIDEyIC8gMjQpO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9LFxyXG4gICAgLyo1IC0gUmVsZW50bGVzcyovXHJcbiAgICAoc2l6ZSkgPT4ge1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiIzk5MWQ1ZFwiO1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzaXplICogMyAvIDQwO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxIC8gNiwgc2l6ZSAqIDMgLyA2KTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAzIC8gNiwgc2l6ZSAqIDUgLyA2KTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA1IC8gNiwgc2l6ZSAqIDMgLyA2KTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAzIC8gNiwgc2l6ZSAqIDEgLyA2KTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxIC8gNiwgc2l6ZSAqIDMgLyA2KTtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBjdHguc3Ryb2tlUmVjdChzaXplICogNSAvIDI0LCBzaXplICogNSAvIDI0LCBzaXplICogMTQgLyAyNCwgc2l6ZSAqIDE0IC8gMjQpO1xyXG4gICAgfSxcclxuICAgIC8qNiAtIEFnb25pemluZyovXHJcbiAgICAoc2l6ZSkgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNkOTRhMmVcIjtcclxuICAgICAgICBjdHguZmlsbFJlY3QoMCwgc2l6ZSAqIDgwIC8gMTIwLCBzaXplICogMTIwIC8gMTIwLCBzaXplICogNDAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5maWxsUmVjdChzaXplICogNDAgLyAxMjAsIHNpemUgKiA2MCAvIDEyMCwgc2l6ZSAqIDQwIC8gMTIwLCBzaXplICogMjAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKDAsIHNpemUgKiA4MCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogMjAgLyAxMjAsIHNpemUgKiA0MCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogNDAgLyAxMjAsIHNpemUgKiA4MCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA0MCAvIDEyMCwgc2l6ZSAqIDYwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA2MCAvIDEyMCwgc2l6ZSAqIDIwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA4MCAvIDEyMCwgc2l6ZSAqIDYwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDgwIC8gMTIwLCBzaXplICogODAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDEwMCAvIDEyMCwgc2l6ZSAqIDQwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxMjAgLyAxMjAsIHNpemUgKiA4MCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9LFxyXG4gICAgLyo3IC0gVGVycm9yaXppbmcqL1xyXG4gICAgKHNpemUpID0+IHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjZDYzMTMxXCI7XHJcblxyXG4gICAgICAgIGN0eC5maWxsUmVjdChzaXplICogNDAgLyAxMjAsIDAsIHNpemUgKiA0MCAvIDEyMCwgc2l6ZSAqIDIwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbFJlY3Qoc2l6ZSAqIDQwIC8gMTIwLCBzaXplICogMTAwIC8gMTIwLCBzaXplICogNDAgLyAxMjAsIHNpemUgKiAyMCAvIDEyMCk7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKDAsIHNpemUgKiAxMjAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDIwIC8gMTIwLCBzaXplICogODAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDQwIC8gMTIwLCBzaXplICogMTIwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDQwIC8gMTIwLCBzaXplICogMTAwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA2MCAvIDEyMCwgc2l6ZSAqIDYwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA4MCAvIDEyMCwgc2l6ZSAqIDEwMCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA4MCAvIDEyMCwgc2l6ZSAqIDEyMCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogMTAwIC8gMTIwLCBzaXplICogODAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDEyMCAvIDEyMCwgc2l6ZSAqIDEyMCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICBcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbygwLCAwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAyMCAvIDEyMCwgc2l6ZSAqIDQwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA0MCAvIDEyMCwgMCk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA0MCAvIDEyMCwgc2l6ZSAqIDIwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA2MCAvIDEyMCwgc2l6ZSAqIDYwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA4MCAvIDEyMCwgc2l6ZSAqIDIwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDgwIC8gMTIwLCAwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxMDAgLyAxMjAsIHNpemUgKiA0MCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogMTIwIC8gMTIwLCAwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgIH0sXHJcbiAgICAvKjggLSBDYXRhY2x5c21pYyovXHJcbiAgICAoc2l6ZSkgPT4ge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiM4YzQxNDFcIjtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oMCwgMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogNDAgLyAxMjAsIDApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oMCwgc2l6ZSAqIDQwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDQwIC8gMTIwLCAwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA2MCAvIDEyMCwgc2l6ZSAqIDIwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA4MCAvIDEyMCwgMCk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxMjAgLyAxMjAsIDApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDgwIC8gMTIwLCAwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxMjAgLyAxMjAsIHNpemUgKiA0MCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiAxMjAgLyAxMjAsIHNpemUgKiA0MCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogMTAwIC8gMTIwLCBzaXplICogNjAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDEyMCAvIDEyMCwgc2l6ZSAqIDgwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDEyMCAvIDEyMCwgc2l6ZSAqIDEyMCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogODAgLyAxMjAsIHNpemUgKiAxMjAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDEyMCAvIDEyMCwgc2l6ZSAqIDgwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDQwIC8gMTIwLCBzaXplICogMTIwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA2MCAvIDEyMCwgc2l6ZSAqIDEwMCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhzaXplICogODAgLyAxMjAsIHNpemUgKiAxMjAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbygwLCBzaXplICogMTIwIC8gMTIwKTtcclxuICAgICAgICBjdHgubGluZVRvKHNpemUgKiA0MCAvIDEyMCwgc2l6ZSAqIDEyMCAvIDEyMCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbygwLCBzaXplICogODAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbygwLCBzaXplICogODAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oc2l6ZSAqIDIwIC8gMTIwLCBzaXplICogNjAgLyAxMjApO1xyXG4gICAgICAgIGN0eC5saW5lVG8oMCwgc2l6ZSAqIDQwIC8gMTIwKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgIH0sXHJcbl07XHJcblxyXG4vLyBhbiBvYnN0YWNsZSBpcyBhbiBFQ1NcclxuY29uc3Qgb2JzdGFjbGVzID0gc2hhcmVkLm9ic3RhY2xlcyA9IFtdO1xyXG5cclxuc2hhcmVkLnNwYXduUG9zaXRpb24gPSB7eDogMTAwLCB5OiAxMDB9O1xyXG4vLyBhIHBsYXllciBpcyBhbHNvIGFuIGVjc1xyXG5zaGFyZWQuY3JlYXRlUGxheWVyID0gKCkgPT4ge1xyXG4gICAgY3JlYXRlKDAvKmNpcmNsZSovLCBbXSwgW10sIC8qbm8gc2ltdWxhdGUvIGVmZmVjdHMqLyB7eDogc2hhcmVkLnNwYXduUG9zaXRpb24ueCwgeTogc2hhcmVkLnNwYXduUG9zaXRpb24ueSwgcjogLyoyNC41Ki80OS41fSlcclxuICAgIGNvbnN0IHBsYXllciA9IG9ic3RhY2xlcy5wb3AoKTtcclxuICAgIHBsYXllci5heGlzU3BlZWRNdWx0WCA9IHBsYXllci5heGlzU3BlZWRNdWx0WSA9IDE7XHJcbiAgICBwbGF5ZXIudG91Y2hpbmdOb3JtYWxJbmRleGVzID0gW107XHJcbiAgICBwbGF5ZXIubGFzdFRvdWNoaW5nTm9ybWFsSW5kZXhlcyA9IFtdO1xyXG4gICAgcGxheWVyLnJlbmRlclJhZGl1cyA9IHBsYXllci5sYXN0QWxpdmVSYWRpdXMgPSBwbGF5ZXIuc2F0LnI7XHJcbiAgICBwbGF5ZXIueHYgPSBwbGF5ZXIueXYgPSBwbGF5ZXIueGEgPSBwbGF5ZXIueWEgPSAwO1xyXG4gICAgcGxheWVyLmludGVycFggPSBwbGF5ZXIuaW50ZXJwWSA9IDA7XHJcbiAgICBwbGF5ZXIuc3BlZWQgPSBwbGF5ZXIuYmFzZVNwZWVkID0gNy4xNjc7XHJcbiAgICBwbGF5ZXIuZGVhZCA9IGZhbHNlO1xyXG4gICAgcGxheWVyLm9uU2FmZSA9IGZhbHNlO1xyXG4gICAgcGxheWVyLnRvdWNoaW5nV2FsbCA9IGZhbHNlO1xyXG4gICAgcGxheWVyLnN0b3BGb3JjZXMgPSBmYWxzZTtcclxuICAgIHBsYXllci5mb3JjZXMgPSBbXTtcclxuICAgIHBsYXllci5pZCA9IHVuZGVmaW5lZDtcclxuICAgIHBsYXllci5kZXYgPSAhc2hhcmVkLmlzUHJvZDsgLypkZXYgb25seSBmb3IgcGxheWVyc1tzZWxmSWRdKi8gcGxheWVyLmdvZCA9IGZhbHNlO1xyXG4gICAgcGxheWVyLmZyaWN0aW9uID0gMC40O1xyXG4gICAgcGxheWVyLnNoaXAgPSBmYWxzZTsgcGxheWVyLnNoaXBBbmdsZSA9IDA7IHBsYXllci5zaGlwVHVyblNwZWVkID0gTWF0aC5QSSAvIDEwMDtcclxuICAgIHBsYXllci5kZWF0aFRpbWUgPSAwOyBwbGF5ZXIuZGVhdGhUaW1lciA9IGZhbHNlO1xyXG4gICAgcGxheWVyLmdyYXBwbGVYID0gLTE7IHBsYXllci5ncmFwcGxlWSA9IC0xOyBwbGF5ZXIuZ3JhcHBsZSA9IGZhbHNlO1xyXG4gICAgcGxheWVyLmdyYXBwbGVSYW5nZSA9IDQ4ODsgcGxheWVyLmdyYXBwbGVGb3JjZSA9IDAuMDE7IHBsYXllci5ncmFwcGxlRnJpYyA9IDAuNDE0O1xyXG4gICAgcGxheWVyLnRpbWVUcmFwT3ZlcnJpZGVTYWZlID0gZmFsc2U7XHJcbiAgICByZXR1cm4gcGxheWVyO1xyXG59XHJcblxyXG5zaGFyZWQucGxheWVycyA9IFtdO1xyXG5cclxuaWYoc2hhcmVkLmlzRXhDbGllbnQgIT09IHRydWUgfHwgc2hhcmVkLmlzRWRpdG9yID09PSB0cnVlKSB7c2hhcmVkLnBsYXllcnMucHVzaChzaGFyZWQuY3JlYXRlUGxheWVyKCkpOyBzaGFyZWQuc2VsZklkID0gMDsgc2hhcmVkLm1hcERpbWVuc2lvbnMgPSB7eDoyMDAwLHk6MjAwMH19XHJcbmlmKHNoYXJlZC5pc0V4Q2xpZW50ID09PSB0cnVlIHx8IGVudmlyb25tZW50ID09PSAnc2VydmVyJykgc2hhcmVkLm1hcERpbWVuc2lvbnMgPSB7eDogMjAwMCwgeTogMjAwMH07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzaW11bGF0ZTsiLCJpbXBvcnQgc2hhcmVkIGZyb20gJy4uL3NoYXJlZC9zaGFyZWQuanMnO1xyXG5zaGFyZWQubW91c2UgPSB7XHJcbiAgICBzY3JlZW46IHtcclxuICAgICAgICB4OiAtMSxcclxuICAgICAgICB5OiAtMVxyXG4gICAgfSxcclxuICAgIHdvcmxkOiB7XHJcbiAgICAgICAgeDogLTEsXHJcbiAgICAgICAgeTogLTFcclxuICAgIH1cclxufVxyXG5cclxuc2hhcmVkLm1vdXNlWCA9IC0xO1xyXG5zaGFyZWQubW91c2VZID0gLTE7XHJcbnNoYXJlZC5zY3JvbGxMb2NrZWQgPSBmYWxzZTtcclxuc2hhcmVkLm1vdXNlRG93bkZ1bmN0aW9ucyA9IFtdO1xyXG5zaGFyZWQubW91c2VNb3ZlRnVuY3Rpb25zID0gW107XHJcbnNoYXJlZC5tb3VzZVVwRnVuY3Rpb25zID0gW107XHJcbnNoYXJlZC5tb3VzZU91dCA9IGZhbHNlO1xyXG5zaGFyZWQucGFnZVggPSAtMTtcclxuc2hhcmVkLnBhZ2VZID0gLTE7XHJcblxyXG5zaGFyZWQuZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcbndpbmRvdy5vbm1vdXNlZG93biA9IChlKSA9PiB7fVxyXG5cclxud2luZG93Lm9ubW91c2Vtb3ZlID0gKGUpID0+IHt9XHJcblxyXG53aW5kb3cub25tb3VzZXVwID0gKCkgPT4ge31cclxuXHJcbndpbmRvdy5vbmNvbnRleHRtZW51ID0gKGUpID0+IHsgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTsgfTtcclxuXHJcbmNvbnN0IENvbnRyb2xzID0ge1xyXG4gICAgS2V5VzogJ3VwJyxcclxuICAgIEtleVM6ICdkb3duJyxcclxuICAgIEtleUE6ICdsZWZ0JyxcclxuICAgIEtleUQ6ICdyaWdodCcsXHJcbiAgICBBcnJvd1VwOiAndXAnLFxyXG4gICAgQXJyb3dEb3duOiAnZG93bicsXHJcbiAgICBBcnJvd0xlZnQ6ICdsZWZ0JyxcclxuICAgIEFycm93UmlnaHQ6ICdyaWdodCcsXHJcbiAgICBTaGlmdExlZnQ6ICdzaGlmdCcsXHJcbiAgICBTaGlmdFJpZ2h0OiAnc2hpZnQnLFxyXG4gICAgS2V5QzogJ2FjdGlvbjEnLFxyXG4gICAgS2V5SjogJ2FjdGlvbjEnLFxyXG4gICAgS2V5WTogJ2FjdGlvbjEnXHJcbn07XHJcblxyXG5zaGFyZWQuaW5wdXQgPSB7XHJcbiAgICB1cDogZmFsc2UsXHJcbiAgICBkb3duOiBmYWxzZSxcclxuICAgIGxlZnQ6IGZhbHNlLFxyXG4gICAgcmlnaHQ6IGZhbHNlLFxyXG4gICAgc2hpZnQ6IGZhbHNlLFxyXG4gICAgYWN0aW9uMTogZmFsc2UsLy8gZ3JhcHBsZVxyXG59O1xyXG5cclxubGV0IGNoYXRPcGVuID0gZmFsc2UsIHplbk1vZGUgPSBmYWxzZTtcclxud2luZG93Lm9ua2V5ZG93biA9IGhhbmRsZUtleTtcclxud2luZG93Lm9ua2V5dXAgPSBoYW5kbGVLZXk7XHJcblxyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vY2xpZW50L3V0aWxzLmpzJztcclxuY29uc3Qge2VuY29kZUF0UG9zaXRpb259ID0gVXRpbHM7XHJcblxyXG5jb25zdCBjaGF0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQnKTtcclxuY29uc3QgY2hhdERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0RGl2Jyk7XHJcbmNvbnN0IHZpc0NoYXREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1kaXYnKTtcclxuY29uc3QgbGJEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGVhZGVyYm9hcmQtZGl2Jyk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVLZXkoZSl7XHJcbiAgICBpZihjaGF0T3BlbiA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgaWYoZS50eXBlID09PSAna2V5ZG93bicgJiYgZS5jb2RlID09PSAnRW50ZXInKXtcclxuICAgICAgICAgICAgbGV0IG1zZyA9IGNoYXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICBpZihtc2cgPT09ICcvcmVzZXQnKXtcclxuICAgICAgICAgICAgICAgIHNoYXJlZC5jaGFuZ2VNYXAoJy9tYXBzL2h1YicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYobXNnID09PSAnL2hlbHAnKXtcclxuICAgICAgICAgICAgICAgIHNoYXJlZC5hZGRDaGF0TWVzc2FnZShgOiBFdmFkZXMgWCBpcyBhIGZ1dHVyaXN0aWMgZG9kZ2luZyBnYW1lIHdoZXJlIGFueXRoaW5nIGlzIHBvc3NpYmxlITxicj48YnI+Q29tbWFuZHM6PGJyPi9yZXNldCAtIHRlbGVwb3J0cyB5b3UgdG8gdGhlIGh1YiB3b3JsZDxicj4uLi5hbmQgdGhhdCdzIGl0IGxvbCwgbW9yZSBjb21tYW5kcyBjb21pbmcgc29vbmAsICdzeXN0ZW0nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHNoYXJlZC5pc1Byb2QgPT09IGZhbHNlICYmIG1zZy5zbGljZSgwLDYpID09PSAnL3RwbWFwJyl7XHJcbiAgICAgICAgICAgICAgICBzaGFyZWQuY2hhbmdlTWFwKGAvbWFwcy9gICsgbXNnLnNsaWNlKDcpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoc2hhcmVkLmlzUHJvZCA9PT0gZmFsc2UgJiYgbXNnLnNsaWNlKDAsNikgPT09ICcvc2NhbGUnKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlRmxvYXQobXNnLnNsaWNlKDcpKTtcclxuICAgICAgICAgICAgICAgIHNoYXJlZC5jaGFuZ2VDYW1lcmFTY2FsZShudW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoc2hhcmVkLmlzUHJvZCA9PT0gZmFsc2UgJiYgbXNnLnNsaWNlKDAsNCkgPT09ICcvbWFwJyl7XHJcbiAgICAgICAgICAgICAgICBzaGFyZWQuaW5pdEltcG9ydE1hcChtc2cuc2xpY2UoNSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVsc2UgaWYoc2hhcmVkLnpvbmVzICE9PSB1bmRlZmluZWQgJiYgbXNnLnNsaWNlKDAsNykudG9Mb3dlckNhc2UoKSA9PT0gJy90cHpvbmUnKXtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KG1zZy5zbGljZSg4KSk7XHJcbiAgICAgICAgICAgIC8vICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hhcmVkLnpvbmVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgLy8gICAgICAgICBpZihzaGFyZWQuem9uZXNbaV0uem9uZSA9PT0gbnVtKXtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgc2hhcmVkLnBsYXllcnNbc2hhcmVkLnNlbGZJZF0ucG9zLnggPSBzaGFyZWQuem9uZXNbaV0ueDtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgc2hhcmVkLnBsYXllcnNbc2hhcmVkLnNlbGZJZF0ucG9zLnkgPSBzaGFyZWQuem9uZXNbaV0ueTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYobXNnLnNsaWNlKDAsNSkgPT09ICcvbXV0ZScgJiYgKHNoYXJlZC51c2VybmFtZSA9PT0gJ3RyaXQnIHx8IHNoYXJlZC51c2VybmFtZSA9PT0gJ1NlcnVtMDAxNycpKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBtc2cuc2xpY2UoNik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheSh1c2VyLmxlbmd0aCArIDEpO1xyXG4gICAgICAgICAgICAgICAgYnVmWzBdID0gNTtcclxuICAgICAgICAgICAgICAgIGVuY29kZUF0UG9zaXRpb24odXNlciwgYnVmLCAxKTtcclxuICAgICAgICAgICAgICAgIHNoYXJlZC5zZW5kKGJ1Zik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihtc2cuc2xpY2UoMCw0KSA9PT0gJy9iYW4nICYmIChzaGFyZWQudXNlcm5hbWUgPT09ICd0cml0JyB8fCBzaGFyZWQudXNlcm5hbWUgPT09ICdTZXJ1bTAwMTcnKSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gbXNnLnNsaWNlKDUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkodXNlci5sZW5ndGggKyAxKTtcclxuICAgICAgICAgICAgICAgIGJ1ZlswXSA9IDY7XHJcbiAgICAgICAgICAgICAgICBlbmNvZGVBdFBvc2l0aW9uKHVzZXIsIGJ1ZiwgMSk7XHJcbiAgICAgICAgICAgICAgICBzaGFyZWQuc2VuZChidWYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbHNlIGlmKG1zZy5sZW5ndGggIT09IDApe1xyXG4gICAgICAgICAgICAgICAgbXNnID0gc2hhcmVkLnVzZXJuYW1lICsgJzogJyArIG1zZztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KG1zZy5sZW5ndGggKyAyKTtcclxuICAgICAgICAgICAgICAgIGJ1ZlswXSA9IDc7Ly8gdHlwZSAwIC0gc2V0IHVzZXJuYW1lIGFuZCBqb2luIGdhbWVcclxuICAgICAgICAgICAgICAgIC8vIFsnbm9ybWFsJywgJ3N5c3RlbScsICdkZXYnLCAnZ3Vlc3QnXVxyXG4gICAgICAgICAgICAgICAgaWYoc2hhcmVkLnBsYXllcnNbc2hhcmVkLnNlbGZJZF0uZGV2ID09PSB0cnVlKSBidWZbMV0gPSAyO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihzaGFyZWQucGxheWVyc1tzaGFyZWQuc2VsZklkXS5ndWVzdCA9PT0gdHJ1ZSkgYnVmWzFdID0gMzsgXHJcbiAgICAgICAgICAgICAgICBlbmNvZGVBdFBvc2l0aW9uKG1zZywgYnVmLCAyKTtcclxuICAgICAgICAgICAgICAgIHNoYXJlZC5zZW5kKGJ1Zik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hhdC52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICBjaGF0LmJsdXIoKTtcclxuICAgICAgICAgICAgY2hhdERpdi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgY2hhdE9wZW4gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ET1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZS5yZXBlYXQpIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGlmKGUudHlwZSA9PT0gJ2tleWRvd24nKXtcclxuICAgICAgICAgICAgaWYoZS5jb2RlID09PSAnS2V5TycgJiYgc2hhcmVkLmlzUHJvZCA9PT0gZmFsc2UgJiYgc2hhcmVkLnBsYXllcnNbc2hhcmVkLnNlbGZJZF0uZGV2ID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgIHNoYXJlZC5wbGF5ZXJzW3NoYXJlZC5zZWxmSWRdLmdvZCA9ICFzaGFyZWQucGxheWVyc1tzaGFyZWQuc2VsZklkXS5nb2Q7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheSgyKTtcclxuICAgICAgICAgICAgICAgIGJ1ZlswXSA9IDg7XHJcbiAgICAgICAgICAgICAgICBidWZbMV0gPSBzaGFyZWQucGxheWVyc1tzaGFyZWQuc2VsZklkXS5nb2Q7XHJcbiAgICAgICAgICAgICAgICBzaGFyZWQuc2VuZChidWYpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGUuY29kZSA9PT0gJ0tleVInICYmIHNoYXJlZC5wbGF5ZXJzW3NoYXJlZC5zZWxmSWRdLmRlYWQgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgc2hhcmVkLnJlc3Bhd25QbGF5ZXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGUuY29kZSA9PT0gJ0VudGVyJyl7XHJcbiAgICAgICAgICAgICAgICBjaGF0T3BlbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjaGF0RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgY2hhdC5mb2N1cygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuY29kZSA9PT0gJ0tleVonICYmIHNoYXJlZC5pc0VkaXRvciAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF6ZW5Nb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhdC5ibHVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2aXNDaGF0RGl2LmNsYXNzTGlzdC5jb250YWlucygnaGlkZUNoYXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNDaGF0RGl2LmNsYXNzTGlzdC5hZGQoJ2hpZGVDaGF0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGJEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlTEInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYkRpdi5jbGFzc0xpc3QuYWRkKCdoaWRlTEInKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXNDaGF0RGl2LmNsYXNzTGlzdC5jb250YWlucygnaGlkZUNoYXQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNDaGF0RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVDaGF0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc0NoYXREaXYuc2Nyb2xsVG9wID0gdmlzQ2hhdERpdi5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYkRpdi5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGVMQicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxiRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVMQicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHplbk1vZGUgPSAhemVuTW9kZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGUuY29kZSA9PT0gJ0tleVQnICYmIHNoYXJlZC5pc0VkaXRvciAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgc2hhcmVkLnRvZ2dsZVRpbWVyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5jb2RlID09PSAnS2V5VScgJiYgc2hhcmVkLmlzUHJvZCA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgc2hhcmVkLnJlbmRlckRlYnVnID0gIXNoYXJlZC5yZW5kZXJEZWJ1ZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKENvbnRyb2xzW2UuY29kZV0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNoYXJlZC5pbnB1dFtDb250cm9sc1tlLmNvZGVdXSA9IGUudHlwZSA9PT0gJ2tleWRvd24nO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgaW1wb3J0TWFwRm47XHJcbnNoYXJlZC5pbml0SW1wb3J0TWFwID0gYXN5bmMgKHN0cikgPT4ge1xyXG4gICAgaWYoaW1wb3J0TWFwRm4gPT09IHVuZGVmaW5lZCkgaW1wb3J0TWFwRm4gPSAoYXdhaXQgaW1wb3J0KCcuL2V4dHJhcy9pbXBvcnRNYXAuanMnKSkuZGVmYXVsdDtcclxuICAgIGltcG9ydE1hcEZuKHN0cik7XHJcbn1cclxuXHJcbnNoYXJlZC50b3VjaE1vZGUgPSBmYWxzZTtcclxuc2hhcmVkLnRvdWNoQW5nbGUgPSAtMTtcclxud2luZG93Lm9udG91Y2hzdGFydCA9ICgpID0+IHtcclxuICAgIHNoYXJlZC50b3VjaE1vZGUgPSB0cnVlO1xyXG59XHJcbndpbmRvdy5vbnRvdWNobW92ZSA9IChlKSA9PiB7XHJcbiAgICBjb25zdCB0ID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcclxuICAgIGlmKHQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG5cclxuICAgIGlmKHQucGFnZVggPCB3aW5kb3cuaW5uZXJXaWR0aCAvIDIpe1xyXG4gICAgICAgIHNoYXJlZC5pbnB1dC5sZWZ0ID0gdHJ1ZTtcclxuICAgICAgICBzaGFyZWQuaW5wdXQucmlnaHQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2hhcmVkLmlucHV0LmxlZnQgPSBmYWxzZTtcclxuICAgICAgICBzaGFyZWQuaW5wdXQucmlnaHQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHQucGFnZVkgPCB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyKXtcclxuICAgICAgICBzaGFyZWQuaW5wdXQudXAgPSB0cnVlO1xyXG4gICAgICAgIHNoYXJlZC5pbnB1dC5kb3duID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNoYXJlZC5pbnB1dC51cCA9IGZhbHNlO1xyXG4gICAgICAgIHNoYXJlZC5pbnB1dC5kb3duID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHNoYXJlZC50b3VjaEFuZ2xlID0gTWF0aC5hdGFuMih0LnBhZ2VZIC0gd2luZG93LmlubmVySGVpZ2h0IC8gMiwgdC5wYWdlWCAtIHdpbmRvdy5pbm5lcldpZHRoLzIpO1xyXG59XHJcbndpbmRvdy5vbnRvdWNoZW5kID0gKCkgPT4ge1xyXG4gICAgc2hhcmVkLnRvdWNoTW9kZSA9IGZhbHNlO1xyXG59IiwiaW1wb3J0IHNoYXJlZCBmcm9tICcuLi9zaGFyZWQvc2hhcmVkLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xyXG5jb25zdCB7IHVudGlsIH0gPSBVdGlscztcclxuXHJcbnNoYXJlZC5oYXNMb2FkZWROZXdNdXNpYyA9IGZhbHNlO1xyXG5sZXQgbGFzdExvYWRlZExpbms7XHJcbmxldCBhdWRpb0lmcmFtZTtcclxubGV0IGxhc3RQbGF5VGltZSA9IDA7XHJcblxyXG4vLyBUT0RPOiBvcHRpbWl6ZT8gXCJzdWJcIiB0aW1lIHRha2VzIGFib3V0IDFtcywgc28gd2UgY291bGQgb3B0aW1pemUgYnkgc3RhdGljYWxseSBjcmVhdGluZyBhbiBlbGVtZW50XHJcbnNoYXJlZC5zdG9wTXVzaWMgPSBhc3luYyAodG9Bd2FpdD1mYWxzZSkgPT4ge1xyXG4gICAgaWYodG9Bd2FpdCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgbGV0IHJldHVybkJpZyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBjYWxsVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgYXdhaXQgdW50aWwoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZihhdWRpb0lmcmFtZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIHdlIG9ubHkgd2FudCB0byBzdG9wIG11c2ljIGlmIHdlIHBsYXllZCBpdCBiZWZvcmUgdGhpcyBmbiBpcyBjYWxsZWRcclxuICAgICAgICAgICAgaWYobGFzdFBsYXlUaW1lID4gY2FsbFRpbWUpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuQmlnID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihyZXR1cm5CaWcgPT09IHRydWUpIHJldHVybjsgXHJcbiAgICB9IGVsc2UgaWYoYXVkaW9JZnJhbWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBhdWRpb0lmcmFtZS5yZW1vdmUoKTtcclxuICAgIGF1ZGlvSWZyYW1lID0gdW5kZWZpbmVkO1xyXG4gICAgbGFzdExvYWRlZExpbmsgPSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbnNoYXJlZC5wbGF5TXVzaWMgPSBhc3luYyAobGluaywgc3RhcnRUaW1lPTApID0+IHtcclxuICAgIHNoYXJlZC5oYXNMb2FkZWROZXdNdXNpYyA9IHRydWU7XHJcblxyXG4gICAgYXdhaXQgdW50aWwoKCkgPT4ge3JldHVybiBuYXZpZ2F0b3IudXNlckFjdGl2YXRpb24uaGFzQmVlbkFjdGl2ZSA9PT0gdHJ1ZX0pO1xyXG4gICAgaWYobGluayA9PT0gbGFzdExvYWRlZExpbmspIHJldHVybjtcclxuXHJcbiAgICBzaGFyZWQuc3RvcE11c2ljKCk7XHJcbiAgICBsYXN0TG9hZGVkTGluayA9IGxpbms7XHJcblxyXG4gICAgXHJcbiAgICBhdWRpb0lmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xyXG4gICAgYXVkaW9JZnJhbWUuZnJhbWVib3JkZXIgPSBcIjBcIjtcclxuICAgIGF1ZGlvSWZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lQm9yZGVyXCIsIFwiMFwiKTtcclxuICAgIGF1ZGlvSWZyYW1lLndpZHRoID0gMDtcclxuICAgIGF1ZGlvSWZyYW1lLmhlaWdodCA9IDA7XHJcbiAgICBcclxuICAgIGNvbnN0IHZpZGVvSWQgPSBsaW5rLnNwbGl0KCc/dj0nKVsxXTtcclxuICAgIGF1ZGlvSWZyYW1lLnNyYyA9IGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8ke3ZpZGVvSWR9P2F1dG9wbGF5PTEmbG9vcD0xJnBsYXlsaXN0PSR7dmlkZW9JZH0mZW5hYmxlanNhcGk9MSR7c3RhcnRUaW1lID09PSAwID8gJycgOiBcIiZzdGFydD1cIiArIHN0YXJ0VGltZX1gO1xyXG4gICAgXHJcbiAgICBhdWRpb0lmcmFtZS5hbGxvdyA9IFwiYXV0b3BsYXlcIjtcclxuICAgIGF1ZGlvSWZyYW1lLnNlY3VyaXR5ID0gXCJyZXN0cmljdGVkXCI7XHJcblxyXG4gICAgYXVkaW9JZnJhbWUuc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XHJcbiAgICBhdWRpb0lmcmFtZS5jbGFzc0xpc3QuYWRkKCd5dCcpO1xyXG4gICAgYXVkaW9JZnJhbWUuaWQgPSB2aWRlb0lkO1xyXG5cclxuICAgIC8vIHRoaXMgaXMgYWJvdXQgMW1zLi4uXHJcbiAgICAvLyBjb25zb2xlLnRpbWUoXCJzdWJcIik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGF1ZGlvSWZyYW1lKTtcclxuICAgIC8vIGNvbnNvbGUudGltZUVuZChcInN1YlwiKTtcclxuXHJcbiAgICBsYXN0UGxheVRpbWUgPSBEYXRlLm5vdygpO1xyXG59XHJcblxyXG5zaGFyZWQucGxheU11c2ljSW5kZWZpbml0ZWx5ID0gYXN5bmMgKGxpbmspID0+IHtcclxuICAgIGxhc3RMb2FkZWRMaW5rID0gdW5kZWZpbmVkO1xyXG4gICAgYXdhaXQgc2hhcmVkLnBsYXlNdXNpYyhsaW5rKTtcclxuICAgIGF1ZGlvSWZyYW1lID0gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5zaGFyZWQucmVsb2FkTXVzaWMgPSAoKSA9PiB7XHJcbiAgICBsZXQgbGlua1RvUGxheSA9IGxhc3RMb2FkZWRMaW5rO1xyXG4gICAgbGFzdExvYWRlZExpbmsgPSB1bmRlZmluZWQ7XHJcbiAgICBzaGFyZWQucGxheU11c2ljKGxpbmtUb1BsYXkpO1xyXG59IiwiaW1wb3J0IHNoYXJlZCBmcm9tICcuLi8uLi9zaGFyZWQvc2hhcmVkLmpzJztcclxuc2hhcmVkLm1hcERpZmZpY3VsdGllcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgd2lucm9vbTogMCxcclxuICAgIGh1YjogMCxcclxuICAgIHBvbTogMCxcclxuICAgIHBvcGI6IDAuMjUsXHJcbiAgICBwb2NhOiAxLjAxLFxyXG4gICAgcG9zcGQ6IDIuOCxcclxuICAgIHBvczogMy4wMSxcclxuICAgIHBvbHM6IDUuMDEsXHJcbiAgICBwb3Z2OiAyLjMsXHJcbiAgICBwb3F0OiA1LjMzLFxyXG4gICAgcG9kYzogNi4wMSxcclxuICAgIHBvc2M6IDAuNTUsXHJcbiAgICBwb3BoOiA0LjMzLFxyXG4gICAgcG93YzogMS44NSxcclxuICAgIHBvc2g6IDEuMzksXHJcbn0pO1xyXG5cclxuc2hhcmVkLm1hcExlYWRlcmJvYXJkTmFtZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIHdpbnJvb206ICdXaW5yb29tJyxcclxuICAgIGh1YjogJ0h1YicsXHJcbiAgICBwb206ICdQbGFuZXQgb2Yg8J+Xuu+4jycsXHJcbiAgICBwb3BiOiAnUGxhbmV0IG9mIFBlYWNlZnVsIEJlZ2lubmluZ3MnLFxyXG4gICAgcG9jYTogJ1BsYW5ldCBvZiBDb252ZXlvciBBYnVzZScsXHJcbiAgICBwb3NwZDogJ1BsYW5ldCBvZiBTcGVlZCAobnlvb20pJyxcclxuICAgIHBvczogJ1BsYW5ldCBvZiBTYWZlem9uZXMnLFxyXG4gICAgcG9sczogJ1BsYW5ldCBvZiBMb3N0IFNhbml0eScsXHJcbiAgICBwb3Z2OiAnUGxhbmV0IG9mIFRoZSBWaWJpbmcgVmF1bHQnLFxyXG4gICAgcG9xdDogJ1BsYW5ldCBvZiBRdWljayBUaGlua2luZycsXHJcbiAgICBwb2RjOiAnUGxhbmV0IG9mIERpZmZpY3VsdHkgQ2hhcnQnLFxyXG4gICAgcG9zYzogJ1BsYW5ldCBvZiBTaW1wbGUgQ2hhbGxlbmdlcycsXHJcbiAgICBwb3BoOiAnUGxhbmV0IG9mIFByZWhpc3RvcnknLFxyXG4gICAgcG9zaDogYFBsYW5ldCBvZiAke01hdGgucmFuZG9tKCkgPCAwLjAxID8gJ1N1c3BpY2lvdXMnIDogJ1NsaWdodCd9IEh1cmRsZXNgLFxyXG4gICAgcG93YzogYFBsYW5ldCBvZiBXYWNreSBDcmF6ZWBcclxufSk7Iiwic2hhcmVkLmlzRXhDbGllbnQgPSB0cnVlO1xyXG5pbXBvcnQgJy4vc3R5bGUuY3NzJztcclxuXHJcbi8vIGluaXQgcmVuZGVyaW5nXHJcbmltcG9ydCAnLi9yZW5kZXIuanMnO1xyXG5cclxuLy8gaGFuZGxlIGNsaWVudC1zZXJ2ZXIgY29tbXVuaWNhdGlvblxyXG5pbXBvcnQgJy4vbmV0d29ya2luZy5qcyc7XHJcblxyXG4vLyBnYW1lIHN0dWZmXHJcbmltcG9ydCBzaW11bGF0ZSBmcm9tICcuLi9jbGllbnQvY29tcG9uZW50cy5qcyc7XHJcblxyXG4vLyBrZXlib2FyZCBpbnB1dFxyXG5pbXBvcnQgJy4vaW5wdXQuanMnO1xyXG5cclxuLy8gYmFja2dyb3VuZCBtdXNpY1xyXG5pbXBvcnQgJy4uL2NsaWVudC9zb3VuZC5qcyc7XHJcblxyXG4vLyBtYXBOYW1lIHRvIGRpZmZpY3VsdHkgZGljdFxyXG5pbXBvcnQgJy4uL2VYc2VydmVyL21hcHMvX21ldGFkYXRhLmpzJztcclxuXHJcbi8vIHNoYXJlZCwgbGlrZSB3aW5kb3cgYnV0IG5vdCBhY2Nlc3NpYmxlIGluIGNvbnNvbGVcclxuaW1wb3J0IHNoYXJlZCBmcm9tICcuLi9zaGFyZWQvc2hhcmVkLmpzJztcclxuXHJcbi8vIGpvaW5pbmcgZ2FtZVxyXG5jb25zdCBndWkgPSBzaGFyZWQuZ3VpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmd1aScpO1xyXG5zaGFyZWQubWFwUGF0aCA9ICcnO1xyXG5zaGFyZWQudXNlcm5hbWUgPSAnJztcclxuc2hhcmVkLmF1dGhJZCA9IC0xO1xyXG5cclxuc2hhcmVkLnN0YXJ0R2FtZSA9ICgpID0+IHtcclxuICAgIGlmKHNoYXJlZC5pc0VkaXRvciA9PT0gZmFsc2UpIGd1aS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgIGxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBzaGFyZWQucmVzcGF3blBsYXllcigpO1xyXG4gICAgcnVuKCk7XHJcbiAgICBjb25zb2xlLmxvZygnZ2FtZSBzdGFydGluZycpO1xyXG59XHJcblxyXG4vLyBnYW1lbG9vcFxyXG5sZXQgbGFzdFRpbWU9MCwgbm93PTA7XHJcbndpbmRvdy5mcmFtZXMgPSAwOyBzaGFyZWQuYWNjdW0gPSAwO1xyXG5zaGFyZWQuRlJBTUVfVElNRSA9IDEwMDAgLyA2MDtcclxuZnVuY3Rpb24gcnVuKCl7XHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocnVuKTtcclxuXHJcbiAgICBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIHNoYXJlZC5hY2N1bSArPSBub3cgLSBsYXN0VGltZTtcclxuICAgIGxhc3RUaW1lID0gbm93O1xyXG5cclxuICAgIC8vIFRPRE86IEdldCB0aGUgbWFwIGZyb20gYW5vdGhlciBwbGF5ZXJcclxuICAgIGlmKHNoYXJlZC5hY2N1bSA+IDIwMDApIHNoYXJlZC5hY2N1bSA9IDA7XHJcblxyXG4gICAgd2hpbGUoc2hhcmVkLmFjY3VtID49IDApe1xyXG4gICAgICAgIHNoYXJlZC5hY2N1bSAtPSBzaGFyZWQuRlJBTUVfVElNRTtcclxuICAgICAgICBzaW11bGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmRVcGRhdGVQYWNrKCk7XHJcbiAgICBzaGFyZWQucmVuZGVyKCk7XHJcbn1cclxuXHJcbmNvbnN0IHUxMiA9IG5ldyBVaW50OEFycmF5KDEyKTtcclxuY29uc3QgZjEyID0gbmV3IEZsb2F0MzJBcnJheSh1MTIuYnVmZmVyKTtcclxuXHJcbmNvbnN0IHU4ID0gbmV3IFVpbnQ4QXJyYXkoOCk7XHJcbmNvbnN0IGY4ID0gbmV3IEZsb2F0MzJBcnJheSh1OC5idWZmZXIpO1xyXG5cclxuc2hhcmVkLnU0ID0gbmV3IFVpbnQ4QXJyYXkoNCk7XHJcblxyXG5sZXQgbGFzdFg9SW5maW5pdHksIGxhc3RZPUluZmluaXR5O1xyXG5sZXQgbGFzdFJhZGl1cz1JbmZpbml0eSwgbGFzdFNoaXBBbmdsZSA9IEluZmluaXR5O1xyXG5sZXQgbGFzdERlYWQgPSBmYWxzZTtcclxuZnVuY3Rpb24gc2VuZFVwZGF0ZVBhY2soKXtcclxuICAgIGNvbnN0IHBsYXllciA9IHNoYXJlZC5wbGF5ZXJzW3NoYXJlZC5zZWxmSWRdO1xyXG4gICAgaWYoTWF0aC5hYnMocGxheWVyLnBvcy54IC0gbGFzdFgpID4gLjEgfHwgTWF0aC5hYnMocGxheWVyLnBvcy55IC0gbGFzdFkpID4gLjEpe1xyXG4gICAgICAgIHUxMlswXSA9IDQ7Ly8gdHlwZSA0IC0gcGxheWVyIHggYW5kIHlcclxuICAgICAgICBmMTJbMV0gPSBwbGF5ZXIucG9zLng7XHJcbiAgICAgICAgZjEyWzJdID0gcGxheWVyLnBvcy55O1xyXG4gICAgICAgIHNoYXJlZC5zZW5kKHUxMik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYocGxheWVyLmdyYXBwbGUgPT09IHRydWUpe1xyXG4gICAgICAgIHUxMlswXSA9IDExO1xyXG4gICAgICAgIGYxMlsxXSA9IHBsYXllci5ncmFwcGxlWDtcclxuICAgICAgICBmMTJbMl0gPSBwbGF5ZXIuZ3JhcHBsZVk7XHJcbiAgICAgICAgc2hhcmVkLnNlbmQodTEyKTtcclxuICAgICAgICB1MTJbMF0gPSA0O1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHBsYXllci5zaGlwID09PSB0cnVlICYmIGxhc3RTaGlwQW5nbGUgIT09IHBsYXllci5zaGlwQW5nbGUpe1xyXG4gICAgICAgIGxhc3RTaGlwQW5nbGUgPSBwbGF5ZXIuc2hpcEFuZ2xlO1xyXG4gICAgICAgIHU4WzBdID0gOTtcclxuICAgICAgICBmOFsxXSA9IHBsYXllci5zaGlwQW5nbGU7XHJcbiAgICAgICAgc2hhcmVkLnNlbmQodTgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHBsYXllci5kZWF0aFRpbWVyID09PSB0cnVlKXtcclxuICAgICAgICB1OFswXSA9IDEzO1xyXG4gICAgICAgIGY4WzFdID0gcGxheWVyLmRlYXRoVGltZTtcclxuICAgICAgICBzaGFyZWQuc2VuZCh1OCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYocGxheWVyLmRlYWQgIT09IGxhc3REZWFkKXtcclxuICAgICAgICBsYXN0RGVhZCA9IHBsYXllci5kZWFkO1xyXG4gICAgICAgIHNoYXJlZC51NFswXSA9IDE1O1xyXG4gICAgICAgIHNoYXJlZC51NFsxXSA9IHBsYXllci5kZWFkID09PSB0cnVlID8gMSA6IDA7XHJcbiAgICAgICAgc2hhcmVkLnNlbmQoc2hhcmVkLnU0KTtcclxuICAgIH1cclxuXHJcbiAgICBpZihwbGF5ZXIuc2F0LnIgIT09IGxhc3RSYWRpdXMpe1xyXG4gICAgICAgIGxhc3RSYWRpdXMgPSBwbGF5ZXIuc2F0LnI7XHJcbiAgICAgICAgdThbMF0gPSAyMjtcclxuICAgICAgICBmOFsxXSA9IHBsYXllci5zYXQucjtcclxuICAgICAgICBzaGFyZWQuc2VuZCh1OCk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///608\n")},763:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst shared = {};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (shared);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzYzLmpzIiwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbW5pc2VydmVyLy4vc2hhcmVkL3NoYXJlZC5qcz84NjRlIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNoYXJlZCA9IHt9O1xyXG5leHBvcnQgZGVmYXVsdCBzaGFyZWQ7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///763\n")}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(g){var I=__webpack_module_cache__[g];if(void 0!==I)return I.exports;var n=__webpack_module_cache__[g]={id:g,exports:{}};return __webpack_modules__[g](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=g=>{var I=g&&g.__esModule?()=>g.default:()=>g;return __webpack_require__.d(I,{a:I}),I},__webpack_require__.d=(g,I)=>{for(var n in I)__webpack_require__.o(I,n)&&!__webpack_require__.o(g,n)&&Object.defineProperty(g,n,{enumerable:!0,get:I[n]})},__webpack_require__.f={},__webpack_require__.e=g=>Promise.all(Object.keys(__webpack_require__.f).reduce(((I,n)=>(__webpack_require__.f[n](g,I),I)),[])),__webpack_require__.u=g=>g+".bundle.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(g){if("object"==typeof window)return window}}(),__webpack_require__.o=(g,I)=>Object.prototype.hasOwnProperty.call(g,I),inProgress={},dataWebpackPrefix="omniserver:",__webpack_require__.l=(g,I,n,c)=>{if(inProgress[g])inProgress[g].push(I);else{var e,l;if(void 0!==n)for(var C=document.getElementsByTagName("script"),t=0;t<C.length;t++){var A=C[t];if(A.getAttribute("src")==g||A.getAttribute("data-webpack")==dataWebpackPrefix+n){e=A;break}}e||(l=!0,(e=document.createElement("script")).charset="utf-8",e.timeout=120,__webpack_require__.nc&&e.setAttribute("nonce",__webpack_require__.nc),e.setAttribute("data-webpack",dataWebpackPrefix+n),e.src=g),inProgress[g]=[I];var r=(I,n)=>{e.onerror=e.onload=null,clearTimeout(a);var c=inProgress[g];if(delete inProgress[g],e.parentNode&&e.parentNode.removeChild(e),c&&c.forEach((g=>g(n))),I)return I(n)},a=setTimeout(r.bind(null,void 0,{type:"timeout",target:e}),12e4);e.onerror=r.bind(null,e.onerror),e.onload=r.bind(null,e.onload),l&&document.head.appendChild(e)}},__webpack_require__.r=g=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},(()=>{var g;__webpack_require__.g.importScripts&&(g=__webpack_require__.g.location+"");var I=__webpack_require__.g.document;if(!g&&I&&(I.currentScript&&"SCRIPT"===I.currentScript.tagName.toUpperCase()&&(g=I.currentScript.src),!g)){var n=I.getElementsByTagName("script");if(n.length)for(var c=n.length-1;c>-1&&(!g||!/^http(s?):/.test(g));)g=n[c--].src}if(!g)throw new Error("Automatic publicPath is not supported in this browser");g=g.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=g})(),(()=>{var g={792:0};__webpack_require__.f.j=(I,n)=>{var c=__webpack_require__.o(g,I)?g[I]:void 0;if(0!==c)if(c)n.push(c[2]);else{var e=new Promise(((n,e)=>c=g[I]=[n,e]));n.push(c[2]=e);var l=__webpack_require__.p+__webpack_require__.u(I),C=new Error;__webpack_require__.l(l,(n=>{if(__webpack_require__.o(g,I)&&(0!==(c=g[I])&&(g[I]=void 0),c)){var e=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;C.message="Loading chunk "+I+" failed.\n("+e+": "+l+")",C.name="ChunkLoadError",C.type=e,C.request=l,c[1](C)}}),"chunk-"+I,I)}};var I=(I,n)=>{var c,e,[l,C,t]=n,A=0;if(l.some((I=>0!==g[I]))){for(c in C)__webpack_require__.o(C,c)&&(__webpack_require__.m[c]=C[c]);t&&t(__webpack_require__)}for(I&&I(n);A<l.length;A++)e=l[A],__webpack_require__.o(g,e)&&g[e]&&g[e][0](),g[e]=0},n=self.webpackChunkomniserver=self.webpackChunkomniserver||[];n.forEach(I.bind(null,0)),n.push=I.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__(608)})();