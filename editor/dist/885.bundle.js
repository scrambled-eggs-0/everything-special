"use strict";(self.webpackChunkOmniblockly=self.webpackChunkOmniblockly||[]).push([[885],{885:(e,t,o)=>{o.r(t),o.d(t,{default:()=>A});let l,n,i=0,a=0,r=!1,c=60,g=850,d=1550,s=!1,w=!1,m=0,h=new Image;h.src="./gfx/yellowgear.png";let x=new Image;x.src="./gfx/locked.png";let p=new Image;p.src="./gfx/unlocked.png";let u=new Image;u.src="./gfx/thumbsup.png";let f=new Image,k=new Image,v=new Image;v.src="./gfx/standalone.png";let b=new Image;b.src="./gfx/creator.png";let S=new Image;function y(e,t="black",o=1){if(!1===e.complete)return void setTimeout((()=>{y(e,t,o)}),200);const l=document.createElement("canvas"),n=l.getContext("2d");l.width=e.width,l.height=e.height,n.globalAlpha=o,n.drawImage(e,0,0),n.globalAlpha=1,n.globalCompositeOperation="source-atop",n.fillStyle=t,n.fillRect(0,0,l.width,l.height);let i=new Image;return i.src=l.toDataURL(),i.generatedCol=t,i.alpha=o,i}S.src="./gfx/close.png",S.onload=()=>{S=y(S,"blue")},x.onload=()=>{x=y(x,"red")},p.onload=()=>{p=y(p,"blue")},u.onload=()=>{f=y(u,"green"),k=y(u,"red")},h.onload=()=>{r=!0};let I=!1,F=!1,C=0,$="";const L=[{x:100,y:100,img:()=>!0===window.scrollLocked?x:p,hoverFn:()=>{window.scrollLocked=!window.scrollLocked},text:"Lock/Unlock Scroll",fontSize:38},{x:550,y:100,imgScale:.92,img:()=>b,hoverFn:()=>{fetch(`${location.origin}/getUser/${window.levelFileName}`,{method:"GET"}).then((async e=>{const t=await e.text();location.replace(`${location.origin}/profile/${t}`)})).catch((e=>{console.error("err: ",e)}))},text:"View Creator"},{x:100,y:550,imgScale:1.2,img:()=>f,hoverFn:()=>{fetch(`${location.origin}/like/${window.levelFileName}`,{method:"POST"}).then((e=>{I=!I,f=y(u,"green",!0===I?.5:2)})).catch((e=>{console.error("err: ",e)}))},textFn:()=>!0===I?"Unlike":"Like"},{x:550,y:550,imgScale:1.2,img:()=>k,hoverFn:()=>{fetch(`${location.origin}/dislike/${window.levelFileName}`,{method:"POST"}).then((e=>{F=!F,k=y(u,"red",!0===F?.5:2)})).catch((e=>{console.error("err: ",e)}))},textFn:()=>!0===F?"Un-dislike":"Dislike",label:"Dislike"},{x:100,y:1e3,img:()=>v,text:"Share This Level",fontSize:38,hoverFn:()=>{navigator.clipboard.writeText(`${location.origin}/standalone/${window.levelFileName.split(".")[0]}`),C=1,$="Link Copied to Clipboard!"}},{x:550,y:1e3,img:()=>S,hoverFn:()=>{!0===w&&(D(),T=!1)},text:"Close"}];function A(e,t,o=!1){var x,p,u,f;if((window.mouseX-g)**2+(window.mouseY-d)**2<c**2/4?(i+=.012,s=!0):s=!1,.1,a=(x=a)+.1*(2*(u=(i-x)%(p=2*Math.PI))%p-u),!0===r&&(t.globalAlpha=.3,t.translate(g,d),0!==a&&t.rotate(a),t.drawImage(h,-c/2,-c/2,c,c),0!==a&&t.rotate(-a),t.translate(-g,-d),t.globalAlpha=1),!0===w&&1!==m?(m+=.03,m>1&&(m=1)):!1===w&&0!==m&&(m-=.03,m<0&&(m=0)),0!==m){t.textAlign="center",t.textBaseline="middle";const o=(1-((f=m)*f*(1-f)+(1-(1-f)*(1-f))*f))*e.width;t.translate(o,0),t.fillStyle=l,t.fillRect(0,0,e.width,e.height),n=void 0;for(let e=0;e<L.length;e++){const l=L[e];void 0!==l.imgScale?(t.translate(l.x+125,l.y+125),t.scale(l.imgScale,l.imgScale),void 0!==l.textFn&&(l.text=l.textFn()),"Dislike"===l.label&&t.rotate(Math.PI),t.drawImage(l.img(),-125,-125,250,250),"Dislike"===l.label&&t.rotate(-Math.PI),t.scale(1/l.imgScale,1/l.imgScale),t.translate(-l.x-125,-l.y-125)):t.drawImage(l.img(),l.x,l.y,250,250),t.font=`${l.fontSize??56}px Inter`,t.fillStyle="white",t.fillText(l.text,l.x+125,l.y+283),window.mouseX>l.x+o&&window.mouseX<l.x+o+250&&window.mouseY>l.y&&window.mouseY<l.y+250&&(n=l.hoverFn)}t.translate(-o,0)}C>0&&(t.font="56px Inter",t.globalAlpha=C,C-=.012,t.fillStyle="white",t.textAlign="center",t.textBaseline="middle",t.fillText($,450,930),t.globalAlpha=1)}let T=!1;function D(){w=!w,void 0===l&&(l=window.ctx.createLinearGradient(0,0,1600,0),l.addColorStop(0,"rgba(0, 0, 0, 0)"),l.addColorStop(1,"rgba(0, 0, 0, 0.6)"))}window.addSideMenuEvtListeners=()=>{window.mouseDownFunctions.push((()=>{!0===s?(T=!0,dragging=!1):(T=!1,void 0!==n&&(n(),dragging=!1))})),window.mouseMoveFunctions.push((()=>{!0===T&&(g=window.mouseX,d=window.mouseY)})),window.mouseUpFunctions.push((()=>{!0===T&&!0===s&&D(),T=!1}))}}}]);